Filtro para eliminar el ruido en la iluminación indirecta (fragment shader). . . 55 3.22. Combinación de la luz indirecta y la luz directa (fragment shader). . . . . . . 56 IX Introducción La computación gráfica es una rama de las ciencias de la computación que se encarga del estudio, diseño y modificación de imágenes en la pantalla de un computador utilizando he- rramientas proporcionadas por diferentes ciencias como la física, la térmica, la geometría, la óptica, etc. Una de sus mayores áreas de desarrollo es la computación gráfica tridimensional, donde se trata de recrear escenas virtuales en 3D y alcanzar un alto realismo. El objetivo es crear escenas que sean visualmente cercanas a si estas escenas existieran en realidad. Estas escenas son utilizadas en la arquitectura, el cine, en los juegos de video, La irradiancia es el total de energía incidente en una superficie, por unidad de área de la superficie. De esta manera, la BRDF se puede expresar como: fr(x,Ψ→ Θ) = dL(x→ Θ) dE(x← Ψ) (1.3) Los algoritmos de iluminación global generalmente usan modelos empíricos para repre- sentar la BRDF. Dependiendo de la naturaleza de la BRDF, el material de un objeto puede parecer una superficie difusa, especular o brillosa. La BRDF puede simplificarse dependiendo de la superficie a modelar. Superficies difusas Son superficies que reflejan la luz de manera uniforme en todas las direcciones posibles, como puede observarse en la figura 1.4(a). Por lo tanto, su valor de BRDF es constante para todos los valores de Θ y Ψ. Para un observador, un punto en una superficie difusa se ve igual desde todas las direcciones posibles. De esta manera, la BRDF de una superficie difusa ideal cumple la siguiente ecuación: fr(x,Ψ→ Θ) = ρd π (1.4) La reflectancia ρd representa la cantidad de energía incidente que es reflejada de la super- ficie. Este valor varía entre 0 y 1. CAPÍTULO 1. ILUMINACIÓN GLOBAL 6 (a) Difusas perfectas  a BRDF de una superficie difusa ideal cumple la siguiente ecuación: fr(x,Ψ→ Θ) = ρd π (1.4) La reflectancia ρd representa la cantidad de energía incidente que es reflejada de la super- ficie. Este valor varía entre 0 y 1. CAPÍTULO 1. ILUMINACIÓN GLOBAL 6 (a) Difusas perfectas (b) Especulares perfectas (c) Brillosas Figura 1.4: Tipos de superficie. Imagen tomada de [2]. Superficies especulares Las superficies especulares perfectas son aquellas que reflejan y refractan la luz en una dirección específica. En la figura 1.4(b) se encuentra un ejemplo de estas superficies. El rayo reflejado se puede conseguir de la siguiente manera: R = 2(N ·Ψ)N −Ψ (1.5) Donde Ψ es la dirección de la luz incidente, N es la normal de la superficie y R es el rayo reflejado. Esta ecuación es derivada de la ley de reflexión, en la cual se establece que la normal de la superficie posee el mismo ángulo con la dirección del rayo incidente y la dirección del rayo reflejado. Estas ecuaciones para el cálculo de los rayos son solo válidas para superficies especulares perfectas, las cuales no son fáciles de encontrar en el mundo real. Superficies brillosas Generalmente las superficies en la naturaleza no son puramente especulares ni puramente difusas, sino que exhiben una combinación de los dos comportamientos, como se muestra en la figura 1.4(c). Estas superficies son llamadas superficies brillosas y son difíciles de modelar computacionalmente. CAPÍTULO 1. ILUMINACIÓN GLOBAL 7 1.4. Algoritmos de iluminación global Haciendo uso de la ecuación de despliegue presentada anteriormente, diferentes algorit- mos se han propuesto para tratar de resolver el problema de la iluminación global. En esta sección se presentarán los primeros trabajos que buscan una solución a este problema. Trazado de rayos El trazado de rayos (ray tracing) fue uno de los primeros esfuerzos para lograr la ilumina- ción global, introducida por Whitted [8]. En su trabajo se describe una extensión al algoritmo de lanzado de rayos (ray casting) para poder determinar la visibilidad de las superficies e incluir el efecto de refracción y reflección de superficies especulares perfectas. La técnica original presenta una alta recursividad, por lo que termina siendo ineficiente. Sin embargo, se producen imágenes realistas, por lo que se han realizado grandes esfuerzos para acelerarlo. Entre las diversas variantes propuestas encontramos: el trazado de rayos dis- tribuido propuesto por Cook et al. [9], el trabajo de Kajiya [7] sobre el trazado de caminos, el trazado de rayos inverso de Arvo [10], el trazado de rayos bidireccional [11] y el transporte de luz de metrópolis [12] propuestos por Veach y Guibas, entre otros. Radiosidad La técnica de radiosidad (radiosity) fue propuesta por Goral et al. [13] para resolver la interacción de la luz para superficies difusas. Por lo tanto, solo resuelve parcialmente el pro- blema de la iluminación global. Sin embargo, se producen imágenes realistas, por lo que se han realizado grandes esfuerzos para acelerarlo. Entre las diversas variantes propuestas encontramos: el trazado de rayos dis- tribuido propuesto por Cook et al. [9], el trabajo de Kajiya [7] sobre el trazado de caminos, el trazado de rayos inverso de Arvo [10], el trazado de rayos bidireccional [11] y el transporte de luz de metrópolis [12] propuestos por Veach y Guibas, entre otros. Radiosidad La técnica de radiosidad (radiosity) fue propuesta por Goral et al. [13] para resolver la interacción de la luz para superficies difusas. Por lo tanto, solo resuelve parcialmente el pro- blema de la iluminación global. Su idea principal es calcular el promedio de radiosidad Bi en cada elemento de superficie o parche i para una escena tridimensional. Esta técnica presenta la ventaja de que una vez realizado el cálculo de la iluminación, es posible el despliegue de manera interactiva, ya que no depende del punto de visión. Sin embargo, se limita a escenas y luces estáticas. Además, solo representa la interacción con superficies difusas y no da el aporte especular, restando así realismo a la escena. Caché de irradiancia Debido a que el ray tracing original es lento, Ward et al. [14] presentan una mejora para el cálculo de la iluminación difusa indirecta de las escenas, conocida como caché de irradiancia (irradiance caching). La idea principal consiste en mantener almacenada la irradiación de diferentes puntos de la escena calculados anteriormente, basándose en que la radiación en superficies difusas varía de manera suave. Mapeado de fotones El mapeado de fotones (photon mapping) fue propuesto por Jensen [15–17]. Consiste en trazar rayos desde la luz y desde el punto de vista.