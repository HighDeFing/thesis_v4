UNIVERSIDAD CENTRAL DE VENEZUELA FACULTAD DE CIENCIAS ESCUELA DE COMPUTACIÓN APLICACIONES CON TECNOLOGÍA INTERNET Análisis, diseño e implementación de un módulo de Georreferenciación para el Sistema “SOS Historias Médicas Electrónicas” Trabajo Especial de Grado Presentado ante la ilustre Universidad Central de Venezuela Por los bachilleres: Cabrera Méndez Alejandro Enrique Mantilla Rincón José Rodolfo Para optar al título de Licenciado en Computación Tutor Rivas Robinson Caracas, Mayo de 2014 Acta del Veredicto 2 UNIVERSIDAD CENTRAL DE VENEZUELA FACULTAD DE CIENCIAS ESCUELA DE COMPUTACIÓN ACTA DEL VEREDICTO Quienes suscriben, miembros del jurado designado por el Consejo de la Escuela de Computación, para dictaminar sobre el Trabajo Especial de Grado titulado: Análisis, diseño e implementación de un módulo de Georreferenciación para el Sistema “SOS Historias Médicas Electrónicas" y presentado por los bachilleres: Alejandro Enrique Cabrera Méndez, cédula de identidad V –17.977.303 y José Rodolfo Mantilla Rincón, cédula de identidad V –17.470.675, para optar al título de Licenciado en Computación, dejan constancia de lo siguiente: Leído como fue, dicho trabajo por cada uno de los miembros del jurado, se fijó el día 23 de Mayo de 2014, para que sus autores lo defendieran en forma pública, lo que se realizó, mediante una presentación oral del contenido del Trabajo Especial de Grado, luego de lo cual respondió a las preguntas formuladas. Finalizada la defensa pública del Trabajo Especial de Grado, el jurado decidió APROBARLO. En fe de lo cual se levanta la presente Acta, en la Ciudad Universitaria de Caracas a los veintitrés días, del mes de mayo del año dos mil catorce, dejándose también constancia de que actúo como Coordinador del Jurado el Profesor Robinson Rivas. Jurado Principal Robinson Rivas (Tutor) Nancy Urbina Ana Morales (Jurado) (Jurado) Resumen 3 1 RESUMEN Análisis, diseño, implementación de un módulo de Georreferenciación para el Sistema “SOS Historias Médicas Electrónicas”. Este trabajo presenta la elaboración de un módulo de georreferenciación cartográfica para los pacientes registrados en el sistema de Historias Médicas Electrónicas (SOS-HME), dentro de un proceso de automatización de la sala situacional en salud para los ambulatorios del programa SOS Telemedicina para Venezuela. El sistema está basado en la API de OpenStreetMap, en la extensión de base de datos espacial de MySQL y IDEditor, herramientas que fueron seleccionadas luego de realizar una evaluación sobre otras de georreferenciación. Se creó un modelo que permite manipular datos geográficos de los pacientes de la red de ambulatorios de SOS Telemedicina, así como un modelo para el levantamiento de información geográfica de las localidades donde los pacientes habitan. Se diseñó e implementó instrumentos prácticos y sencillos que permiten construir, analizar e interpretar una situación de salud local mediante un tablero con un mapa de la localidad del ambulatorio a ser estudiada. Palabras clave: Historia Medica Electrónica, Georreferenciación, Representación demográfica, Sala Situacional, OpenStreetMap, IDEditor. ABSTRACT Analysis, design, implementation of a module for Georeferencing "SOS electronic Medical Stories" system. This paper presents the development of a geo mapping system of patients with electronic health records (EHR) for the SOS Telemedicina ambulatory centers. The system is based on the OpenStreetMap API, the extension of spatial database MySQL and IDEditor, tools that were selected after an evaluation on other Georeferencing. A model for manipulating geographic data of patients in the outpatient SOS Network Telemedicine, as a model for the lifting of geographic information of the locations where patients live was created. It was designed and implemented simple practical tools that allow you to build, analyze and interpret a situation by a local health board with a map of the location to be studied. Keywords: Electronic Medical Records, Population Representation Situation Room, OpenStreetMap, IDEditor. Índice 4 Índice 1 RESUMEN ____________________________________________ 3 2 INTRODUCCIÓN _______________________________________ 9 3 PLANTEAMIENTO DEL PROBLEMA ________________________ 11 3.1 Solución Propuesta ________________________________ 12 3.2 Objetivos ________________________________________ 14 3.2.1 Objetivo General ________________________________________________________ 14 3.2.2 Objetivos Específicos ___________________________________________________ 14 3.3 Justificación ______________________________________ 14 3.4 Alcance __________________________________________ 15 4 MARCO CONCEPTUAL __________________________________ 16 4.1 Historia Medica Electrónica __________________________ 16 4.1.1 SOS Historias Médicas Electrónicas (SOS-HME) _________________________ 17 4.2 Georreferenciación _________________________________ 19 4.2.1 Latitud y Longitud ______________________________________________________ 19 4.3 Sala Situacional ___________________________________ 20 4.3.1 Elementos básicos de la sala situacional ________________________________ 22 4.3.2 Características de la sala situacional ____________________________________ 23 4.4 Sistema de Gestión de Base de Datos Extensible __________ 24 4.4.1 ISO 19101:2002 Información Geográfica - Modelo de Referencia _______ 25 4.4.2 ISO 19107:2003 Información Geográfica - Esquema Espacial __________ 29 4.4.3 ISO 19125-1:2004 Información Geográfica – Accesos a Objetos Simples – Parte 1: Arquitectura Común.____________________________________________________ 32 4.4.4 ISO 19125-2:2006: Información geográfica. Acceso a estructuras simples. Parte 2: Opción SQL _____________________________________________________________ 34 4.5 Sistemas de Información Geográfica ___________________ 36 4.6 Computación en la nube _____________________________ 39 4.6.1 Características del cloud computing_____________________________________ 40 4.6.2 Clasificación de los servicios de computación en la nube ________________ 40 4.7 Mapas Virtuales ___________________________________ 41 4.7.1 Cuantificar Observaciones ______________________________________________ 42 4.7.2 Localización de las posiciones de las observaciones _____________________ 42 4.7.3 Visualización de estos lugares en un mapa _____________________________ 42 4.7.4 OpenStreetMap _________________________________________________________ 42 4.7.5 Google Maps ____________________________________________________________ 44 4.7.6 Comparación de Herramientas __________________________________________ 45 Índice 5 5 DESCRIPCION Y ANALISIS DEL DISEÑO ___________________ 47 5.1 Metodología utilizada _______________________________ 47 5.2 Análisis __________________________________________ 47 5.2.1 Modelo de proceso de negocio __________________________________________ 47 5.2.1.1 Proceso de Administración Sistema Geográfico _____________________ 52 5.2.1.2 Proceso de sala situacional _________________________________________ 54 5.2.1.3 Proceso de ubicación geográfica ____________________________________ 54 5.2.2 Modelo de Requerimientos ______________________________________________ 55 5.2.2.1 Requerimientos Funcionales ________________________________________ 56 5.2.2.2 Requerimientos No Funcionales ____________________________________ 57 5.3 Diseño ___________________________________________ 59 5.3.1 Caso de Uso ____________________________________________________________ 59 5.3.2 Diagrama de Actividades ____________________________________________________ 61 5.3.2.1 Registrar Usuario ________________________________________________________ 62 5.3.2.2 Administrar Data Geográfica _______________________________________________ 64 5.3.2.3 Visualizar información del paciente Geográficamente ___________________________ 65 5.4 Arquitectura de la Aplicación _________________________ 66 6 DESARROLLO DE LA SOLUCIÓN __________________________ 68 6.1 Georreferenciación de Zonas de Venezuela _______________ 68 6.1.1 Descripción del Proceso _____________________________________________________ 69 6.2 Resumen de Información Georreferenciada ______________ 81 6.3 Integración del módulo de visualización Geográfica de pacientes en Aplicación de “SOS Historias Médicas Electrónicas” _ 82 6.3.1 Módulo de ingreso de datos geográficos para pacientes _________________ 84 6.3.2 Módulo de módulo de visualización Geográfica __________________________ 86 6.3.3 Módulo de Administración ______________________________________________ 88 6.4 Editor de Mapa Sobre la Plataforma OpenStreetMap _______ 90 6.5 Pruebas funcionales sobre la aplicación _________________ 95 6.5.1 Pruebas funcionales sobre el módulo de registro del usuario ____________ 98 6.5.2 Pruebas funcionales sobre el módulo de sala situacional ________________ 99 7 RESULTADOS OBTENIDOS _____________________________ 101 8 CONCLUSIONES Y RECOMENDACIONES ___________________ 102 8.1 Recomendaciones _________________________________ 103 9 REFERENCIAS BIBLIOGRAFICAS ________________________ 104 10 GLOSARIO DE SIGLAS ________________________________ 106 11 APÉNDICE __________________________________________ 109 Índice de Figuras 6 Índice de Figuras Figura 1: Estructura de aplicación basada en framework. ______________________ 18 Figura 2: Actividades de una Sala Situacional ___________________________________ 21 Figura 3: Modelo de Referencia del Dominio ____________________________________ 26 Figura 4: Modelo de Referencia de Arquitectura ________________________________ 28 Figura 5: Clases de Geometría ____________________________________________________ 30 Figura 6: Clase de Objeto Topología ______________________________________________ 31 Figura 7: Diagrama de Clases de Estructuras Geográficas _____________________ 33 Figura 8: Esquema para sustenta de tabla de propiedades ____________________ 36 Figura 9: Ventajas del Cloud Computing _________________________________________ 40 Figura 10: Contexto del negocio __________________________________________________ 48 Figura 11: Estrategia ______________________________________________________________ 48 Figura 12: Involucrados ___________________________________________________________ 48 Figura 13: Flujos de Negocio ______________________________________________________ 50 Figura 14: Modelo de Negocio de Alto Nivel _____________________________________ 51 Figura 15: Modelo de Negocio Detallado _________________________________________ 52 Figura 16: Proceso de Administración de Sistema Geográfico _________________ 53 Figura 17: Proceso de Sala Situacional __________________________________________ 54 Figura 18: Proceso de ubicación geográfica _____________________________________ 54 Figura 19: Modelo de Requerimientos____________________________________________ 55 Figura 20: Requerimientos por Funcionalidad ___________________________________ 56 Figura 21: Requerimientos No Funcionales ______________________________________ 58 Figura 22: Descripción Caso de Uso ______________________________________________ 60 Figura 23: Caso de Uso ____________________________________________________________ 61 Figura 24: Actualizar Mapa ________________________________________________________ 63 Figura 25: Administrar Data Geográfica _________________________________________ 64 Figura 26: Administrar Data Geográfica _________________________________________ 65 Figura 27: Arquitectura de la Aplicación _________________________________________ 66 Figura 28: Menú de la herramienta QGIS (A la izquierda zonas cartografiadas, A la derecha menú para desplegar la información). ____________________________ 69 Figura 29: Muestra las calles de una determinada zona en este caso se muestra la capa de las calles de Zuata. __________________________________________ 70 Figura 30: Menú de herramientas de la opción “Editar” ________________________ 71 Figura 31: Menú de herramientas de la opción “Preferencias” ________________ 72 Figura 32: Complemento a instalar “openData” _________________________________ 72 Figura 33: Complemento a instalar “utilsplugin2”. _____________________________ 72 Figura 34: Primer menú de la herramienta JOSM con menú “Archivo” ________ 73 Figura 35: En la izquierda del menú se observa la cartografía de una zona previamente levantada (Zuata) y en la parte derecha propiedades y configuraciones de la capa. _______________________________________________________ 74 Figura 36: Menú para realizar descarga de los datos de OpenStreetMap _____ 75 Figura 37: Menú de JOSM con las 2 capas descargadas.________________________ 76 Figura 38: Herramienta JOSM con capa procesada. _____________________________ 76 Figura 39: Mensaje al momento de subir datos al servidor. ____________________ 77 Índice de Figuras 7 Figura 40: Mensaje con errores en las capas. ___________________________________ 77 Figura 41: Panel de control de JOSM con los errores de las capas. ____________ 78 Figura 42: Panel de control de validación de Errores. ___________________________ 78 Figura 43: Panel de control para subir cambios _________________________________ 79 Figura 44: Panel de control para subir cambios. ________________________________ 80 Figura 45: Antes de subir los datos en el servidor. ______________________________ 80 Figura 46: Cambios subidos y mostrados en la página. _________________________ 81 Figura 47: Tablas Demográficas. __________________________________________________ 82 Figura 48: Librerías y extracto de archivo de configuración ____________________ 83 Figura 49: Datos de ubicación para un paciente _________________________________ 84 Figura 50: Ubicación de calle en el mapa ________________________________________ 85 Figura 51: Ingreso de Nueva Calle _______________________________________________ 85 Figura 52: Extracto de Código del lado del Cliente ______________________________ 86 Figura 53: Extracto de Código del lado del servidor. ____________________________ 86 Figura 54: Módulo de sala situacional. ___________________________________________ 87 Figura 55: Pacientes mostrados en el mapa _____________________________________ 87 Figura 56: Información de Pacientes _____________________________________________ 88 Figura 57: Módulo de Edición de Localidades ____________________________________ 89 Figura 58: Menú de Edición de Localidades ______________________________________ 89 Figura 59: Editor IdEditor. ________________________________________________________ 90 Figura 60: Solución Alto Nivel. ____________________________________________________ 91 Figura 61: Pantalla Inicial para Editar Mapa _____________________________________ 92 Figura 62: Selección de localidades para editar el mapa _______________________ 92 Figura 63: Menú de Edición _______________________________________________________ 93 Figura 64: Cargando archivo de GPS al editor ___________________________________ 94 Figura 65: Menú para edición de Calles __________________________________________ 94 Figura 66: Mensaje de actualización exitosa de la Aplicación __________________ 95 Figura 67: Cartelera del Ambulatorio rural tipo III Pampatar ________________ 109 Figura 68: Cartelera Hospital de Salamanca ____________________________________ 109 Figura 69: Cartelera Centro Ambulatorio Integral José Francisco Marva ____ 110 Figura 70: Cartelera Ambulatorio Municipio García Nueva Esparta ___________ 110 Índice de Tablas 8 Índice de Tablas Tabla 1: Tabla Comparativa entre Google Maps y OpenStreetMap _____________ 45 Tabla 2: Tabla de actores __________________________________________________________ 49 Tabla 3: Modelo de Negocio de Alto Nivel ________________________________________ 52 Tabla 4: Requerimientos Funcionales ____________________________________________ 57 Tabla 5: Requerimientos no funcionales _________________________________________ 59 Tabla 6: Arquitectura Referencial ________________________________________________ 67 Tabla 7: Prueba funcional Nº1 ____________________________________________________ 95 Tabla 8: Prueba funcional Nº2 ____________________________________________________ 96 Tabla 9: Prueba funcional Nº3 ____________________________________________________ 96 Tabla 10: Prueba funcional Nº4 ___________________________________________________ 97 Tabla 11: Prueba funcional Nº5 ___________________________________________________ 97 Tabla 12: Prueba funcional Nº6 ___________________________________________________ 98 Tabla 13: Prueba funcional Nº7 ___________________________________________________ 98 Tabla 14: Prueba funcional Nº8 ___________________________________________________ 99 Tabla 15: Prueba funcional Nº9 ___________________________________________________ 99 Tabla 16: Prueba funcional Nº10 ________________________________________________ 100 Tabla 17: Prueba funcional Nº11 ________________________________________________ 100 Tabla 18: Glosario de Siglas______________________________________________________ 108 Introducción 9 2 INTRODUCCIÓN La sala situacional es un espacio físico y virtual donde la información en salud es analizada sistemáticamente por un equipo de trabajo para caracterizar la situación de salud de una población. Esto se logra a través de actividades como captura, almacenamiento, manipulación, análisis y visualización de la información médica geográficamente referenciada con el fin de resolver problemas de planificación y gestión en materia de salud. La georreferenciación apoya el posicionamiento con el que se define la localización de un objeto espacial, estos pueden ser representados mediante puntos, vectores, áreas, volumen, en un sistema de coordenadas y datos determinados. Este proceso es utilizado frecuentemente en los sistemas de información geográfica. La proliferación de herramientas automatizadas que permiten ubicar estos objetos en mapas virtuales ha producido grandes avances en el área, de posicionamiento de objetos a través de coordenadas, dado que simplifican el procesamiento de datos y el acceso se realiza de manera rápida y eficaz SOS Telemedicina para Venezuela es un programa que contempla el diseño, desarrollo e implementación de las soluciones tecnológicas que permitan acercar oportunamente servicios especializados de salud de calidad y sin salir de su región a la población, en particular en zonas remotas del país, tiene como objetivo, entre otros, establecer una red de telemedicina a nivel nacional. Una de éstas soluciones hace referencia al sistema de Historias Médicas Electrónicas, la cual posee como objetivo principal, gestionar las referencias de la historia médica integral de un paciente y apoyar el diagnostico mediante la solicitud de una referencia médica a especialistas que se encuentran en un lugar distante al centro asistencial. Los datos clínicos recolectados por la aplicación “SOS Historias Médicas Electrónicas” si bien es cierto que automatizan los procesos de gestión de historia médica carecen de una representación geográfica demográfica que apoye los procesos que se ejecutan en la sala situacional de cada centro asistencial, motivo por el cual en este trabajo de gradó se planteó, como parte inicial del proceso de automatización de la sala situacional, el diseño e implementación de un módulo de georreferenciación que Introducción 10 se integre al sistema de Historias Médicas Electrónicas (SOS-HME) y que permita: Georreferenciar a los pacientes de los ambulatorios, cartografiar las zonas donde se encuentra la localidad de los ambulatorios y desplegar información clínica de las historias de los pacientes en un mapa virtual. Para apalancar el programa SOS Telemedicina para Venezuela se planteó el diseño e implementación de un módulo de georreferenciación como parte del proceso de automatización de la sala situacional en salud que se integre al sistema de Historias Médicas Electrónicas (SOS-HME), y que permita: Georreferenciar a los pacientes de los ambulatorios, cartografiar las zonas donde se encuentra la localidad de los ambulatorios y desplegar la información más relevante de las historias de los pacientes en un mapa virtual. El presente documento está organizado como se indica a continuación:  Planteamiento del Problema: Descripción de la situación que conlleva al desarrollo de este proyecto, en él se describe la solución propuesta, los objetivos, la justificación del proyecto y el alcance.  Marco Conceptual: Se definen los conceptos vinculados con el tema y se realiza la comparación de herramientas para el despliegue de mapas virtuales en el sistema.  Descripción y Análisis del Diseño: Se realiza un análisis detallado de los requerimientos del módulo a desarrollar, incluyendo una descripción general del sistema y sus casos de uso.  Desarrollo de la solución: Se describe las tareas realizadas que generan una solución final que cumple con los requerimientos solicitados.  Pruebas Realizadas: Descripción de pruebas funcionales realizadas a la aplicación.  Conclusiones y Recomendaciones: Realizada la investigación se procede a dar un punto de vista final en lo que fue la realización del trabajo de investigación. Planteamiento del Problema 11 3 PLANTEAMIENTO DEL PROBLEMA El nivel de la salud de una población está determinado por las condiciones de vida de las personas, familias y comunidades; y estas condiciones están vinculadas, a su vez, con el grado de desarrollo y de participación de los actores de la sociedad civil, en el ámbito local. Es por ello que el análisis situacional a nivel de salud, para que sea integral, requiere tomar en cuenta a todos los subsistemas sociales posibles: antecedentes históricos de la población y los macro determinantes políticos, sociales, económicos, culturales, étnicos; pues solo así influirá en las causas estructurales de la situación de salud y producirá conocimientos necesarios y suficientes para lograr propuestas que vinculen a los actores de la sociedad civil en la transformación de dicha situación. Como consecuencia de lo anterior, un reto que siempre enfrentará la organización de los servicios de salud, a corto plazo, es solucionar las limitaciones organizativas, las debilidades en la conducción y seguimiento de procesos y, la pobre capacidad de reaccionar estratégicamente, con calidad y celeridad, ante las principales amenazas a la salud pública. El instrumento, por excelencia, para lograr este cambio es la sala situacional en materia de salud, que puede definirse como un espacio físico y virtual donde la información en materia de salud es analizada sistemáticamente por un equipo de trabajo para caracterizar la situación de salud de una población. La información es presentada y difundida en diversos formatos como tablas, gráficos, mapas, documentos técnicos o informes estratégicos, para tomar decisiones basadas en evidencias; de este modo la sala situacional se convierte en un instrumento para la gestión institucional, la negociación política, la identificación de necesidades, la movilización de recursos y para el monitoreo y evaluación de las intervenciones en salud. En Venezuela, existen gran cantidad de ambulatorios de tipo rural que manejan el concepto de sala situacional en salud de manera manual, (aunque lograsen acceder a todos los datos de la población, su procesamiento consumiría mucho tiempo o Planteamiento del Problema 12 requeriría gran cantidad de recurso humano para su análisis), situación que los limita a un conjunto mínimo de datos para su manipulación con lo cual carecen de información específica y oportuna. La incorporación de tecnologías de información a estos ambulatorios, a través del programa SOS Telemedicina para Venezuela que lleva a cabo el Centro de Análisis de Imágenes Biomédicas Computarizadas (CAIBCO) de la Facultad de Medicina de la Universidad Central de Venezuela, se presenta como una oportunidad para seguir impulsando el desarrollo de los ambulatorios, mediante la incorporación de una aplicación modular que se integre al sistema de Historias Médicas Electrónicas del programa SOS Telemedicina para Venezuela y que permita construir paulatinamente una red de salas situacionales en salud para Venezuela. Para iniciar este proceso de automatización de la sala situacional en salud se requiere diseñar, desarrollar e implementar un módulo de georreferenciación para los ambulatorios adscritos al Programa SOS Telemedicina, que permita georreferenciar a los pacientes de los ambulatorios, cartografiar las zonas donde se encuentra la localidad de los ambulatorios y desplegar información clínica de las historias de los pacientes en un mapa virtual. 3.1 Solución Propuesta Diseñar y desarrollar una módulo de georreferenciación de la información clínica del paciente registrado en la aplicación SOS Historias Médicas Electrónicas, enmarcado en el proceso de automatización de salas situacionales en materia de salud, para ser implementados en los ambulatorios donde se cuente con el sistema de historias médicas electrónicas, así como automatizar los diferentes procesos relacionados con el levantamiento cartográfico de los mapas usados en las salas situacionales. Para ello se proponen las siguientes actividades dentro del trabajo especial de grado: a) Cartografiar las localidades de los ambulatorios adscritos al programa SOS Telemedicina para Venezuela. b) Realizar un análisis de las herramientas de geolocalización y escoger la que más se adapte al entorno del sistema de historias médicas electrónicas de SOS Telemedicina para Venezuela. Planteamiento del Problema 13 c) Diseñar y desarrollar un módulo de administración de los datos geográficos capturados así como los mapas virtuales que se modelen para el sistema de historias médicas electrónicas. d) Diseñar y desarrollar una extensión que permita al sistema Historias Médicas Electrónicas el almacenamiento de los datos geográficos de los pacientes. e) Diseñar y desarrollar un mapa virtual que exponga la información clínica de los pacientes del sistema historias médicas electrónicas mediante filtros previamente consultado por especialistas del ramo de la salud. Planteamiento del Problema 14 3.2 Objetivos 3.2.1 Objetivo General Diseñar, desarrollar e implementar un módulo de georreferenciación para la sala situacional en materia de salud que se integre al sistema de Historia Medica Electrónica del programa SOS Telemedicina para Venezuela. 3.2.2 Objetivos Específicos  Analizar el sistema de Historia Médica Electrónica del programa SOS Telemedicina.  Seleccionar una herramienta de información geográfica que permita la gestión de los datos georreferenciables.  Desarrollar un modelo que permita la captura y presentación de los componentes georreferenciables de la Historia Médica electrónica  Presentar la información georreferenciable de los pacientes a través de filtros en un mapa virtual, que permita construir, analizar e interpretar una situación de salud local.  Realizar pruebas funcionales a la aplicación 3.3 Justificación El módulo de georreferenciación para la sala situacional en salud que se integre con el sistema Historia Medica Electrónica del programa SOS Telemedicina para Venezuela descrito en esta solución se justifica por las siguientes razones:  Las salas situacionales son un espacio físico y virtual donde la información en salud es analizada sistemáticamente por un equipo de trabajo para caracterizar la situación de salud de una población.  El objetivo de las organizaciones de servicios de salud está en solventar: o Las limitaciones organizativas. o Las debilidades en la conducción y seguimiento de procesos. o Pobre capacidad de reaccionar estratégicamente, con calidad y celeridad, ante las principales amenazas a la salud pública. Planteamiento del Problema 15  El programa SOS Telemedicina, se presenta como una oportunidad para seguir impulsando el desarrollo de los ambulatorios, mediante la incorporación de una aplicación que permita ir automatizando la sala situacional local y paulatinamente ir construyendo una red de salas situacionales en salud para Venezuela.  Resuelve el problema recurrente en los sistemas tradicionales de historias médicas, sobre el almacenamiento de grandes volúmenes de documentos y riesgos por pérdida y deterioro.  Hacer uso de estándares es una buena práctica de diseño y desarrollo de software. 3.4 Alcance EL alcance del presente trabajo está determinado por lo siguiente puntos:  Creación y administración de mapas locales y regionales.  Registro y localización de las direcciones de los pacientes en el Sistema de Historia Médica Electrónica en los mapas cartografiados digitalmente.  Presentación en los mapas generados.  Presentación de la información clínica de los pacientes contenida en el Sistema de Historia Médica Electrónica mediante un mapa virtual que puedes ser personalizado mediante filtros de las historias médicas Marco Conceptual 16 4 MARCO CONCEPTUAL Esta parte del documento reúne los conceptos, términos y definiciones necesarias para el desarrollo de la solución. 4.1 Historia Medica Electrónica “Es la historia médica computarizada, pero en una forma tabulada (debidamente registrada en una base de datos) y no la simple transcripción del texto de la historia en cuestión. En este último caso no tendría mayor diferencia con la historia escrita en papel. De esta forma uno de los mayores beneficios de la historia clínica digital es la facilidad en la búsqueda y recuperación de la información.”(Cifre Baixeras, 2007) Cifre Baixeras establece que con la información médica digitalizada, existe una posibilidad de ahorro importante en el espacio físico, de manera que se eliminan las estanterías, gavetas y otros tipos de muebles donde guardar la tradicional historia clínica escrita. Si la aplicación a desarrollar permite hacer los diferentes reportes que habitualmente emite el médico, tales como: Informes, órdenes médicas (récipes, reposos), solicitudes de exámenes, constancias, consultas, etc., entonces se tendrá un valor agregado en la aplicación. La información tabulada en una base de datos, permite recopilar información con el objetivo de hacer estudios retrospectivos. Tarea nada fácil en un archivo tradicional en papel. Como ejemplo de ello se puede evaluar la siguiente situación, saber cuántos pacientes con hipertensión fueron evaluados en el transcurso del año. ¿Habrá que revisar todo el archivo? ¿Historia por historia? En la historia médica digital, debidamente tabulada, la respuesta está al alcance de un click. Habitualmente, el uso de la historia médica digital, amerita salvar algunos obstáculos. El médico debe estar familiarizado con el uso de la computadora, o sentirse atraído por los beneficios de la informática, y el Software en cuestión debe ser amigable y fácil de usar. Marco Conceptual 17 4.1.1 SOS Historias Médicas Electrónicas (SOS-HME) “SOS-HME es un proyecto que comprende la creación y manejo de historias clínicas electrónica para los ambulatorios del programa SOS Telemedicina para Venezuela. El sistema está basado en OpenEHR Gen Framework, herramienta que fue seleccionada luego de realizar una evaluación sobre otras herramientas de HME, resultando electa por ser un marco de trabajo para crear sistemas HME que acoge varios estándares, entre ellos: OpenEHR y HL7 CDA. Se normaliza un formato de historia médica integral, basado en el análisis de los procesos asistenciales de diferentes centros de atención sanitaria de nivel ambulatorio. El sistema de historia HME resultante: SOS-HME, puede adaptarse al formato de registro clínico de un centro asistencial particular, y está en capacidad de intercambiar información clínica con otros sistemas.” (Prieto Padron & Rodriguez Leon, 2012) De las tecnologías utilizadas en SOS-HME se tiene: “El OpenEHR es una fundación internacional sin fines de lucro que trabaja para hacer que la historia médica digital sea interoperable y mejorar la atención de la salud en la sociedad de la información a través de la historia médica digital. Esta fundación ha desarrollado un estándar abierto que describe la administración y el almacenamiento de información sanitaria en forma de informes de Historia Clínica Electrónica (HCE). Todos los datos de una persona son guardados en una HCE centrada en el paciente, completa e independiente de la tecnología”. (Pazos, Pablo & Carrasco, Leandro) La versión estable para el estándar OpenEHR en este momento es la revisión 1.0.1, que se publicó el 15 de abril de 2007. En esencia, este estándar es una especificación para una plataforma de computación médica. Algunas características destacables son las siguientes:  Propone una forma novedosa para crear sistemas de información en salud, utilizando interfaces de usuario generadas automáticamente a partir de definiciones de conceptos clínicos.  Mejorar la salud de las personas, empoderando al médico con registros de salud completos y de calidad.  Crear registros de salud electrónicos interoperables entre instituciones y durables durante toda la vida del paciente. Marco Conceptual 18  Creación de un estándar abierto (especificaciones de libre acceso, software de código abierto).  Participación en el desarrollo de estándares internacionales.  El diseño de un sistema que permite la modificación del registro clínico, en cuanto a estructura y datos, sin necesidad de modificar el código fuente de la aplicación o el esquema de la base de datos.  Formalización del proceso de desarrollo de sistemas de información en salud, que se centra en la gestión del conocimiento clínico, y permite la evolución de la herramienta de software sin ser modificada internamente. HL7 (Health Level Seven) es una organización internacional sin fines de lucro, con sede principal en E.E.U.U., se encarga de generar especificaciones que pretenden dar solución al problema de la comunicación de sistemas heterogéneos en al área de la salud. Esta organización ha definido un número importante de estándares relacionados con mensajería y documentos clínicos. OpenEHR Gen-Framework es un generador de sistemas de historia médica electrónica basado en el estándar OpenEHR. Un Framework, ver Figura 1, es un marco de trabajo, aplicación parcial, genérica y reusable, que resuelve funcionalidades básicas simplifica y acelera nuevos desarrollos Figura 1: Estructura de aplicación basada en framework. Fuente: Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-gen-framework/. Marco Conceptual 19 4.2 Georreferenciación “La georreferenciación es el uso de coordenadas de mapa para asignar una ubicación espacial a entidades cartográficas. Todos los elementos de una capa de mapa tienen una ubicación geográfica y una extensión específicas que permiten situarlos en la superficie de la Tierra o cerca de ella. La capacidad de localizar de manera precisa las entidades geográficas es fundamental tanto en la representación cartográfica como en un Sistema Información Geográfica.” (ESRI, 1995) La correcta descripción de la ubicación y la forma de entidades requiere un marco para definir ubicaciones del mundo real. Un sistema de coordenadas geográficas se utiliza para asignar ubicaciones geográficas a los objetos. Un sistema de coordenadas de latitud-longitud global es uno de esos marcos. Los mapas representan ubicaciones en la superficie de la Tierra que utilizan cuadrículas y marcas de graduación con etiquetas de diversas ubicaciones terrestres. Los elementos geográficos incluidos en diversas capas de mapa se trazan en un orden específico (uno sobre otro) para la extensión del mapa determinada. 4.2.1 Latitud y Longitud “Un método para describir la posición de una ubicación geográfica en la superficie de la Tierra consiste en utilizar mediciones esféricas de latitud y longitud. Estas son mediciones de los ángulos (en grados) desde el centro de la Tierra hasta un punto en su superficie. Este tipo de sistema de referencia de coordenadas generalmente se denomina sistema de coordenadas geográficas.” (ESRI, 1995) La longitud mide ángulos en una dirección este-oeste. Las mediciones de longitud comúnmente se basan en el meridiano de Greenwich, que es una línea imaginaria que realiza un recorrido desde el Polo Norte, a través de Greenwich, Inglaterra, hasta el Polo Sur. Este ángulo es de longitud 0. El oeste del meridiano de Greenwich por lo general se registra como longitud negativa y el este, como longitud positiva. Marco Conceptual 20 Figura: Representación de la latitud y la longitud en la esfera terrestre. Fuente: ARCGIS. Latitud Y Longitud. [En línea] http://resources.arcgis.com/es/help/getting-started/articles/026n0000000s000000.htm 4.3 Sala Situacional “La sala situacional es un espacio, virtual y matricial, de convergencia donde se conjugan diferentes saberes para la identificación y estudio de situaciones de salud coyunturales o no; el análisis de los factores que los determinan; las soluciones más viables y factibles de acuerdo con el contexto local; el monitoreo y evaluación de los resultados obtenidos después de la aplicación de las decisiones tomadas. Cuando se hace referencia a situaciones de salud no se trata de las tradicionales situaciones o análisis de los daños y, en el mejor de los casos, evaluar los riesgos; sino a todo tipo de situaciones relacionadas, desde el análisis y evaluación del proceso de formulación de políticas y la fijación de prioridades hasta la evaluación del impacto en la población, pasando, por supuesto, por los asuntos relacionados con los recursos humanos, la Marco Conceptual 21 tecnología empleada, el financiamiento del sector, el proceso de reforma y muchas otras variables que se estudiarán en esta obra. Vista y entendida así, la sala situacional supera el quehacer tradicional de la epidemiología aplicada a los servicios de salud y se convierte en el instrumento idóneo para realizar la vigilancia de salud pública.” (Peláez, 2006) A través de la sala situacional es posible caracterizar la actualidad medica de una zona específica, definir prioridades, evaluar programas de acción en determinadas zonas y conducir investigaciones en materia de salud, es decir, la sala situacional es las herramienta que permite monitorear el estatus desde el punto de vista médico de una determinada zona. Además de ello permite realizar toma de decisiones para mejorar la calidad de salud de los habitantes de estas zonas. La siguiente grafica ilustra las actividades relacionadas con una sala situacional. Figura 2: Actividades de una Sala Situacional Fuente: Peláez, G. B. (2006). Actividades de una Sala Situacional. Sala Situacional: Instrumento para la vigilancia de Salud Publica. Venezuela. De acuerdo al texto de sala situacional (Peláez, 2006) con el modelo propuesto en la Figura 2, la vigilancia de salud pública está conformada por cinco elementos interdependientes, ellos son: el análisis de situación de salud, la investigación en Marco Conceptual 22 servicios, la vigilancia epidemiológica, la planificación estratégica y la provisión de servicios. Este modelo es útil para establecer algunas diferencias entre algunos de los componentes entre sí y con otros elementos del sistema de salud. Así, puede observarse claramente la diferencia entre el sistema de vigilancia epidemiológica y el sistema de información, esta diferencia es actualmente reconocida. Sin embargo, la diferencia entre el análisis de situación de salud y la investigación aún no es clara para algunos; así como la diferencia entre vigilancia epidemiológica y vigilancia de salud pública. De acuerdo a este modelo, es posible afirmar que la vigilancia epidemiológica es uno de los componentes de la vigilancia de salud pública, pero no el único. De allí que la sala situacional como instrumento que hace operativo la vigilancia de salud pública no debe ser del dominio exclusivo de la epidemiología; por el contrario, se convierte en un espacio donde convergen de manera integral saberes de diferentes disciplinas. 4.3.1 Elementos básicos de la sala situacional Peláez expone los elementos mínimos necesarios en toda sala situacional, se detallan a continuación: Población: Datos e Información El conocimiento es lo más cercano a la realidad de la población, sujeta a atención por parte de los servicios. Este elemento es básico pues constituye el conocimiento sobre las características fundamentales de la población y, en consecuencia, será la base de toda la programación. Se debe conocer el volumen de la población, su distribución (urbana, semiurbana y rural), su composición (por sexos), su estructura (según edades, ciclo vital) y su dinámica migratoria. Destacar las características ecológicas que faciliten la transmisión de algunas enfermedades, por ejemplo, el dengue, la malaria, diarrea, respiratorias, etc. Tener la Marco Conceptual 23 población según ciclo vital (lactante, niño, adolescente, joven, adulto y anciano) y sexo. Condiciones de Vida: Datos e Información El conocimiento de las condiciones en que viven las personas, es decir, las características sociales y culturales, tales como la escolaridad, el empleo/desempleo, el ingreso, las principales actividades económicas (ocupaciones), tipo de viviendas y hacinamiento, fuentes de energía, dieta, ejercicio/sedentarismo, etnicidad, relaciones de género, uso de servicios de salud, gasto en salud (público y privado), cobertura y calidad de servicios ambientales básicos (agua potable, alcantarillado, recolección de basura, control de vectores y roedores), tenencia de animales domésticos en casa, recreación, entre otros. Factores de Riesgo: Definición El conocimiento de los factores de riesgo, tanto los que protege como los que agreden a la salud, derivados de las condiciones de vida identificadas; son importantes para anticipar los daños a la salud que se enfrentarían a corto, mediano y largo plazo. Estos factores pueden ser biológicos, ambientales, nutricionales, sociales, culturales, conductuales y laborales. Daños (Eventos a la salud) El conocimiento de los daños esperados como consecuencia de los datos e información sobre los puntos anteriores, medidos en términos de carga de enfermedad, discapacidad y muerte prematura evitable. Esta sección tiene una gama amplia de fuentes de información muy bien reconocida, sobre todo para la morbilidad y mortalidad. 4.3.2 Características de la sala situacional Para que la sala situacional pueda cumplir con su cometido, debe incluir: 1. Creación de una base de datos básicos e indicadores trazadores. De acuerdo con alguna distribución geográficamente referenciada en la medida de Marco Conceptual 24 lo posible acorde con la distribución político - administrativa del país, seleccionados en función de las políticas y problemas prioritarios, para el monitoreo y evaluación de las mismas. 2. Procesamiento intencionado de los datos e indicadores para convertirlos en información. Con esto se quiere significar que debe existir un marco de referencia que oriente el procesamiento y análisis y este marco debe ser las políticas y las prioridades nacionales en salud. 3. Análisis e interpretación de los datos. En esta etapa lo que se recomienda es el análisis de tendencias estratificado comparativo, para que sea posible, es necesario tener línea basal, así como tener desagregados los datos e información según variables básicas para el análisis, como por ejemplo, una referencia georreferenciada que puede ser el municipio, grupo étnico, por género, clase social, condición económica y otras más que sean de interés para el estudio de las inequidades. 4. Contextualización. En esta etapa entran en juego los saberes de los distintos actores sociales locales, además de los institucionales, para identificar las condiciones políticas, sociales, históricas, económicas y culturales (determinantes de la salud) que favorecen o limitan la situación de salud y la respuesta social. 4.4 Sistema de Gestión de Base de Datos Extensible “Existen muchas aplicaciones con necesidades similares a la de un Sistema de Historia Medica Electrónica. Los Sistemas de Información Geográficos, las bases de datos multimedia, entre otras. Un primer enfoque a este problema fue la de extender el modelo relacional para dar cabida a estos nuevos datos y sus necesidades de manipulación, lo cual dio lugar a las bases de datos extensibles, que planteaban modelos con extensiones al relacional para albergar otros tipos de datos y sus operaciones.” (Abad Mota, 2005) Marco Conceptual 25 En la actualidad la manera en la que los datos espaciales son gestionados en las bases de datos relacionales no es la más simple, los datos espaciales deben ser creados de manera que se facilite su disponibilidad, acceso, interoperabilidad y aplicación para infinidad de propósitos y que para ello constituye, en el proceso productivo y en el uso de los datos, un prerrequisito el estricto cumplimiento de la aplicación de estándares, sin los cuales los datos espaciales terminarían siendo subutilizados y las bases de datos de las que formen parte, elementos aislados y de utilidad restringida. Las entidades a cargo de la producción de datos espaciales, tanto básicos como temáticos, no existe realmente una tradición de apego a la aplicación de estándares, lo cual explica buena parte de los problemas relacionados con la calidad, el bajo nivel de interoperabilidad y la ausencia de documentación útil esencial tanto para acceder como para facilitar el desempeño esperado de las bases de datos espaciales fundamentales en la región. A continuación se detalla un conjunto de normas ISO que buscan estandarizar la gestión de datos geográficos en las bases de datos: 4.4.1 ISO 19101:2002 Información Geográfica - Modelo de Referencia Este modelo de referencia describe los requisitos generales de la normalización y los principios fundamentales que son aplicables para la formulación y utilización de las normas de información geográfica. Al describir estos requerimientos y principios, este modelo de referencia proporciona una visión de la normalización en la que se puede integrar la información geográfica a las tecnologías y aplicaciones existentes. El punto focal de esta familia de normas consiste en: a) Definir la semántica y estructura básicas de la información geográfica para fines del manejo e intercambio de datos. b) Definir los elementos de los servicios de información geográfica y su comportamiento para fines del procesamiento de datos. Por lo tanto, los dos elementos principales del modelo de referencia son el Modelo de Referencia del Dominio (Figura 3), que proporciona una representación y Marco Conceptual 26 descripción de alto nivel de la estructura y el contenido de la información geográfica, y el Modelo de Referencia de Arquitectura (Figura 4), que describe los tipos generales de servicios que serán proporcionados mediante los sistemas computarizados para manejar la información geográfica y enumera las interfaces de los servicios que servirán para su interoperación. Figura 3: Modelo de Referencia del Dominio Fuente: ISO (2008). Modelo de Referencia del Dominio. ISO 19101:2002 Geographic information -- Reference model. [En línea] http://www.iso.org/. Marco Conceptual 27 Los elementos principales del Modelo de Referencia del Dominio son:  El conjunto de datos, el cual contiene: o Objetos, incluyendo los atributos del objeto, asociaciones del objeto y operaciones del objeto. o Objetos espaciales que pueden describir los aspectos espaciales de los objetos o que son estructuras de datos complejas que asocian valores de los atributos a posiciones individuales dentro de un espacio definido. o Descripciones de la posición de los objetos espaciales en el tiempo y el espacio.  El esquema de aplicación, que proporciona una descripción de la estructura semántica del conjunto de datos. El esquema de aplicación también identifica los tipos de objetos espaciales y los sistemas de referencia que se requieren para proporcionar una descripción completa de la información geográfica en el conjunto de datos. El esquema de aplicación también incluye elementos de la calidad de datos y elementos de presentación general de la calidad de datos.  El conjunto de datos de metadatos permite a los usuarios buscar, evaluar, comparar y ordenar datos geográficos. Describe la administración, organización, contenido y calidad de la información geográfica en los conjuntos de datos. Puede contener o establecer referencias al esquema de aplicación del conjunto de datos geográficos. Puede incluir o establecer referencias al catálogo de objetos que contiene la definición de los conceptos utilizados en el esquema de aplicación. Marco Conceptual 28 Figura 4: Modelo de Referencia de Arquitectura Fuente: ISO (2008). Modelo de Referencia de Arquitectura. ISO 19101:2002 Geographic information -- Reference model. [En línea] http://www.iso.org/. Marco Conceptual 29 El modelo de referencia de arquitectura (Figura 4) define una estructura para los servicios de información geográfica y un método para identificar los requisitos de normalización para dichos servicios. Este modelo permite comprender qué tipos de servicios se definen en las diferentes normas de la serie de normas ISO 19100 y los distingue de otros servicios de tecnología de la información. 4.4.2 ISO 19107:2003 Información Geográfica - Esquema Espacial Los datos de vectores consisten en primitivas geométricos y topológicos que se utilizan, ya sean en forma separada o conjunta, para construir objetos que expresen las características espaciales de los objetos geográficos. Esta norma internacional únicamente trata con datos vectoriales. En el modelo que se define en esta norma internacional, las características espaciales se describen mediante uno o más atributos espaciales, cuyo valor se determina a través de un objeto geométrico (GM_Object) o un objeto topológico (TP_Object). La geometría ofrece los medios para una descripción cuantitativa, mediante las coordenadas y funciones matemáticas de las características espaciales de los objetos, incluyendo dimensión, posición, tamaño, forma y orientación. Las funciones matemáticas que se usan para describir la geometría de un objeto dependen del tipo de sistema de referencia por coordenadas que se emplea para definir la posición espacial. La geometría es el único aspecto de la información geográfica que cambia cuando la información se transforma de un sistema de referencia geodésico o de un sistema de coordenadas a otro. La Figura 5 muestra las clases de geometría que se especifican en esta Norma Internacional. Marco Conceptual 30 Figura 5: Clases de Geometría Fuente: ISO (2008). Clase de Geometría. ISO 19107:2003: Geographic information -- Spatial schema. [En línea] http://www.iso.org/. La topología se ocupa de características de las figuras geométricas que permanecen invariables si el espacio se deforma de manera elástica y continúa (por ejemplo, cuando los datos geográficos se transforman de un sistema de coordenadas a otro). Dentro del contexto de la información geográfica, la topología se usa generalmente para describir la conectividad de una gráfica multidimensional, una propiedad que no varía en la transformación continúa de la gráfica. La Figura 6 muestra las clases de topología que se especifican en esta norma internacional. Marco Conceptual 31 Figura 6: Clase de Objeto Topología Fuente: ISO (2008). Clase de Objeto Topología. ISO 19107:2003: Geographic information -- Spatial schema. [En línea] http://www.iso.org/. Los operadores espaciales son funciones y procedimientos que utilizan, consultan, crean, modifican o eliminan objetos espaciales. Esta norma internacional define la taxonomía de estos operadores con el fin de crear una norma para su definición e implementación. Las metas son: a) Definir los operadores espaciales en forma inequívoca, de modo que pueda asegurarse que diferentes aplicaciones lograrán resultados comparables dentro de las propias limitaciones de precisión y resolución. Marco Conceptual 32 b) Utilizar estas definiciones para puntualizar un conjunto de operaciones estándar que serán la base de los sistemas de cumplimiento y que, de esa manera, actúen como un banco de pruebas para los implementadores y un punto de referencia establecido para la validación del cumplimiento. c) Definir un operador algebraico que permitirá combinaciones de los operadores base para utilizarse en forma predecible en la consulta y manejo de datos geográficos. 4.4.3 ISO 19125-1:2004 Información Geográfica – Accesos a Objetos Simples – Parte 1: Arquitectura Común. Esta parte de la ISO 19125 implementa un perfil del esquema espacial descrito en la ISO 19107:2003, La clase base Geometry cuenta con subclases para Point, Curve, Surface y GeometryCollection. Cada objeto geométrico se relaciona con un Sistema de Referencia Espacial, que describe el espacio coordinado en el cual se define el objeto geométrico. El modelo de Geometry extendido cuenta con clases de colección de 0, 1 y 2 dimensiones llamadas MultiPoint, MultiLineString y MultiPolygon para modelar geometrías correspondientes a las colecciones de Points, LineStrings y Polygons, respectivamente. MultiCurve y MultiSurface se introducen como superclases abstractas que generalizan las interfaces de la colección para manejar las Curve y Surface. Los atributos, métodos y afirmaciones para cada clase de “Geometry” se describen en la Figura 7. Marco Conceptual 33 Figura 7: Diagrama de Clases de Estructuras Geográficas Fuente: ISO (2004). Diagrama de Clases de Estructuras Geográficas. ISO (2004). ISO 19125-1:2004 - Geographic information -- Simple feature access -- Part 1: Common architecture. [En línea] http://www.iso.org/. Los operadores relacionales son métodos booleanos que se utilizan para comprobar la existencia de una relación espacial topológica especificada entre dos objetos geométricos. El enfoque básico para comparar dos objetos geométricos es realizar pruebas de secuencia de las intersecciones entre los interiores, los límites y los exteriores de los dos objetos geométricos, y clasificar la relación entre los dos objetos geométricos con base en los resultados de una matriz de “intersección”. Cada tipo de Geometry tiene una representación de texto convencional que puede utilizarse para construir nuevas instancias del tipo y convertir instancias existentes de formato textual para su despliegue alfanumérico. La representación de texto convencional de los Sistemas de Referencia Espaciales proporciona una representación textual estándar para la información del sistema de referencia espacial. La representación binaria convencional para Geometry (WKBGeometry) proporciona una representación portátil de un objeto geométrico como un flujo continuo de bytes. Permite a los objetos geométricos intercambiarse entre un cliente SQL/CLI y una aplicación SQL en formato binario Marco Conceptual 34 4.4.4 ISO 19125-2:2006: Información geográfica. Acceso a estructuras simples. Parte 2: Opción SQL El propósito de esta parte de la ISO 19125 es definir un esquema de Lenguaje de Consulta Estructurado (SQL) que soporte el almacenamiento, recuperación, consulta y actualización de colecciones de objetos por medio de la Interfaz de Nivel de Llamada SQL (ISO/IEC 9075-3:2003). Un objeto tiene atributos tanto espaciales como no espaciales. Los atributos espaciales tienen valor geométrico y los atributos sencillos se basan en geometría bidimensional con interpolación lineal entre vértices. Esta parte de la ISO 19125 depende de los componentes arquitectónicos comunes que se definen en la ISO 19125-1. Asimismo, esta parte de la ISO 19125 define un esquema para el manejo de la clase Geometry e información del Sistema de Referencia Espacial en la aplicación SQL basada en tipos de datos predefinidos. Esta parte de la ISO 19125 no define funciones de SQL para el acceso, mantenimiento o indexación de la clase Geometry en una aplicación SQL basada en tipos de datos predefinidos. Las colecciones de objetos se almacenan como tablas con columnas de valor geométrico en una aplicación SQL; cada objeto es una fila en la tabla. Los atributos no espaciales de los objetos se mapean en columnas cuyo tipo se selecciona del conjunto de tipos de datos SQL estándar. Los atributos espaciales de los objetos se mapean en columnas cuyos tipos de datos SQL se basan en el concepto subyacente de tipos de datos geométricos adicionales para SQL. Una tabla cuyas filas representan dichos objetos se conoce como una tabla de objetos. Dicha tabla contiene una o varias columnas de valor geométrico. Los esquemas de tablas de objetos se describen para dos aplicaciones SQL: aplicaciones basadas en tipos de datos predefinidos y SQL con tipos Geometry. En una aplicación basada en tipos de datos predefinidos, una columna con valor geométrico se implementa como una referencia a llave foránea en una tabla geométrica. Un valor geométrico se almacena utilizando una o varias filas en la tabla geométrica. La tabla geométrica puede aplicarse utilizando tipos numéricos SQL estándar o tipos binarios SQL; se describen los esquemas para ambos. Marco Conceptual 35 El término SQL con tipos Geometry se utiliza para hacer referencia a una aplicación SQL que se ha ampliado con un conjunto de tipos Geometry. En ese ambiente, una columna con valor geométrico se aplica como una columna cuyo tipo SQL se selecciona de ese conjunto de tipos Geometry. El mecanismo para ampliar el sistema de tipo de una aplicación SQL es mediante la definición de los tipos definidos por el usuario que realice el usuario. Las aplicaciones SQL comerciales con soporte de tipo definido por el usuario han estado disponibles desde mediados de 1997.La Figura 8 ilustra el esquema para sustentar tablas de propiedades, Geometry, e información de Referencia Espacial en una aplicación SQL basada en tipos de datos predefinidos. a) La tabla GEOMETRY_COLUMNS describe las tablas de propiedades disponibles y sus propiedades de geometría. b) La tabla SPATIAL_REF_SYS describe el sistema de coordenadas y transformaciones para la geometría. c) La tabla de propiedades almacena una colección de objetos. Las columnas de una tabla de propiedades representan atributos del objeto, mientras que las filas representan objetos individuales. Geometry de un objeto es uno de sus atributos; mientras que, debido a que se trata de un tipo de dato geométrico, una columna Geometry se implementa como llave foránea en una tabla geométrica. d) La tabla geométrica almacena objetos geométricos y puede implementarse al utilizar los tipos numéricos SQL estándar o los tipos binarios SQL Marco Conceptual 36 Figura 8: Esquema para sustenta de tabla de propiedades Fuente: ISO (2004). Esquema para sustenta de tabla de propiedades. ISO (2004). ISO 19125-1:2004 - Geographic information -- Simple feature access -- Part 1: Common architecture. [En línea] http://www.iso.org/. 4.5 Sistemas de Información Geográfica Los Sistemas de Información Geográfica (SIG o GIS, en su acrónimo ingles) constituyen un área de rápido desarrollo dentro de la informática y ofrecen métodos sumamente innovadores para hacer frente a algunas demandas técnicas que constituyen un reto. Un sistema de información geográfica es una integración organizada de hardware, software, datos geográficos y personal, diseñado para capturar, almacenar, manipular, analizar y visualizar en todas sus formas la Marco Conceptual 37 información geográficamente referenciada con el fin de resolver problemas complejos de planificación y gestión. En (Neteler & Mitasova, 2005) definen a los sistemas de información geográficos como “un modelo de una parte de la realidad referido a un sistema de coordenadas terrestre y construido para satisfacer unas necesidades concretas de información”. El sistema de información geográfica separa la información en diferentes capas temáticas y las almacena independientemente, permitiendo trabajar con ellas de manera rápida y sencilla, y facilitando al profesional la posibilidad de relacionar la información existente a través de la topología de los objetos, con el fin de generar otra nueva que no podrá obtener de otra forma. Se pueden visualizar y obtener datos de diferentes capas de información, pudiendo o no solaparlas, se podrían combinar las capas de vías de comunicación, núcleos de población, usos del suelo, etc. en un mismo mapa para conseguir visualizar la información deseada. Hay tres hechos que terminan de definir el contexto de los SIG; el primero de ellos es la clara tendencia, que cobra importancia en los últimos años en el campo de la información geográfica hacia la creación de herramientas de software libre para el almacenamiento, procesado y visualización de la misma. Ejemplos de estas herramientas son el Sistema Gestor de Bases de Datos (SGBD) PostgreSQL extendido con el módulo para información geográfica PostGIS, extensiones espaciales del sistema de base de datos MySQL, la librería para la representación de mapas en un entorno web MapBuilder o servidores geográficos como Geoserver, QGIS, entre otras muchas. El segundo hecho es el esfuerzo por parte de diversos organismos internacionales para la definición de estándares de representación, consulta y visualización de información geográfica. Tanto el Open Geospatial Consortium (OGC) como el Technical Committee 211 de ISO han puesto estándares para servicios y lenguajes de representación de información geográfica. Las funciones de cada capa son las siguientes:  Capa de gestión de la información: Es la encargada del almacenamiento y procesamiento básico.  Capa de procesamiento de la información: Es la encargada del análisis espacial. Marco Conceptual 38  Capa de interacción con el usuario: Es la encargada de la visualización y de la interacción con el usuario.  Servicios de comunicación: Define lenguajes y servicios para conectar las diferentes capas.  Servicios de workflow: Define servicios y protocolos para enlazar e integrar diversos componentes. La aplicación implementada en este proyecto estará enmarcada en la capa de interacción con el usuario, puesto que son los propios usuarios quienes gestionan la información geográfica gracias a la integración de varias herramientas SIG pertenecientes a las otras capas de la arquitectura. Dentro de cada capa se enmarcan los diferentes estándares antes mencionados y entre los que se encuentran:  Geography Markup Language (GML): Que es un lenguaje XML para la representación de información geográfica.  Web Feature Service (WFS): Que es un servicio web para consultar objetos geográficos.  Web Map Service (WMS): Que es un servicio web para la generación de cartografía.  Styled Layer Descriptor (SLD): Que es un lenguaje XML para describir estilos de visualización.  Web Map Context (WMC): Que es un lenguaje XML que especifica el contenido de mapas con distintas capas de distintos servidores.  Filter Encoding (Filter): Que es un lenguaje XML para realizar consultas espaciales sencillas. Y el tercer hecho es la evolución de los SIG hacia la facilidad de extensión, la separación de tareas, etc. Se puede decir que hay tres generaciones de SIG:  Primera generación: Sistemas propietarios. Caracterizada por el almacenamiento de datos en ficheros de formato propietario. Ya no se emplea debido a sus múltiples inconvenientes al momento de integrar data de otras fuentes de datos no homogéneas.  Segunda generación: Integración con SGBD caracterizada por el uso de un subsistema independiente para cada tipo de información. Es empleada en Marco Conceptual 39 herramientas de diseño de planos reconvertidas a SIG. Aunque presenta algunos inconvenientes como la dificultad de modelar, consultar, optimizar e integrar debido a que se tienen modelos de datos independientes, o como que se sigue cargando a la herramienta SIG con funcionalidad propia de los SGBD.  Tercera generación: SGBD extensibles caracterizada por el uso de un SGBD extensible para implementar la funcionalidad geográfica. La implementación es altamente eficiente, ya que se realiza integrada en el SGBD y se puede realizar optimización de consultas. 4.6 Computación en la nube El concepto de computación en la nube se ha establecido en los últimos años y se consolida como nuevo paradigma de cálculo o escenario de plataformas TI. Atendiendo a la definición dada por el NIST (National Institute of Standards and Technology), “El cloud computing es un modelo tecnológico que permite el acceso ubicuo, adaptado y bajo demanda en red a un conjunto compartido de recursos de computación configurables compartidos (por ejemplo: redes, servidores, equipos de almacenamiento, aplicaciones y servicios), que pueden ser rápidamente aprovisionados y liberados con un esfuerzo de gestión reducido o interacción mínima con el proveedor del servicio”. (Urueña, Ferrarie, Blanco , & Valdecasa, 2012) El cloud computing representa un cambio importante en cómo pueden las empresas y organismos públicos procesar la información y gestionar las áreas TIC; apreciándose que con la gestión TIC tradicional las empresas realizan cuantiosas inversiones en recursos, incluyendo hardware, software, centros de procesamiento de datos, redes, personal, seguridad, etc.; mientras que con los modelos de soluciones en la nube se elimina la necesidad de grandes inversiones y costes fijos, transformando a los proveedores en empresas de servicios que ofrecen de forma flexible e instantánea la capacidad de computación bajo demanda. Marco Conceptual 40 4.6.1 Características del cloud computing Para poder entender de una manera rápida y sencilla cuales son las claves del concepto del cloud computing, se recurre a una serie de características principales que lo diferencian de los sistemas tradicionales de explotación de las TIC. La Figura 9 ilustra algunas de las ventajas del cloud computing. Figura 9: Ventajas del Cloud Computing 4.6.2 Clasificación de los servicios de computación en la nube  Infraestructura como servicio (IaaS): Consiste en poner a disposición del cliente el uso de la infraestructura informática (capacidad de computación, espacio de disco y bases de datos entre otros) como un servicio. Los clientes que optan por este tipo de familia cloud en vez de adquirir o dotarse directamente de recursos como pueden ser los servidores, el espacio del centro de datos o los equipos de red optan por la externalización en busca de un ahorro en la inversión en sistemas TI. Con esta externalización, las facturas Marco Conceptual 41 asociadas a este tipo de servicios se calculan en base a la cantidad de recursos consumidos por el cliente, basándose así en el modelo de pago por uso.  Plataforma como servicio (PaaS): Consiste en la entrega, como un servicio, de un conjunto de plataformas informáticas orientadas al desarrollo, testeo, despliegue, hosting y mantenimiento de los sistemas operativos y aplicaciones propias del cliente. Las principales características asociadas al “Plataforma como servicio” como solución cloud se exponen a continuación: o Facilita el despliegue de las aplicaciones del cliente, sin el coste y la complejidad derivados de la compra y gestión del hardware y de las capas de software asociadas. o Ofrece a través de redes de servicio IP todos los requisitos necesarios para crear y entregar servicios y aplicaciones web.  Software como Servicio (SaaS): Consiste en la entrega de aplicaciones como servicio, siendo un modelo de despliegue de software mediante el cual el proveedor ofrece licencias de su aplicación a los clientes para su uso como un servicio bajo demanda. Los proveedores de los servicios SaaS pueden tener instalada la aplicación en sus propios servidores web (permitiendo a los clientes acceder, por ejemplo, mediante un navegador web), o descargar el software en los sistemas del contratante del servicio. En este último caso, se produciría la desactivación de la aplicación una vez finalice el servicio o expire el contrato de licencia de uso. 4.7 Mapas Virtuales El proceso que produce un mapa requiere tres tareas básicas según define (Mitchell, 2008) a saber: cuantificar observaciones, localizar la posición de sus observaciones y visualizar la ubicación en un mapa. Las herramientas digitales han hecho que estas tareas de manera más eficiente y más exacta. Marco Conceptual 42 4.7.1 Cuantificar Observaciones Equipos como telémetros láser o satélites de imágenes proporcionan mediciones discretas que son menos afectados por las interpretaciones personales. Observaciones tradicionales, como la interpretación de fotografías manual o funciones de dibujo por el contrario, tienden a presentar una visión parcial del asunto. 4.7.2 Localización de las posiciones de las observaciones Herramientas de referencia geográfica, como receptores GPS enlazan a ubicaciones en la tierra para coordinar con sistemas de mapeo común utilizando la latitud y la longitud. Estos calculan la ubicación del receptor mediante señales de satélite que ayudará al receptor GPS calcular su ubicación con respecto a los satélites cuyas posiciones son bien conocidas. 4.7.3 Visualización de estos lugares en un mapa Programas de edición de mapas permiten al usuario comparar la información de ubicación con los datos de los mapas digitales. Los mapas tradicionales dibujados a mano no pueden competir con la velocidad y la flexibilidad de los programas de edición de mapas digitales. Se necesitan datos de cartografía digital para hacer el trabajo, pero una vez que los datos están disponibles, múltiples usos se le puede dar a la información cartográfica. El objetivo final de la cartografía es presentar información sobre nuestras observaciones del mundo y el mapa digital busca presentar esta información de la mejor manera. 4.7.4 OpenStreetMap OpenStreetMap es un proyecto pensado para construir una base de datos geográfica de código abierto. Apunta a eventualmente tener un record geográfico de todo el planeta. Mientras esta iniciativa empezó con mapas de calles, actualmente ha ido más allá para incluir, aceras, edificios, cascadas, autopistas, etc. Junto con la Marco Conceptual 43 geografía física de una zona, el proyecto también incluye, detalles de uso de la tierra, rutas de buses y otros datos de interés. La base de datos está construida por contribuyentes quienes recogen la información a través de métodos como: Manejando un vehículo, en una bicicleta, caminado por las calles, senderos, etc. Cada movimiento que dan es grabado utilizando un sistema de Posicionamiento Global (GPS). Esta información es luego utilizada para crear un grupo de puntos y líneas que puede ser transformada en los mapas para usos de localización. La mayoría de los contribuyentes son voluntarios y trabajan en este proyecto en su tiempo libre, incluso organizaciones comerciales y del gobierno han empezado a contribuir en el mismo. Otros datos son reunidos de mapas libres de derechos de autor, bases de datos públicas y en otros casos donaciones de bases de datos propietarias por las compañías que lo posean. En la mayoría de los casos también se necesita un poco más de trabajo para el ordenado y la actualización de los datos. Las bases de datos utilizan un sistema en donde los contribuyentes pueden agregar o editar la información de cualquier área, manteniendo la trazabilidad del objeto modificado. Esto significa que cualquier error o daño deliberado puede ser reparado para mantener una data integra y precisa. OpenStreetMap no utiliza un sistema de información geográfico para almacenar la data, en vez de ello utiliza su propio software y modelo de datos para procesar la información de la manera más flexible posible. Los datos de OpenStreetMap son libres de usar por cualquier persona y para cualquier uso. Esta bajo una licencia que te permite, copiar, cambiar y distribuir los datos. Existen muchos mapas disponibles en la Web, en su mayoría son libres de usar y algunos pueden ser embebidos en una página web, pero poseen restricciones en lo que se puede hacer con los servicios y la data que proveen. Marco Conceptual 44 4.7.5 Google Maps En febrero de 2005, Google anunció el debut de un nuevo servicio, Google Maps, que cambio la manera de ver la cartografía y los mapas en la web, una interfaz usable para el usuario, capas bien definidas y herramientas de capas eran las principales características de este servicio. Utilizando lo último en tecnología Google Maps ofrece una rápida carga, visualización del mapa en cuadrados, una interfaz de usuario sencilla y fácil de entender y una API que permite manipular estos elementos. Las principales características del servicio son las siguientes: Cuadro de búsqueda simple Google utiliza un único cuadro de búsqueda para la localización búsquedas. A través de un cuadro de texto es posible ubicar una zona en cualquier parte del mundo sin realizar algún otro tipo de búsqueda especializado Google Maps ofrece la capacidad de realizar acercamientos y alejamientos para mostrar el mapa. El usuario puede controlar el mapa con el mouse o las teclas de dirección para moverse a la ubicación que se desee. Para permitir un movimiento más rápido, las teclas "+" y "-" pueden ser usadas para controlar el nivel de zoom. Los usuarios pueden ingresar una dirección, una intersección o un área en general para buscar en el mapa. Búsqueda local integrada Se puede utilizar la caja de búsqueda para buscar cosas como "hoteles cercanos a…", “restaurantes cerca de…”. Las coordenadas de GoogleMaps están en el sistema WGS84 y se mostrará la latitud y la longitud, positiva para Norte y Este, negativa para Sur y Oeste. Las imágenes de satélite Con un solo clic se puede cambiar entre visualización cartográfica y visualización vía satélite o aérea. Marco Conceptual 45 4.7.6 Comparación de Herramientas A continuación una tabla comparativa entre las 2 herramientas: Tabla Comparativa entre GoogleMaps y OpenStreetMap Elemento GoogleMaps OpenStreetMap Licencia Gratis (hasta 25 mil peticiones hacia su servidor) Gratis Datos Almacenados A pesar de que el uso del mapa es libre, los datos allí almacenados son propiedad de Google. Como es un mapa colaborativo, toda la data almacenada pertenece a la comunidad de OpenStreetMaps Modificación de los Datos Limitación en modificación de Datos Los datos pueden ser modificados por cualquier miembro de la comunidad Editor de Mapa Creación y modificación de datos limitada Creación y modificación de datos en tiempo real El editor debe ser accedido desde la propia pagina El editor puede ser embebido en otra aplicaciones Capas Satelital, Relieve, Calles Urbanas, climático Relieve, Calles Urbana Servicios Remotos Api RestFull Api RestFull Capacidad para ser desplegada por dispositivos móviles Si aplica Si Aplica Carga de archivos satelitales (.gpx) No aplica Si Aplica Compatibilidad del Api con la aplicación SOS-HME Altamente Compatible Altamente Compatible Tabla 1: Tabla Comparativa entre Google Maps y OpenStreetMap En base a la investigación realizada se llegó a la conclusión que la herramienta más idónea para el proyecto es el mapa OpenStreetMap, ya que el cuadro comparativo expone que esta herramienta es de código abierto y su comunidad es mucha más flexible y abierta cuando se requiera actualizar o modificar un mapa. Por su parte, Google Maps es un ambiente cerrado (por ser propietario en su data) a las modificaciones, esto repercute al momento de cartografiar localidades remotas, o Marco Conceptual 46 zonas de poco interés comercial para la empresa (barrios, caseríos). Pensando en la evolución del sistema, Google Maps impone un costo no contemplado de licencia por uso de su herramienta. Descripción y Análisis del Diseño 47 5 DESCRIPCION Y ANALISIS DEL DISEÑO En este capítulo se detalla el diseño del sistema de georreferenciación cartográfica. Se ofrece una visión acerca de los lineamientos seguidos para el diseño de la aplicación; desde la metodología utilizada, los requerimientos de la solución, definición y descripción de las funcionalidades principales con sus respectivos diseños. 5.1 Metodología utilizada Para el desarrollo de la solución se escogió la metodología de desarrollo RUP (Proceso Unificado Racional) por ser un proceso de desarrollo de software apoyado por el Lenguaje Unificado de Modelado UML, constituye la metodología estándar más utilizada para el análisis, implementación y documentación de sistemas orientados a objetos. El RUP no es un sistema con pasos firmemente establecidos, sino que trata de un conjunto de metodologías adaptables al contexto y necesidades de cada organización, donde el software es organizado como una colección de unidades atómicas llamados objetos, constituidos por datos y funciones, que interactúan entre sí. 5.2 Análisis Se procedió a realizar el análisis inicial del problema mediante la creación de los siguientes artefactos que clarifican el desarrollo de la aplicación: 5.2.1 Modelo de proceso de negocio El modelo de proceso de negocio describe tanto el comportamiento y los flujos de información dentro de una organización o sistema. Como modelo de la actividad organizacional, que captura los eventos significativos, insumos, recursos, procesamiento y salidas asociadas a los procesos de negocio relevantes. Descripción y Análisis del Diseño 48 Figura 10: Contexto del negocio El paquete Contexto empresarial contiene modelos de todas las partes interesadas, declaraciones de misión, los objetivos de negocio y la estructura física de la organización "cual es”. Dentro del contexto del negocio encuentra los siguientes artefactos: Figura 11: Estrategia En la estrategia se encuentra la Misión y Visión (ver apéndice) del proyecto que se implementa. El paquete contiene los actores involucrados, muestra los elementos del modelo que representan las diversas personas, organizaciones y sistemas de información que son de alguna manera conectados en el contexto del proyecto actual. Figura 12: Involucrados analysis Stakeholders Sistema SOS_HME Personal Sanitario Médico Administrador Paciente Descripción y Análisis del Diseño 49 Actor Descripción SOS-HME Constituye un elemento central en la prestación de los servicios de salud Personal Sanitario Personal de enfermería o asistente médico que labora en el ambulatorio coordinando las funciones y procedimientos de enfermería con los paramédicos, auxiliares de diagnóstico y áreas administrativas. También lleva el registro y control de los pacientes y la aplicación de tratamientos clínicos, según las indicaciones de los médicos. i Médico Médico general o especializado encargado de las consultas, proporcionando atención médica al paciente, mediante valoración y diagnostico; solicita estudios de laboratorio para valorar el estado de salud del paciente, establece el tipo de atención que requiere para su tratamiento y de ser necesario refiere al paciente a otros servicios o programas de salud existentes dentro o fuera del establecimiento de salud actual y finalmente registra información diaria en los formatos establecidos. Administrador Persona que realiza distintas actividades administrativas en el ambulatorio (Administrador o Personal Administrativo), ejecuta los procesos de control de calidad, gestión de los servicios médicos, generación y emisión de reportes o informes estadísticos. Paciente Individuo que solicita el servicio de salud en el ambulatorio. Tabla 2: Tabla de actores El paquete de flujos de trabajo de procesos, a partir de las partes interesadas, muestra cómo estos trabajan juntos para proveer actividades fundamentales del negocio. Engloba los documentos que apalancan el marco de trabajo para el desarrollo del proyecto, en la Figura 13 se aprecian los documentos que la incluyen. Descripción y Análisis del Diseño 50 Figura 13: Flujos de Negocio Un proceso de negocio es una colección de actividades diseñadas para producir una salida específica para una organización particular. Implica un fuerte énfasis en “cómo” se hace el trabajo en una organización, en contraposición al enfoque en “qué” de producto. Así, un proceso es un ordenamiento específico de actividades de trabajo a través del tiempo y del espacio, con un comienzo, un fin, entradas y salidas claramente identificados. Dentro del proyecto de módulo de georreferenciación se tiene un diagrama a alto nivel del modelo en la Figura 14. Descripción y Análisis del Diseño 51 Figura 14: Modelo de Negocio de Alto Nivel Las descripción de los artefactos de presentan a continuación. Modelo de Negocio Alto Nivel Artefacto Tipo de Artefacto Descripción Framework de desarrollo Documento Para la realización del proyecto se eligió RUP como la metodología de desarrollo Estándares técnicos Documento Para la realización del proyecto se estableció el Modelo de desarrollo MVC y para la integración con sistemas externos servicios RESTFUL Plan de trabajo Hoja de planificación Hoja de ruta del desarrollo de la tesis Declaración de oportunidad Presentación Se presentó por parte del equipo de SOS Telemedicina los pilares donde justificar el proyecto Documento de alcance Documento Se delimita el ámbito que cubre este proyecto de grado Caso de uso Modelo Descripción de los pasos o las actividades que deberán realizarse para llevar a cabo algún proceso. Los personajes o entidades que analysis Business Workflows Estandares Tecnicos Aplicación Apegada a los Requerimientos Solicitados SOS - HME A Declaración de Oportunidad Framework de Desarrollo Plan de Trabajo Documento de Alcance Casos De Uso Desarrollo Prev io Realizado Descripción y Análisis del Diseño 52 participarán en un caso de uso se denominan actores Tabla 3: Modelo de Negocio de Alto Nivel Dentro del modelo detallado se observar cómo está divido en tres subprocesos que abarcan todas las funcionalidades necesarias que describen la georreferenciación y el prototipo de la sala situacional a instaurar en SOS-HME. Estos son: Figura 15: Modelo de Negocio Detallado 5.2.1.1 Proceso de Administración Sistema Geográfico El proceso de administración de la data geográfica es la vía por el cual la data recolectada por los participantes del proyecto es vaciada en el sistema. Este proceso incluye la opción de hacer carga de archivos de extensión .gpx provenientes de GPS o de algún otro mecanismo de captura de data geográfica. Esta información tiene su correspondencia en la base de datos local de SOS-HME donde es almacenada. En el sistema OpenStreetMap, es actualizada con la data previa cargada por otros colaboradores de la comunidad y recargada en el mapa automáticamente para su uso. analysis SOS - HME SOS - HME A Proceso de ubicación Geografica Proceso de Sala Situacional Proceso de Administracion Sistema Geografico Data Del Paciente Información Cartografica de la localidad Descripción y Análisis del Diseño 53 Figura 16: Proceso de Administración de Sistema Geográfico Descripción y Análisis del Diseño 54 5.2.1.2 Proceso de sala situacional El proceso de sala situacional describe la interacción del usuario con el sistema SOS-HME cuando este desea conocer como es la problemática de los pacientes que se encuentra en la comunidad, contiene filtros de búsquedas que haces más amena la manipulación de grandes volúmenes de datos que representa el universo de pacientes de una localidad. Figura 17: Proceso de Sala Situacional 5.2.1.3 Proceso de ubicación geográfica El proceso de ubicación geográfica permite adherir a la información no confidencial del paciente coordenadas geográficas para que este pueda ser ubicado en la localidad donde pertenece. Este proceso tiene la posibilidad de delegar al usuario la ubicación exacta de su ubicación en caso que el mapa no contenga la calle a la cual pertenece. Figura 18: Proceso de ubicación geográfica act Proceso de Sala Situacional Inicio Seleccionar Criterio de Busqueda Buscar en Base de Datos Mostrar Mapa con Reultado Busqueda con Resultado Fin [No] [Si] analysis Proceso de ubicación Geografica Proceso de Carga Basica del Cliente Localidad Encontrada Inicio FIn Buscar Localizacion Geografica Crear Nueva Localidad No SI Descripción y Análisis del Diseño 55 5.2.2 Modelo de Requerimientos El modelo de requisitos es un catálogo estructurado de necesidades del usuario final. Estos están representados, ya sea como requisito o elementos de función. El modelo se divide en dos sub catálogos:  El paquete de requisitos funcionales contiene los requisitos y características que representan el comportamiento funcional y característico que el sistema en desarrollo debe apoyar.  El paquete de requisitos no funcionales contiene restricciones y niveles de rendimiento del sistema debe cumplir. Por ejemplo, los tiempos de respuesta, transacciones por segundo, la fuerza de seguridad. Figura 19: Modelo de Requerimientos Descripción y Análisis del Diseño 56 5.2.2.1 Requerimientos Funcionales El paquete de requisitos funcionales detalla el comportamiento que especifican cómo se procesará el sistema propuesto y como maneja la información. En él se detallan las características y las reglas que deben estar presentes para aplicar plenamente la funcionalidad deseada. Se requiere desarrollar un conjunto de requerimientos para la aplicación SOS Telemedicina Figura 20: Requerimientos por Funcionalidad Requerimientos Funcionales Prototipo de Sala situacional Se requiere la creación de una funcionalidad en el cual se puedan realizar las siguientes acciones propias de una sala situacional.  Filtrar la información geográfica de los pacientes del sistema SOS-HME por los siguientes criterios:  Estados, Municipios, Parroquia, Rango de fechas del registro, Edad del paciente, Sexo del paciente, Diagnostico del paciente.  Exponer los resultados de la búsqueda en el custom Features Prototipo de Sala Situacional Ampliar funcionalidades para la captura de datos geográficos de los paciente Administración de la data geografica Administración del mapa Digital Descripción y Análisis del Diseño 57 mapa geográfico de la aplicación. Ampliar funcionalidades para la captura de datos geográficos de los paciente Se requiere que al momento de registrar a los pacientes en el módulo de registro estos tenga la capacidad asociar su ubicación geográfica como parte de su registro.  Se requiere de ayudas al usuario que permita guiarle a este al momento de ubicarse geográficamente.  Se requiere que el usuario tenga la capacidad de ajustar su ubicación en caso de que las opciones disponibles no satisfagan sus necesidades. Administración de la data geográfica Se requiere que la data geográfica se pueda administrar y dar mantenimiento, para esto se requiere:  Listar la data geográfica.  Crear nueva data geográfica.  Actualizar la data geográfica.  Eliminar la data geográfica que sea obsoleta. Administración del mapa Digital Se requiere que los mapas se puedan personalizar en función de las necesidades del ambulatorio. Se requiere de una interfaz que permita manipular el mapa previo a la actualización. Tabla 4: Requerimientos Funcionales 5.2.2.2 Requerimientos No Funcionales El paquete de requisitos no funcionales especifica los diversos parámetros de funcionamiento que definen el entorno en el que va a existir el sistema. Estos son los Descripción y Análisis del Diseño 58 criterios que definen los niveles de rendimiento, escalabilidad, requerimientos de seguridad, copias de seguridad, recuperación de desastres y otros requisitos operativos. Figura 21: Requerimientos No Funcionales El sistema a desarrollar debe cumplir con los siguientes requerimientos no funcionales: Requerimientos No Funcionales  Presentar una interfaz basada en estándares, que pueda ser adaptada a las necesidades del Programa SOS Telemedicina para Venezuela  Aplicar estándares relacionados con la historia médica electrónica: de forma tal que pueda unificar procesos, procedimientos, términos y/o formatos a través de estándares reconocidos.  El sistema debe ser escalable: de manera que pueda extender su margen de operaciones permitiendo la agregación de nuevas funcionalidades.  El sistema debe ser mantenible: es decir que pueda ser modificado para custom Non-Functional Requirements Perfomance Escalabilidad Seguridad Persistencia Transporte Descripción y Análisis del Diseño 59 corregir fallas y mejorar su funcionamiento.  El sistema debe de ser robusto: pudiendo recuperarse de posibles errores y mantenerse en funcionamiento.  Utilizar tecnologías no propietarias: el sistema debe ser realizado bajo un entorno de desarrollos open source. Tabla 5: Requerimientos no funcionales 5.3 Diseño 5.3.1 Caso de Uso En el contexto general del software, un caso de uso es una secuencia de interacciones que se desarrollarán entre un sistema y sus actores en respuesta a un evento que inicia un actor principal sobre el propio sistema. Los diagramas de casos de uso sirven para especificar la comunicación y el comportamiento de un sistema mediante su interacción con los usuarios y/u otros sistemas. La descripción del caso de uso tenemos: Descripción y Análisis del Diseño 60 Figura 22: Descripción Caso de Uso El diagrama de caso de uso detallado se encuentra en la Figura 23, explota el comportamiento y las interacciones de los tres principales requerimientos que se exponen en los diagramas de requerimientos funcionales. Descripción y Análisis del Diseño 61 Figura 23: Caso de Uso 5.3.2 Diagrama de Actividades Un diagrama de actividades representa los flujos de trabajo paso a paso de negocio y operacionales de los componentes en un sistema. Un diagrama de actividades muestra el flujo de control general, los diagramas de actividades apoyan la descripción del diagrama de caso de uso detallado. uc Primary Use Cases HME Registrar Usuario Administrador Administrar Administrar Data GeograficaActualizar Mapa Seleccionar Ubicacion Geografica Personalizar Ubicacion Geografica Visualizar informacion del paciente geograficamente Realizar Busqueda Por Criterio Personal del Ambulatorio «include» «extend» «include» «extend» «extend» Descripción y Análisis del Diseño 62 5.3.2.1 Registrar Usuario La actividad refleja los pasos necesarios para cargar la data geográfica de un paciente al momento de realizar la creación de un perfil dentro del sistema SOS-HME, contempla el caso en el que el paciente no logra visualizar la localidad donde este reside. El sistema permite que el usuario cree un nuevo registro de calle o localidad Descripción y Análisis del Diseño 63 Figura 24: Actualizar Mapa Descripción y Análisis del Diseño 64 5.3.2.2 Administrar Data Geográfica La actividad refleja los pasos necesarios para cargar la data geográfica de una localidad en la cual exista un ambulatorio que este prestando servicio. Figura 25: Administrar Data Geográfica act Administrar Data Geografica_Activ ityGraphWithParam Start 1.-El usuario requiere (update, delete,create,read ) de algunos de los campos geograficos 2.-El sistema expone los campos necesarios para modificar la data de la tabla localidad 3.-El usuario realiza los cambios sobre los campos requeridos Entrada Valida 4.1.- Si la entrada de datos en inv alida el sistema env ia un mensaje de error y retorna al paso 2 del flujo normal FlowEnd 4.-El sistema v alida y guarda los cambios End [Entrada Invalida] Descripción y Análisis del Diseño 65 5.3.2.3 Visualizar información del paciente Geográficamente La actividad refleja los pasos para exponer la información de los pacientes en base a los criterios preseleccionados en la consulta, también existe la posibilidad que el usuario interactúe directamente sobre el mapa y que este responde en base a una mejor aproximación. Figura 26: Administrar Data Geográfica act Sala Situacional_Activ ityGraph Start 1.-El usuario requiere hacer una consulta en la sala situacional 2.-El sistema pide al usuario que llene el criterio de busqueda deseado Busqueda con resultados 3.1.- Si la busqueda no retorna resultados el sistema arroja una pantalla informativ a de busqueda no contemplada 3.2.-El sistema retorna al paso 1 del flujo pincipal FlowEnd 3.-El sistema realiza la busqueda en base a los criterios prev ios seleccionados 4.-EL sistema retorna la informacion solicitada End [Alterno] Descripción y Análisis del Diseño 66 5.4 Arquitectura de la Aplicación La arquitectura refleja los bloques de construcción tecnológicos en los cuales se sustenta la solución de la aplicación, pone en contexto las dependencias entre cada uno de los componentes de la aplicación. Figura 27: Arquitectura de la Aplicación Arquitectura Referencial SOS-HME Sistema de historias médicas electrónicas que se encuentra desarrollado actualmente IdEditor Este editor es una actualización crítica para un conjunto de herramientas de OpenStreetMap y está diseñado para mejorar radicalmente la experiencia de edición por primera vez mientras que proporciona una interfaz rápida e intuitiva para el mapeo en OpenStreetMap. Grails Grails es un marco de aplicación web completa para la Máquina virtual de Java. Aprovecha el lenguaje de programación Groovy y la deployment Topology SOS - HME MySQL NUBE http: //api.openstreetmap.org/ IDEditor Grails 1.8 Groov y 2.1 JVM 1.6 Extensiones espacial JDBC REST/HTTP REST/HTTP Descripción y Análisis del Diseño 67 convención sobre configuración para proporcionar una experiencia de desarrollo productivo y racionalizado. Groovy es un metalenguaje ágil y dinámico para la Máquina Virtual Java JVM Java es una tecnología que se usa para el desarrollo de aplicaciones que convierten a la Web en un elemento más interesante y útil. MySQL Base de datos Relacional Api.openStreetMap El API es el componente del servidor al que se dirigen las solicitudes REST. Las peticiones REST toman la forma de HTTP GET, PUT, POST y DELETE mensajes. Cualquier carga útil es en forma de XML, utilizando el tipo MIME "text / xml" y la codificación de caracteres UTF-8, y puede ser comprimido en la capa HTTP si el cliente indica a través de la cabecera HTTP "Accept" que puede manejar mensajes comprimidos. Tabla 6: Arquitectura Referencial Desarrollo de la Solución 68 6 DESARROLLO DE LA SOLUCIÓN A continuación se presenta la solución para el módulo de georreferenciación de la aplicación Historias Médicas Electrónicas. Como antecedentes tenemos 6.1 Georreferenciación de Zonas de Venezuela Los ambulatorios que están geográficamente distantes de los centros urbanos presentan un problema en cuanto a la logística necesaria para levantar sus datos geográficos. Este inconveniente es resuelto con la ayuda de pasantes de la Universidad Católica Andrés Bello (UCAB) enmarcados en el proyecto propuesto por SOS telemedicina de nombre: “Levantamiento de información geo referenciada para la implementación de las Salas Situacionales Electrónicas de los Centros Médicos Asistenciales de la red de SOS Telemedicina para Venezuela, ubicados en los estados Anzoátegui y Nueva Esparta”, El resultado de este trabajo es procesar esta información levantada a través de un GPS en un mapa que pueda ser visualizado vía web. Para lograrlo se utilizaron las siguientes herramientas: QGIS (Versión 1.7.4 Wroclaw): Sistema de Información Geográfica (SIG) de código libre para plataformas GNU/Linux, Unix, http://es.wikipedia.org/wiki/Mac_OS y Microsoft Windows. Siendo QGIS un SIG, es una integración organizada de hardware, software y datos geográficos diseñada para capturar, almacenar, manipular, analizar y desplegar información geográficamente referenciada con el fin de resolver problemas complejos de planificación y gestión geográfica. Dentro de las extensiones que se utilizaron junto con la herramienta se incluyen: a) Openlayer Plugin (Versión 0.90): Es una extensión que se puede agregar a QGIS, este complemento permite que las capas de Google, Bing y Yahoo se añadan al software. De esta manera la información cartográfica de esas compañías se pueden utilizar como capas en la aplicación. JOSM (Versión 5356): Es uno de los principales editores del mapa con que cuenta OpenStreetMap (OSM). Su página principal se encuentra en http://josm.openstreetmap.de/, donde se puede descargar la última versión. Para http://es.wikipedia.org/wiki/Sistema_de_Informaci%C3%B3n_Geogr%C3%A1fica http://es.wikipedia.org/wiki/C%C3%B3digo_libre http://es.wikipedia.org/wiki/C%C3%B3digo_libre http://es.wikipedia.org/wiki/GNU/Linux http://es.wikipedia.org/wiki/Unix http://es.wikipedia.org/wiki/Mac_OS http://es.wikipedia.org/wiki/Microsoft_Windows http://es.wikipedia.org/wiki/Microsoft_Windows http://es.wikipedia.org/wiki/Hardware http://es.wikipedia.org/wiki/Software http://es.wikipedia.org/wiki/Geodato http://es.wikipedia.org/wiki/Georreferenciaci%C3%B3n Desarrollo de la Solución 69 su funcionamiento se requiere al menos tener instalado en el PC Java 1.6. Dentro de las extensiones que se utilizaron junto con la herramienta se incluyen: a) OpenData: Este complemento está diseñado para facilitar el análisis de los datos geográficos obtenidos de varios portales de datos abiertos (como por ejemplo QGIS) que proporcionan datos compatibles con OSM. b) Utilsplugin2: Es otra colección de herramientas útiles con seguimiento a UtilsPlugin ahora se incluye en el núcleo de JOSM. 6.1.1 Descripción del Proceso En la primera parte se incluyen los datos cartográficos que fueron previamente levantados a través de un GPS, dichas zonas no poseen ningún tipo de cartografía digital en mapas virtuales conocidos. Los datos que fueron recolectados se cargaron en la aplicación QGIS como se muestra en la Figura 28. Figura 28: Menú de la herramienta QGIS (A la izquierda zonas cartografiadas, A la derecha menú para desplegar la información). Desarrollo de la Solución 70 Existe una zona cartografiada a través de trazas de GPS ya que al seleccionar una capa se puede observar las calles de la zona, en este caso se toma la zona de “Zuata” como se muestra en la Figura 29. Figura 29: Muestra las calles de una determinada zona en este caso se muestra la capa de las calles de Zuata. Esta herramienta engloba las diferentes capas que se pueden tener de determinadas zonas en un proyecto. Este proyecto existe bajo una extensión de “Quantum GIS Project” que a su vez está compuesto por otras extensiones que componen las capas del proyecto como son: .shp, .shx, .dbf, y .prj. A través del complemento OpenData de la herramienta JOSM es posible convertir el formato .shp (que contiene las capas con las calles de una zona) a un formato .osm manejado por la herramienta. A continuación se describe el proceso. Desarrollo de la Solución 71 Se deben configurar los complementos necesarios para trabajar con la herramienta, esto se hace a través del menú superior en “Editar” -> “Preferencias” como se muestra en la Figura 30. Figura 30: Menú de herramientas de la opción “Editar” Allí se despliega un menú en el cual se selecciona el cuarto icono (“Configurar los complementos disponibles”). Seleccionar los complementos de “opendata” y “utilsplugin2”. Como se ilustra en la Figura 30 y 31 respectivamente, para luego presionar el botón “Aceptar”. Desarrollo de la Solución 72 Figura 31: Menú de herramientas de la opción “Preferencias” Figura 32: Complemento a instalar “openData” Figura 33: Complemento a instalar “utilsplugin2”. Desarrollo de la Solución 73 Luego de haber instalado los complementos es necesario reiniciar la aplicación para empezar a trabajar con las capas. Al iniciar la aplicación la primera pantalla que se encuentra será la de la Figura 34. En ella se tiene un menú principal donde se puede al seleccionar la opción de “Archivo”. Y posteriormente la opción “Abrir” donde se podrá abrir una capa de tipo .shp (o de otros tipo que la herramienta permita) que contenga las calles de una localidad. Figura 34: Primer menú de la herramienta JOSM con menú “Archivo” Desarrollo de la Solución 74 Al abrir una capa se puede observar que es desplegada en la parte izquierda de la aplicación, en el menú de la derecha están las propiedades de la capa. Al momento de abrir la capa solo se encuentran los puntos de una ruta, es necesario complementar con otra capa que provee la aplicación que es la de openStreetMap (en caso de que contengan datos que esta capa no tenga). Para activar esta capa se oprime el botón señalado en la Figura 35 de “Descargar Datos del Mapa del Servidor”. Figura 35: En la izquierda del menú se observa la cartografía de una zona previamente levantada (Zuata) y en la parte derecha propiedades y configuraciones de la capa. Esta opción permite acceder a los datos de mapas almacenados por openStreetMap. En la Figura 36 se puede ver un menú con un cuadro rojo que permitirá descargar la zona deseada (no necesariamente se limita a Venezuela, a través del scroll se puede mover con el mapa y seleccionar cualquier zona del mundo con un tamaño adecuado) en este caso se selecciona la zona de Zuata y se presiona “descargar” asegurando de que el checkbox este marcado como “Descargar como Desarrollo de la Solución 75 nueva capa”. Esto permite diferenciar las 2 capas (la propia y la que es descargada de openStreetMap). Figura 36: Menú para realizar descarga de los datos de OpenStreetMap En la Figura 37 se pueden observar que existirán 2 capas, la nueva capa con datos de openStreetMap y la propia que se carga desde el principio. El software permite realizar diversas operaciones sobre nuestra capa como convertir las rutas en vías, identificar calles, etc. Desarrollo de la Solución 76 Figura 37: Menú de JOSM con las 2 capas descargadas. Luego de procesar la capa (agregar rutas, puntos de referencia, identificar vías) se proceden a subir los cambios al servidor de openStreetMap. A través del botón “Actualizar en el servidor…” como se muestra en la Figura 38. Figura 38: Herramienta JOSM con capa procesada. Desarrollo de la Solución 77 Se desplegara el siguiente mensaje. Que se muestra en la Figura 39. Figura 39: Mensaje al momento de subir datos al servidor. Al presionar el botón “Continuar” se despliega una pantalla que se muestra en la Figura 40, donde se indican los posibles errores que se tienen en la capa. Al presionar “Cancelar” se cerrara el cuadro de dialogo y podrá corregir los errores conseguidos. Figura 40: Mensaje con errores en las capas. Desarrollo de la Solución 78 Al presionar el botón “Cancelar” se muestra un panel con los errores encontrados, como se muestra en la Figura 41 y advertencias encontrados. Se deben corregir los errores antes de subir los datos para mantener la integridad de los datos en el servidor. Figura 41: Panel de control de JOSM con los errores de las capas. Algunos errores pueden ser corregidos a través del botón “Fix” que se muestra en la Figura 42, otros deben ser manejados manualmente. Es aconsejable identificar la causa de los errores y advertencias para que puedan ser resueltos de manera rápida en un futuro. Figura 42: Panel de control de validación de Errores. Desarrollo de la Solución 79 Luego de haber corregido los errores se proceden a subir los datos al servidor, como se muestra en la Figura 43. Allí se muestra un breve resumen de los cambios que estamos subiendo y se debe colocar una breve descripción de lo que se está haciendo. Los datos se subirán a través del botón “subir cambios”. Figura 43: Panel de control para subir cambios Como último paso antes de subir los datos al servidor se solicitara un usuario y una contraseña, como se muestra en la Figura 44. (En este caso se está utilizando una cuenta previamente creada a través de la página openStreetMap user: geolocalizacionsos pass: geolocalizacionsos). Estos cambios pueden demorar hasta 1 hora en verse reflejados en su página Web. Desarrollo de la Solución 80 Figura 44: Panel de control para subir cambios. Como se visualizaba Zuata en la siguiente dirección www.openstreetmaps.org, antes y después de ejecutar los pasos señalados. En la figura 45 y figura 46 se pueden observar los cambios realizados. Figura 45: Antes de subir los datos en el servidor. http://www.openstreetmaps.org/ Desarrollo de la Solución 81 Figura 46: Cambios subidos y mostrados en la página. 6.2 Resumen de Información Georreferenciada Con las herramientas descritas se logró migrar una cartografía de una zona desconocida a un mapa virtual que puede ser accedido desde cualquier navegador, sin necesidad de una herramienta intermedia para visualizar el mapa de una determinada localidad. El proceso antes mencionado sirve como punto de partida en la consolidación de una Sala Situacional, ya que este proceso garantiza que los datos recolectados a través de un GPS pueden ser consolidados en un mapa virtual de acceso vía remoto. A través de este proceso se logró identificar una zona de Venezuela con calles y ubicación geográfica. Integrar este mapa virtual en la aplicación para que sea capaz de ubicar pacientes en el siguiente proceso: Desarrollo de la Solución 82 6.3 Integración del módulo de visualización Geográfica de pacientes en Aplicación de “SOS Historias Médicas Electrónicas” Como primera tarea se identificó las principales tablas demográficas que se ven involucradas en los procesos de ubicación de pacientes, modificar estas estructuras (en caso de que lo ameriten) para que trabajen con tipos de datos espaciales que permitan el almacenamiento de la longitud y latitud de un objeto almacenado en esas estructuras. La figura 47 muestra el cambio realizado a las estructuras, donde se agrega el campo coordenadas (de tipo GEOMETRY) que permite identificar al objeto por la latitud y longitud geográfica. Figura 47: Tablas Demográficas. La tabla “lugar” almacena la distribución geográfica de una determinada zona, la granularidad de la información está distribuida de la siguiente manera: País, Desarrollo de la Solución 83 Estados, Municipios, Parroquias y Calles; donde cada país tiene asociado un conjunto de estados, los estados tienen asociados un conjunto de municipios, y de la misma manera para parroquias y calles. El campo “tipolugar” almacena que tipo de localidad se está almacenando, el campo “nombre” almacena el nombre de la localidad y el campo “padre_id” establece la jerarquía de los tipos de lugares. Las tablas “peson_data” y “person_identity” almacena información relevante de localización acerca de los pacientes, la tabla “dirección” establece la dirección de residencia de un paciente y la tabla “dirección_lugar” vincula a la tabla “lugar” con la “dirección” del paciente. La figura 48 ilustra las librerías utilizadas para el desarrollo de este módulo, se agregaron 2 librerías que permiten el manejo de objetos espaciales alojados en la base de datos y la mismas deben ser configurada en la fuente de dato del proyecto. Figura 48: Librerías y extracto de archivo de configuración Desarrollo de la Solución 84 6.3.1 Módulo de ingreso de datos geográficos para pacientes Este módulo permite al usuario registrar la ubicación geográfica en donde reside un determinado paciente, para realizar este módulo se tomaron en cuenta respetar el proceso de captura y procesamiento de los pacientes que pertenecen al sistema de historias medicas electrónicas La figura 49 ilustra la captura de datos necesarios para la ubicación geográfica de un paciente, la granularidad de la tabla “lugar” se puede ver en los combos mostrados en la pantalla, la figura 50 muestra el grano más pequeño para localizar un paciente que está definido por el elemento calle. En caso de que una calle no está definida existe una funcionalidad para que el usuario coloque en el mapa la ubicación exacta de su vivienda seleccionándola en el mapa como lo muestra la figura 51. Figura 49: Datos de ubicación para un paciente Desarrollo de la Solución 85 Figura 50: Ubicación de calle en el mapa Figura 51: Ingreso de Nueva Calle Del lado del cliente se cuenta con los controles sobre el mapa como se muestra en un extracto en la Figura 52 y del lado del servidor se obtienen los datos geográficos de los lugares solicitados Figura 53. Desarrollo de la Solución 86 Figura 52: Extracto de Código del lado del Cliente Figura 53: Extracto de Código del lado del servidor. 6.3.2 Módulo de módulo de visualización Geográfica El módulo de visualización geográfica presenta los datos de los pacientes previamente ingresados en el sistema, la figura 54 ilustra la primera pantalla del módulo de sala situacional donde existen filtros para desplegar la data, la figura 55 muestra los puntos rojos que indican los pacientes filtrados por zonas, al hacer click Desarrollo de la Solución 87 sobre ellas se muestra su información demográfica así como el diagnóstico que le fue otorgado por un especialista (figura 56). Existe un panel donde se muestran los datos totalizados de las búsquedas realizadas en la sala en la parte superior del mapa. Figura 54: Módulo de sala situacional. Figura 55: Pacientes mostrados en el mapa Desarrollo de la Solución 88 Figura 56: Información de Pacientes 6.3.3 Módulo de Administración El módulo de administración permite al administrador de sistemas gestionar el contenido de la data geográfica almacenada en el sistema (figura 57). El módulo permite agregar, editar, eliminar y consultar datos sobre las diferentes localidades almacenadas (figura 58). Es importante mantener los datos de las localidades lo más exacto posible en cuanto a coordenadas ya que los mismos son insumos para la sala situacional y el registro demográfico de los pacientes. Desarrollo de la Solución 89 Figura 57: Módulo de Edición de Localidades Figura 58: Menú de Edición de Localidades Desarrollo de la Solución 90 6.4 Editor de Mapa Sobre la Plataforma OpenStreetMap Para la implementación del proyecto SOS telemedicina se requiere que los nuevos mapas levantados fuesen adheridos al universo de mapas de OpenStreetMap. En la investigación se contactó a un grupo de desarrolladores provenientes de la compañía MapBox, cuyos integrantes forma parte activa del OpenStreetMap porject. Éstos crearon IdEditor un editor de mapas basado en web, apoyado con tecnologías de javasripts “D3” y arquitectura de aplicaciones “BigData”. Figura 59: Editor IdEditor. Basados en el levantamiento de información previa “Registrar ”, se realizó la adecuación de implementar y acoplar el editor al sistema de HME. Dicha adecuación se puede entender mejor en la siguiente ilustración. Desarrollo de la Solución 91 Figura 60: Solución Alto Nivel. Del diseño mostrado en la figura anterior se propone la siguiente solución: 1. Primero se creó una pantalla donde se pudiera obtener la localización de la zona del mapa que se quiere actualizar. (Figura 61) Desarrollo de la Solución 92 Figura 61: Pantalla Inicial para Editar Mapa Se requiere el detalle de la localización del sector que se desea actualizar (latitud y longitud). La figura 62 ilustra los datos necesarios para editar el mapa. Figura 62: Selección de localidades para editar el mapa Desarrollo de la Solución 93 2. Una vez seleccionado los campos requeridos se invoca el editor embebido en la aplicación. Al editor se le pasan las coordenadas requerida mediante un método POST, en este se especifican las coordenadas de la localidad a modificar como se muestra en la figura 63. Figura 63: Menú de Edición 3. El editor cuenta con una serie de herramientas de edición, el mapa puede ser ajustado a las nuevas necesidades de la localidad. La más importante de esta es la carga de archivos de extensión “.gpx” extraídos de algún dispositivo de captura satelital y que permite calcar los cambios realizados en campo, plasmando en la aplicación. La traza verde como se muestra en la figura 64 muestra un recorrido realizado para zonas no cartografiadas. Es una excelente herramienta de construcción de calles para el mapa. Desarrollo de la Solución 94 Figura 64: Cargando archivo de GPS al editor 4. Tomando como base la traza de un GPS se pueden agregar y/o editar nuevas calles a la localidad seleccionada previamente. Figura 65: Menú para edición de Calles 5. Al momento de guardar el mapa actualizado se producen dos acciones en paralelo. La primera se guarda en la base de datos local la descripción geográfica de los nuevos cambios en el mapa. La segunda actualiza el mapa en la nube para que otra persona pueda ver los cambios realizados. Desarrollo de la Solución 95 Figura 66: Mensaje de actualización exitosa de la Aplicación 6. Si la actualización se cumple con éxito el sistema retoma el control de la aplicación para que pueda ser modificado nuevamente. 6.5 Pruebas funcionales sobre la aplicación A continuación se muestran el conjunto de pruebas funcionales de tipo caja cerrada que se realizaron. Las pruebas se ejecutaron con la participación del equipo del Centro de Informática Médica para su aceptación. PRUEBAS Nombre de la prueba: Inicio de sesión Prueba: 1 Objetivo: Constatar el inicio de sesión del usuario administrador dentro del módulo de administración. Entradas:  Se ingresa para el rol del sistema, el nombre de usuario y contraseña. Evaluación de la prueba: Satisfactoria Resultado Obtenido: El usuario accede al sistema y puede realizar acciones según su perfil. Observaciones: Se constata que efectivamente el usuario ingresa al sistema de manera correcta. Tabla 7: Prueba funcional Nº1 Desarrollo de la Solución 96 PRUEBAS Nombre de la prueba: Creación de una nueva localidad geográfica Prueba: 2 Objetivo: Constatar la creación de una nueva localidad en él sistema de georreferenciación. Entradas:  Llenar los campos necesarios para generar una nueva localidad Geográfica Evaluación de la prueba: Satisfactoria Resultado Obtenido: Se creó una nueva localidad geográfica en el mapa Observaciones: Satisfactoria Tabla 8: Prueba funcional Nº2 PRUEBAS Nombre de la prueba: Editar una localidad geográfica Prueba: 3 Objetivo: Modificar los atributos de una localidad en él sistema de georreferenciación. Entradas:  Llenar los campos necesarios para modificar la localidad Geográfica seleccionada Evaluación de la prueba: Satisfactoria Resultado Obtenido: Se modificó la localidad geográfica en el mapa Observaciones: Satisfactoria Tabla 9: Prueba funcional Nº3 PRUEBAS Nombre de la prueba: Crear un conjunto de nuevas calles mediante un archivo .gpx Prueba: 4 Objetivo: Crear un conjunto de calles en el mapa virtual desde un archivo .gpx Entradas:  Archivo .gpx  Conjunto de nombres de calles asociadas al archivo Evaluación de la prueba: Satisfactoria Desarrollo de la Solución 97 Resultado Obtenido: Se logró introducir nuevas calles en el mapa virtual Observaciones: Satisfactoria Tabla 10: Prueba funcional Nº4 PRUEBAS Nombre de la prueba: Cartografiar localidades pertenecientes al programa SOS Telemedicina para Venezuela Prueba: 5 Objetivo: Constatar el completo funcionamiento del proceso de levantamiento cartográfico de las localidades de Mapire del estado Anzoátegui y de la Isla de Coche en el estado Nueva Esparta Entradas:  Archivos de extensión .GPX como plantilla para el levantamiento de las calles de las localidades mencionadas Evaluación de la prueba: Satisfactoria Resultado Obtenido: Se actualizo la zona cartografiada exitosamente Observaciones: Satisfactoria Tabla 11: Prueba funcional Nº5 Desarrollo de la Solución 98 6.5.1 Pruebas funcionales sobre el módulo de registro del usuario PRUEBAS Nombre de la prueba: Inicio de sesión Prueba: 6 Objetivo: Constatar el inicio de sesión del usuario “personal médico” dentro del módulo de gestión de pacientes. Entradas:  Se ingresa para el rol del sistema, el nombre de usuario y contraseña. Evaluación de la prueba: Satisfactoria Resultado Obtenido: El usuario accede al sistema y puede realizar acciones según su perfil. Observaciones: Se constata que efectivamente el usuario ingresa al sistema de manera correcta. Tabla 12: Prueba funcional Nº6 PRUEBAS Nombre de la prueba: Crear un paciente con su ubicación geográfica Prueba: 7 Objetivo: Crear un paciente con toda su descripción geográfica (estado, municipio, parroquia ,calle) Entradas:  Para los datos geográficos se requiere el estado, municipio, parroquia, calle. Evaluación de la prueba: Satisfactoria Resultado Obtenido: Se crea el paciente con sus datos geográficos Observaciones: Satisfactoria Tabla 13: Prueba funcional Nº7 PRUEBAS Nombre de la prueba: Editar la ubicación Geográfica del paciente Prueba: 8 Objetivo: Editar un paciente con toda su descripción geográfica (estado, municipio, parroquia ,calle) Desarrollo de la Solución 99 Entradas:  Para los datos geográficos se requiere el estado, municipio, parroquia, calle. Evaluación de la prueba: Satisfactoria Resultado Obtenido: Se modificó el estado geográfico del paciente Observaciones: Satisfactoria Tabla 14: Prueba funcional Nº8 6.5.2 Pruebas funcionales sobre el módulo de sala situacional PRUEBAS Nombre de la prueba: Visualizar la información clínica mediante criterio de búsqueda de los filtros Prueba: 9 Objetivo: Desplegar información en el mapa virtual mediante los filtros de búsqueda Entradas:  Criterio de búsqueda preestablecido en los filtros de la aplicación Evaluación de la prueba: Satisfactoria Resultado Obtenido: El mapa arrojo la información solicitada mediante el filtro Observaciones: Satisfactoria Tabla 15: Prueba funcional Nº9 PRUEBAS Nombre de la prueba: Visualizar la información clínica mediante la interacción directa con el mapa virtual Prueba: 10 Objetivo: Desplegar información en el mapa virtual mediante la interacción directa con este. Entradas:  Click del ratón sobre el área del mapa a estudiar Evaluación de la prueba: Satisfactoria Resultado Obtenido: El mapa arrojo la información solicitada en base a la navegación del mapa Desarrollo de la Solución 100 Observaciones: Satisfactoria Tabla 16: Prueba funcional Nº10 PRUEBAS Nombre de la prueba: Borrar la búsqueda realizada Prueba: 11 Objetivo: Poner en cero la búsqueda. Entradas:  Hacer click en limpiar búsqueda Evaluación de la prueba: Satisfactoria Resultado Obtenido: El mapa queda en su versión original Observaciones: Satisfactoria Tabla 17: Prueba funcional Nº11 Resultados Obtenidos 101 7 RESULTADOS OBTENIDOS En base a los objetivos planteados se obtuvieron los siguientes resultados: a) Una vez analizado los componentes con los cuales se construyo el sistema de historias médicas electrónicas se verifico que su estructura basada en el modelo de tres capas (Modelo, Vista, Controlador) permite la adecuación de nuevas funcionalidades sin afectar la estructura base del sistema. El marco de trabajo (framework) del sistema de historias medicas electrónica es Groovy & Grails que están basados en el lenguaje de programación JAVA. b) Se analizaron distintos sistemas de información geográfica resultando seleccionado el set de herramientas de OpenStreetMap por ser libre de licenciamiento, por tener una comunidad de colaboradores en constante crecimiento y desarrollado bajo nuevos paradigmas como es el concepto de software como servicio. c) Se modifico el modelo de datos preexistente de la ubicación de los pacientes agregando el campo coordenadas en la tabla lugar para que de esta manera puedan ser referenciados geográficamente. d) Se cartografiaron y almacenaron las calles de las localidades adscritas al programa SOS telemedicina en la base de datos espacial de OpenStreetMap y .sus referencias guardadas en la tabla lugar de la base de datos local del sistema historia médicas electrónicas. e) Presentación de la información geográfica de los pacientes mediante un panel con mapa dinámico y filtros con las características más resaltantes de las historias clínicas asociadas. f) Finalmente, se realizaron pruebas funcionales luego del desarrollo de cada módulo, Las mismas resultaron satisfactorias y permitieron la corrección y mejoramiento de varias funcionalidades. Las pruebas se basaron en las acciones que puede realizar cada usuario dentro del sistema, y en analizar el flujo dentro del mismo. Conclusiones y Recomendaciones 102 8 CONCLUSIONES Y RECOMENDACIONES El desarrollo de este trabajo dio como resultado una nueva versión del sistema SOS-HME al incorporar un módulo de georreferenciación. La herramienta de georreferenciación OpenStreetMap permitió la integración de los datos geográficos en un mapa enriquecido por la información clínica de los pacientes de los ambulatorios de los programas SOS Telemedicina para Venezuela. Agregando los campos de coordenadas de los componentes georreferenciados se enriqueció el modelo de datos del sistema de historia médica electrónica existente. Utilizando el sistema de georreferenciación desarrollado en este trabajo se cartografió las localidades de Mapire en el estado Anzoátegui y de la Isla de Coche en el estado nueva Esparta en la base de datos espacial de OpenStreetMap y .sus referencias guardadas en la tabla lugar de la base de datos local del sistema historia médicas electrónicas. La sala situacional requiere de información geográfica detallada para el proceso de inferencia de situaciones de salud local y el modulo de georreferenciación aporta esa información. Es necesario destacar que fue invertida inicialmente gran cantidad de tiempo para analizar y comprender el funcionamiento de la herramienta OpenEHR Gen Framework. Ninguno de los miembros del equipo de desarrollo estaba familiarizado con el entorno Groovy & Grails. Esa inversión inicial repercutió en beneficios al momento de realizar modificaciones sobre la aplicación. Así mismo utilizar la metodología de desarrollo RUP que permitió la adaptabilidad del proyecto frente a los esperados cambios de requisitos sobre la marcha, además agilizó el desarrollo permitiendo redefinir la orientación del mismo luego de culminada cada iteración con la finalidad de satisfacer los requisitos restantes. La solución software elaborado compuesto por el módulo de georreferenciación y por el mapa virtual son un primer paso para acercar la sala situacional en salud Conclusiones y Recomendaciones 103 8.1 Recomendaciones Para futuros proyectos que sigan la línea de investigación desarrollada en este trabajo de grado se recomienda: 1. Cartografiar el cien por ciento de las localidades adscritas al programa SOS Telemedicina para Venezuela. 2. Abordar la posibilidad de generar mecanismos para integrar las bases de datos geográficas de cada localidad (ambulatorio) en una sola base de datos centralizada. 3. Incluir la data geográfica del paciente en los archivos CDA que son la base para la interoperabilidad de las historias clínicas médicas. 4. Para completar el concepto de sala situacional, el módulo de visualización geográfica debería estar en la capacidad de generar reportes en base a la información clínica del paciente. 5. Encaminar el sistema de Historias Médicas Electrónicas a nuevos paradigmas como lo son los temas de nube, en especial SAAS (Software como Servicio) lo que permitirá su uso de manera extendida en el territorio nacional en otras latitudes. Glosario de Siglas 104 9 REFERENCIAS BIBLIOGRAFICAS Abad Mota, S. (2005). Paradigmas de Modelado de Base de Datos. Apuntes de clase, Universidad del Azuay, Ecuador. Bande, E., Barbour, M., Briceño, G., D'Angelo, A., De Gouveia, H., Diaz Lugo, Y., y otros. (2012). Levantamiento de informacion georreferenciada para la implementacion de salas situacionales electronicas de los centros medicos asistenciales de la red de SOS Telemedicina para Venezuela, ubicados en los estados Anzoategui y Nueva Esparta. Documento Tecnico, Universidad Catolica Andres Bello, Caracas. Bennet, J. (2010). OpenStreetMap: Be your own Cartographer. Birmingham: Packt Publishing. Blobel, B. (2002). Analysis, Design and Implementation of Secure and Interoperable Distributed Health Information Systems. Amsterdam: IOS Press. Brent Hall, G., & Michael, L. (2008). Open Source Approaches in Spatial Data Handling. Springer. Cifre Baixeras, R. (s.f.). http://www.historiamedica1.com.ve. Recuperado el 10 de 2013, de http://www.historiamedica1.com.ve/Index_archivos/Page762.htm ESRI. (1995). http://www.esri.com. Recuperado el 20 de Mayo de 2014, de http://resources.arcgis.com/es/help/getting-started/articles/026n0000000s000000.htm ISO (2008). ISO 19101:2002 Geographic information -- Reference model. [En Linea] Disponible en: http://www.iso.org/. [Ultimo Acceso 23 de Octubre 2013]. ISO (2003). ISO 19107:2003: Geographic information -- Spatial schema. [En Linea] Disponible en: http://www.iso.org/. [Ultimo Acceso 23 de Octubre 2013]. ISO (2004). ISO 19125-1:2004 - Geographic information -- Simple feature access -- Part 1: Common architecture. [En Linea] Disponible en: http://www.iso.org/. [Ultimo Acceso 23 de Octubre 2013]. ISO (2004). ISO 19125-2:2004 Geographic information -- Simple feature access -- Part 2: SQL option. [En Linea] Disponible en: http://www.iso.org/. [Ultimo Acceso 23 de Octubre 2013]. Kofler, M. (2005). The Definitive Guide to MySQL 5. Appress. Konig, D., Laforge, G., King, P., Champeau, C., D'arcy, H., Pragt, E., y otros. (2013). Groovy in Action. Manning Publications. Ledbrook, P., & Smith, G. (2013). Grails in Action. California: Manning Publications. Glosario de Siglas 105 Mitchell, T. (2008). Web Mapping Illustrated. California: O'Reilly. Neteler, M., & Mitasova, H. (2005). OPEN SOURCE GIS: A GRASS GIS Approach. Boston: Springer Science. OpenLayers (2010). OpenLayers JavaScript Mapping Library. [En Linea] Disponible en: http://dev.openlayers.org/apidocs/files/OpenLayers-js.html. [Ultimo Acceso 23 de Octubre 2013]. OpenLayers (2010). OpenLayers JavaScript Mapping Library. [En Linea] Disponible en: http://dev.openlayers.org/apidocs/files/OpenLayers-js.html. [Ultimo Acceso 23 de Octubre 2013]. OpenEHR (2011). OpenEHR Gen Framework. [En Linea] Disponible en: http://code.google.com/p/open-ehr-gen-framework/. [Ultimo Acceso 23 de Octubre 2013]. OpenStreetMap Wiki(2013). OpenStreetMap Wiki. [En Linea] Disponible en: http://wiki.openstreetmap.org/w/index.php?title=Main_Page&oldid=941300. [Ultimo Acceso 22 de Octubre 2013]. Peláez, G. B. (2006). Sala Situacional: Instrumento para la vigilancia de Salud Publica. Venezuela: Gustavo Bergonzoli. Prieto Padron, A. A., & Rodriguez Leon, A. A. (2012). Sistema de Historias Medicas, Programa SOS Telemedicina para Venezuela. Trabajo Especial de Grado, Universidad Central de Venezuela, Caracas. Urueña, A., Ferrarie, A., Blanco , D., & Valdecasa, E. (2012). Cloud Computing: Retos y Oportunidades. Madrid: ONTSI. Glosario de Siglas 106 10 GLOSARIO DE SIGLAS ADL: Archetype Definition Language. En español: lenguaje de definición de arquetipos. ANSI: American National Estandards Institute. En español: instituto nacional americano de estándares. API RestFull: cualquier interfaz web simple que utiliza XML y HTTP ASTM: American Section of The International Association for Testing Materials. En español: sociedad americana para prueba de materiales. CAIBCO: Centro de Análisis de Imágenes Biomédicas Computarizadas. CDA: Clinical Document Architecture. En español: arquitectura de documento clínico electrónico. CEN: Comité Europeo de Normalización. CEPAL: Comisión Económica para América Latina y el Caribe. CI: Cédula de Identidad. CIE-10: Clasificación Internacional de Enfermedades. En ingles ICD-10. CRUD: Create Read Update Delete. En español: crear, leer, actualizar, borrar. CXF: Marco de trabajo para implementación de servicios web. GNU: Movimiento y comunidad de software y conocimiento libre. GORM: Grails Object Relational Mapping. GPL: GNU General public License. En español: licencia pública general de GNU. GUI: Graphic User Interface. En español: interfaz gráfica de usuario. HCE: Historia Clínica Electrónica. HCI: Historia Clínica Informatizada. HIS: Hospital información System. En español: sistema de información hospitalaria. HL7: Health Level Seven. En español: organización de desarrollo de estándares. Glosario de Siglas 107 HM: Historia Médica. HME: Historia Médica Electrónica. HTML: Hyper Text Markup Language. En español: lenguaje de marcado de hipertexto HTTP: Hiper Text Transfer Protocol. En español: protocolo de transferencia de hipertexto. IDE: Integrated Development Environment. En español: entorno de desarrollo integrado. IEEE: Institute of Electrical and Electronics Engineers. En español: instituto de ingenieros eléctricos y electrónicos. IMP: Índice Maestro de Pacientes. IoC: Inversión of Control. En español: inversión de control. ISO/CEN 13606: Norma del CEN diseñada para lograr la interoperabilidad semántica en la comunicación de la HCE. Esta norma está aprobada por ISO. ISO: Organización Internacional de estandarización. IAAS Infraestructura como servicio MVC: Modelo Vista Controlador. OMS: Organización Mundial de la Salud. OpenEHR: Open Electronic Healt Record. En español: registro electrónico de salud abierto. OPS: Organización Panamericana de la Salud. PAAS Plataforma como servicio RIM: Reference Information Model. En español: modelo de referencia de información. SIS: Sistema de Información en Salud. SAAS Software como servicio SOAP: Simple Object Access Protocol. En español: protocolo estándar que define cómo dos objetos en diferentes procesos pueden comunicarse por medio de intercambio de datos XML. SQL: Structured Query Language. En español: lenguaje declarativo de acceso a bases de datos relacionales. SVN: Sistema de Control de Versiones. Glosario de Siglas 108 TCP/IP: Modelo de descripción de protocolos de red de internet. TIC: Tecnologías de la información y la comunicación. UML: Unified Modeling Language. En español: lenguaje unificado de modelado. UUID: Universally Unique Identifier. En español: identificador único universal. WS- SECURITY: Web Servicies Security. En español: seguridad en servicios web. XML: Extensible Markup Language. En español: metalenguaje extensible de etiquetas. Tabla 18: Glosario de Siglas Apéndice 109 11 APÉNDICE Se anexa la actualidad de las salas situacionales de los ambulatorios que estas anexados al proyecto SOS Telemedicina. Figura 67: Cartelera del Ambulatorio rural tipo III Pampatar Figura 68: Cartelera Hospital de Salamanca Apéndice 110 Figura 69: Cartelera Centro Ambulatorio Integral José Francisco Marva Figura 70: Cartelera Ambulatorio Municipio García Nueva Esparta