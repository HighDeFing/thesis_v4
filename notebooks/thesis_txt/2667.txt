UNIVERSIDAD CENTRAL DE VENEZUELA FACULTAD DE CIENCIAS ESCUELA DE COMPUTACIÓN SISTEMA DE HISTORIA MÉDICA ELECTRÓNICA, PROGRAMA SOS TELEMEDICINA PARA VENEZUELA Trabajo Especial de Grado Elaborado ante la ilustre Universidad Central de Venezuela Por los Bachilleres: Armando Alberto Prieto Padrón Ángel Alejandro Rodríguez León Para optar por el título de Licenciado en Computación Tutor: Robinson Rivas Caracas, Mayo de 2012 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 2 Dedicatoria A mis padres, porque ambos me han dado siempre lo mejor, son mi ejemplo de honestidad, constancia y sacrificio, por ustedes lo he logrado. A mi mamá por ser una en un millón, por todo su amor y compresión. A mi papá por su temple y valentía antes las adversidades. A mi hermana, Anier, porque es mi hermana favorita. A mi queridísima abuela Cruz, testigo de noches incansables de trabajo. A mis amigos del oratorio, por todo lo que hemos compartido. Armando Dedico este trabajo especial de grado primero a mi madre que me apoya desde que tengo uso de razón, a mi padre por su ejemplo de honestidad que siempre me ha dado. A toda mi familia porque de una u otra forma esto es fruto de su amor y por sobre todo a mi abuelo Ángel Custodio Rodríguez Ortiz persona de la cual a pesar de no estar con nosotros todavía sigo aprendiendo en esta vida. A mis amigos del alma que siempre han creído en mí y a todas las personas que puedan beneficiarse de este proyecto directa o indirectamente. Ángel Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 3 Agradecimientos A Dios. A nuestras familias. A Robinson Rivas. A Nancy Urbina. A Héctor Arrechedera. A Jesús Velázquez. A Juan Carlos Escalante. A Pablo Pazos. A Leandro Carrasco. A Christian Oestreich. Y a todo el equipo del Programa SOS Telemedicina para Venezuela. http://www.christianoestreich.com/ Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 4 RESUMEN Este trabajo presenta la elaboración de un sistema de historia médica electrónica (HME) para los ambulatorios del programa SOS Telemedicina para Venezuela. El sistema está basado en OpenEHR Gen Framework, herramienta que fue seleccionada luego de realizar una evaluación sobre otras herramientas de HME, resultando electa por ser un marco de trabajo para crear sistemas HME que acoge varios estándares, entre ellos: OpenEHR y HL7 CDA. Se normaliza un formato de historia médica integral, basado en el análisis de los procesos asistenciales de diferentes centros de atención sanitaria de nivel ambulatorio. El sistema de historia HME resultante: SOS-HME, puede adaptarse al formato de registro clínico de un centro asistencial particular, y está en capacidad de intercambiar información clínica con otros sistemas. Palabras clave: historia médica electrónica, estándares, openEHR, interoperabilidad. ABSTRACT This job presents the development of an electronic health record (EHR) system for the SOS Telemedicina ambulatory centers. The system is based in OpenEHR Gen Framework, this tool was selected after to realize an evaluation over others EHR tools, it was selected because it is a framework to build EHR systems that adopt several standars, including: OpenEHR and HL7 CDA. Also was normalized an integral history format, based in the analysis over various care process in ambulatory centers. The resulting system: SOS-HME, can to adapt to any clinical format, and it is in capacity to change clinical information with others systems. Key words: electronic health records, standards, openEHR, interoperability. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 5 ÍNDICE TEMÁTICO RESUMEN ......................................................................................................................................... 4 ABSTRACT ....................................................................................................................................... 4 INTRODUCCIÓN ........................................................................................................................... 11 CAPÍTULO I – PROBLEMA DE INVESTIGACIÓN ................................................................ 15 1.1 INTRODUCCIÓN ................................................................................................................... 15 1.1 PLANTEAMIENTO DEL PROBLEMA ............................................................................................ 15 1.2 SOLUCIÓN PROPUESTA............................................................................................................... 17 1.3. OBJETIVOS ................................................................................................................................. 19 1.3.1. OBJETIVO GENERAL ................................................................................................................ 19 1.3.2. OBJETIVOS ESPECÍFICOS .......................................................................................................... 19 1.4 REQUERIMIENTOS FUNCIONALES ............................................................................................. 19 1.5 REQUERIMIENTOS NO FUNCIONALES ....................................................................................... 21 1.6 JUSTIFICACIÓN ........................................................................................................................... 21 1.7 ALCANCES .................................................................................................................................. 22 CAPÍTULO II – MARCO CONCEPTUAL ................................................................................. 23 2.1 INTRODUCCIÓN .......................................................................................................................... 23 2.2 HISTORIA MÉDICA ..................................................................................................................... 23 2.2.1 DEFINICIONES CONCEPTUALES ................................................................................................. 23 2.2.2 ORIGEN ..................................................................................................................................... 24 2.2.3 FUNCIÓN ................................................................................................................................... 24 2.2.4 CARACTERÍSTICAS .................................................................................................................... 24 2.3 HISTORIA MÉDICA ELECTRÓNICA ........................................................................................... 26 2.3.1 SISTEMAS DE IDENTIFICACIÓN POR PACIENTE .......................................................................... 27 2.3.2 MECANISMOS DE SEGURIDAD ................................................................................................... 28 2.3.3 INTEROPERABILIDAD ................................................................................................................ 28 2.3.4 ESTÁNDARES ............................................................................................................................ 30 2.3.5 ESTÁNDARES SOBRE LA HME .................................................................................................. 32  Estándares de diseño ....................................................................................................... 32  Estándares de comunicación ........................................................................................... 39  Estándares de terminologías ........................................................................................... 45 CAPÍTULO III - LEVANTAMIENTO DE INFORMACIÓN ................................................... 46 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 6 3.1 INTRODUCCIÓN .......................................................................................................................... 46 3.2 ACTIVIDADES DE INVESTIGACIÓN ............................................................................................. 46 3.3 INFORMACIÓN RECOLECTADA .................................................................................................. 48 3.3.1 FORMATOS DE INFORMACIÓN RECOLECTADOS ........................................................................ 49 3.3.2 ACTIVIDADES IDENTIFICADAS .................................................................................................. 50 3.3.3 FLUJOS DE ATENCIÓN IDENTIFICADOS ...................................................................................... 53 3.3.4 REPORTES IDENTIFICADOS ....................................................................................................... 54 3.3.5 ACTORES IDENTIFICADOS ......................................................................................................... 55 3.3.6 OBSERVACIONES ...................................................................................................................... 55 3.4 INFORMACIÓN GENERADA ......................................................................................................... 56 3.4.1 ACTIVIDADES EN COMÚN ......................................................................................................... 56 CAPÍTULO IV – EVALUACIÓN DE HERRAMIENTAS DE HISTORIAS MÉDICAS ELCTRÓNICAS ............................................................................................................................. 60 4.1 INTRODUCCIÓN .......................................................................................................................... 60 4.2 HERRAMIENTAS DE SELECCIONADAS ....................................................................................... 60 4.2.1 MEDICAL .................................................................................................................................. 61 4.2.2 OPENMRS ................................................................................................................................ 62 4.2.3 OPENEHR-GEN-FRAMEWORK ................................................................................................. 64 3.3 CRITERIOS DE EVALUACIÓN ...................................................................................................... 66 3.4 METODOLOGÍA .......................................................................................................................... 69 3.5 RESULTADOS Y ANÁLISIS ........................................................................................................... 70 CAPÍTULO V – MARCO APLICATIVO .................................................................................... 73 5.1. INTRODUCCIÓN ......................................................................................................................... 73 5.1.1 CONTEXTO DEL PROYECTO ....................................................................................................... 73 5.2 DETALLE DE LA SOLUCIÓN ........................................................................................................ 74 5.3 PLATAFORMA DE DESARROLLO ................................................................................................ 75 5.3.1 GROOVY ................................................................................................................................... 76 5.3.2 GRAILS ...................................................................................................................................... 77 5.3.3 SISTEMA MANEJADOR DE BASE DE DATOS .............................................................................. 80  MySQL ........................................................................................................................... 80 5.4 GESTIÓN DEL PROYECTO .................................................................................................... 81 5.4.1 METODOLOGÍA DE DESARROLLO .............................................................................................. 81 5.4.2 PANIFICACIÓN DEL PROYECTO ................................................................................................. 82  Iteración 1: Análisis de funcionamiento de OpenEHR Gen Framework ........................ 82  Iteración 2: Definición de historia médica básica integral ............................................. 86  Iteración 3: Interoperabilidad ......................................................................................... 88  Iteración 4: Diseño de interfaz gráfica............................................................................ 89  Iteración 5: Acceso y autorización ................................................................................. 90  Iteración 6: Definición historia médica materno infantil ................................................ 91 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 7  Iteración 7: Pruebas integrales ........................................................................................ 92 5.5 SOS HISTORIA MÉDICA .............................................................................................................. 94 5.5.1 ARQUITECTURA ........................................................................................................................ 94  Vista por componentes ................................................................................................... 94  Vista por capas ............................................................................................................... 95  Vista de funcionalidades ................................................................................................. 96 5.5.2 DISEÑO DETALLADO ................................................................................................................. 98  Módulo registro clínico .................................................................................................. 99  Módulo registro demográfico ....................................................................................... 103  Módulo de reportes ....................................................................................................... 106  Módulo de interoperabilidad ........................................................................................ 107 5.5.3 DETALLES DE IMPLEMENTACIÓN ........................................................................................... 107  Elaboración de arquetipos y plantillas .......................................................................... 107  Implementación de la Historia Integral ........................................................................ 110  Diseño de interfaz gráfica ............................................................................................. 112  Acoplamiento con SOS-IMP ........................................................................................ 114 5.6 SOS ÍNDICE MAESTRO DE PACIENTES .................................................................................... 116 5.6.1 ARQUITECTURA ...................................................................................................................... 116  Vista por componentes ................................................................................................. 116  Vista por capas ............................................................................................................. 116 5.6.2 DISEÑO DETALLADO ............................................................................................................... 117  Módulo de Servicios Web ............................................................................................ 117  Módulo de administración ............................................................................................ 118 5.6.3 DETALLES DE IMPLEMENTACIÓN ........................................................................................... 120  Implementación de servicios web ................................................................................. 120 5.7 PRUEBAS ................................................................................................................................... 121  Descripción de servidores ............................................................................................. 121  Pruebas de funcionamiento ........................................................................................... 122 RESULTADOS .............................................................................................................................. 130 CONCLUSIONES Y RECOMENDACIONES .......................................................................... 135 REFERENCIAS BIBLIOGRÁFICAS ........................................................................................ 138 GLOSARIO DE SIGLAS ............................................................................................................. 142 APÉNDICE A - DOCUMENTACIÓN TÉCNICA SOS-HME ................................................. 145 APÉNDICE B - DOCUMENTACIÓN TÉCNICA SOS-IMP ................................................... 214 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 8 ÍNDICE DE FIGURAS Figura 1. Organismos de estandarización en salud. .......................................................................... 31 Figura 2. Modelo Dual Open EHR .................................................................................................... 33 Figura 3. Espacio de nombres org.OpenEHR ................................................................................... 34 Figura 4. Estructura de arquetipo ADL ............................................................................................. 36 Figura 5. Ejemplo de arquetipo guitarra ............................................................................................ 38 Figura 6. Estructura de la HME en EN13606 .................................................................................. 41 Figura 7 - Partes de un CDA ............................................................................................................. 44 Figura 8. II Seminario Regional sobre Salud-e y Telemedicina ....................................................... 47 Figura 9. Flujo de atención en ambulatorios sin sistema de HME .................................................... 53 Figura 10 - Diagrama de actividad manejo diario de historias médicas ............................................ 57 Figura 11. Diagrama de actividad Materno infantil – Prenatal ......................................................... 58 Figura 12. Diagrama de actividad Materno infantil – Recién nacido ................................................ 58 Figura 13. Diagrama de actividad Materno infantil – Madre ............................................................ 59 Figura 14. Diagrama de actividad Reportes estadísticos. .................................................................. 59 Figura 15 OpenMRS Atlas ................................................................................................................ 64 Figura 16. Estructura de aplicación basada en framework ................................................................ 64 Figura 17. Groovy & Grails .............................................................................................................. 76 Figura 18. Pila completa de Grails .................................................................................................... 77 Figura 19. Componentes SOS-HME ................................................................................................. 95 Figura 20. Capas SOS-HME ............................................................................................................. 95 Figura 21. Principales funcionalidades SOS-HME ......................................................................... 96 Figura 22. Componentes principales de SOS-HME .......................................................................... 98 Figura 23. DataBinder ..................................................................................................................... 101 Figura 24. Diagrama de estados de registro clínico ........................................................................ 102 Figura 25. Extracto del modelo demográfico .................................................................................. 103 Figura 26 Diagrama de jerarquía de roles. ...................................................................................... 106 Figura 27. Archetype Editor ............................................................................................................ 108 Figura 28. ADL Workbench............................................................................................................ 109 Figura 29. Notepad ++ .................................................................................................................... 110 Figura 30. Configuración de dominios clínicos .............................................................................. 112 Figura 31. Registro clínico - Interfaz original de OpenEHR Gen Framework ............................... 113 Figura 32. Registro clínico - Nueva interfaz ................................................................................... 113 Figura 33 Atributos del customSecureServiceClientCda ................................................................ 114 Figura 34 Atributos del customSecureServiceClientImp ................................................................ 115 Figura 35. Componentes de SOS-IMP ............................................................................................ 116 Figura 36. Capas del IMP ................................................................................................................ 117 Figura 37. Esquema clave pública y privada .................................................................................. 118 Figura 38. Inicio de sesión – Administración IMP ......................................................................... 119 Figura 39. Datos de participación – Administración SOS-IMP ...................................................... 120 Figura 43. Secciones historia médica integral ................................................................................. 130 Figura 44. Estructura de la historia materno infantil ....................................................................... 131 Figura 45 Puntuación total obtenida ................................................................................................ 132 Figura 46 Arquitectura de la solución ............................................................................................. 134 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 9 ÍNDICE DE TABLAS Tabla 1. Tipo de historia médica por centro asistencial .................................................................... 48 Tabla 2. Formatos de información clínica recolectados .................................................................... 49 Tabla 3. Actividades identificadas por centro asistencial ................................................................. 50 Tabla 4. Reportes identificados ........................................................................................................ 54 Tabla 5. Actores identificados ........................................................................................................... 55 Tabla 6. Resultados de la evaluación de los criterios ........................................................................ 70 Tabla 7. Resultados de la evaluación de los criterios por el factor de Importancia. ......................... 71 Tabla 8. Iteración 1, Tarea 1 ............................................................................................................. 83 Tabla 9. Iteración 1, Tarea 2 ............................................................................................................. 83 Tabla 10. Iteración 1, Tarea 3 ........................................................................................................... 83 Tabla 11. Iteración 1, Tarea 4 ........................................................................................................... 83 Tabla 12. Iteración 1, Tarea 5 ........................................................................................................... 84 Tabla 13. Iteración 1, Tarea 6 ........................................................................................................... 84 Tabla 14. Iteración 1, Tarea 7 ........................................................................................................... 84 Tabla 15. Iteración 1, Tarea 8 ........................................................................................................... 84 Tabla 16. Iteración 1, Tarea 9 ........................................................................................................... 85 Tabla 17. Iteración 1, Tarea 10 ......................................................................................................... 85 Tabla 18. Iteración 1, Tarea 11 ......................................................................................................... 85 Tabla 19. Iteración 1, Resultado ........................................................................................................ 85 Tabla 20. Iteración 2, Tarea 12 ......................................................................................................... 86 Tabla 21. Iteración 2, Tarea 13 ......................................................................................................... 86 Tabla 22. Iteración 2, Tarea 14 ......................................................................................................... 86 Tabla 23. Iteración 2, Tarea 15 ......................................................................................................... 87 Tabla 24. Iteración 2, Tarea 16 ......................................................................................................... 87 Tabla 25. Iteración 2, Tarea 17 ......................................................................................................... 87 Tabla 26. Iteración 2, Resultados ...................................................................................................... 87 Tabla 27. Iteración 3, Tarea 18 ......................................................................................................... 88 Tabla 28. Iteración 3, Tarea 19 ......................................................................................................... 88 Tabla 29. Iteración 3, Tarea 20 ......................................................................................................... 88 Tabla 30. Iteración 3, Tarea 21 ......................................................................................................... 89 Tabla 31. Iteración 3, Resultados ...................................................................................................... 89 Tabla 32. Iteración 4, Tarea 22 ......................................................................................................... 89 Tabla 33. Iteración 4, Tarea 23 ......................................................................................................... 90 Tabla 34. Iteración 4, Tarea 24 ......................................................................................................... 90 Tabla 35. Iteración 4, Resultados ...................................................................................................... 90 Tabla 36. Iteración 5, Tarea 25 ......................................................................................................... 91 Tabla 37. Iteración 5, Tarea 26 ......................................................................................................... 91 Tabla 38. Iteración 5, Resultados ...................................................................................................... 91 Tabla 39. Iteración 6, Tarea 27 ......................................................................................................... 92 Tabla 40. Iteración 6, Resultados ...................................................................................................... 92 Tabla 41. Iteración 7, Tarea 28 ......................................................................................................... 92 Tabla 42. Iteración 7, Tarea 29 ......................................................................................................... 93 Tabla 43. Iteración 7, Tarea 30 ......................................................................................................... 93 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 10 Tabla 44. Iteración 7, Tarea 31 ......................................................................................................... 93 Tabla 45. Iteración 7, Tarea 32 ......................................................................................................... 94 Tabla 46. Iteración 7, Tarea 33 ......................................................................................................... 94 Tabla 47. Tipos de datos OpenEHR y asociación con elementos HTML ....................................... 100 Tabla 48. Tabla muestra el lista de roles, descripción y permisos .................................................. 104 Tabla 49. Versión Archetype Editor ............................................................................................... 108 Tabla 50. Version ADL Workbench ............................................................................................... 109 Tabla 51. Version Notepad ++ ........................................................................................................ 110 Tabla 52. Lista de plantillas y arquetipos ........................................................................................ 111 Tabla 53. Descripción Servidor A ................................................................................................... 121 Tabla 54. Descripción Servidor B ................................................................................................... 121 Tabla 55. Prueba de funcionamiento 1 ............................................................................................ 122 Tabla 56. Prueba de funcionamiento 2 ............................................................................................ 123 Tabla 57. Prueba de funcionamiento 3 ............................................................................................ 123 Tabla 58. Prueba de funcionamiento 4 ............................................................................................ 124 Tabla 59. Prueba de funcionamiento 5 ............................................................................................ 124 Tabla 60. Prueba de funcionamiento 6 ............................................................................................ 125 Tabla 61. Prueba de funcionamiento 7 ........................................................................................... 125 Tabla 62. Prueba de funcionamiento 8 ............................................................................................ 126 Tabla 63. Prueba de funcionamiento 9 ............................................................................................ 126 Tabla 64. Prueba de funcionamiento 10 .......................................................................................... 127 Tabla 65. Prueba de funcionamiento 11 .......................................................................................... 127 Tabla 66. Prueba de funcionamiento 12 .......................................................................................... 128 Tabla 67. Prueba de funcionamiento 1 3 ......................................................................................... 128 Tabla 68. Prueba de funcionamiento 14 .......................................................................................... 129 Tabla 69. Estándares aplicados ....................................................................................................... 132 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 11 INTRODUCCIÓN La historia médica es un conjunto de documentos fuente de información clínica, demográfica y de atención sanitaria, que están asociados a un sujeto de cuidado. Tiene sus inicios en la antigüedad, cuando los médicos tuvieron la necesidad de registrar todo aquello que conocían acerca de la situación del paciente que pudiese resultar útil durante el proceso de asistencia. Tradicionalmente se ha registrado la historia médica en hojas de papel respetando un formato particular, variando su estructura dependiendo del tipo de información que se quiera registrar, el método de registro y la especialidad médica asociada. Aún hoy, esa historia es en gran medida un conjunto de documentos manuscritos, pero también está integrada con información digitalizada e insumos de formato analógico. La historia médica de un paciente tiene comienzo en el momento que se registra el primer episodio clínico asociado a él, debe durar durante toda la vida del paciente y un poco más después de su muerte. Esto pocas veces se cumple, puesto que existen eventos clínicos que nunca se registran y registros clínicos que no pueden ser almacenados durante tanto tiempo. A esta problemática se suma el eventual extravío, deterioro, duplicidad e ilegibilidad de los documentos de historia. En este sentido la historia médica electrónica puede dar soluciones a la problemática asociada al tratamiento tradicional de la historia médica. La informatización de la historia médica no debe constituir un cambio radical en la manera de trabajar del personal sanitario. No obstante pudiese ser una buena circunstancia para revisar la forma en que se gestionan los distintos servicios en beneficio de una atención sanitaria adaptada a un nuevo paradigma. El resultado de la aplicación de las tecnologías de información y comunicación en la base de información fundamental del sistema sanitario es la historia médica electrónica. Pero la pura historia médica por mas informatizada que sea, sin la aplicación de estándares sobre ella merma en gran medida sus potencialidades de aplicación. Usar estándares permite que la información sea utilizada de eficazmente tanto por los hombres como por las máquinas, y son precisamente las máquinas las que deben hablar un mismo lenguaje que les permita trabajar en conjunto. Es por eso que en este trabajo se hace hincapié sobre la aplicación de estándares en la historia médica electrónica, para lograr llevar a cabo tareas que involucren la interoperabilidad entre sistemas. Los tipos de estándares que son abordados en el marco Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 12 conceptual de este documento son los estándares de diseño sobre sistemas de historias médicas, estándares de comunicación y estándares de terminologías. Este trabajo se enmarca dentro del programa SOS Telemedicina para Venezuela, proyecto que contempla el diseño, el desarrollo y la implementación de las soluciones tecnológicas que permitan acercar oportunamente servicios especializados de salud a zonas remotas del país. SOS Telemedicina necesita implantar en sus centros de atención primaria un sistema de historias médicas electrónicas. Inicialmente, fue necesario realizar un levantamiento de información que permitiese obtener y generar información relevante a la hora de modelar un sistema de historias médicas electrónicas para los centros asistenciales de SOS Telemedicina, ese levantamiento de información está plasmado en el tercer capítulo de éste documento. En esta etapa se realizaron actividades de investigación que involucraron visitas a ambulatorios, llamadas telefónicas a ambulatorios rurales, recolección y análisis de formatos de historias, reuniones con médicos especialistas, asistencia a una clase sobre historias médicas, lecturas de bibliografías recomendadas por los especialistas e indagaciones por internet. Complementando esto con la participación en reuniones y conferencias con expositores y personalidades nacionales e internacionales de la informática médica y telemedicina. Surge luego la interrogante sobre desarrollar un sistema desde cero, utilizar uno ya existente (sin realizarle modificaciones) o utilizar uno ya existente realizándole adaptaciones. Es importante destacar que actualmente existen en el mercado decenas de sistemas de historias médicas electrónicas, dónde cada sistema se jacta de ofrecer la mejor solución para el registro de historias. Pero realmente resultó complicado apreciar cuál de estos sistemas se adaptaba mejor al contexto específico de los ambulatorios del programa SOS Telemedicina. Fue necesario entonces realizar una evaluación que permitiese determinar la toma de decisiones sobre la interrogante planteada. La valoración realizada puede ser vista con detalle en el capítulo cuarto de este documento. Se evaluaron tres herramientas que se consideraron pertinentes por su popularidad y carácter de tecnologías abiertas. Se establecieron criterios de evaluación los cuales se agruparon según su grado de importancia para el programa SOS Telemedicina. Resultó electa una herramienta de software llamada OpenEHR Gen-Framework, con la condición principal de adaptarla según los requerimientos del programa SOS Telemedicina, a manera de construir un sistema de historias médicas a la medida de las necesidades. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 13 Más que un sistema de historia médicas electrónicas la herramienta seleccionada es un «marco de trabajo» (framework) para desarrollar sistemas de historias médicas electrónicas. De manera que ésta característica agilizó el desarrollo del sistema de historias médicas electrónicas elaborado en este trabajo especial de grado. El sistema de historias médicas desarrollado en este trabajo hace uso de estándares en su diseño, mediante la implementación del modelo de referencia de OpenEHR, aplica estándares de comunicación a través del uso de CDA R2 de HL7, que es usado en la compartición de documentos clínicos y en el almacenamiento documental de la información clínica. Además, existe la posibilidad de ampliar el componente de interoperabilidad utilizando el estándar de comunicación ISO/CEN 13606 el cual es totalmente compatible con el estándar OpenEHR. En el marco aplicativo, capítulo quinto de este documento, se expone el contexto del proyecto de historias médicas electrónicas y el detalle de la solución de software presentada. Así mismo, se hace descripción de la plataforma de desarrollo «Groovy & Grails», la cual es la plataforma de la herramienta OpenEHR Gen-Framework y por ende también la plataforma del sistema de historias médicas electrónicas. La metodología utilizada en la construcción de la solución de software fue la conocida como «programación extrema» o «XP» (por siglas en inglés). Se seleccionó ésta metodología ágil pues pone el énfasis en la adaptabilidad del desarrollo más que sobre la previsibilidad. La metodología XP considera que los cambios de los requisitos sobre la marcha son un aspecto natural e inevitable, condición que la hace propicio al entorno «clínico-asistencial» en el cual está incrustada la solución. La solución software presentada consta de dos aplicaciones bien diferenciadas, por una parte está el sistema de historias médicas electrónicas, el cual se le ha dado el nombre de SOS-HME. Por otra parte está el índice maestro de pacientes, denominado con el nombre de SOS-IMP, es el elemento fundamental para lograr la interoperabilidad entre sistemas distintos sistemas de historias médicas electrónicas. La conjunción de ambas aplicaciones es la completitud del desarrollo de software realizado durante éste trabajo especial de grado. Por último se presentan las pruebas realizadas y resultados obtenidos sobre ambas aplicaciones de forma unitaria, así como las pruebas de integración para evaluar el funcionamiento conjunto. Los resultados de este trabajo especial de grado se muestran en un apartado final presentado previo a las conclusiones y recomendaciones. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 14 En los apéndices de esté documento podrán ser encontrados materiales relacionados con la documentación técnica de la aplicaciones elaboradas, manual de usuario final y otros manuales técnicos relacionados con el mantenimiento de las aplicaciones. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 15 CAPÍTULO I – PROBLEMA DE INVESTIGACIÓN 1.1 Introducción En este capítulo se plantea el problema actual en relación con las limitaciones de la historia médica tradicional y la aplicación de sistemas de historias médicas electrónicas sin aplicación de estándares. Seguidamente se expone la solución propuesta, se señala el objetivo general de éste trabajo y los objetivos específicos. Se detallan los requerimientos funcionales y no funcionales del sistema de historias médicas electrónicas a elaborar, se justifica la realización de éste trabajo y se delimita su alcance. 1.1 Planteamiento del problema La historia médica es un conjunto de documentos relativos al proceso de asistencia sanitaria y estado de salud de una persona (1). La historia médica se registra tradicionalmente en hojas de papel con un formato particular que va a depender entre otras cosas del tipo de historia, la metodología de registro y la especialidad médica. A la historia manuscrita se anexan también documentos en formatos digitales y analógicos. Los documentos generalmente se almacenan y organizan dentro de carpetas. A la vez esas carpetas se almacenan en archivos, mejor conocidos como «archivos de historias». El registro tradicional de la historia médica acarrea una serie de problemas e inconvenientes. Principalmente los registros son realizados con escritura manual, lo que trae como consecuencia problemas de legibilidad y deterioro. Se acumulan grandes cantidades de papel, utilizadas para documentar las historias de los pacientes. Evidentemente las grandes acumulaciones de papel ocasionan un problema de almacenamiento. En ocasiones para no generar grandes volúmenes de documentos, se les coloca a los expedientes de historia una fecha de vencimiento para deshacerse de ellos después de un determinado lapso de tiempo. Aunque esto es una solución al problema de almacenamiento, el período de vida de una historia médica debería ser igual o mayor al período de vida del paciente. Es recurrente la pérdida o extravío de los expedientes clínicos, debido a desorganización en el almacenamiento, dificultades de búsquedas en grandes archivos o simplemente debido a un muy común «traspapeleo». Se generan entonces multiplicidad de historias asociadas a un mismo paciente, cuando la regla debería ser mantener un «registro único» por paciente. Se pierde información valiosa en el hilo cronológico de la atención sanitaria a lo largo de la vida de un paciente, y sus factores comúnmente son: extravío, deterioro, Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 16 duplicidad, ilegibilidad y, deshecho. Se pierde también tiempo realizando búsquedas extensas para lograr localizar los documentos de historias médicas, dando como resultado en ocasiones búsquedas fallidas. Además los historiales médicos en papel no son garantes de confidencialidad. Cualquier persona que entrase en contacto con el documento clínico pudiese leerlo. Se le añade a esto la posibilidad de realizar tachaduras, enmendaduras e incluso anexos, siendo imposible determinar la autoría sobre los cambios. Es por esto que en la última década se ha ido incrementando en la región latinoamericana y en general alrededor de todo el mundo el uso de historias médicas informatizadas frente al registro tradicional en papel (2), pues los primeros dan respuesta, si bien no a todos, a muchos de los problemas e inconvenientes anteriormente presentados. Sin embargo la falta de aplicación de estándares tanto de diseño como de comunicación ha generado inconvenientes en el desempeño de los sistemas de historias médicas electrónicas. Un sistema de historias médicas electrónicas debe ser capaz de registrar cualquier hecho de «importancia clínica» relacionado con un sujeto de cuidado. Estos hechos pueden ser recabados en formas de texto, imágenes, audios, códigos, expresiones numéricas, etc. Las formas en la cuales se organiza un registro clínico (en papel) pueden ser múltiples. En este sentido un sistema de historias médicas electrónicas debe ser capaz de emular al papel. Un registro clínico es variable, puede cambiar en cualquier momento, ya sea por la anexión de nuevos elementos (anteriormente no necesarios o desconocidos), o por la eliminación o modificación de los existentes por considerarlos no pertinentes. En este sentido, la mayoría de los sistemas desarrollados bajo un contexto clínico particular, corren el riesgo de ser incapaces de cambiar y/o adaptarse, siendo inservibles fuera del contexto original en el cual fueron creados. Por eso es necesario aplicar estándares de diseño que permitan obtener como resultado un sistema de historias médicas electrónicas a prueba de futuro. El no usar estándares de comunicación en la creación de estos sistemas, ha dado como resultado especies de «islas de información clínica». Estos sistemas registran la información clínica y en su mayoría son incapaces de intercambiar esa información con otros sistemas. Intercambiar o difundir una información clínica tiene diversos fines, entre ellos: estadísticos, educativos, investigación, logísticos, etc. Pero lo más importante del intercambio de información radica en que beneficia directamente al paciente, pues ayuda a que su expediente de historia médica sea «único», es decir sin duplicados, gracias a la «integración» de distintos expedientes. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 17 Es fundamental la aplicación de estándares de diseño y comunicación, propios del ámbito de la informática médica, dentro de un sistema de historias médicas electrónicas. En este sentido, el programa SOS Telemedicina para Venezuela tiene como objetivo, entre otros, establecer una red de telemedicina a nivel nacional. Es de suma importancia que los datos de los pacientes almacenados en las instituciones que la conforman posean un mismo formato, o al menos puedan ser transformados a un formato estándar. De esta forma, al ingresar un paciente a un centro asistencial (bien sea por una emergencia o por una consulta) su registro de historia médica pueda ser formado a partir de los registros de datos de esa institución junto con los registros de datos de otras instituciones médicas que posean información sobre este paciente. SOS Telemedicina para Venezuela es un «proyecto que contempla el diseño, desarrollo e implementación de las soluciones tecnológicas que permitan acercar oportunamente servicios especializados de salud de calidad y sin salir de su región a la población, en particular en zonas remotas del país» (3). Es gestionado por el Centro de Análisis de Imágenes Biomédicas Computarizadas (CAIBCO) perteneciente a la Instituto de Medicina Tropical, Facultad de Medicina, Universidad Central de Venezuela (4). Actualmente el programa SOS Telemedicina no cuenta con un sistema de historias médicas electrónicas, que haga uso de estándares o normas que permitan la transformación de los datos a un formato que facilite el intercambio de información entre diferentes centros asistenciales. Más aún, el programa SOS Telemedicina no cuenta con un sistema de historias médicas electrónicas propiamente dicho. Existe entonces la necesidad de la implantación de un sistema de este tipo en los diferentes centros asistenciales pertenecientes al programa SOS Telemedicina. Es de gran importancia que cada uno de los centros esté en capacidad de intercambiar información con el resto de los centros asistenciales, que pertenezcan o que sean externos al programa. Todo esto con el fin de lograr una historia médica única e integrada dentro del programa SOS Telemedicina con capacidad de expansión y unificación con otros sistemas de historias médicas electrónicas. 1.2 Solución propuesta Se propone implantar, en los centros asistenciales pertenecientes al programa SOS Telemedicina, un sistema de historias médicas electrónicas, que haga uso de estándares de diseño y comunicación, propios de la informática médica, dando como resultado un sistema de historias médicas electrónicas que sea capaz de compartir información clínica con otros sistemas de historias. Para poder implantar un sistema de historias médicas electrónicas es necesario realizar un levantamiento de información que permita identificar elementos clave en el contexto y dominio de las historias médicas. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 18 Existen diversas alternativas en cuanto a la posible implantación de un sistema de historias médicas electrónicas. De hecho existen decenas de sistemas de software para registrar historias médicas electrónicas, propietarios y no propietarios disponibles en internet. Es por esto que al analizar problemática descrita en el punto anterior surgen tres alternativas principales:  Primera: evaluar los sistemas existentes y adoptar uno de ellos para ser implantado en los centros asistenciales del programa.  Segunda: ésta se deriva de la primera, a diferencia que en vez de adoptar íntegramente uno de los sistemas existentes e implantarlo, se realizarían sobre éste modificaciones a manera de adaptarlo a las necesidades de los centros asistenciales pertenecientes al programa.  Tercera: en contraposición a las dos anteriores, ésta plantea desarrollar un sistema desde cero. Implica conocer a fondo el modelo de negocio del ámbito de la asistencia clínica, el cual es extenso y variante dependiendo de cada centro asistencial. El sistema se debe diseñar desde las bases previendo cumplir con los requerimientos recabados y previendo las obligadas expansiones a futuro. Para optar por alguna de estas alternativas es necesario previamente conocer los estándares de comunicación y diseño que pueden aplicarse en un sistema de historias médicas electrónicas. Así mismo, se debe realizar una evaluación sobre los sistemas de historias médicas electrónicas de carácter «open source» disponibles a través de internet. Esta evaluación es un prerrequisito para el eventual desarrollo y/o implantación de un sistema de historia médicas. El objetivo de la evaluación es determinar en primer lugar si es mejor desarrollar un sistema desde cero, adoptar uno íntegramente o adoptar uno y realizarle modificaciones. La evaluación se realiza sobre productos de tecnología de carácter heterogéneo, es por esto que se tienen en cuenta criterios que permiten ponderar de manera objetiva las características, el funcionamiento y la pertinencia para este proyecto. Se destaca que esta evaluación es parte de una demanda explícita realizada por parte del equipo directivo del programa SOS Telemedicina. Posterior a la evaluación se realiza el desarrollo y/o implantación del sistema de historias médicas electrónicas, aplicando estándares de diseño y comunicación. Esto responde a la necesidad de tener dentro del programa SOS Telemedicina un sistema de historias médicas electrónicas capaz de registrar la información clínica asociada a un sujeto de cuidado, obtener información estadística a partir de esos registros e intercambiar información clínica con distintos centros asistenciales. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 19 1.3. Objetivos 1.3.1. Objetivo General «Analizar e implantar un sistema de historias médicas electrónicas aplicando estándares internacionales para SOS Telemedicina». 1.3.2. Objetivos Específicos Para alcanzar el objetivo general planteado se establecen los siguientes objetivos específicos:  Analizar en detalle el proceso asistencial llevado a cabo en centros de salud.  Recolectar información que permita modelar el dominio clínico en el ámbito de una historia médica integral y materno infantil.  Evaluar herramientas software existentes de historias médicas electrónicas.  Hacer uso de estándares en el sistema de historias médicas electrónicas.  Desarrollar un índice maestro de pacientes, basado en servicios web que permita compartir información clínica entre diferentes sistemas de historia médica electrónica. 1.4 Requerimientos funcionales Se requiere desarrollar un sistema de HME, que cumpla con los siguientes requerimientos funcionales:  Requerimiento 1 : autenticación y autorización: El sistema de historias médicas electrónicas deberá poseer tres tipos de usuarios, el usuario «médico» (exclusivamente médicos), el usuario «personal sanitario» (para enfermeras, paramédicos, etc.), y el usuario «administrador» (administrador del sistema). Todos los usuarios deberán autenticarse para poder ingresar al sistema. Solo el personal médico y sanitario tendrá acceso al registro clínico. Únicamente el personal médico tendrá la potestad de autenticar los registros clínicos.  Requerimiento 2: administración del sistema: El sistema debe poder ser administrado permitiendo la creación, edición y eliminación de usuarios. Así mismo se deberá permitir la asignación de roles a los usuarios del sistema. La administración del sistema debe ser realizada por el usuario administrador. Las cuentas (nombre de usuario y contraseña) de los usuarios deben ser válidas solo por un período de tiempo, pudiendo ser deshabilitadas y/o reactivadas por el administrador del sistema en cualquier momento  Requerimiento 3: registro clínico: Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 20 Se debe registrar información clínica asociada a un paciente. El registro clínico es de suma importancia, ha de ser abierto para que el médico pueda de forma narrativa describir cualquier fenómeno en el registro, pero también ha de ser estructurado para que la información clínica pueda ser computada (realizar consultas, mostrar información estadística, etc.). La estructura del registro clínico deberá adaptarse a ambos escenarios, por eso debe lograr un equilibrio entre el enfoque abierto y estructurado.  Requerimiento 4: registro demográfico: Se debe registrar la información demográfica de un paciente según se requiera o estipule en los formatos de historia médica manuscritos. Se anexa a esto la posibilidad de poder colocar en el registro demográfico una foto tipo carnet del paciente. El sistema deberá ser capaz de manejar múltiples números de identificación por paciente, como por ejemplo: número de cédula de identidad, número pasaporte, número de licencia de conducir, etc. Se podrán realizar búsquedas sobre los pacientes existentes utilizando como valores de búsquedas los datos que definen la identidad de un paciente (identificadores, nombres, sexo, fecha de nacimiento). Los datos de los pacientes podrán ser modificados, incluyendo los números de identificación.  Requerimiento 5: resumen de registro clínico Un registro clínico debe poder ser visto en resumen por pantalla. El resumen de un registro clínico también debe poder ser impreso.  Requerimiento 6: validación del registro clínico Cada registro clínico realizado sobre un paciente podrá ser transcrito por un médico, enfermera o por algún otro personal sanitario. Con la salvedad de que solamente un médico podrá tener la facultad de dar validez al registro realizado.  Requerimiento 7: no dependencia de internet El sistema de historias médicas electrónicas no debe depender de conexión a internet para su funcionamiento, debido a que ha de ser instalado en zonas rurales de baja conectividad. Por esto se requiere que el sistema funcione bajo un esquema de localidad. Sin embargo es recomendable que el sistema a implantar sea una aplicación web que pueda ser instalada localmente en casos de baja conectividad, y que pueda también funcionar como un sistema centralizado en lugares de mediana y alta conectividad. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 21  Requerimiento 8: compartir información clínica Se requiere que el sistema sea capaz de intercambiar información clínica con otros sistemas. Es necesario que la interoperabilidad entre sistemas sea sintáctica y semántica, de manera que la información intercambiada pueda ser entendida y procesada de forma homogénea por sistemas de naturaleza heterogénea. 1.5 Requerimientos no funcionales El sistema a desarrollar debe cumplir con los siguientes requerimientos no funcionales:  El sistema de ser usable: su interfaz gráfica debe ser agradable a la vista, intuitiva e ir acorde con el la imagen del proyecto SOS Telemedicina.  Aplicar estándares relacionados con la historia médica electrónica: de forma tal que pueda unificar procesos, procedimientos, términos y/o formatos a través de estándares reconocidos.  El sistema debe ser escalable: de manera que pueda extender su margen de operaciones permitiendo la agregación de nuevas funcionalidades.  El sistema debe ser mantenible: es decir que pueda ser modificado para corregir fallas y mejorar su funcionamiento.  El sistema debe de ser robusto: pudiendo recuperarse de posibles errores y mantenerse en funcionamiento.  Utilizar tecnologías no propietarias: el sistema debe ser realizado bajo un entorno de desarrollo open source. 1.6 Justificación El uso de un sistema de historias médicas electrónicas descrito en esta solución se justifica por las siguientes razones de peso:  Resuelve el problema recurrente en los sistemas tradicionales de historias médicas, sobre el almacenamiento de grandes volúmenes de documentos y riesgos por pérdida y deterioro.  Puede garantizar que cada persona tenga solo un expediente clínico asociado.  Asegura la legibilidad del registro clínico.  Garantiza la confidencialidad del registro clínico mediante el establecimiento de controles de acceso.  Certifica la autoría sobre cada registro clínico.  Facilita los procesos de auditoría.  Permite la compartición de información clínica entre distintos sistemas.  La información clínica puede ser consultada en diferentes lugares de forma simultánea.  Se pueden generar reportes estadísticos fiables e inmediatos. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 22  Hacer uso de estándares es una buena práctica de diseño y desarrollo de software. 1.7 Alcances En este proyecto se desarrollará un sistema de historias médicas electrónicas que esté en capacidad de intercambiar información con otros sistemas de historias médicas. El diseño de la solución debe incorporar estándares propios del ámbito de la informática médica. El intercambio de información estipulado no corresponderá a contenidos multimedia, se limitará a la compartición de datos de tipo texto. El proyecto no contempla la instalación del sistema en centros asistenciales por parte de los estudiantes. Sin embargo estos pueden asistir los procesos de implantación. Los dominios seleccionados a modelar son «historia integral» y «materno infantil», sin embargo se contempla la incorporación de nuevos dominios en futuros desarrollos. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 23 CAPÍTULO II – MARCO CONCEPTUAL 2.1 Introducción En este capítulo se abordará la conceptualización y definición de la historia médica, se describen sus orígenes, sus principales funciones y los elementos que la caracterizan. Se detalla la perspectiva de propiedad y uso, que en la práctica no siempre responde a los principios teóricos basados en la ética. De la misma manera se presenta la historia médica electrónica, no como contraposición a la historia médica tradicional, sino como complemento que trae consigo una serie de valores agregados. De la historia médica electrónica se detalla lo necesario de tener un sistema de identificación de pacientes que sea efectivo, y que en la mayoría de los casos está más allá del alcance del propio sistema de historia médica. Así mismo se mencionan los principios básicos de seguridad que deben estar garantizados en toda implementación de sistemas de este tipo. Se hace referencia al tema de interoperabilidad marcando diferencias entre distintas formas de lograr la colaboración entre sistemas. Por último se expone la importancia de la adopción de estándares en sistemas de historias médicas, los beneficios que ofrecen y los principales obstáculos de implementación. Se hace descripción principalmente de dos tipos de estándares: los de diseño y los de comunicación, también se realiza una breve referencia a los estándares de terminologías. 2.2 Historia Médica La historia médica (HM) surge de la necesidad de registrar, según el criterio del médico, los datos más importantes en relación a un sujeto de cuidado (paciente). A través del tiempo la ciencia de la medicina se ha diversificado en diferentes especialidades, y con esto la historia médica ha pasado a ser una responsabilidad compartida por un grupo de profesionales, lo que ha obligado a estructurar su contenido coordinadamente. 2.2.1 Definiciones conceptuales Se considera información clínica o de salud «todos aquellos datos que permiten adquirir o ampliar conocimientos sobre el estado de salud de una persona, o la forma de preservarla, cuidarla, mejorarla o recuperarla», según José A. Falagán Mota y Javier Nogueira Fariña (5) . «Es el documento que refleja la práctica médica (conducta del médico hacia el paciente durante la atención); y permite velar por el cumplimiento de ciertos deberes del personal sanitario, de allí, su importancia en el ámbito jurídico y administrativo, ámbitos estrechamente vinculados con toda actividad humana y, por tanto, moral», según Zengarini (6). Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 24 Por su parte, Javier Carnicero (7) asume que la historia médica es «el conjunto de documentos que contienen los datos, valoraciones e informaciones de cualquier índole sobre la situación y la evolución clínica de un paciente a lo largo del proceso asistencial». 2.2.2 Origen Los inicios de la historia médica se remontan a la antigua Grecia alrededor del 460 A.C., cuando Hipócrates de Cos denominado padre de la medicina, establece la historia médica como: «escribir la relación de un padecimiento dada por el enfermo, ya sea de manera espontánea o mediante el interrogatorio dirigido intencionalmente», con la finalidad de analizar la información para diagnósticos más acertados. Hipócrates también hacía referencia a otro tipo de información como lo es la información moral: «conocer los sufrimientos del paciente, sus hábitos, su hogar, su familia, sus medios de vida, sus creencias, sus costumbres; en una palabra, hacer del enfermo un amigo» (8). 2.2.3 Función El propósito principal de la HM es proveer un registro documentado de la atención médica, que apoye la toma de decisiones médicas presentes y futuras. Secundariamente se derivan de la HM las funciones de investigación, educación, análisis de estadísticas, gestión de recursos, facturación, contabilidad, etc. (9). 2.2.4 Características Estas características definen el deber ser una historia médica, se listan a continuación:  Disponibilidad Por su carácter asistencial y médico legal es necesario poder acceder a una historia médica de manera inmediata bien sea para beneficio asistencial del paciente o por algún otro motivo justificado. Por ejemplo, si un paciente asiste a una consulta, su médico tratante necesitará tener acceso a su historia médica para poder dar un diagnóstico más acertado.  Confidencialidad Se estipula la no divulgación por parte del personal sanitario la información clínica del paciente y por consiguiente su historia médica.  Seguridad La seguridad hace señalamiento a los mecanismos que deben existir para garantizar la confidencialidad, la integridad y la autoría sobre la historia médica, más detalladamente:  Mantener íntegra la información, es decir, que no se altere durante s u almacenamiento o transporte. Es el principio de integridad. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 25  Identificar claramente el autor de modificaciones o creaciones de una historia médica, y que este no pueda negar este hecho. Es el principio de autoría.  Que se pueda comprobar quién ha accedido a la información y en qué momento. Dar permiso de acceso solo a las autoridades pertinentes. Es el principio de confidencialidad.  Unicidad Una historia médica es única cuando existe un solo registro médico general asociado para un paciente. Así mismo, no se considera única cuando existen múltiples registros aislados, repetidos o con información redundante que estén asociados a un mismo paciente.  Acumulabilidad Una historia médica es acumulativa cuando toda la información médico sanitaria que se va generando con respecto a un paciente es adicionada a sus registros de historia médica a través del tiempo. Esto quiere decir que la información médica de un paciente debe ser acumulada en los centros asistenciales donde éste sea atendido, y debe perdurar durante el tiempo de vida del paciente.  Integridad La información registrada en la historia médica no debe ser alterada sin autorización, y de ser modificada por alguna razón debe mantenerse el registro anterior como medida de seguridad. En consecuencia la información contenida dentro de la historia médica debe reflejar sin alteración la práctica médica realizada sobre un paciente determinado (10).  Propiedad y uso Son varios los actores que interactúan con la historia médica, entre ellos: el personal administrativo, los médicos y el personal sanitario, pero la historia a fin de cuentas «pertenece al paciente». Es así como el paciente teóricamente es el propietario de la historia médica. Por otro lado, en la práctica no siempre se cumple esto, muchas instituciones públicas o privadas, aplican políticas que restringen el acceso sobre este documento a sus verdaderos propietarios (11).  Limitaciones Las historias médicas registradas en papel tienen limitaciones, la tecnologías existentes brindad oportunidades de mejoras que podrían introducir mayores beneficios a la atención sanitaria. Algunas de estas limitaciones pueden verse reflejadas en los siguientes casos: Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 26  La desorganización y fragmentación de los distintos documentos impiden el acceso de manera lógica a la información requerida.  La ilegibilidad de documentos manuscritos impide el acceso a los datos en muchos casos.  No es posible garantizar la no modificación de los datos por personal con acceso a los mismos.  El acceso a los datos se realiza de manera única y excluyente, es decir no es posible acceder a una misma historia médica por dos o más personas simultáneamente.  La no garantía de confidencialidad debido a la ausencia de mecanismos de control de acceso a las historias médicas.  La pérdida de información debido a elementos externos tales como agua, fuego o elementos de la naturaleza.  El evidente problema de espacio requerido para su almacenamiento y el personal requerido para su gestión.  La dificultad para separar la información demográfica de la información clínica. Acorde con cada época histórica se tiende a la aplicación y uso de la tecnología existente en las diversas áreas del desarrollo humano. En la actualidad surge la posibilidad de emplear las tecnologías de información y comunicación (TIC) en el campo de las HM para dar paso a las historias médicas electrónicas (HME). 2.3 Historia Médica Electrónica La historia médica informatizada o electrónica es el resultado la aplicación de las TIC en la base de información fundamental del sistema sanitario. Una historia médica electrónica deja de ser solo el reflejo de la relación entre un paciente con su médico tratante, para pasar a formar parte de un sistema sanitario integrado. La informatización o automatización de la historia médica (el uso de la HME) no debe representar un cambio drástico en la forma de trabajar del personal sanitario en su día a día. Pero pudiese ser una buena oportunidad para que se revise la gestión de los servicios y la forma de actuar de los profesionales, para una mejora en la práctica clínica en beneficio del paciente. La HME no es un ente aislado, de hecho una HME puede integrar información de diversos sistemas hospitalarios como pueden ser la información de admisión, datos de Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 27 laboratorio, farmacia, diagnósticos, servicios médicos, etc. Inclusive un sistema de historias médicas electrónicas puede establecer mecanismos de comunicación para intercambiar información médica con otros centros asistenciales. Por lo tanto la HME no necesariamente se reduce a la información médica de un paciente atada a un único centro sanitario, sino que hace referencia a toda la información de una persona independientemente de dónde haya sido generada, pudiendo permitir el acceso a la HM en el momento y lugar que sea necesario (12 págs. 108-109). 2.3.1 Sistemas de identificación por paciente El proceso de automatizar cualquier flujo de información implica la realización de una abstracción identificando aquellas entidades básicas, y así intentar representar un esquema simplificado de dichas entidades y sus relaciones. En cualquier historia médica, una de las entidades fundamentales es el paciente, por ende resulta de vital importancia poder identificarlo correctamente. Para que la integración de una historia médica con todos los sistemas requeridos sea viable, es necesaria la identificación personal de forma unívoca para cada paciente. Esto último se logra a través de un «índice maestro de pacientes» (IMP), el cual es un sistema centralizado que puede indexar información de identificación de los pacientes junto con el resto de los datos demográficos. Es necesario entender que una identificación única para cada paciente es un esfuerzo que va más allá del sector de salud de un país; requiere de un esfuerzo de estado para su desarrollo y puesta en marcha. A continuación se muestra información en materia de identificación de salud en Venezuela y en otros países.  En Venezuela En Venezuela el acta de nacimiento asentada en el registro civil, identifica a los ciudadanos al nacer, registrando nombres, apellidos y haciendo referencia a sus progenitores o padres, fecha y lugar de nacimiento junto con su sexo. Según el SAIME (Servicio Administrativo de Identificación Migración y Extranjería) a partir de los 9 años en adelante los venezolanos pueden tramitar su cedula de identidad (C.I.), en esta se adjuntan los datos de identificación: nombres y apellidos, fecha de nacimiento, y un número único de identificación (13). Realizar la identificación de pacientes por nombres y apellidos, fecha y lugar de nacimiento puede generar errores y aumentar la probabilidad de coincidencias múltiples (la existencia de más de una persona con dichos datos repetidos en el sistema de identificación). Se puede pensar que una solución factible es la utilización del número de cédula de identidad, no obstante existe una parte de la población venezolana sin éste documento, tal como son los niños menores de nueve años y la población extranjera que Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 28 aún no logra tramitarlo. Por esto la cédula de identidad deja de ser una solución al problema de identificación inequívoca.  En otros países Para el año 2003 se tiene conocimiento de la existencia y uso de identificación personal de carácter nacional, usos administrativos, fiscales y sanitarios, en países escandinavos como Suecia, Noruega, Finlandia y Dinamarca, junto a Luxemburgo. A su vez se utilizan códigos nacionales o regionales, restringidos para el sector sanitario en Irlanda, Portugal, Italia, Canadá, Alemania y España. Por su parte, los Países Bajos tienen un número nacional de identidad, pero no sanitario. Bélgica tiene un identificador nacional para utilización en salud, pero distinto del que se emplea para otros usos. Francia utiliza como identificador en el sector sanitario el número de seguridad social, que es el del documento nacional de identidad al que se añaden una clave de dos dígitos (12 pág. 110). A todas estas, el adoptar un número único de identificación para todos los pacientes o ciudadanos, es un factor de suprema importancia para poder intercambiar información entre distintos sistemas de historias médicas electrónicas, pero no imprescindible. 2.3.2 Mecanismos de seguridad Tal como sugiere Arellano Rodríguez «los sistemas de información pueden estar a disposición de diversos miembros del equipo de salud, acotando que requieren: a) limitaciones de acceso mediante claves para resguardar la confidencialidad de los datos; b) flexibilidad, para incorporar directrices asistenciales; c) despliegue de información clínica directa de cada paciente para una adecuada atención médica; y d) cumplimiento de las políticas epidemiológicas y de gestión a nivel poblacional» (14). En lo que concierne directamente con sistemas de HME se debe garantizar la autoría de la historia, la integridad y la confidencialidad. Actualmente existen múltiples mecanismos que permiten garantizar estos principios de seguridad en los sistemas de HME. 2.3.3 Interoperabilidad La interoperabilidad es una propiedad que refiere sobre la capacidad de diversos sistemas y organizaciones para trabajar conjuntamente. El Instituto de Ingenieros Eléctricos y Electrónicos, Institute of Electrical and Electronics Engineers (IEEE), define interoperabilidad como «la capacidad de dos o más sistemas o componentes para intercambiar información y hacer uso de la información que está siendo intercambiada» (15). Se puede hablar de dos tipos de interoperabilidad; interoperabilidad sintáctica e interoperabilidad semántica. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 29 Se habla de interoperabilidad sintáctica, si dos o más sistemas son capaces de intercambiar datos. Es necesario utilizar formatos de datos específicos y establecer protocolos de comunicación. En general, los estándares como: Extensible Markup Language (XML) o Structured Query Language (SQL), satisfacen una interoperabilidad sintáctica. La interoperabilidad semántica, va más allá de la capacidad que puedan tener dos o más sistemas para intercambiar datos, la interoperabilidad semántica es la capacidad de interpretar automáticamente la información intercambiada de manera significativa y precisa con el fin de producir resultados útiles según lo definido por los usuarios finales de ambos sistemas. Para lograr la interoperabilidad semántica, ambas partes deben ceder ante un modelo de referencia común para el intercambio de información; el contenido de la información de las solicitudes de intercambio se define sin ambigüedades. En el sector sanitario intervienen un sin número de sistemas informáticos de naturaleza heterogénea, cada uno de estos sistemas manipula datos que están relacionados con un sujeto de cuidado. Sucede frecuentemente que estos sistemas son incapaces de comunicarse unos con otros para lograr un mejoramiento en la atención sobre un paciente. Pensar en servicios sanitarios integrados capaces de intercambiar información para mejora de los cuidados médicos sobre el paciente, requiere indiscutiblemente establecer protocolos para el intercambio de información, hacer uso de formatos y codificaciones que permitan definir una sintaxis y una semántica adecuada a los dominios del conocimiento médico. Un problema complejo muchas veces requiere una solución compleja, sería irreal concebir un sistema de historias médicas electrónicas como simple y trivial. Por el contrario un sistema de historias médicas electrónicas que pretenda ser eficaz, es decir; lograr el objetivo de toda historia médica, tiende a ser por lo general una solución software compleja. La utopía que persigue la historia médica electrónica es la interoperabilidad. Consiste en compartir información acerca de los pacientes; primero entre los distintos sistemas de un centro asistencial, llámese hospital, ambulatorio, clínica, etc.; segundo, entre uno o más centros asistenciales; tercero, formar una red a nivel zonal, municipal, estadal o regional; cuarto, levantar un sistema nacional unificado de historias médicas; quinto, poder edificar sistemas de historias médicas de rango internacional. Hay ejemplos tangibles de la vida cotidiana que permiten vislumbrar sistemas de historias médicas con capacidad de interoperar. Un ejemplo concreto es la banca mundial, pues ha resuelto ya en gran medida el problema del movimiento de divisas entre distintas entidades bancarias, utilizando para esto mecanismos electrónicos como las tarjetas de Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 30 crédito y débito, la banca electrónica que permite hacer transferencias, consultas y pagos de deudas, desde cualquier computador. Todo esto se ha logrado mediante el establecimiento y uso de estándares para el intercambio de la información, con la salvedad que el dominio bancario no se compara con la complejidad del dominio clínico. En la actualidad existen innumerables sistemas de historias médicas alrededor de todo el mundo y Venezuela no es la excepción a la norma. Por lo general, estos sistemas están concebidos como unidades individuales capaces de digitalizar datos y de esta manera llevar un registro médico electrónico, pero prescinden de una visión global sobre el cuidado del paciente y por ende plantean una solución muy limitada. Funcionan como islas separadas e incapaces muchas veces de importar o exportar los datos que contienen. De poco sirve tener información digitalizada sobre un paciente y no poder compartirla de forma digital, en consecuencia se debe hacer uso de medios analógicos, como la impresión. En otras palabras, se tiene información digitalizada pero no se puede hacer uso automatizado de ella. La interoperabilidad tiene entonces un rol protagónico al momento de pensar en un sistema de historias médicas electrónicas. No solo es registrar información sobre la atención realizada a un paciente, sino qué se debe estar en capacidad de intercambiar información con distintas aplicaciones. Se trata entonces de producir y consumir información. La importancia del uso de estándares para lograr la interoperabilidad entre sistemas hospitalarios radica en:  Compartir información sobre pacientes, promoviendo así el cuidado compartido entre profesionales de la salud de diversas áreas o dominios clínicos.  Lograr comunicar software de distintos proveedores.  Formar redes entre los diferentes sistemas hospitalarios y establecer flujos de información coherentes.  Mejorar la atención y cuidado sobre los pacientes. 2.3.4 Estándares De acuerdo a la Organización de Estandarización Internacional (ISO, 1992) un estándar (o norma) es «un documento establecido por consenso y aprobado por un organismo reconocido que establece, para usos comunes y repetidos, reglas, criterios o características para las actividades o sus resultados, que procura la obtención de un nivel óptimo de ordenamiento en un contexto determinado» (16). Existen dos tipos de estándares o normas: las oficiales y las de uso de facto. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 31 Una norma oficial es un documento público, elaborado por consenso, de acuerdo con un procedimiento establecido con el respaldo de un organismo reconocido. También hay que tener en cuenta las normas «de facto» normalmente impulsadas por fabricantes o grupos de interés. Se convierten en una norma debido a su uso continuo y extendido, como por ejemplo; el protocolo TCP/IP. Algunos de los organismos de estandarización a nivel mundial se observan en la Figura 1, entre los cuales destacan: el Comité Europeo de Normalización (CEN), la Organización Internacional de Estándares (ISO), el Instituto Nacional Americano de estándares (ANSI) . Figura 1. Organismos de estandarización en salud. Fuente: Moneagudo Peña, José Luis y Hernández Salvador, Carlos. Estándares para la historia clínica electrónica. [En línea] 2003. [Citado el: 7 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO7.pdf.  Beneficios de uso Cuando estandarizamos la estructura y el contenido de la información, puede ser utilizada con mayor eficacia por los hombres y las máquinas. Un estándar es simplemente un sistema común de los términos y de las definiciones que se presentan en un formato estructurado. Utilizar estándares proporciona un gran sentido de amplitud, de compartir un mismo esquema, de hablar un mismo idioma, que sin duda alguna redunda en garantías de compatibilidad.  Obstáculos de implementación Implementar estándares no siempre es fácil, puede resultar agobiante e incrementar el trabajo a realizar, añadiéndole mayores grados de dificultad. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 32 Algunas de las definiciones de estándares son extremadamente largas y complejas, en algunos casos resultan inentendibles sin la asesoría de un experto. Resulta más simple implementar una propia versión del estándar o no respetar las definiciones a cabalidad, lo que trae como consecuencia incompatibilidades y malos funcionamientos. Además un estándar no termina de serlo hasta que existan un gran número de implantaciones y por demás tenga un uso generalizado, pero no se puede forzar a ninguna entidad a utilizar un estándar. Sobre todo en proyectos innovadores existe el riesgo de implementar algo que nadie más hará. 2.3.5 Estándares sobre la HME En este trabajo se hará referencia a tres tipos de estándares, los estándares de diseño, de comunicación y de terminologías (17).  Estándares de diseño Estos definen como debe ser diseñado un sistema de historias médicas electrónicas, haciendo hincapié sobre los requerimientos básicos que debe cumplir todo sistema. Por lo general cada sistema responde a las necesidades de un contexto particular y estos estándares responden a un contexto global. Pueden surgir dificultades a la hora de intentar adaptar un modelo a una determinada situación. Es por eso que una de las características de estos estándares es la flexibilidad en la implementación, ya que no son una camisa de fuerza que obliga a los diseñadores ceñirse solo a sus especificaciones. Uno de los estándares a tener en cuenta al momento de comenzar a trabajar en un sistema de historias médicas es el «ISO 18308», el cual define un conjunto de requerimientos que debe cumplir toda arquitectura de un sistema que maneje, procese y comunique registros médicos electrónicos. Está también el estándar OpenEHR, este define una arquitectura para sistemas de HME, es ampliamente difundido y por ser de carácter abierto y de libre acceso ha sido tomado como objeto de estudio en este trabajo (18).  OPEN EHR La organización OpenEHR Es una fundación internacional sin fines de lucro. Sus objetivos son hacer realidad la creación del registro de salud, que sea interoperable entre distintos actores del sistema de salud y durable a lo largo de la vida del paciente, y de esta forma mejorar el nivel de atención de salud haciendo uso de las herramientas disponibles en la moderna sociedad de la información. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 33 Para cumplir sus objetivos la organización desarrolla especificaciones abiertas, herramientas de software y recursos de conocimiento libres. Además participa en la implementación de proyectos clínicos y en el desarrollo de normas internacionales. OpenEHR proporciona una especificación para la comunicación de extractos de HME de varios niveles de complejidad, también una especificación completa para la creación, almacenamiento, mantenimiento y consulta de la HME (19). Estándar OpenEHR Es un estándar abierto para crear HME normalizadas orientadas a la gestión del conocimiento. Para soportar proyectos de HME económicamente viables, mantenibles y adaptables. Fundamentalmente OpenEHR se basa en una arquitectura de modelo dual. Bajo este enfoque de modelo dual, tal como se muestra en la Figura 2. Figura 2. Modelo Dual Open EHR Fuente: Elaboración propia De estos dos niveles, solo el primero es el que se implementa en software de manera significativa. Como consecuencia los sistemas tienen la posibilidad de ser mucho más pequeños y más fáciles de mantener que los sistemas que incorporan el modelo del negocio, en este caso los conceptos clínicos dentro del software. De esta manera se plantea que los sistemas sean capaces de auto-adaptarse, ya que deben ser diseñados para consumir arquetipos y plantillas a medida que se desarrollen en el futuro. El modelo dual cambia la manera tradicional de implementar una solución de software. El enfoque tradicional para desarrollar software comienza con un levantamiento de requerimientos o solicitud de requisitos a través de debates, conversaciones, reuniones, etc. Normalmente de la recolección de esta información se construyen los conocidos «casos de uso», se procede luego al diseño, implementación, pruebas y puesta en producción, sin olvidar posteriormente el mantenimiento. Bajo el paradigma de modelo dual, la parte fundamental del software se basa en implementar el modelo de referencia y los arquetipos Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 34 son los encargados en manejar los conceptos clínicos, es decir, la lógica del negocio no está inmersa en el código fuente de la aplicación. El resultado clave de este enfoque es que los arquetipos constituyen una tecnología totalmente independiente, estos en el tiempo pueden cambiar y evolucionar, mientras que las estructuras de datos se mantienen. La Figura 3, ilustra la estructura formal de OpenEHR. Son tres los paquetes principales: MR, MA, MS. Todos los paquetes de definición están contenidos dentro de estos tres, pueden ser vistos también como espacios de nombres. Los tres paquetes se definen a su vez dentro del espacio de nombres «org.openEhr». Figura 3. Espacio de nombres org.OpenEHR Fuente: Adaptado de The OpenEHR Foundation. Architecture Overview. [En línea] 13 de Noviembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/overview.pdf. Alcance Proporciona una especificación para la comunicación de los extractos de HME de varios niveles de complejidad, también una especificación completa para la creación, almacenamiento, mantenimiento y consulta de la HME. Descripción técnica  Modelo de Referencia (MR): Está compuesto por diversos paquetes, cada uno de estos define un contexto local para la definición de clases. Todos estos paquetes juntos proveen identificación, acceso a los recursos de conocimiento, tipos de datos y estructuras, y apoyo al arquetipado. La Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 35 estructura de estos paquetes pueden ser expresados en distintos esquemas como XML o lenguajes de programación orientado a objetos como Java, C# o cualquier otro.  Modelo de Arquetipos (MA): Contiene los modelos necesarios para describir la semántica de los arquetipos y plantillas, de acuerdo a su uso dentro de un sistema basado en OpenEHR. OpenEHR hace uso del Lenguaje de Definición de Arquetipos (ADL) explicado con detalle más adelante.  Modelo de Servicios (MS): El modelo de servicios es una extensión de OpenEHR que incluye servicios en torno a la HME. Posiblemente este conjunto de servicios descritos actualmente en el modelo se expanda con el pasar del tiempo, por lo tanto desde OpenEHR no se recomienda tomarlo como definitivo.  Lenguaje de definición de arquetipos (ADL): El Lenguaje de Definición de Arquetipos, Archetype Definition Language (ADL), es un lenguaje formal para expresar arquetipos. ADL no se basa en ningún modelo de referencia concreto, puede ser utilizado en cualquier dominio utilizando un modelo de referencia base, es decir que no está sujeto al MR de OpenEHR. ADL está compuesto por dos sintaxis; cADL, utilizado para restricciones y dADL, utilizado para definición de datos. Es decir, dADL se emplea para expresar instancias de datos, mientras el cADL se usa para determinar restricciones que deben cumplir esas instancias (20). La estructura de un arquetipo definido en lenguaje ADL se ilustra en la Figura 4. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 36 Figura 4. Estructura de arquetipo ADL Fuente: Adaptado de The OpenEHR Foundation. Archetype Definition Language. [En línea] 12 de Diciembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/am/adl.pdf. Un arquetipo está definido por tres secciones principales: cabecera, definición y ontología. La cabecera básicamente contiene metadatos, como identificadores o datos sobre la autoría de la información. En la sección de definición es dónde el concepto clínico que representa el arquetipo es descrito en términos de entidades del modelo de referencia. Esta descripción se construye mediante la limitación de las entidades de diferentes maneras: Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 37  Restricciones en el rango de atributos de tipos primitivos.  Restricciones sobre la existencia de atributos, por ejemplo: si un valor es mandatorio para el atributo en tiempo de ejecución.  Restricciones sobre la cardinalidad de atributos, por ejemplo: si el atributo puede tener múltiples valores o no.  Restricciones sobre las ocurrencias de objetos, dependiendo de las restricciones que existan sobre la clase del objeto.  Restricciones sobre objetos complejos. Estos pueden ser escritos por restricciones sobre sus atributos o reutilizando arquetipos previamente definidos o incluso fragmentos de arquetipos. Por último, todas las entidades lingüísticas se definen en la parte de la ontología del arquetipo. Hay cuatro partes principales en una ontología de un arquetipo: definiciones de términos, definiciones de restricciones, los enlaces de largo plazo y los enlaces de restricción. Los dos primeros definen el significado de diversos términos y restricciones textuales que se producen en el arquetipo, estas se indexan con identificadores únicos, que se usan en el cuerpo del arquetipo. Las dos últimas secciones ontológicas describen las asignaciones de los términos utilizados internamente para ser usados en terminologías externas.  Ejemplo de Arquetipo: A manera de ilustración se muestra en la Figura 5 un ejemplo simple de arquetipo, en código ADL, describiendo genéricamente el concepto de guitarra como instrumento musical. Donde se definen dos partes del instrumento que son el mástil «neck» y el cuerpo «body». Posteriormente se describen cada uno de los elementos en la sección de ontología. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 38 Figura 5. Ejemplo de arquetipo guitarra Fuente: The OpenEHR Foundation. Archetype Definition Language. [En línea] 12 de Diciembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/am/adl.pdf. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 39 A los efectos de este trabajo no se incluirán ejemplos de arquetipos de dominio clínico reales, ya que son bastante voluminosos, pero se anima al lector a revisar la base de arquetipos que está disponible en línea en un sistema de nombre «Clinical Knowledge Manager», cuya finalidad es el desarrollo colaborativo de gestión y publicación de una amplia gama de recursos de conocimiento clínico (21).  Estándares de comunicación Los estándares de comunicación son propios de la interoperabilidad de sistemas, y en el ámbito de la informática médica existen gran número de estos. Se destaca el trabajo realizado por el Comité Europeo de Normalización (CEN) con su estándar avalado por ISO, ISO/CEN 13606, el cual está basado al igual que OpenEHR en un modelo dual caracterizado por la definición de arquetipos para intercambiar información o pedazos de información clínica entre distintos sistemas. Una estrategia distinta a la de definición de arquetipos es la propuesta por Health Level Seven (HL7), que apuesta por el intercambio de mensajes bajo formatos estandarizados. Los trabajos de estas dos prestigiosas organizaciones, una americana y la otra europea, son considerados sobresalientes, es por eso que se detallan con detenimiento en este trabajo, y son tomadas como referencias.  CEN ISO13606 Es una norma propuesta por el CEN y aprobada como estándar internacional por ISO. Está diseñado con miras a lograr la interoperabilidad semántica en la comunicación de historiales médicos electrónicos. Los objetivos de la norma EN13606 son (extracto de la introducción de EN13606): «El objetivo general de esta norma es definir una arquitectura de la información rigurosa y estable para la comunicación de parte o de la totalidad de la historia médica electrónica de un paciente. Esto es para soportar la interoperabilidad de sistemas y componentes que necesitan comunicar (acceder, transferir, agregar o modificar) datos de HME a través de mensajes electrónicos o como objetos distribuidos:  Preservando el significado clínico original previsto por el autor.  Que refleje la confidencialidad de los datos según lo previsto por el autor y el paciente» (22). Para lograr estos, EN13606 presenta un enfoque innovador descrito como arquitectura de Modelo Dual. Este modelo dual propone la separación de la información y el conocimiento. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 40 La información está estructurada a través de un modelo de referencia que contiene las entidades de base para la representación de toda la información de la HME. Por otro lado el conocimiento se construye en base a arquetipos, en estos se definen los conceptos clínicos, como pueden ser; medición de glucosa, presión arterial o historia familiar, en una estructura que permite las combinaciones de restricciones sobre las entidades definidas. Además proporciona un significado semántico gracias a la estructura del Modelo de Referencia. La interacción entre el modelo de referencia y el modelo de arquetipos, proporciona una ventaja en la evolución de los sistemas de información. Alcance Este estándar especifica la arquitectura necesaria para lograr la interoperabilidad entre sistemas o servicios, que provean o consuman datos de HME. Esta norma no pretende especificar la arquitectura interna o diseño de base de datos para sistemas de HME. El registro o extracto de registro que será objeto de comunicación es un registro sobre una única persona, y el alcance de la comunicación de ese registro gira en torno a esa persona y en beneficio de ella. El uso de los registros de historias médicas para otros fines tales como administración, gestión, investigación y epidemiología, no son el foco de esta norma, pero sin embargo se pudiese encontrar en ella alguna utilidad. En esta norma se define un lenguaje para la representación de arquetipos que puede ser utilizada como formato de comunicación entre arquetipos individuales. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 41 Figura 6. Estructura de la HME en EN13606 Fuente: Adaptado de CEN. EN13606 Part 1. [En línea] 11 de Septiembre de 2009. http://www.en13606.org/resources/files/doc_details/1-en13606-part-1. En la Figura 6 se observa que la HME se divide en una jerarquía de carpetas, cada carpetas tiene un conjunto de composiciones, estas a su vez se dividen en secciones que tienen diferentes tipos de entradas agrupadas o individuales. El uso de arquetipos proporciona una manera de representar esta información y hace posible la distribución de estas especificaciones, en apoyo a la interoperabilidad semántica de HME compartida. A largo plazo, se espera que mediante la participación de organismos nacionales en al área de salud, organizaciones académicas y organismos profesionales, en el desarrollo de arquetipos, contribuirá al impulso de una práctica clínico-informática de calidad. De la misma forma se estipula la existencia de bibliotecas de arquetipos de dominio público de rango regional o nacional, en distintos países, que contengan definiciones de arquetipos que se puedan acceder a través de internet, y descargar para el uso local dentro de los sistemas de HME. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 42  HL7 Es una organización internacional sin fines de lucro, con sede principal en E.E.U.U., se encarga de generar especificaciones que pretenden dar solución al problema de la comunicación de sistemas heterogéneos en al área de la salud (23). Esta organización ha definido un número importante de estándares relacionados con mensajería y documentos clínicos, estos son: Mensajería HL7 Versión 2 (HL7 V2) Es un estándar para el intercambio de mensajes en los ámbitos clínicos, económicos, asistenciales y logísticos, entre otros. Su primera versión fue creada en 1989, por su antigüedad cabe destacar que es uno de los estándares de mensajería más utilizado en el mundo de la salud (24). HL7 V2 no está basado en ningún modelo de referencia, es el estándar HL7 más aceptado y utilizado a nivel internacional pues es sencillo de implantar, siempre y cuando los entes involucrados en la emisión y recepción de los mensajes definan previamente la estructura semántica del mensaje. Mensajería HL7 Versión 3 (HL7 V3) Se puede decir que es la evolución de HL7 V2, respondiendo a superar problemas presentados con HL7 V2 y presentando una nueva forma de abordar el problema de la interoperabilidad. Está basado en un modelo de referencia llamado Reference Information Model (RIM). Todos los mensajes se derivan de un núcleo en común, el RIM. Se pretende que el modelo común dé soporte y sea capaz de extenderse para los distintos dominios del área de la salud (25). Este modelo de referencia está escrito en lenguaje Unified Modeling Language (UML). De éste se derivan los D-MIN (modelos de dominio), y a su vez de los dominios los R-MIN (modelos enriquecidos), para así desembocar en los HMD (modelos jerárquicos de mensaje). De los modelos jerárquicos se pasa entonces a las plantillas XML que son utilizadas para el intercambio de la información. La importancia del modelo de referencia es que establece un marco para hacer posible la interoperabilidad semántica. HL7 CDA R2 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 43 El HL7 Clinical Document Architecture (CDA), Arquitectura de Documento Clínico, es un Documento/Mensaje, es decir, el mensaje a intercambiar es el documento mismo y el documento en sí es un mensaje. Un documento CDA está escrito en lenguaje XML, con entradas normalizadas que permiten el fácil procesamiento de su contenido. La estructura de CDA está definida por una cabecera y un cuerpo, este último a su vez tiene una entrada de datos estructurada y otra no estructurada. El objetivo de CDA es lograr el intercambio de documentos/mensajes estandarizados entre aplicaciones heterogéneas, pero no es una especificación de sistemas de HME como tal. Tampoco determina aspectos relacionados con el almacenamiento, intercambio de documentos, políticas de seguridad y secreto compartido (26). CDA es un modelo de documento de marcado, que especifica la estructura y semántica de «documentos clínicos» con el propósito de intercambiar documentos. Un documento clínico tiene las siguientes características:  Persistencia: un documento clínico continúa existiendo en un estado inalterable, por un período de tiempo definido por las leyes o necesidades de la localidad o país.  Administración: un documento clínico es gestionado por una organización que se encarga de su cuidado.  Potencial para la autenticación: un documento clínico es un compuesto de información que se destina a ser legalmente autenticado.  Contexto: un documento clínico establece por defecto el contexto para su contenido.  Integridad: la autentificación de un documento clínico se aplica en su totalidad y no se aplica a porciones o partes del documento sin el contexto completo del documento.  Legibilidad humana: un documento clínico es humanamente legible. Un documento CDA es un definido y completo objeto de información que puede incluir texto, imágenes, sonidos y otros contenidos multimedia. Alcance El propósito de CDA es la estandarización de documentos clínicos para compartirlos o intercambiarlos entre sistemas heterogéneos. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 44 El formato de los documentos clínicos más allá del intercambio, no se abordan en la especificación CDA, como por ejemplo, el formato de datos usado para almacenar los documentos clínicos. CDA no especifica la creación o administración de documentos, sólo la estructura del documento a ser intercambiado. Si bien puede ser posible utilizar directamente el esquema de CDA en un entorno de creación de documentos, tal uso no es el propósito principal del CDA. Descripción técnica  Estructura de un documento CDA: Un documento CDA se compone de una cabecera y un cuerpo. El encabezado identifica y clasifica el documento, se proporciona información sobre la autenticación, el encuentro, el paciente, y el proveedor, y establece el contexto para el documento en su conjunto. El cuerpo contiene el informe clínico, y se divide conceptualmente en secciones anidadas (27). Un documento CDA se divide en tres partes: cabecera, cuerpo estructurado y cuerpo no estructurado. La estructura del documento CDA se ilustra en la Figura 7. Figura 7 - Partes de un CDA Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 45  Estándares de terminologías Son vocabularios que proporcionan códigos determinados para conceptos clínicos tales como alergias, listas de problemas, enfermedades, diagnósticos y medicaciones, que pueden tener variantes en el registro en papel o en una transcripción. Algunos estándares de terminologías son; ICD 10, para realizar diagnósticos médicos, SNOMED, para utilización de términos clínicos y LOINC, para registrar resultados de laboratorio. Los estándares relacionados con terminologías no son de interés directo de este trabajo, por eso no se realiza una profundización sobre ellos. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 46 CAPÍTULO III - LEVANTAMIENTO DE INFORMACIÓN 3.1 Introducción Teniendo en cuenta los conceptos planteados en el marco conceptual sobre la historia médica, la historia médica electrónica y sus estándares, es necesario pasar a un proceso de recolección de información relacionada con el contexto a modelar (historias médicas). Esto para poder avanzar hacia una solución viable del problema antes expuesto. El proceso de recolección de información consta de una serie de actividades de investigación, con el propósito de obtener información y generar información a través de ella. Información que es relevante a la hora de modelar un sistema de historias médicas electrónicas. Debido a que la solución propuesta está orientada a ser aplicada en los ambulatorios del programa SOS Telemedicina muchas de las actividades realizadas en el levantamiento de información están relacionadas con centros asistenciales de nivel ambulatorio. 3.2 Actividades de investigación Para recolectar información inherente al sistema de historias médicas que se maneja en los distintos ambulatorios o centros de salud, se realizaron las siguientes actividades:  Visitas y llamadas telefónicas a ambulatorios: el equipo de desarrollo se entrevistó con trabajadores de salud que laboran en los ambulatorios con el objetivo de identificar actores y procesos en los centros de atención sanitaria. El tipo de la entrevista fue no estructurada. Las entrevistas fueron grabadas para su mejor aprovechamiento.  Recolección de formatos de historia: se recolectaron diversos formatos usados para la historia médica, manejo de estadísticas y otros fines de salud. Esto se hizo a través de la colaboración del equipo SOS Telemedicina y en las visitas a ambulatorios.  Reuniones con médicos: para consolidar y validar los formatos y flujos de trabajo elaborados, se realizaron entrevistas con médicos de distintas especialidades, algunas se realizaron personalmente y otras por medio de video- llamadas.  Investigación particular: indagación por parte del equipo de desarrollo mediante bibliografías recomendadas y en el internet.  Otras actividades: reuniones y conferencias con panelistas y personalidades ilustradas en informática médica y telemedicina. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 47 Todas estas actividades fueron realizadas coordinadamente con la ayuda del equipo de SOS Telemedicina. Los centros ambulatorios entrevistados fueron los siguientes:  Ambulatorio Jesús Reguetti, Edo. Miranda Municipio. El Hatillo. Visita de campo.  Ambulatorio de Mapire, Edo Anzoátegui. Llamada telefónica.  Ambulatorio de medicina tropical UCV. Visita de campo.  Ambulatorio Docente UCV. Visita de campo. Las reuniones concretadas con los médicos incluyen a los siguientes especialistas:  Dra. Jacqueline Panvini. Médico especialista en Puericultura y Pediatría.  Dr. Jesús Velásquez. Médico especialista en Puericultura y Pediatría.  Dr. Héctor Arrechedera. Director del Centro de Informática Médica.  Dr. Fernando Jiménez. Médico especialista en Psiquiatría.  Detalle de otras actividades Una de las actividades adicionales que se llevó ha cabo en este trabajo de grado fue asistir al «II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares» que se realizó en la ciudad de Caracas el 26 y 27 de julio de 2011. Promovido por la Secretaría Permanente del SELA con el apoyo de la OPS/OMS y de la CEPAL. En la Figura 8 se muestran las organizaciones y empresas participantes en el evento. Figura 8. II Seminario Regional sobre Salud-e y Telemedicina Fuente: SELA. II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares. [En línea] Julio de 2011. http://www.sela.org/view/index.asp?ms=258&pageMs=87355. El objetivo general de dicho seminario fue «Contribuir al diálogo regional, a partir del intercambio de experiencias y buenas prácticas relacionadas con el uso de las Tecnologías de Información y Comunicación (TIC) en la prestación de servicios médico- sanitarios, con particular énfasis en la innovación, en las nuevas herramientas y soportes y Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 48 en los nuevos desarrollos normativos, en apoyo a los procesos de integración social en América Latina y el Caribe» (28). También se participó en reuniones organizadas por el Equipo de SOS Telemedicina entre las que se puede destacar:  Reunión con el Dr. Jorge Hernández Rojas perteneciente a la Dirección de Salud de la alcaldía del municipio Sucre, el día martes 02 de Agosto de 2011, donde se conversó sobre las iniciativas de historia médica electrónica de alcaldía y los resultados obtenidos de la aplicación del sistema de HME (desarrollado por ellos) en los ambulatorios del municipio.  Actividad divulgativa organizada por la Facultad de Medicina UCV, con tres invitados internacionales la Dra. Selene Indarte, Dr. Andrés Fernández y Lic. Enrique Oviedo, panelistas en el evento «II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares» organizado por la SELA, actividad en la cual se conversó sobre e- Salud, particularmente sobre la historia médica electrónica. 3.3 Información recolectada Mediante las actividades de recolección de información realizadas fue posible obtener variedad de formatos de historias médicas y de reportes de tipo estadístico. Se pudo identificar las distintas actividades realizadas en los ambulatorios y los actores que intervienen en dichas actividades. Se determinó el tipo de historia médica (en formato) en cada ambulatorio entrevistado, véase la Tabla 1. Tabla 1. Tipo de historia médica por centro asistencial Ambulatorio de Mapire. Historia médica tradicional en papel. Ambulatorio de medicina tropical UCV. Historia médica tradicional en papel y electronica. Ambulatorio docente UCV Historia médica tradicional en papel y electronica. Ambulatorio Jesús Reguetti. Historia médica tradicional en papel. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 49 3.3.1 Formatos de información recolectados A través del programa SOS Telemedicina y por medio de las visitas a ambulatorios se pudo recolectar una serie de formatos de donde se recoge información clínica y estadística. En la siguiente Tabla 2 se muestran los formatos recolectados del sistema de información de salud (29) y otros, indicando el centro de salud o ambulatorio de origen. Tabla 2. Formatos de información clínica recolectados Centro asistencial Formato de información clínica Ambulatorio de Mapire.  EPI 10: registro diario de morbilidad de la consulta general.  EPI 15: registro mensual de enfermedades por aparatos y sistemas.  SIS-01 FF: ficha Familiar.  SIS-01 HCBI: historia clínica básica integral.  DSP 03: formato de sistema estadístico anterior.  DSP 04: formato de sistema estadístico anterior. Ambulatorio de medicina tropical UCV.  No se obtuvieron formatos de este centro. Sin embargo se observó el funcionamiento de la historima médica electrónica que se usa en el ambulatorio. Ambulatorio docente UCV  Se observó el funcionamiento de la historima médica electrónica que se usa en el ambulatorio. La cual resulta ser una suerte de híbrido entre manuscrita y electrónica. No se obtuvieron formatos de este centro. Ambulatorio Jesús Reguetti.  Formato de historia propuesto por la Alcaldía de Miranda.  Forma SIS-01 HCBI: historia clínica básica integral.  Formatos propios por área o especialidad Equipo SOS Telemedicina  Formato sistema básico del niño. MPPS.  Formato carnet Perinatal. OPS / OMS.  Formato historia clínica perinatal. MPPS.  Formato historia clínica pediátrica. Instituto Mexicano de Seguro Social Cruz / Contreras.  Formato historia obstétrica. Alcaldía Metropolitana de Caracas, Maternidad «Concepción Palacios». Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 50 3.3.2 Actividades identificadas Mediante las visitas y llamadas telefónicas se pudo identificar las principales actividades que se llevan a cabo en los ambulatorios entrevistados. La Tabla 3 tabla tal muestra los distintos ambulatorios entrevistados y sus actividades. Tabla 3. Actividades identificadas por centro asistencial Centro asistencial Actividades o procesos Ambulatorio de Mapire.  Manejo diario de historias médicas.  Proceso de atención Materno infantil.  Programa de inmunización.  Control de obesidad.  Realización de reportes. Ambulatorio de medicina tropical UCV.  Seguimiento de pacientes con VIH.  Activiades de infectología. Ambulatorio docente UCV.  Manejo diario de historias de medicina general. Ambulatorio Jesús Reguetti.  Manejo diario de historias médicas.  Archivo general de historias médicas.  Programa de inmunización.  Activiades de farmacia.  Activiades de odontología.  Activiades de laboratorio.  Activiades de ginecología.  Realización de reportes. Nota. Fuente: Elaboración propia Una muestra de los formatos recolectados puede observarse en la Figura 9 y Figura 10. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 51 Figura 9. SIS-01 FF Fuente: Sistema de información de salud, MPPS Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 52 Figura 10. SIS-01 HCBI Fuente: Sistema de información de salud, MPPS. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 53 3.3.3 Flujos de atención identificados A través de las visitas y entrevistas a los distintos ambulatorios y centros de salud se logró identificar un flujo genérico de atención al paciente. A continuación en la Figura 11 se presenta el flujo del proceso asistencial, según la información recabada. Figura 11. Flujo de atención en ambulatorios sin sistema de HME Fuente: Elaboración propia Los principales sitios o espacios de un ambulatorio son:  Recepción: lugar donde se llevan a cabo actividades administrativas.  Sala de espera: lugar donde el paciente espera a ser atendido.  Consultorio: lugar donde el paciente es atendido por el médico.  Archivo de historias: lugar donde se almacenan las historias médicas de los pacientes. La Figura 11 describe el flujo del proceso asistencial de la siguiente manera: 1. Llegada de paciente. 2. Búsqueda de cita. 3. Búsqueda de historia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 54 -Crear historia* (Si no posee) 4. Enviar paciente a sala de espera. 5. Enviar historia a consultorio. 6. Pasar paciente a consultorio. 7. Atender paciente. -Actualizar historia. 8. Almacenar historia. 9. Mover paciente. 3.3.4 Reportes identificados En su mayoría los centros de salud y ambulatorios visitados tienen el deber de entregar un conjunto de reportes estadísticos mensuales al MPPS (Ministerio del Poder Popular para la Salud), la Tabla 4 muestra los reportes que maneja cada centro de salud entrevistado. Tabla 4. Reportes identificados Centro asistencial Reportes Ambulatorio de Mapire.  Morbilidad.  Enfermedades de notificación obligatoria.  Inmunizaciones  Atención primaria por programas. Ambulatorio de medicina tropical UCV.  No entregan reportes al ministerio. Ambulatorio docente UCV  No se determinó. Ambulatorio Jesús Reguetti.  Morbilidad.  Enfermedades de notificación obligatoria.  Inmunizaciones  Atención primaria por programas. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 55 3.3.5 Actores identificados En los distintos ambulatorios entrevistados se pudo identificar los siguientes actores que hacen vida dentro de los centros de salud que interactúan con el sistema de historias médicas, ver Tabla 5. Tabla 5. Actores identificados Actor Descripción Personal médico  Médico general o especializado encargado de tratar al paciente. Personal sanitario o de enfermería  Personal de enfermería o asistente médico que labora en el ambulatorio. Personal administrativo  Personal que realiza distintas actividades administrativas en el ambulatorio, entre ellas llevar el proceso de reportes estadísticos. Nota. Fuente: Elaboración propia Adicionalmente se confirmó el hecho de que dichos actores no solo realizan sus propias actividades sino que en casos de dificultad pueden asumir roles pertenecientes a otro actor, como es el caso de las enfermeras que en centros ambulatorios llevan el manejo de los reportes estadísticos, o el caso de algún personal sanitario el cual asume roles correspondientes al médico si éste no se encuentra. Por lo cual un actor dentro de los centros de salud puede cumplir con más de un rol a la vez. 3.3.6 Observaciones Cierta información recolectada referente a los centros asistenciales y al manejo de la HM que no se pudo categorizar por su carácter heterogéneo, se muestra a continuación como una lista de observaciones obtenidas:  No existe una historia médica única (manual o electrónica).  Se encontraron diversas formas y maneras de llevar una historia médica.  Es variado el número de áreas especializadas en los ambulatorios (0 – muchas).  Carencia de integración entre los formatos encontrados.  Intención del Estado Venezolano de estandarizar los formatos de historias médicas.  Los proceso de registro, control y seguimiento encontrados son similares. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 56  Utilización de diversos términos para referirse a un mismo concepto.  Se encontraron problemas de unificación en la nomenclatura. 3.4 Información generada Mediante la información de recabada fue posible generar información necesaria para poder modelar un sistema de historias médicas electrónicas. Esta información consta de los siguientes elementos:  Actividades relacionadas con el sistema de historias médicas.  Formatos de historia médica integral.  Propuesta de formato de historia materno-infantil. 3.4.1 Actividades en común Se pudieron identificar actividades en común que realizan los centros asistenciales visitados con relación a:  Manejo diario de historia médica.  Atención materno-infantil.  Reportes estadísticos. Estas actividades fueron modeladas mediante diagramas de actividades en los que se representan los flujos de trabajo presentes, las distintas sub-tareas que los conforman y los actores que intervienen normalmente en cada una.  Manejo diario de historia médica El manejo diario de la historia médica hace referencia a aquellas actividades que se realizan para atender a un paciente y que están relacionadas con el registro de la historia médica general o integral. Estas actividades van desde el momento en que el paciente llega a la consulta hasta que es dado de alta o trasladado a otro centro de salud. La Figura 12 muestra el flujo de actividades que se realizan en el proceso asistencial. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 57 Inicio ¿Es primera consulta? Búsqueda de HM e HM familiar NO Creación de HM del paciente SI Agregación de datos consulta actual ¿Es necesario traslado? Se realiza el traslado SI NO Fin Se registra en la HM el traslado Se le da de alta al paciente Creación de HM familiar La HM es almacenada Registro de alta en la HM Personal médico Personal sanitario o de enfermería. Asignación de nueva cita SI ¿Necesita de seguimiento? No Figura 12. Diagrama de actividad manejo diario de historias médicas Fuente: Elaboración propia  Atención Materno-Infantil El control materno infantil abarca desde los primeros días del embarazo hasta los 40 días después del nacimiento del bebe. El manejo de HM en el área de materno infantil se puede dividir en dos actividades: la que se realiza antes del nacimiento denominada «prenatal» y la que se realiza después del nacimiento denominada «posnatal».  Prenatal Se puede apreciar en la Figura 13 el flujo de actividades que se realizan en el proceso de atención materno infantil en la etapa prenatal. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 58 Inicio ¿Posee HM? Búsqueda de la HM MI SI Creación de HM Materno- Infantil NO ¿Es necesario traslado? Traslado SI Se le da de alta a la madre NOFin Registro de traslado en la HM de la madre Indicaciones y recomendaciones a la madre Evaluación de la madre Registro de datos obtenidos en la HM Materno-Infantil Registro de alta en la HM La HM es almacenada Personal médico Nota: prenatal comprende el control de la madre durante el embarazo hasta el nacimiento del niño. Personal sanitario o de enfermería. ¿Necesita de seguimiento? Asignación de nueva cita Figura 13. Diagrama de actividad Materno infantil – Prenatal Fuente: Elaboración propia  Postnatal Se puede apreciar en la Figura 14 el flujo de actividades que se realizan en el proceso de atención materno infantil en la etapa postnatal para el cuidado del recién nacido. Fin Indicaciones y recomendaciones Inicio Evaluación del niño Asignación de próxima cita Se abre una HM Materno-Infantil nueva para el niño Se registra la información recolectada en la HM ¿Posee HM MI? Búsqueda de la HM Materno- Iinfantil del niño SI NO Personal sanitario o de enfermería. Personal medico Nota: el posnatal para el recien nacido comprende desde el nacimiento del niño hasta los cuarenta días de nacido. La HM es almacenada Figura 14. Diagrama de actividad Materno infantil – Recién nacido Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 59 Fin Indicaciones y recomendaciones Inicio Evaluación de la madre Asignación de próxima cita Se abre una HM Materno- infantil Se registra la información recolectada en la HM ¿Posee HM Materno- Infantil? Búsqueda de la HM Materno- Infantil SI NO Personal sanitario o de enfermería. Personal médico Nota: el posnatal para la madre comprende desde el nacimiento del niño hasta los cuarenta días del parto a este período se le denomina puerperio. La HM es almacenada Figura 15. Diagrama de actividad Materno infantil – Madre Fuente: Elaboración propia Se puede apreciar en la Figura 15 el flujo de actividades que se realizan en el proceso de atención materno infantil en la etapa postnatal para la el cuidado de la madre. A esta etapa se le denomina puerperio y comprende los cuarenta días después del parto.  Reportes estadísticos Concierne a la emisión de reportes estadísticos de morbilidad y enfermedades de notificación obligatoria. Esta es una tarea asignada al personal administrativo y en la que interviene también el personal sanitario. Tabulación diaria de morbilidad Registro semanal y mensual de morbilidad Entrega mensual de reportes a distrito Inicio Fin Personal sanitario o d enfermería. Personal administrativo Figura 16. Diagrama de actividad Reportes estadísticos. Fuente: Elaboración propia Se puede apreciar en la Figura 16 las actividades realizadas para recabar la información necesaria para la entrega del reporte mensual al distrito sanitario correspondiente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 60 CAPÍTULO IV – EVALUACIÓN DE HERRAMIENTAS DE HISTORIAS MÉDICAS ELCTRÓNICAS 4.1 Introducción En el mundo de la medicina existen un sin número de herramientas, aplicaciones o sistemas de software que se encargan de llevar un registro electrónico de las historias médicas. Escoger una herramienta, mejorarla y adaptarla a las necesidades, es la mejor opción cuando no se quiere empezar un proyecto desde cero. Es siempre una ganancia poder observar lo que otros han hecho o están haciendo, sirve para hacerse una idea puntual sobre la forma que debe tener el proyecto propio. Evaluar herramientas existentes de HME permite tomar una decisión en cuanto al desarrollo propio de un sistema de HME. Partiendo inicialmente por determinar si se opta por adaptar una de esas herramientas a las necesidades del proyecto, apoyarse en las potencialidades que puedan tener desde su «núcleo» y crear un sistema partiendo desde ahí, o bien tomar cada una de ellas tan solo como referencias para realizar un proyecto de base. Es importante destacar que en la actualidad no existe ningún sistema de HME que sea reconocido ampliamente (nacional o internacionalmente) por sus beneficios al sistema de salud o al cuidado del paciente, según lo observado por los autores durante el proceso de investigación de este trabajo. Por el contrario son múltiples las ofertas de sistemas de HME, donde cada empresa o casa de software presenta su herramienta como la mejor. Por tanto resulta complicado discernir cual es el sistema de historias médicas indicado para satisfacer las necesidades de una organización de salud. Por el carácter del programa SOS Telemedicina se privilegiaron las iniciativas de naturaleza open source. Para realizar una evaluación adecuada, primeramente se debe dejar en claro cuáles son las necesidades a satisfacer. Un sistema de HME para el programa SOS Telemedicina debe cumplir como mínimo con los requerimientos expuestos en el primer capítulo de este documento. Fue de vital importancia que la evaluación realizada pudiese ser verificada por terceros, por lo cual se hizo necesario definir, medir y analizar ciertos criterios para justificar la selección de la herramienta adecuada para que SOS Telemedicina logre alcanzar los objetivos propuestos. 4.2 Herramientas de seleccionadas Se seleccionaron tres herramientas considerando como característica predominante el hecho de que fuesen herramientas open source. Luego de una extensa búsqueda a través Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 61 de la «world wide web» y de recibir distintas recomendaciones por parte del programa SOS Telemedicina, las herramientas seleccionadas fueron las siguientes:  Medical, http://medical.sourceforge.net/es/index.html  Open MRS, http://openmrs.org/  OpenEHR Gen-Framework, http://code.google.com/p/open-ehr-gen-framework/ Las dos primeras son sistemas de historias médicas electrónicas, de gran «popularidad» utilizadas en varias partes del mundo, y la tercera es un «framework» (un conjunto estandarizado de conceptos, prácticas y criterios para enfocar un tipo de problemática particular) para la construcción de aplicaciones de HME. 4.2.1 Medical Es una herramienta de control de atención médica y administración de instituciones de salud que ofrece las siguientes funciones:  Expediente Médico Electrónico.  Sistema de Gestión Hospitalaria (HIS).  Sistema de Información de Salud (SIS). El objetivo de esta herramienta es contribuir con los profesionales de la salud alrededor del mundo para mejorar la calidad de vida de los más necesitados, ofreciendo un sistema libre que optimice la promoción de la salud y la prevención de la enfermedad. Medical funciona bajo Open ERP, el cual es un sistema ERP-CRM. Tiene componentes separados en esquema cliente-servidor. Anteriormente era conocido como TinyErp. Su arquitectura es cliente-servidor (aplicación de escritorio) y web, está desarrollado en lenguaje Python y trabaja con el manejador de base de datos PostgreSql. Está optimizado para trabajar sobre un entorno Linux, pero tiene también soporte completo para ambientes Windows (30). Comunidad de Medical: http://medical.sourceforge.net/community.html  Funcionalidades:  Está focalizado en medicina familiar y APS (Atención Primaria de la Salud).  Interés en condiciones socio-económicas (estilos de vida, ámbito familiar, educación...).  Enfermedades y procedimientos médicos bajo los estándares (ICD-10 / ICD-10- PCS). http://medical.sourceforge.net/es/index.html http://openmrs.org/ http://code.google.com/p/open-ehr-gen-framework/ http://es.wikipedia.org/wiki/Planificaci%C3%B3n_de_Recursos_Empresariales http://es.wikipedia.org/wiki/CRM http://medical.sourceforge.net/community.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 62  Marcadores genéticos y riesgos hereditarios: más de 4200 genes relacionados con enfermedades.  Epidemiología y otros registros estadísticos.  Recetas.  Facturación.  Administración del paciente (creación, evaluación / consultas, historia ...).  Administración del personal médico.  Administración de laboratorio.  Gestión de almacén y de cadena de abastecimiento.  Administración financiera y gestión hospitalaria.  Software libre: Licencia GPL v3.  Medical cuenta con una comunidad abierta de desarrollo, y aunque funciona bajo OpenERP es independiente del ERP/CRM, posee soporte multiplataforma y protocolos para el desarrollo de nuevos módulos.  Fortalezas:  Es un producto software terminado, listo para usar.  Maneja registros de enfermedades y procedimientos médicos bajo los estándares (ICD-10 / ICD-10-PCS).  Ofrece un sistema completo de gestión hospitalaria.  Genera registros estadísticos.  Brinda un registro electrónico de pacientes.  Posee una estructura modular, favoreciendo la escalabilidad.  Debilidades:  No maneja estándares de interoperabilidad. 4.2.2 OpenMRS Es un proyecto colaborativo de código abierto. El sistema está diseñado para ser utilizado en entornos de recursos muy pobres y puede ser modificado con la adición de nuevos elementos de datos, formularios e informes sin necesidad de programación. Está concebido como una plataforma que muchas organizaciones pueden adoptar y modificar evitando la necesidad de desarrollar un sistema desde cero. OpenMRS se basa en un «diccionario de conceptos» en el que se describen todos los elementos de datos que se pueden almacenar en el sistema, tales como los hallazgos clínicos, pruebas de laboratorio o datos socio-económicos. Este método evita la necesidad de modificar la estructura de base de datos para añadir nuevas enfermedades, por ejemplo, y facilita el intercambio de diccionarios de datos entre los proyectos y los sitios. Una de las características importantes OpenMRS es su construcción modular que permite la programación de nuevas funciones sin tener que modificar el código del núcleo. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 63 OpenMRS está basado en web, pero se puede implementar en una sola computadora portátil o en un servidor grande y se ejecuta en Linux, Windows o Mac OS X (31).  Características:  Diccionario de conceptos.  Seguridad: autentificación de usuarios.  Control de acceso: basado en privilegios.  Registro de pacientes.  Multiplicidad de identificadores de pacientes.  Importación y exportación de datos.  Soporta estándares HL7 – V2.  Estructura modular desde el punto de vista administrativo y de desarrollo.  Relaciones entre pacientes.  Mezcla de pacientes duplicados.  Localización e internacionalización.  Soporta datos complejos: imágenes, archivos de sonido etc.  Herramientas flexibles para realizar reportes.  Fortalezas:  Es un producto software terminado, listo para usar.  Brinda un registro electrónico de pacientes.  Posee una estructura modular, favoreciendo la escalabilidad.  Es configurable y adaptable a las necesidades.  Está basado en tecnologías Java.  Puede utilizar distintos manejadores de base de datos (MySQL, Oracle, SqlServer, PostgreSQL).  Posee una comunidad de desarrollo.  Módulos desarrollados para telefonía móvil.  Debilidades:  No posee protocolos de comunicación, para interoperabilidad.  Dificultades en los procesos de creación y/o modificación de módulos, así como la implementación de las vistas necesarias para adecuar la aplicación a las necesidades del programa SOS. La Figura 17 muestra las aplicaciones de OpenMRS desplegadas en el mundo. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 64 Figura 17 OpenMRS Atlas Fuente: OpenMRS. OpenMRS Atlas. [En línea] http://openmrs.org/about/locations/.  Características de la plataforma  Estándares: Manejo de HL7 versión 2.  Plataforma de Desarrollo: Java  Soporte: extensa comunidad de desarrollo, soporte, mailing list, blogs, pruebas y documentación.  Despliegue: base de datos Mysql, plataforma java, servidor Tomcat. Rápido despliegue en la situación de prueba de la aplicación. 4.2.3 OpenEHR-Gen-Framework Es un generador de sistemas de historia médica electrónica basado en el estándar OpenEHR. Un Framework, ver Figura 18, es un marco de trabajo, aplicación parcial, genérica y reusable, que resuelve funcionalidades básicas simplifica y acelera nuevos desarrollos (32). Figura 18. Estructura de aplicación basada en framework Fuente: Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-gen-framework/. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 65 OpenEHR es un estándar abierto para crear HME normalizadas orientadas a la gestión del conocimiento. Para soportar proyectos de HME económicamente viables, mantenibles y adaptables. OpenEHR se basa en una arquitectura de modelo dual. El llamado modelo de referencia establece un primer nivel, mientras que las definiciones formales de los conceptos clínicos en forma de arquetipos y plantillas, establecen un segundo nivel. El resultado clave de este enfoque es que los arquetipos constituyen una tecnología totalmente independiente, estos en el tiempo pueden cambiar y evolucionar, mientras que las estructuras de datos se mantienen en el tiempo. Las funcionalidades de Open EHR-Gen Framework son las siguientes:  En función de la base de conocimiento: o Generación automática de GUI. o Validación automática de datos. o Generación de estructuras y persistencia automática.  Generación de CDA no estructurado, incorporada.  Soporte para generar cualquier sistema de historias médicas: o El sistema se genera automáticamente a partir de la base de conocimientos definida por los médicos, enfermeras y técnicos.  Internacionalízable / Localizable: todos los textos son traducibles y adaptables a culturas locales. La arquitectura del framework es MVC (modelo, vista, controlador) + Servicios. Está compuesto por; un generador de GUI; un generador y validador de estructuras; implementa el modelo de referencia normalizado de OpenEHR; posee una base de conocimientos, donde se agrupan arquetipos y plantillas; tiene un repositorio de datos clínicos en formato CDA. Por otra parte, el entorno de desarrollo consta de los siguientes componentes software:  JDK 1.6 o superior (Java).  Grais 1.3.7.  IDE Spring Source Tool Swite (STS) (basado en Eclipse), puede ser también NetBeans.  Un cliente SVN.  Un Manejador de Base de Datos (se recomienda MySQL ). Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 66  Fortalezas:  Está basado en el estándar OpenEHR y hace uso del estándar CIE10 y HL7 CDA.  Es un marco de trabajo, para desarrollar sistemas de historias médicas electrónicas.  Es configurable y adaptable a las necesidades.  Está basado en tecnologías Java.  Puede utilizar distintos manejadores de base de datos (MySQL, Oracle, SqlServer, PostgreSQL).  Se tiene contacto con los desarrolladores del framework.  Es altamente escalable.  Debilidades:  No posee protocolos de comunicación, para interoperabilidad. Aunque sí se generan documentos CDA. Foro OpenEHR Gen- Framework: http://groups.google.com/group/openehr-es Iniciativas que usan el estándar OpenEHR: http://www.openehr.org/shared/resources/usage/commercial.html 3.3 Criterios de evaluación Para evaluar las herramientas se consideraron seis criterios, cada uno con un conjunto específico de características. Por cada herramienta se evaluó cada criterio de la siguiente forma: 1. Por cada característica se acumula:  Un (1) punto si la característica está presente en la herramienta.  Cero (0) puntos si la característica se encuentra ausente. 2. Al finalizar de evaluar las características asociadas a un criterio, cada herramienta obtiene el acumulado en número de las características que posee. Para culminar la evaluación se definió el factor de importancia de cada criterio dentro del programa SOS Telemedicina y se le asignó un valor entre uno y tres puntos, siendo tres el valor que indica mayor importancia. Estos factores son:  Alto grado de importancia (3 puntos)  Grado medio de importancia (2 puntos)  Grado menor de importancia (1 punto) http://groups.google.com/group/openehr-es http://www.openehr.org/shared/resources/usage/commercial.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 67 La valoración de la herramienta en un determinado criterio depende del resultado total de las características por el factor importancia asociado a ese elemento, y la ponderación total de la herramienta corresponde al total de las valoraciones en todos los criterios. Los criterios definidos fueron:  Estándares: Se refiere al uso de estándares. A través de su uso es posible el intercambio de información médica entre distintos centros asistenciales y facilita la unificación de términos, formatos y procedimientos médicos, ambos requerimientos del programa SOS Telemedicina. En la evaluación se consideraron los estándares expuestos en el capítulo anterior: 1. Health Level Seven (HL7 CDA R2): estándar para el intercambio de documentos clínicos (en lugar de mensajes), 2. Open EHR: estándar para describir la administración almacenamiento de información clínica en forma de informes de historia clínica electrónica. 3. Clasificación internacional de enfermedades, CIE 10, estándar para la clasificación y codificación de las enfermedades y una amplia variedad de signos, síntomas, hallazgos anormales, denuncias, circunstancias sociales y causas externas de daños y/o enfermedad.  Plataforma de desarrollo: entorno de software común en el cual se desenvuelve la programación de la herramienta. 1. Plataforma open source: implica que las herramientas utilizan ambientes de desarrollos open source. 2. Multiplataforma: hace referencia al diferente entorno de desarrollo en software libre.  Soporte: documentación de la herramienta, comunidad de desarrollo y contacto con personas inmersas en estos proyectos. Esto incrementa la capacidad de escalabilidad del producto. 1. Documentación de la herramienta: describe el funcionamiento y uso de la misma, la descripción de funcionamiento viene acompañada de la debida documentación del código fuente. 2. Comunidad de Desarrollo: grupo de personas que cooperan en el desarrollo de la herramienta. Estas personas pueden ser usuarios, desarrolladores, distribuidores, soportistas, traductores entre otras cosas. http://es.wikipedia.org/wiki/Informaci%C3%B3n http://es.wikipedia.org/wiki/Sanidad http://es.wikipedia.org/wiki/Informe http://es.wikipedia.org/wiki/Software Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 68  Despliegue: permite conocer los factores necesarios para la instalación implantación y puesta en marcha del sistema. 1. Multiplataforma: refiere a que puede utilizarse en diversas plataformas (distintas combinaciones de hardware y software). 2. No requiere la instalación previa de software acoplado: no depende de algún paquete de software adicional para funcionar. 3. Posee implementaciones en distintos países del mundo: indica el índice de popularidad, si la herramienta ha sido instalada y es utilizada en diferentes iniciativas en varias partes del mundo.  Funcionalidades: acciones o tareas que es capaz de realizar el sistema. Algunas de las funcionalidades que debe cumplir dicha herramienta son: 1. Llevar un registro unificado de pacientes: permite tener un registro único de pacientes e historias, en otras palabras no existe la duplicidad ni de pacientes ni de historias. Un paciente posee una historia. 2. Gestión de especialidades de manera modular: hace referencia a la incorporación de módulos independientes asociados a los dominios clínicos, es decir: Pediatría, Ginecología, Emergencias, Psiquiatría, entre otros. 3. Manejo de información estadística y de reportes: refiere a la capacidad de generar estadísticas y reportes.  Escalabilidad: habilidad para extender el margen de operaciones sin perder calidad. La escalabilidad determina la dificultad para que un sistema pueda evolucionar o modificarse en el tiempo y por ende la dificultad para adaptar por ejemplo: la interfaz de usuario o permitir en un futuro la posibilidad de interoperar a través de telefonía móvil, ambos requerimientos del programa SOS Telemedicina. 1. Capacidad de adaptación sin modificar la lógica interna: esto implica que posee una estructura adaptable sin la realización de cambios drásticos en su estructura. 2. Posee una estructura modular incrementable: permite incorporar nuevos módulos a la aplicación sin modificar el núcleo (kernel). 3. Permite adaptar la interfaz gráfica: refiere a los cambios que se puedan realizar a las interfaces gráficas haciendo uso de hojas de estilo, templates, layouts, etc. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 69  Los criterios con un alto grado de importancia (3 puntos) son:  Escalabilidad, por lo importante que es para el programa SOS Telemedicina adaptarse y ayudar en las tareas diarias de un centro de salud sin descartar el posible incremento de funcionalidades y dominios médicos a futuro.  Estándares, requerido para llevar a cabo el intercambio de información médica tanto interna dentro de la red SOS y a futuro con otros sistemas de HME.  Los criterios con grado medio de importancia (2 puntos) son:  Soporte, por la capacidad que da a la escalabilidad y la capacidad de modificación del sistema.  Despliegue, de la herramienta para poder valorar la dificultad de su instalación y puesta en marcha.  Los parámetros con un grado menor de importancia (1 punto) son:  Funcionalidades, las cuales algunas de ellas se cubren en todas las herramientas, sin embargo existen algunas funcionalidades que corren el riesgo de no adaptarse a la realidad de las labores de los centros de salud dentro del programa SOS Telemedicina.  Plataforma de Desarrollo, la cual no afecta directamente la lógica de la aplicación pero si pudiese afectar los tiempos de desarrollo. 3.4 Metodología Se realizaron las instalaciones y pruebas de funcionamiento pertinentes sobre las herramientas, en ambientes virtuales (destinados solo para pruebas), de manera que se pudiese observar y determinar que las herramientas cumpliesen o no con las funcionalidades expuestas en las documentaciones descritas en sus portales web. Se efectuaron video-conferencias con personas con conocimiento en la materia e involucradas en los desarrollos de las herramientas evaluadas, para lograr un mayor acercamiento y compresión:  Medical: Ing. Luis Falcón, Argentina. Principal desarrollador de la herramienta.  OpenEHR Gen-Framework: Ing. Pablo Pazos, Uruguay. Co-creador de la herramienta, fundador de la comunidad OpenEHR en Español.  OpenMRS: no se concretó video-conferencia.  Asosoría general: Dr. Daniel Luna Claro, Jefe del Departamento de Informática en Salud del Hospital Italiano de Buenos Aires. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 70 Se optó por realizar la evaluación bajo un enfoque cuantitativo en aras de la objetividad, por lo cual fue necesario: 1. Evaluar las características de cada uno de los criterios, ver 2. Tabla 6. Resultados de la evaluación de los criterios. 3. Evaluar cada criterio de acuerdo con el grado de importancia dentro del programa SOS Telemedicina, ver 4. Tabla 7. 5. Expresar métricas o valoraciones para estos parámetros en cada una de las herramientas evaluadas. Ver 6. Tabla 7, específicamente ponderación total. 3.5 Resultados y análisis Tabla 6. Resultados de la evaluación de los criterios Criterios Características Medical Open EHR Gen Open MRS Estándares Soporta Open EHR 0 1 0 Soporta HL7 CDA R2 0 1 1 ICD 10 1 1 1 total 1 3 0 Plataforma de Desarrollo Plataforma open source 1 1 1 Multiplataforma 1 1 1 total 2 2 2 Soporte Documentación de la herramienta 1 1 1 Comunidad de desarrollo 1 1 1 total 2 2 2 Despliegue Multiplataforma 1 1 1 No requiere la instalación previa de software acoplados 0 1 1 Posee implementaciones en distintos países del mundo. 1 0 1 total 2 2 3 Funcionalidades Registro unificado de pacientes. 1 1 1 Gestión de especialidades de manera modular 1 1 0 Manejo de información estadística y de reportes. 1 0 1 total 3 2 2 Escalabilidad Capacidad de adaptación sin modificar la lógica interna 0 1 1 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 71 Posee una estructura modular incrementable 1 1 1 Permite adaptar la interfaz grafica. 0 1 1 total 1 3 3 Nota. Fuente: Elaboración propia Tabla 7. Resultados de la evaluación de los criterios por el factor de Importancia. Estándares Plataforma Soporte Despliegue Funcionalidades Escalabilidad Ponderación total E a P b E a P b E a P b E a P b E a P b E a P b Medical 1 3 2 2 2 4 2 4 3 3 1 3 19 Open EHR Gen 3 9 2 2 2 4 2 4 2 2 3 9 30 Open MRS 0 0 2 2 2 4 3 6 2 2 3 9 23 Importancia 3 1 2 2 1 3 Nota. Fuente: Elaboración propia. a Puntaje por criterio. b Puntaje de criterio multiplicado por valor de importancia. Luego de realizadas las evaluaciones se advirtió que había un empate técnico entre las tres opciones estudiadas en los criterios: plataforma de desarrollo y soporte, generando enorme flexibilidad de desarrollo y capacidad de mantenimiento. Se llegó a una decisión teniendo en cuenta los cuatros criterios restantes: 1. Open MRS y OpenEHR Gen Framework son herramientas altamente escalables lo que significa que pueden evolucionar o modificarse en el tiempo. 2. Al nivel de funcionalidades, se visualiza que la fortaleza de Medical radica en su amplia gama de funcionalidades que van desde las gestiones de salud, administrativas, estadísticas entre otras, pero dentro del contexto del programa SOS Telemedicina son funcionalidades que quedan por fuera de los requerimientos planteados. Tanto OpenEHR Gen-Framework como Open MRS necesitarían de programación. En principio no tiene una funcionalidad elevada a la hora de registrar los diferentes procesos médicos que tienen lugar en los centros asistenciales. No obstante, presenta gran flexibilidad al permitir almacenar metadatos, lo que le confiere una gran capacidad para adaptarse a los diversos requisitos que presente cada contexto de trabajo. 3. Open MRS es superior en el despliegue lo que significa que puede ser utilizado bajo múltiples plataformas, sin instalación de otros componentes y tiene muchos usuarios alrededor del mundo, principalmente porque, entre otras cosas, es útil en contextos donde no existen jerarquías u organizaciones claramente definidas, y es necesario mantener información que pueda adaptarse a todo tipo de cambios estructurales y situaciones. Con OpenEHR Gen Framework se puede generar una estructura de roles de los usuarios identificados en los diferentes procesos médicos, y prever todas las interacciones médico-paciente que tengan Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 72 lugar en los diferentes centros asistenciales, con la finalidad de poder realizar estadísticas y analizar los datos. 4. OpenEHR Gen Framework es superior en el criterio estándares, una muestra clara de ser una herramienta futurista que prevé obtener soluciones altamente interoperables, capaz de comunicarse y compartir más que datos, documentos con otros sistemas e instituciones. Este criterio es determinante para la selección de la herramienta a utilizar. Por lo antes expuesto y considerando que en SOS Telemedicina se requiere un sistema de HME altamente escalable con capacidad de intercambio de documentos con otros sistemas de historias médicas electrónicas se recomendó el uso de Open EHR Gen Framework para el desarrollo de la historia médica de SOS Telemedicina. OpenEHR Gen Framework es una herramienta que se apoya en el estándar del mismo nombre, y hace uso además de otros estándares de mensajerías y terminologías. Por tanto tiene un marco conceptual bien afianzado sobre lo que debe ser un sistema de historias médicas. Además OpenEHR Gen Framework no es una herramienta terminada y lista para usar, por el contrario ofrece un «núcleo» que puede ser expandido, mejorado y adaptado según las necesidades. Se puede describir la herramienta dentro del contexto del programa SOS Temedicina como «idónea» para apoyarse en ella para realizar un sistema de HME. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 73 CAPÍTULO V – MARCO APLICATIVO 5.1. Introducción Este capítulo contiene la descripción detallada de la solución software desarrollada, y realiza un acercamiento sobre el contexto de ésta solución. Se exponen las tecnologías utilizadas en el desarrollo de la aplicación, detallando los componentes de la plataforma de desarrollo. Aunque el desarrollo está basado en tecnologías Java, los componentes de «Groovy & Grails» expanden el entorno de desarrollo llevando a la aplicación a otros ambientes más allá de Java. Por su parte Groovy es un lenguaje dinámico ágil para la Plataforma Java con características novedosas, muchas de ellas inspiradas en otros lenguajes de programación. Grails es a la vez un framework para aplicaciones web libre desarrollado sobre el lenguaje de programación Groovy. Un entorno de desarrollo Groovy & Grails garantiza una alta productividad en el desarrollo del software. La solución fue elaborada bajo una metodología de desarrollo ágil, pues se consideró que era la más adecuada según las condiciones dadas desde el inicio del proyecto. De los métodos de desarrollo ágiles se decidió utilizar el de «Programación Extrema», mejor conocido como «XP». La planificación del proyecto se realizó en torno a las iteraciones que fueron definidas según ésta metodología. En este capítulo hace referencia a las actividades realizadas y las decisiones tomadas en el desarrollo de la solución. De las aplicaciones software desarrolladas se describe la arquitectura, el diseño y los detalles de implementación que se consideraron pertinentes exponer. Finalmente se muestran el conjunto de pruebas realizadas sobre el producto final y los resultados obtenidos. 5.1.1 Contexto del proyecto Este proyecto se enmarca dentro del programa SOS Telemedicina y ha sido desarrollado en el contexto del Trabajo Especial de Grado presentado ante la Universidad Central de Venezuela, Facultad de Ciencias, Escuela de Computación, bajo la tutoría del Prof. Robinsón Rivas, para optar al Título de Licenciado en Computación, por parte de los bachilleres: Armando Prieto y Ángel Rodríguez, como integrantes del equipo desarrollador. Participó también en el equipo desarrollador el bachiller Juan Carlos Escalante, estudiante de pregrado de la Universidad Católica Andrés Bello, tutorado por la Prof. Simy Blomer, de la referida universidad. El equipo de desarrollo fue supervisado por la Lic. http://es.wikipedia.org/wiki/Framework_para_aplicaciones_web http://es.wikipedia.org/wiki/Software_libre http://es.wikipedia.org/wiki/Groovy_(lenguaje_de_programaci%C3%B3n) Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 74 Nancy Urbina. La toma de decisiones fue asesorada y compartida en su mayoría con los Drs. Héctor Arrechedera y Jesús Velásquez. Se contó además con la destacada colaboración del Ing. Pablo Pazos, nacional de Uruguay, co-creador de la herramienta OpenEHR Gen Framework y fundador de la comunidad OpenEHR en español (33). 5.2 Detalle de la solución El proyecto consistió en el desarrollo de una solución computacional comprendida por dos aplicaciones de software. La primera, un sistema de HME, encargado de registrar expedientes de historias médicas en un centro de cuidado. La segunda, un IMP, que permite a distintos sistemas de HME (incluyendo al desarrollado en esta solución), compartir registros de historias médicas. El sistema de HME desarrollado, SOS-HME, está basado en el estándar OpenEHR, descrito en las especificaciones de su modelo de referencia y es compatible con ADL 1.4. Se utilizó el núcleo de la herramienta OpenEHR Gen Framework como base para desarrollar el sistema SOS-HME. SOS-HME permite el registro de historias médicas electrónicas. Dentro del sistema los registros clínicos se clasifican por dominios de trabajo, los dominios pueden ser por ejemplo, pediatría, cardiología, trauma, etc. La composición de cada dominio es particular, posee unas secciones y las secciones tienen diferentes entradas de cuidado. En las entradas de cuidado se registran los valores propios resultantes del acto de asistencia médica. Las secciones y las entradas de cuidados están determinadas por las estructuras definidas en los arquetipos existentes en la base de arquetipos de la aplicación SOS-HME. Para un dominio de trabajo existe un grupo de plantillas, cada plantilla está dividida en secciones, y cada sección contiene un conglomerado de arquetipos, como ya se dijo, cada arquetipo modela las entradas de cuidado. SOS-HME es capaz de adaptarse y modelar cualquier estructura de datos que pueda ser definida mediante arquetipos, pertenecientes a la versión ADL 1.4. En otras palabras, el sistema es capaz de transformarse, de mutar o adaptarse a las necesidades de un centro de atención sanitaria. Basta definir las plantillas y los arquetipos, según lo que se quiera registrar, alojarlos en la base de arquetipos de la aplicación y configurar unos pocos parámetros de entrada, para que la aplicación formule unas estructuras capturadoras de datos fieles a los arquetipos definidos. Cada registro clínico que se realiza tiene un estado asociado definido por la «máquina de estados» de registros clínicos. Es necesario destacar que cada registro clínico tiene asociado un responsable (puede no ser la persona que ha realizado la transcripción en Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 75 el computador), éste es el encargado de «firmar y cerrar» un registro clínico. Está definido que el responsable sea un usuario del sistema que posea el rol de médico. Dentro del sistema SOS-HME la historia médica está conformada por un conglomerado de registros clínicos realizados a lo largo de la vida de un sujeto de cuidado. SOS-HME puede agrupar por paciente todos los registros clínicos asociados a él, los registros asociados pueden ser internos o externos. Los internos son los propios del sistema, realizados en el centro de atención sanitaria. Los externos son aquellos que han sido importados desde otros sistemas de HME. Los registros importados cumplen con la arquitectura de documentos clínicos «CDA R2» definida por HL7. Así mismo, cada registro clínico creado en el sistema, que posea un estado firmado y cerrado, puede ser compartido con otros sistemas de HME, utilizando el mismo formato CDA R2. Para esto último es necesario un índice maestro de pacientes, que sirva de intermediario entre cada uno de los sistemas de HME involucrados en el intercambio. El IMP desarrollado, SOS-IMP, es el encargado de hacer posible la compartición de documentos clínicos en formato CDA R2 entre sistemas heterogéneos de HME. Bajo un esquema centralizado el SOS-IMP ofrece una serie de servicios web SOAP a través de internet. Estos servicios pueden ser consumidos por cualquier sistema HME que haya sido suscrito previamente al SOS-IMP. Es importante destacar la heterogeneidad que pueda tener cada sistema conectado al SOS-IMP. Cada sistema de HME puede ser distinto, con una estructura de datos diferente, con manejadores de bases de datos cualesquiera. Lo importante es que todos ellos conozcan y hagan uso correcto del estándar CDA R2, cuestión que va a permitir el intercambio satisfactorio de documentos clínicos. 5.3 Plataforma de desarrollo Como consecuencia de la evaluación realizada sobre las herramientas de HME presentadas en el capítulo anterior, la herramienta selecciona fue OpenEHR Gen Framework. Dicha herramienta está basada en tecnologías «Java». Para ser específicos la herramienta seleccionada está programada bajo un framework para aplicaciones web llamado Grails. A su vez Grails se basa en Groovy, un lenguaje dinámico ágil basado en Java. A fin de cuentas existe un precepto para desarrolladores que sirve para entender un entorno de desarrollo basado en Groovy & Grails, en ingles reza así «Just to convince yourself that Groovy is Java» (34), en español la traducción sería «Convéncete de que Groovy es Java». En la sección «Plataforma de desarrollo» se describe con detenimiento el marco de trabajo Groovy & Grails, ver Figura 19. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 76 Figura 19. Groovy & Grails Fuente: Elaboración propia El patrón de diseño utilizado fue «MVC + Servicios», respetando el marco de trabajo de Grails. El patrón MVC, modelo, vista, controlador, es ampliamente usado en aplicaciones web, este separa los datos de la aplicación, la interfaz de usuario, y la lógica de negocio en tres componentes distintos. A esto se le suma la integración de los servicios, los cuales sirven para desvincular a los controladores de realizar tareas complejas, repetitivas y transversales entre distintos controladores. Los servicios son los encargados de realizar las tareas complejas de la lógica de negocio. De la misma manera respetando el marco de trabajo de Grails, se utilizó la herramienta de mapeo objeto-relacional «Hibernate», haciendo uso del motor generador propio del framework de nombre «GORM». Además se eligió «MySQL» como manejador de bases de datos. La opción por este manejador de base de datos se fundamenta en la gran experiencia de desarrollo disponible en la web compartida por grupos de desarrolladores y comunidades virtuales, además este manejador puede ser utilizado bajo licencia open- source. 5.3.1 Groovy Groovy es un lenguaje dinámico ágil para la Plataforma Java, con muchas características que están inspiradas en lenguajes como Python, Ruby y Smaltalk, haciéndole posible a los desarrolladores Java, usar una sintaxis similar a Java. Este lenguaje añade y simplifica elementos propios de la sintaxis de Java, está sobrentendido que todo lo que se hace en Groovy puede hacerse en Java, sin embargo según Dierk König y otros «sería una locura escribir todo el código Java necesario para realizar la magia de Groovy» (35). Desde Groovy se puede tener acceso a todas las librerías de aplicación de Java existentes, el byte code generado por el compilador de Groovy es completamente compatible para la Java Virtual Machine (JVM). Además, casi todo el código escrito en Java es compatible con Groovy. Aunque sus versiones beta datan desde 2003, apareció formalmente Groovy 1.0 para el 2 de enero de 2007, para la fecha en la que se escribe este documento la última versión de Groovy es la 1.8.6 de 9 de febrero de 2012. Fue creado por la Java Community Process http://es.wikipedia.org/wiki/Datos http://es.wikipedia.org/wiki/Interfaz_de_usuario http://es.wikipedia.org/wiki/L%C3%B3gica_de_negocio http://es.wikipedia.org/wiki/L%C3%B3gica_de_negocio http://es.wikipedia.org/wiki/Componentes Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 77 (JCP), éste es un proceso formalizado que data desde 1998 que permite a partes de la comunidad Java involucrarse en nuevas versiones y características de la plataforma Java. 5.3.2 Grails Grails es un framework para aplicaciones web libre desarrollado sobre el lenguaje de programación Groovy. Grails pretende ser un marco de trabajo altamente productivo que hace uso de paradigmas de programación novedosos (36). Figura 20. Pila completa de Grails Fuente: Adaptado de Rocher, Graeme y Brown, Jeff. The Definitive Guide to Grails, Second Edition. s.l. : Apress, 2009. Se observa en la Figura 20 que Grails está compuesto por algunas de las más populares tecnologías de código abierto en cada una de sus categorías:  Hibernate: el estándar de facto para el mapeo de objetos relacionales (ORM) en el mundo de java.  Spring: framework de código abierto para desarrolladores Java.  SiteMesh: un robusto y estable framework para renderizado de layout.  Jetty: un comprobado recipiente capaz de integrar servlets.  HSQLDB: sistema gestor de bases de datos relacionales. http://es.wikipedia.org/wiki/Framework_para_aplicaciones_web http://es.wikipedia.org/wiki/Software_libre http://es.wikipedia.org/wiki/Groovy_(lenguaje_de_programaci%C3%B3n) Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 78  MVC El funcionamiento general del framework sigue el patrón Modelo-Vista-Controlador (MVC), a continuación se describen en detalle los componentes de este patrón implementado en Grails.  Clases de Dominio Las aplicaciones orientadas a objetos (OO), casi todas, representan en el modelo de dominio las entidades de negocio. Los desarrolladores de aplicaciones orientadas a objetos tienden a tener problemas en el mapeo de objetos con bases de datos de tipo relacional. No radica el problema en que sea complicado manipular bases de datos relaciones, la dificultad está en que normalmente no se encuentra una correspondencia directa entre el modelo de objetos y el modelo relacional de base de datos centrado en tablas. Grails es un framework que se encarga de hacer la correspondencia entre el modelo de objetos y el modelo relacional de base de datos, liberando así al programador de ésta tarea. A través de las clases de dominio se define a su vez la estructura de la base de datos, los campos de una tabla y sus relaciones con otras tablas, inclusive se pueden definir restricciones sobre esos campos e indicar el tipo de relación que se desea. Grails provee soporte para distintos tipos de relaciones entre los modelos de dominio, entre estas destacan: la agregación simple «hasOne», la relación de pertenencia «belongsTo» y la relación de tiene muchos «hasMany».  Controladores Un controlador en Grails es una clase que está encargada de manejar las peticiones de la aplicación. Generalmente el controlador recibe una petición, luego realiza alguna acción asociada a esta y por último decide que va a suceder luego. Las opciones que tiene un controlador luego de realizar una acción a partir de una petición son las siguientes:  Ejecutar otra acción, no necesariamente dentro del mismo controlador.  Desplegar una vista.  Renderizar alguna información como respuesta sin necesidad de llamar a una vista. Como se dijo anteriormente un controlador en una clase, de esta clase se crea siempre una nueva instancia por cada petición. Los desarrolladores no necesitan preocuparse de mantener un hilo seguro de ejecución como lo fuese dentro de un patrón de controladores de tipo singleton. Se pueden ver los controladores como los encargados de orquestar el comportamiento de la aplicación. Estos son el punto de entrada principal para una Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 79 aplicación, pueden delegar tareas a un servicio o interactuar con las clases de dominio para manejar la lógica del negocio, y renderizar vistas.  Vistas Las vistas en Grails son invocadas desde un controlador. El controlador es el encargado de enviar a la vista el «modelo». El modelo es un conjunto de variables y objetos que es utilizado por la vista para generar una interfaz. En el mundo de aplicaciones open-source basadas en Java existen un sin número de tecnologías de generación de vistas. Sin embargo «Java Server Pages sigue siendo la más popular tecnología de generación de vistas» Dierk König. [54] Java Server Pages (JSP) fue creado por Sun Microsystems para competir con Microsoft Active Server Pages (ASP). Sin embargo, a pesar de la madurez, robustez y familiaridad que JSP pueda tener Grails utiliza una tecnología de generación de vistas distinta llamada Groovy Server Pages (GSP). Las ventajas de GSP radican en el tiempo de ejecución:  Groovy ofrece un lenguaje de expresión mucho más potente debido a las expresiones GPath (librería de etiquetas), y la notación propia del lenguaje.  Otras características Groovy como soporte para expresiones regulares, GStrings (manejo particular de tipos de datos String), y una expresión de sintaxis para los tipos de datos Map y List lo hacen perfecto para una tecnología de visión.  Servicios Un patrón común en el desarrollo de software empresarial es la capa de servicios. Es considerada en general una buena práctica poseer una capa de servicios ya que permite centralizar el comportamiento complejo de una aplicación en una API que puede ser reutilizada por otros controladores y servicios. Los servicios en Grails al igual que los controladores son «clases».Pero a diferencia de los controladores, los servicios pueden ser «inyectados» en controladores y otros servicios, de acuerdo al patrón de diseño «Control de Inversión» (IoC), por su nombre en ingles, Inversion of Control), el cual explicamos anteriormente que mantiene la filosofía de «no me llames, yo te llamaré». De ahí la limitante de que un servicio no pueda invocar una instancia de un controlador, pues estaría en contra de este principio.  GORM Grails Object Relational Mapping, mejor conocido como GORM, es el motor de Grails que se encarga de hacer el mapeo objeto-relacional del cual se habla anteriormente Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 80 en «clases de dominio». Está basado en Hibernate, motor objeto-relacional muy utilizado en entornos Java. Automáticamente GORM genera los «métodos» necesarios relacionados con la persistencia de los objetos, tales como: guardar «save», editar «update» y eliminar «delete». Las búsquedas pueden realizarse de múltiples formas, ya sea mediante; «dynamic finders», los cuales permiten realizar búsquedas utilizando nombres de atributos de objetos buscados; o mediante el uso de «criterios», que permite realizar consultas más complejas; o inclusive utilizar Hibernate Sequence Query Language (HSQL) para consultas que sobrepasan en complejidad a los criterios y a los dynamic finders. Dejando a juicio de los desarrolladores utilizar el método de búsqueda que mejor convenga en determinando momento. GORM además permite gestionar un «política de caché», sobre objetos persistidos en memoria, para ser eficaz sobre consultadas repetidas al no buscar objetos que aún permanecen en memoria Por último, tal como se dijo anteriormente en este documento, en las definiciones de las clases de dominio se pueden colocar restricciones sobre los atributos. GORM es el encargado de validar dichas restricciones, de manera que si un objeto que necesita ser persistido no cumple con las restricciones de su clase de dominio, GORM no realiza el salvado del objeto y retorna una «colleccion» de errores sobre el método save invocado.  Plugins Los plugins en Grails son un elemento clave. Grails en sí mismo es un plugin que en tiempo de ejecución tiene el conocimiento necesario para cargar y configurar el resto de plugins incluidos en la aplicación. La idea del trabajar bajo un enfoque orientado a plugins, razonablemente puede estar en la capacidad de dividir la aplicación en pequeñas partes que pueden ser mantenidas por separado y que puedan ser compuestas y trabajar como un todo en tiempo de ejecución. La comunidad de Grails encargada de crear plugins es bastante activa, al momento de escribir este documento, están activos 768 plugins en total. Es decir, 768 complementos de software que expanden las funcionalidades del nucleo de Grails, pero que también pueden llevar a ocasionar errores por posibles incompatibilidades entre ellos. 5.3.3 Sistema Manejador de Base de Datos  MySQL Es un sistema de gestión de bases de datos relacionales, multi-hilo y multi-usuario. MySQL es muy utilizado en aplicaciones open source web y de escritorio. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 81 Es un manejador ideal para aplicaciones web, pues garantiza una rápida lectura sobre los datos, y tiene un mejor desempeño en un entorno de baja concurrencia de escritura. Según las cifras del propio fabricante, existen más de seis millones de copias de MySQL funcionando en la actualidad, lo que supera la base instalada de cualquier otra herramienta de bases de datos. 5.4 Gestión del proyecto 5.4.1 Metodología de desarrollo Se consideró pertinente utilizar una metodología de desarrollo ágil. Hacer uso de una metodología ágil promueve el desarrollo de iteraciones a lo largo de la vida del proyecto. Por lo general al final de cada iteración se cuenta con una versión funcional del sistema. De los métodos de desarrollo ágiles se decidió utilizar el de «Programación Extrema», mejor conocido como «XP», acrónimo de sus siglas en ingles. Se privilegia la metodología XP frente al resto de metodologías ágiles porque ésta pone el énfasis en la adaptabilidad del desarrollo más que sobre la previsibilidad. Esto no quiere decir que bajo un enfoque de trabajo XP el grupo de desarrollo no sea previsivo de lo necesario para el cumplimiento de los requerimientos y mucho menos que la planificación del proyecto carezca de profundidad. Por el contrario, en la metodología XP se considera que los cambios de los requisitos sobre la marcha son un aspecto natural, inevitable y en muchos casos indeseable. Por tano ser capaz de adaptarse a los posibles cambios de los requisitos durante la vida del proyecto es una aproximación mejor y más real que intentar definir todos los requisitos al mínimo detalle para luego invertir esfuerzos en controlar que no cambien. Las características fundamentales de la programación extrema son: simplicidad, comunicación, retroalimentación y coraje (37).  Simplicidad: es la base de la programación extrema. Dividir el problema en pequeñas partes alcanzables es una buena práctica. Los diseños iniciales deben ser simples y a medida que el proyecto crece deben ser redefinidos para evitar que la complejidad aumente en forma desmedida. La programación extrema apuesta que es más sencillo hacer algo simple y tener un poco de trabajo extra para cambiarlo si se requiere, que realizar algo complicado y quizás nunca utilizarlo.  Comunicación: debe ser constante entre programadores y fluida con el cliente. El cliente forma parte del equipo de desarrollo. Se considera que el código Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 82 autodocumentado es más fiable y debe documentarse solo aquello que no va a variar, por ejemplo el objetivo de una clase o un método.  Retroalimentación: se realiza un reacomodo al final de cada ciclo iterativo, de manera de reorientar el proyecto en base a satisfacer los requisitos restantes y/o realizar modificaciones sobre partes desarrolladas que no alcanzan a los requisitos planteados. La opinión del cliente es muy importante y se conoce en tiempo real.  Coraje: le permite a los desarrolladores sentirse cómodos por construir su código cuando sea necesario. Esto significa revisar el estado del sistema existente y realizar cambios sobre lo creado si estos cambios a futuro repercuten en una implementación más simple. Un ejemplo tangible de coraje es saber cuándo desechar código obsoleto, sin importar el tiempo y el esfuerzo invertido en crearlo. Se considera que esta metodología adopta las mejores características del resto de las metodologías de desarrollo, y que se aplican de acuerdo a la realidad del proyecto durante el ciclo de vida de la creación del software. 5.4.2 Panificación del proyecto En este apartado se describe la planificación inicial del proyecto en base a las iteraciones involucradas en el proceso. Cada iteración consta de un número de tareas relacionadas entre sí, que se encuentran clasificadas según por tipo. Los tipos de tareas se describen a continuación:  Aprendizaje: actividades relacionadas con la obtención de conocimientos por parte del equipo de desarrollo.  Análisis: actividad en la que es necesario estudiar una situación determinada dentro de un contexto.  Retroalimentación: tareas que permite al equipo de desarrollo compartir información y nutrirse de los conocimientos generados durante la realización de tareas anteriores.  Diseño: creación o definición de comportamiento de alguna entidad o conjunto.  Implementación: tareas de desarrollo o aplicación de diseños previamente elaborados.  Prueba: observación sobre el funcionamiento de un componente.  Presentación: dar a conocer o comunicar el estado alcanzado.  Iteración 1: Análisis de funcionamiento de OpenEHR Gen Framework Se realizó ésta iteración en el período de tiempo comprendido desde el 20/10/11 hasta el 30/11/11. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 8- 19. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 83 Tabla 8. Iteración 1, Tarea 1 TAREAS Nombre de tarea: Estudiar libro «Grails in Action» Tarea: 1 Predecesora: - Tipo de tarea: Aprendizaje Responsable: Equipo desarrollador Descripción: Estudiar libro «Grails in Action» (34) , de manera que el grupo de desarrolladores aprenda los elementos básicos para desarrollar aplicaciones en un ambiente Groovy & Grails. Nota. Fuente: Elaboración propia Tabla 9. Iteración 1, Tarea 2 TAREAS Nombre de tarea: Estudiar libro «Groovy in Action» Tarea: 2 Predecesora: - Tipo de tarea: Aprendizaje Responsable: Equipo desarrollador Descripción: Estudiar libro «Groovy in Action» (35) , de manera que el grupo de desarrolladores se familiarice con la sintaxis y elementos novedosos del lenguaje dinámico basado en Java. Nota. Fuente: Elaboración propia Tabla 10. Iteración 1, Tarea 3 TAREAS Nombre de tarea: Identificar punto de entrada del sistema Tarea: 3 Predecesora: 1, 2 Tipo de tarea: Análisis Responsable: Armando Prieto Descripción: Identificar elementos referenciados en el punto de carga del sistema, en el archivo de configuración «BootStrap.groovy». Nota. Fuente: Elaboración propia Tabla 11. Iteración 1, Tarea 4 TAREAS Nombre de tarea: Identificar parámetros de configuración Tarea: 4 Predecesora: 1, 2 Tipo de tarea: Análisis Responsable: Juan Escalante Descripción: Identificar los parámetros de configuración presentes en el archivo de configuración «Config.groovy». Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 84 Nota. Fuente: Elaboración propia Tabla 12. Iteración 1, Tarea 5 TAREAS Nombre de tarea: Seguridad y control de acceso Tarea: 5 Predecesora: 1, 2 Tipo de tarea: Análisis Responsable: Ángel Rodríguez Descripción: Identificar los elementos de seguridad y control de acceso utilizados en la herramienta. Nota. Fuente: Elaboración propia Tabla 13. Iteración 1, Tarea 6 TAREAS Nombre de tarea: Reunión de control Tarea: 6 Predecesora: 3, 4, 5 Tipo de tarea: Retroalimentación Responsable: Equipo desarrollador Descripción: Compartir los resultados obtenidos en las tareas 3, 4 y 5. Nota. Fuente: Elaboración propia Tabla 14. Iteración 1, Tarea 7 TAREAS Nombre de tarea: Proceso de generación de CDA´s Tarea: 7 Predecesora: 6 Tipo de tarea: Análisis Responsable: Armando Prieto Descripción: Determinar el método de generación de documentos CDA que posee la herramienta. Nota. Fuente: Elaboración propia Tabla 15. Iteración 1, Tarea 8 TAREAS Nombre de tarea: Vistas, plantillas y CSS Tarea: 8 Predecesora: 6 Tipo de tarea: Análisis Responsable: Ángel Rodríguez Descripción: Examinar el total de vistas y plantillas presentes en la herramienta. Examinar los distintos documentos de cascada de hojas de estilo existentes. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 85 Tabla 16. Iteración 1, Tarea 9 TAREAS Nombre de tarea: Controladores y modelo de dominio Tarea: 9 Predecesora: 6 Tipo de tarea: Análisis Responsable: Juan Escalante Descripción: Examinar el total de controladores y clases de dominio presentes en la herramienta. Nota. Fuente: Elaboración propia Tabla 17. Iteración 1, Tarea 10 TAREAS Nombre de tarea: Servicios Tarea: 10 Predecesora: 6 Tipo de tarea: Análisis Responsable: Armando Prieto Descripción: Examinar el total de servicios existentes en la herramienta. Identificar métodos principales. Nota. Fuente: Elaboración propia Tabla 18. Iteración 1, Tarea 11 TAREAS Nombre de tarea: Reunión de control Tarea: 11 Predecesora: 7, 8, 9, 10 Tipo de tarea: Retroalimentación Responsable: Equipo desarrollador Descripción: Compartir los resultados obtenidos en las tareas 7, 8, 9 y 10. Nota. Fuente: Elaboración propia Tabla 19. Iteración 1, Resultado RESULTADOS Nombre resultado: Conocimientos obtenidos resultado: 1 Responsable: Equipo desarrollador Descripción: Conocimiento sobre el framework y lenguaje en que fue desarrollada la herramienta, un mejor entendimiento sobre las partes que componen la herramienta y su funcionamiento. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 86  Iteración 2: Definición de historia médica básica integral Se realizó ésta iteración en el período de tiempo comprendido desde el 01/09/11 hasta el 30/12/11. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 20- 26. Tabla 20. Iteración 2, Tarea 12 TAREAS Nombre de tarea: Definición de formato HME integral Tarea: 12 Predecesora: - Tipo de tarea: Diseño Responsable: Equipo desarrollador, médicos especialistas Descripción: Definir en una mesa de trabajo con la ayuda de médicos especialistas el formato que debe tener una historia médica integral. Nota. Fuente: Elaboración propia Tabla 21. Iteración 2, Tarea 13 TAREAS Nombre de tarea: Creación de arquetipos y templates Tarea: 13 Predecesora: 12 Tipo de tarea: Diseño e implementación Responsable: Equipo desarrollador Descripción: Diseño e implementación de los arquetipos y templates que modelan los conceptos clínicos definidos en el formato de HME integral. Estos son: -Interrogatorio. -Motivo de Consulta. -Exploración funcional. -Enfermedad actual. -Examen físico. -Tratamiento. -Diagnóstico. -Movimiento de paciente. Nota. Fuente: Elaboración propia Tabla 22. Iteración 2, Tarea 14 TAREAS Nombre de tarea: Instalación y prueba unitarias de arquetipos y templates Tarea: 14 Predecesora: 13 Tipo de tarea: Prueba Responsable: Equipo desarrollador Descripción: Pruebas sobre de funcionamiento sobre los arquetipos y templates creados. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 87 Nota. Fuente: Elaboración propia Tabla 23. Iteración 2, Tarea 15 TAREAS Nombre de tarea: Reunión de control Tarea: 15 Predecesora: 14 Tipo de tarea: Retroalimentación Responsable: Equipo desarrollador Descripción: Evaluar los resultados obtenidos en las pruebas de funcionalidades realizadas sobre los arquetipos y templates. Nota. Fuente: Elaboración propia Tabla 24. Iteración 2, Tarea 16 TAREAS Nombre de tarea: Modificación de arquetipos y templates Tarea: 16 Predecesora: 15 Tipo de tarea: Diseño e implementación Responsable: Equipo desarrollador Descripción: Modificar los arquetipos y templates según las deficiencias y problemas encontrados en la instalación y pruebas, según los resultados obtenidos de la evaluación realizada sobre estos. Nota. Fuente: Elaboración propia Tabla 25. Iteración 2, Tarea 17 TAREAS Nombre de tarea: Presentación de estructura final de arquetipos y templates Tarea: 17 Predecesora: 16 Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Presentar las formas finales obtenidas en los arquetipos y templates que modelan la historia médica integral. Nota. Fuente: Elaboración propia Tabla 26. Iteración 2, Resultados RESULTADOS Nombre resultado: Prototipo de historia médica integral. resultado: 2 Responsable: Equipo desarrollador Descripción: Dominio de historia médica integral aprobado por especialistas e implantado correctamente. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 88  Iteración 3: Interoperabilidad Se realizó ésta iteración en el período de tiempo comprendido desde el 01/12/11 hasta el 31/01/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 27-31. Tabla 27. Iteración 3, Tarea 18 TAREAS Nombre de tarea: Creación de SOS-IMP Tarea: 18 Predecesora: - Tipo de tarea: Diseño e implementación Responsable: Armando Prieto Descripción: Creación de la aplicación índice maestro de pacientes, SOS-HME. Implementación de servicios web para la compartición de documentos clínicos entre distintos centros de salud. Basado en políticas HL7 PIX y PDQ. Nota. Fuente: Elaboración propia Tabla 28. Iteración 3, Tarea 19 TAREAS Nombre de tarea: Políticas de seguridad sobre servicios web Tarea: 19 Predecesora: 18 Tipo de tarea: Diseño e implementación Responsable: Armando Prieto Descripción: Establecimiento de mecanismos de seguridad mediante WS-SECURITY sobre servicios web SOAP. Garantizar en el intercambio de documentos clínicos la autenticidad, la integridad y la confidencialidad del mensaje. Nota. Fuente: Elaboración propia Tabla 29. Iteración 3, Tarea 20 TAREAS Nombre de tarea: Acoplamiento de SOS-HME con SOS- IMP Tarea: 20 Predecesora: 19 Tipo de tarea: Diseño e implementación Responsable: Armando Prieto Descripción: Integración del sistema de historias médicas electrónicas con el índice maestro de pacientes. Consiste en consumir desde SOS-HME los servicios web ofrecidos por el SOS-IMP. Cumplir con las políticas de seguridad establecidas. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 89 Tabla 30. Iteración 3, Tarea 21 TAREAS Nombre de tarea: Pruebas unitarias sobre SOS-IMP Tarea: 21 Predecesora: 20 Tipo de tarea: Pruebas Responsable: Armando Prieto Descripción: Realización de pruebas sobre el intercambio de documentos clínicos. Se utilizan varios clientes SOS-HME como distintos centros de atención conectados al SOS-IMP. Nota. Fuente: Elaboración propia Tabla 31. Iteración 3, Resultados RESULTADOS Nombre resultado: Interoperabilidad implantada. resultado: 3 Responsable: Equipo desarrollador Descripción: Se logró el enlace entres las aplicaciones SOS-IMP y SOS-HME, mediante el consumo de servicios web. Nota. Fuente: Elaboración propia  Iteración 4: Diseño de interfaz gráfica Se realizó ésta iteración en el período de tiempo comprendido desde el 13/12/11 hasta el 31/03/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 32- 35. Tabla 32. Iteración 4, Tarea 22 TAREAS Nombre de tarea: Reunión con equipo de diseño Tarea: 22 Predecesora: 3 Tipo de tarea: Presentación Responsable: Equipo desarrollador, Equipo de diseñadores gráficos Descripción: Compartir ideas y visiones de manera que se pueda definir en una mesa de trabajo las pautas principales de una interfaz gráfica para el sistema SOS-HME. Las principales interfaces a modelar son: -Acceso principal. -Registro de pacientes. -Registro de episodios clínicos. -Reportes EPI. -Consulta de historias por paciente. -Administración del sistema. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 90 Tabla 33. Iteración 4, Tarea 23 TAREAS Nombre de tarea: Creación de hojas de estilos para interfaz gráfica Tarea: 23 Predecesora: 22 Tipo de tarea: Diseño Responsable: Equipo de diseñadores gráficos Descripción: Creación de hojas de estilo CSS para interfaces gráficas de la aplicación SOS- HME. Nota. Fuente: Elaboración propia Tabla 34. Iteración 4, Tarea 24 TAREAS Nombre de tarea: Integración de hojas de estilo y adaptación de interfaz gráfica Tarea: 24 Predecesora: 23 Tipo de tarea: Presentación Responsable: Armando Prieto Juan Escalante Descripción: Adaptar la interfaz gráfica por defecto de OpenEHR GEN Framework a la definida para SOS-HME. Consiste en realizar cambios a los layouts y vistas existentes, y crear nuevos de ser necesario. Incorporar las hojas de estilo creadas por el equipo de diseñadores. Nota. Fuente: Elaboración propia Tabla 35. Iteración 4, Resultados RESULTADOS Nombre resultado: Nueva interfaz gráfica implementada resultado: 4 Responsable: Equipo desarrollador Descripción: Se implementó la nueva interfaz gráfica Nota. Fuente: Elaboración propia  Iteración 5: Acceso y autorización Se realizó ésta iteración en el período de tiempo comprendido desde el 01/11/11 hasta el 15/03/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 36- 38. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 91 Tabla 36. Iteración 5, Tarea 25 TAREAS Nombre de tarea: Creación de administración de usuarios del sistema. Tarea: 25 Predecesora: - Tipo de tarea: Diseño e implementación Responsable: Ángel Rodríguez Descripción: Adecuación de modelo de dominio para las necesidades de una administración de usuarios. Creación de controladores y vistas para la administración de usuario. Establecer Mecanismos de seguridad para la manipulación de claves de usuarios en la administración del sistema. Nota. Fuente: Elaboración propia Tabla 37. Iteración 5, Tarea 26 TAREAS Nombre de tarea: Adecuación de accesos en la aplicación. Tarea: 26 Predecesora: - Tipo de tarea: Diseño e implementación Responsable: Ángel Rodríguez Descripción: Establecimiento de reglas de acceso a ciertas áreas y funcionalidades de la aplicación de acuerdo a los roles de usuario antes definidos. Implementación de los mecanismos necesarios para que dichas reglas de acceso se cumplan a cabalidad. Nota. Fuente: Elaboración propia Tabla 38. Iteración 5, Resultados RESULTADOS Nombre resultado: Módulo de administración de usuarios resultado: 5 Responsable: Equipo desarrollador Descripción: Prototipo de la aplicación con módulo agregado de administración de usuarios y manejo de roles. Nota. Fuente: Elaboración propia  Iteración 6: Definición historia médica materno infantil Se realizó ésta iteración en el período de tiempo comprendido desde el 15/03/12 hasta el 15/04/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 39- 40. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 92 Tabla 39. Iteración 6, Tarea 27 TAREAS Nombre de tarea: Definición de formato HME materno infantil Tarea: 27 Predecesora: - Tipo de tarea: Diseño Responsable: Ángel Rodríguez, médicos especialistas Descripción: Definir en varias reuniones con médicos especialistas y a partir de una serie de documentos de historias médicas materno infantil recopilados un formato de historia materno-infantil. Nota. Fuente: Elaboración propia Tabla 40. Iteración 6, Resultados RESULTADOS Nombre resultado: Formato de historia materno infantil Resultado: 6 Predecesora: 3 Responsable: Equipo desarrollador Descripción: Propuesta de formato de historia materno infantil. Nota. Fuente: Elaboración propia  Iteración 7: Pruebas integrales Se realizó ésta iteración en el período de tiempo comprendido desde el 01/04/12 hasta el 04/05/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 41- 46. Tabla 41. Iteración 7, Tarea 28 TAREAS Nombre de tarea: Evaluación del sistema por parte del Dr. Jesús Velásquez Tarea: 28 Predecesora: Tipo de tarea: Evaluación Responsable: Armando Prieto Juan Escalante Descripción: Evaluación del funcionamiento del sistema por parte del Dr. Jesús Velásquez. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 93 Tabla 42. Iteración 7, Tarea 29 TAREAS Nombre de tarea: Charla y realización de pruebas con estudiantes de 4to y 5to año de medicina Tarea: 29 Predecesora: Tipo de tarea: Evaluación Responsable: Nancy Urbina Descripción: Charla divulgativa a estudiantes de 4to y 5to año de medicina. Realización de pruebas por parte de los estudiantes asistentes a la charla. Nota. Fuente: Elaboración propia Tabla 43. Iteración 7, Tarea 30 TAREAS Nombre de tarea: Presentación formal del sistema Tarea: 30 Predecesora: Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Presentación formal de la herramienta por parte del equipo de desarrollo a los Doctores y al personal del Programa SOS Telemedicina. Nota. Fuente: Elaboración propia Tabla 44. Iteración 7, Tarea 31 TAREAS Nombre de tarea: Reunión con la directiva del programa SOS Telemedicina Tarea: 31 Predecesora: Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Reunión con la directiva del programa para determinar correcciones pertinentes sobre el sistema SOS-HME. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 94 Tabla 45. Iteración 7, Tarea 32 TAREAS Nombre de tarea: Realización de correcciones Tarea: 32 Predecesora: Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Realización de correcciones en base a las correcciones realizadas por la directiva del programa SOS Telemedicina. Nota. Fuente: Elaboración propia Tabla 46. Iteración 7, Tarea 33 RESULTADOS Nombre resultado: Aprobación de la solución Resultado: 33 Predecesora: 4 Responsable: Equipo desarrollador Descripción: Aprobación de la solución por parte del equipo de SOS Telemedicina Nota. Fuente: Elaboración propia 5.5 Sos Historia Médica Según los requerimientos de este proyecto se diseñó e implementó un sistema de historias médicas electrónicas. Se muestra a continuación su arquitectura (basada en OpenEHR Gen Framework), sus componentes en detalle y algunas tareas propias de la implementación que se consideraron pertinentes reflejar. En el apartado de arquitectura se podrá examinar la estructura del sistema desde diferentes ópticas para facilitar una mejor compresión. 5.5.1 Arquitectura La aplicación SOS-HME está basada en OpenEHR Gen Framework, se describe la arquitectura general de la aplicación, sus principales componentes y las relaciones existentes entre ellos. Se describen los componentes desde diferentes ópticas para poder apreciar en totalidad su funcionamiento.  Vista por componentes Los principales componentes son el clínico, demográfico, reportes y servicios. El componente clínico es aquel que está encargado del registro y muestra de la información clínica. El componente demográfico ofrece las funcionalidades de gestión de personas y roles. El componente de reportes es el encargado de generar informes estadísticos basados en los registros clínicos. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 95 También cuenta la aplicación con un componente dedicado a realizar las tareas de interoperabilidad. La Figura 21 ilustra los componentes de la aplicación. Figura 21. Componentes SOS-HME Fuente: Elaboración propia  Vista por capas Debido a que el framework está implementado bajo un patrón MVC + Servicios, las capas del sistemas preservan este orden. La Figura 22 muestra las capas del sistema. Figura 22. Capas SOS-HME Fuente: Basado en Pazos, Pablo y Carrasco, Leandro. TRAUMAGEN. 2010.  Vista o GUI: permite al usuario interactuar con el sistema.  Controladores: encargado de procesar las peticiones realizadas por el usuario, verificar si se cumplen las condiciones necesarias para ejecutar dichas acciones y por último realizar una tarea. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 96  Modelo: compone el modelo de referencia (RM) de OpenEHR, para información clínica y demográfica.  Servicios: realizan tareas repetitivas y complejas simplificando el trabajo a los controladores. Se destacan los servicios demográficos, los servicios clínicos y los servicios de comunicación con otros sistemas.  Persistencia: esta capa está compuesta por tres bases de datos. La primera, una base de datos objeto-relacional que almacena información clínica-demográfica directamente. La segunda base de datos, es una base de conocimiento clínico formada por arquetipos y plantillas. Por último existe un repositorio documental, donde los registros son agrupados y organizados en documentos, análogos a los registros en papel, que cumplen con la norma CDA.  Vista de funcionalidades En la Figura 23 se muestran las funcionalidades principales del sistema. Figura 23. Principales funcionalidades SOS-HME Fuente: Elaboración propia  Crear registro clínico: la creación de episodio registra la hora de comienzo y una observación referente al episodio a registrar. Al crear el episodio el equipo médico puede comenzar a registrar información clínica.  Registro clínico: esta funcionalidad permite el registro de información relevante durante el proceso asistencial.  Firma del registro clínico: al culminar la atención médica o completado el registro clínico, habiendo previamente identificado al paciente, se procede a Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 97 firmar el registro. El responsable de realizar la firma es el médico responsable de la atención del referido paciente. Un registro clínico firmado es un documento médico-legal inalterable, respaldado por un documento clínico en formato CDA.  Reapertura de registro clínico: permite en casos que requieran por alguna circunstancia especial reabrir un registro clínico. En la base de datos documental el registro anterior permanece sin cambios, pues es un documento médico-legal que no puede ser eliminado.  Generación de documentos clínicos: una vez cerrado y firmado un documento clínico, se genera un documento en formato CDA, contentivo de todos los datos plasmados en el registro clínico.  Registro demográfico: se encarga de manejar toda la información de las personas y roles. Todas las personas que participan en un acto médico deben estar registradas previamente en este componente.  Ver historia médica: permite consultar toda la información clínica correspondiente a un paciente. La historia médica está compuesta por los registros internos y por los registros externos a través del componente de interoperabilidad.  Generación de reportes: genera los reportes estadísticos correspondientes al SIS 02 consulta general, SIS 02 registro de morbilidad por enfermedades notificables y SIS 04 registro semanal de enfermedades de notificación obligatoria.  Administrar personas y roles: administra a las personas que interactúan con el sistema, su identificación, roles y permisos. En SOS-HME las vistas son creadas «dinámicamente» a partir de la información presente en la base de conocimiento en arquetipos y plantillas. El componente manejador de arquetipos en SOS-HME lleva por nombre «Archetype Manager» y el manejador de plantillas «Template Manager». El componente encargado de generar la interfaz gráfica a través de los arquetipos y plantillas se llama «GuiGen». Otro componente importante es el «Data Binder», este es el encargado de vincular el RM y la información registrada por los médicos a través de la interfaz de usuario. Crea las instancias de los objetos del RM partiendo de los arquetipos y plantillas, verifica las restricciones y valida los datos ingresados. Véase la Figura 24. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 98 Figura 24. Componentes principales de SOS-HME Fuente: Adaptado de Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-Gen Framework/. Aplicar este enfoque redunda en un sistema de HME que fácilmente puede ser modificado. No es necesario alterar el código fuente de la aplicación software para generar los cambios, gracias a la separación del conocimiento repartido entre arquetipos y templates. Se obtiene un sistema durable en el tiempo, económicamente viable y mantenible. 5.5.2 Diseño detallado En este apartado se describen los principales módulos del sistema, que ya han sido presentados en el punto anterior dedicado a la arquitectura del sistema. Se listan los módulos a continuación:  Módulo registro clínico. o Gestor de plantillas. o Gestor de arquetipos. o Gestor de interfaz. o Data Binder. o Máquina de estados. o Diagnóstico codificado.  Módulo de registro demográfico. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 99 o Gestión de pacientes o Autenticación de usuarios.  Módulo de interoperabilidad  Módulo registro clínico Es el encargado de realizar las tareas de persistencia sobre la información clínica. En este apartado se exponen en detalle los elementos que conforman el componente del registro clínico.  Gestor de plantillas, (Template Manager) Las plantillas agrupan un conjunto de arquetipos, en SOS-HME las plantillas son utilizadas para formar formularios partiendo de los arquetipos contenidos. Un arquetipo puede ser utilizado en varias plantillas al mismo tiempo, dándole la capacidad al sistema de generar una captura de datos específica para un determinado escenario clínico. Template Manager o Gestor de Plantillas, realiza la carga de plantillas en tiempo de ejecución, se encarga de buscar y cargar las plantillas en memoria. Las plantillas se leen desde su formato de origen XML y son cacheadas en memoria para acelerar próximas referencias. El framework OpenEHR Gen define un formato propio para definición de plantillas distinto al propuesto por la organización OpenEHR. Según sus autores debido a que en ese momento las especificaciones de plantillas de OpenEHR aún se encontraban en etapa de desarrollo.  Gestor de arquetipos (Archetype Manager) Es un componente que se encarga de cargar los arquetipos desde la base de arquetipos y montarlos en memoria. Para modelo de arquetipos de OpenEHR existe una completa especificación a diferencia del modelo de plantillas. Para el modelo de arquetipos existen implementaciones de referencia, el framework OpenEHR GEN utiliza la implementación de Java realizada por Rong Chen (38).  Generador de interfaz En OpenEHR Gen Framework la interfaz del registro clínico se genera automáticamente partiendo de los arquetipos y plantillas. Esta funcionalidad está basada en un trabajo previo «Towards Automatically Generating Graphical User Interfaces from Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 100 openEHR Archetypes» (39). En este apartado se especificará el funcionamiento de este componente. Para generar la interfaz gráfica partiendo de los ítems de los arquetipos primeramente se establece una relación entre los componentes para captura de datos de los formularios web y los tipos de datos propios de OpenEHR. Los arquetipos tienen una estructura de árbol la cual es recorrida por el Generador de Interfaz o GUI-GEN en profundidad con una secuencia de pre-orden (raíz, izquierda, derecha) que permite mostrar cada nodo hoja dependiendo de su tipo de dato OpenEHR y su asociación como elemento HTML. Véase la Tabla 47. Tabla 47. Tipos de datos OpenEHR y asociación con elementos HTML Tipo OpenEHR Control HTML Observaciones CLUSTER <div> Agrupador de Cluster y Element. ELEMENT <div> Contenedor de elementos. DV_BOOLEAN <select>, tres opciones «si, no, nulo» Ítem para valores booleanos. DV_TEXT <textarea> Ítem para texto largo DV_CODED_TEXT <select>, opciones codificadas Ítem para texto codificado. DV_DATE <input type=´text´ class=´date´> Se usa «dataPicker» de jQuery. DV_DATE_TIME <input type=´text´ class=´dateTime´> Se usa «dataPicker» de jQuery. DV_QUANTITY <input type=´text´> para magnitude, <select> para unidades. Cantidades expresadas en unidad y magnitud. DV_ORDINAL <select> opciones codificadas y ordenadas según índice Valores ordenados. DV_COUNT <input type=´text´> solo para número enteros Números enteros. Nota. Fuente: Adaptado de Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-Gen Framework/. El punto de entrada para la generación de interfaces es el GuiGenController, el cual se encarga de proyectar la vista/plantilla (view/template, en Grails) adecuada según sea el método de visualización: create, show, edit.  Create: genera una vista nueva para el llenado de datos.  Show: muestra los datos guardados sin posibilidad de realizar edición.  Edit: mustra los datos guardados con posibilidad de realizar edición. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 101 Existe una vista dedicada a cada elemento: una vista para DV_DATE, una para DV_TEXT, DV_COUNT, etc. El GuiGen recorre cada nodo del arquetipo a la vez que va generando la interfaz según sean los nodos encontrados en el camino. Por ejemplo si el GuiGen encuentra un nodo de tipo DV_TEXT genera en HTML un “<input type=´text´>”. Si encuentra un CLUSTER entonces genera un “<div>” que agrupa a todos los nodos hoja de las ramas asociadas a la raíz, que en este caso sería el CLUSTER.  Data Binder Es el encargado de crear las estructuras del RM de OpenEHR partiendo de la información recopilada de arquetipos y templates, y de los datos que se obtienen al procesar un formulario web. El Data Binder asocia tres elementos principales: id_Plantilla, id_Arquetipo e id_Nodo_de_arquetipo. Con estos tres identificadores es suficiente para determinar la estructura del RM a instanciar y a persistir. A la vez este componente realiza las tareas de validación de los datos según sean las restricciones definidas para un nodo particular en un arquetipo. Figura 25. DataBinder Fuente: Elaboración propia La Figura 25 muestra la clase DataBinder. El método «bind(…)» toma los datos provenientes del envío del formulario (arquetipos y nodos), junto con el identificador de la plantilla y forma la estructura del RM. La función «getErros()» retorna todos los errores ocurridos en el proceso de validación. El método «getFieldErros(…)» devuelve una lista de errores para un nodo determinado.  Máquina de estados La máquina de estados original del framework fue simplificada eliminando el estado «registro cerrado», quedando solo dos estados posibles para los registros clínicos: «registros abiertos» y «registros firmados», Véase Figura 26. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 102 Al ser creado un registro éste tiene un estado de registro abierto y permanece abierto hasta el momento en el que un médico aprueba con su firma el cierre del registro. Un registro puede pasar de firmado a abierto en caso de ocurrir una reapertura, con la salvedad de que la versión anterior del registro se mantiene guardada en la base de datos documental. Figura 26. Diagrama de estados de registro clínico Fuente: Elaboración propia  Diagnósticos codificados Es una funcionalidad propia del framework OpenEHR Gen que permite realizar diagnósticos codificados en un registro clínico utilizando CIE-10. Sin embargo el conjunto de diagnósticos del framework se limita solo al dominio de trauma. Se expandió esta funcionalidad anexando todos los grupos y subgrupos del CIE-10 a la base de datos del sistema. De esta manera se puede realizar cualquier diagnóstico codificado contemplado en el CIE-10. Cabe destacar que se pueden realizar diagnósticos no codificados, es decir sin utilizar la norma anteriormente citada. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 103  Módulo registro demográfico El componente demográfico es el que modela la información con respecto a las entidades, personas, organizaciones, roles, permisos, etc. En la Figura 27 se muestra un extracto. El modelo no discrimina entre entidades de médicos, pacientes y enfermeras por separado. Todo lo que interactúe con el sistema es un «Party» (entidad genérica). «Role» modela el rol que puede poseer un actor. Las entidades con roles de llaman «Actor». Un «Agent» es un actor que no es ni persona ni organización, podría ser un dispositivo o aparato. Un «Person» modela una persona. Un «Organization» modela una organización, e.j. Hospital, departamento, etc. Figura 27. Extracto del modelo demográfico Fuente: Elaboración propia  Gestión de pacientes La gestión de pacientes es parte fundamental de SOS-HME, debido a que requiere integración con sistemas externos de identificación.  Admisión de pacientes Consiste en la búsqueda o registro de un paciente en el sistema. Se considera obligatoria en la admisión de pacientes la búsqueda de un paciente, para verificar si existe o no con antelación.  Listado de candidatos Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 104 Muestra una lista de pacientes coincidentes con los parámetros de búsqueda. De los pacientes de la lista resultante se pueden examinar sus detalles, o simplemente seleccionar dicho paciente para asignarlo a un registro clínico creado previamente.  Registro de nuevo paciente Consiste en registrar los datos de un nuevo paciente al sistema. El registro contempla solo los datos demográficos, de los cuales destacan: la identificación, procedencia, datos personales, dirección y contacto.  Edición de paciente Se realizan modificaciones sobre los datos pertenecientes a un paciente registrado previamente en el sistema. El formulario se autocompleta con la información preliminarmente registrada, todos los valores son modificables incluyendo los identificadores.  Selección de paciente Permite asociar al paciente como sujeto de cuidado a un registro clínico abierto con anterioridad. Previo a la asociación se pregunta al usuario si está seguro de seleccionar esa acción puesto que todo el registro clínico será asociado a ese paciente y no puede reversarse el proceso.  Detalle de paciente Se muestra el detalle demográfico-clínico del paciente, con opción de ver los registros clínicos internos o externos. Permite a un usuario con rol «médico» realizar asignaciones y cruces del paciente en el SOS-IMP.  Autenticación de usuarios Es el encargado de autorizar el acceso de los usuarios al sistema. El autentificador verifica si el usuario existe y es válido, y si posee las credenciales necesarias para realizar una tarea determinada. La Tabla 48 muestra la lista de roles que puede poseer un usuario del sistema, se muestra una breve descripción y se listan los permisos que posee. Tabla 48. Tabla muestra el lista de roles, descripción y permisos Administrador de usuarios Encargado de administrar los usuarios y sus roles en la aplicación.  CRUD de usuarios.  CRUD de personas.  Asignar roles a una determinada persona en el sistema. Médico Encargado de principalmente del manejo del registro clínico de  Crear un registro clínico.  Registrar un nuevo paciente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 105 los pacientes pero también puede realizar actividades administrativas.  Editar los datos de un paciente ya registrado.  Puede editar y firmar el registro clínico de un paciente.  Puede reabrir un registro clínico ya firmado.  Puede registrar un paciente en el IMP.  Puede eliminar el registro de un paciente en el IMP.  Puede establecer una relacion de un paciente con otro paciente en el IMP.  Puede eliminar una relacion de un paciente en el IMP. Personal- Enfermería Dedicado al cuidado del paciente y ayuda a la edición de los registros clínicos de los pacientes.  Crear un registro clínico nuevo.  Registrar un nuevo paciente.  Editar los datos de un paciente.  Generar reportes estadísticos.  Acceso al registro clínico del paciente para editarlo en caso de que esté abierto o para verlo en el caso que ya haya sido firmado. Personal- Administrativo Dedicado a realizar labores administrativas en la aplicación.  Crear un registro clínico.  Registrar un nuevo paciente.  Editar los datos de un paciente.  Generar reportes estadísticos.  No tiene acceso los registros clínicos. Nota. Fuente: Elaboración propia Los roles implementados siguen una jerarquía en la que los privilegios asociados al rol de «personal administrativo» están contenidos en los privilegios asociados al «personal de enfermería» y los de este a su vez se encuentran contenidos en los privilegios del «personal médico». Por otra parte los privilegios asociados al rol «administrador usuarios» Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 106 están fuera de estar jerarquía y excluyen completamente el acceso a los privilegios pertenecientes a los roles antes mencionados. Ver Figura 28. Figura 28 Diagrama de jerarquía de roles. Fuente: Elaboración propia Al asignar un rol a un usuario, éste podrá realizar todas las acciones asociadas a dicho rol. En el caso de que a un usuario le sean asignados más de un rol, podrá realizar las acciones permitidas del rol con mayor rango la jerarquía de roles, y si uno de los roles asignados es el de «administrador de usuarios» este usuario solo podrá realizar las acciones asociadas al rol de «administrador usuarios».  Módulo de reportes Consiste en realizar consulta sobre los registros clínicos de acuerdo a los formatos requeridos por el Ministerio del Poder Popular Para la Salud. Las consultas se pueden realizar en un rango de fechas dado por el usuario. Los formatos disponibles son:  EPI 10: correspondiente al SIS 02 Consulta General.  EPI 13: correspondiente al SIS 02 Registro de Morbilidad por Enfermedades Notificables.  EPI 12: correspondiente al SIS 04 Registro Semanal de Enfermedades de Notificación Obligatoria. Es importante destacar que no todos los valores de los formatos «EPI» (29) pueden ser obtenidos de los datos clínicos que se registran en el dominio Historia Integral. Es por esto que los reportes deben ser completados de forma manuscrita. Los reportes son obtenidos a través de un vínculo de descarga bajo el formato «PDF». Personal médico Personal de enfermeria Personal administrativos Administrador de usuarios Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 107  Módulo de interoperabilidad Conecta con el sistema SOS-IMP y gestiona los servicios ofrecidos por éste. El módulo de interoperabilidad aplica una serie de mecanismos de seguridad basados en SOAP WS Security (40), para garantizar la autoría, integridad y confidencialidad de los mensajes intercambiados entre SOS-HME y SOS-IMP. Para garantizar la autoría, se utiliza «USERNAME_TOKEN» y «TIMESTAMP», el mensaje es autenticado con un «digesto» válido por un corto lapso de tiempo (por defecto 5 minutos). El mensaje se firma para certificar la integridad, se utiliza «SIGNATURE». Por último para garantizar la confidencialidad del mensaje, éste se encripta utilizando un esquema de clave pública y privada, de manera que el mensaje solo pueda ser desencriptado por la entidad de destino, se utiliza «ENCRYPT». 5.5.3 Detalles de Implementación En esta sección se describen en detalle las principales tareas realizadas en la etapa de implementación de la aplicación. Las actividades que se destacan son la elaboración de arquetipos y plantillas, el rediseño de la interfaz gráfica y el acoplamiento de la aplicación con el servicio externo de identificación de pacientes.  Elaboración de arquetipos y plantillas Para la elaboración de arquetipos y templates se hizo uso de unas guías de creación disponibles en el repositorio de OpenGenEHR; «Guía de creación de plantillas» (41) y «Sintaxis y configuración de plantillas» (42). Además se utilizaron las herramientas de software detalladas a continuación.  Archetype Editor Es una herramienta creada por Oceans Informátics, para apoyar la creación de arquetipos para los estándares CEN y OpenEHR. El editor está disponible en siete idiomas, incluidos entre ellos el español (43). Se eligió esta herramienta como editor de arquetipos porque es compatible casi es su totalidad con todos los tipos de datos definidos en las especificaciones de OpenEHR. Tiene capacidad para guardar arquetipos en versiones ADL 1.4 y XML. Ofrece una funcionalidad para documentar arquetipos en formato HTML. Ver captura de pantalla en Figura 29 y Tabla 49. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 108 Figura 29. Archetype Editor Fuente: Elaboración propia Tabla 49. Versión Archetype Editor Versión utilizada: 2.1.583 Fecha de publicación: 2 de Julio de 2009 Estado: Versión estable Nota. Fuente: Elaboración propia  ADL Workbench Permite la revisión en detalle de cada uno de los elementos de un arquetipo dado, es compatible con los estándares CEN y OpenEHR. Puede realizar pruebas sobre los arquetipos, muestra errores y advertencias en arquetipos formados incorrectamente. Despliega los arquetipos en los diferentes idiomas en los que estén definidos. Tiene la capacidad de crear un formulario HMTL basado en un arquetipo dado. Es una herramienta creada por Oceans Informátics, compatible con ADL 1.4. Esta herramienta se eligió por su versatilidad en el manejo de arquetipos (44; 45). Ver captura de pantalla en Figura 30 y Tabla 50. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 109 Figura 30. ADL Workbench Fuente: Elaboración propia Tabla 50. Version ADL Workbench Version utilizada: 1.4.1.595 Fecha de publicación: 2 de Abril de 2008 Estado: Versión estable Nota. Fuente: Elaboración propia  Notepad ++ Es un es un editor de texto y de código fuente libre con soporte para varios lenguajes de programación (46). Ver captura de pantalla en Figura 31 y Tabla 51. http://es.wikipedia.org/wiki/Editor_de_texto http://es.wikipedia.org/wiki/Editor_de_c%C3%B3digo_fuente http://es.wikipedia.org/wiki/Software_libre http://es.wikipedia.org/wiki/Lenguaje_de_programaci%C3%B3n Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 110 Figura 31. Notepad ++ Fuente: Elaboración propia Tabla 51. Version Notepad ++ Version utilizada: 5.9.5 Fecha de publicación: 23 de Octubre de 2011 Estado: Versión estable Nota. Fuente: Elaboración propia  Implementación de la Historia Integral El dominio de historia integral se dividió en ocho secciones. Cada sección es descrita por una plantilla, el conjunto de plantillas engloban en su totalidad a nueve arquetipos distintos. Las plantillas llevan los nombres del proceso asistencial, véase la Tabla 52. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 111 Tabla 52. Lista de plantillas y arquetipos Plantilla Arquetipos Propósito Interrogatorio openEHR-EHR- OBSERVATION.interrogatorio.v1.adl Capturar información referente a los hábitos del paciente. Motivo de consulta openEHR-EHR- OBSERVATION.motivo_de_consulta.v1.adl Registrar el motivo de consulta de los pacientes. Exploración funcional openEHR-EHR- OBSERVATION.antecedentes_o_anamnesis. v1.adl Contempla los elementos relacionados a los antecedentes e historia personal y familiar, antecedentes epidemiológicos y alergias. openEHR-EHR- EVALUATION.exploracion_funcional.v1.adl Registro por aparatos y sistemas de la exploración o interrogatorio funcional. Enfermedad actual openEHR-EHR- OBSERVATION.enfermedad_actual.v1.adl Se describen detalladamente los síntomas que el paciente presenta. Examen físico openEHR-EHR- OBSERVATION.examen_fisico.v1.adl Recabar información sobre sobre los resultados del examen físico. Tratamiento openEHR-EHR- ACTION.accion_y_tratamiento.v1.adl Tratamientos y plan de acción y seguimiento a un paciente asignado por medico tratante. Diagnóstico openEHR-EHR- EVALUATION.diagnosticos.v1.adl Diagnósticos codificados con CIE10. Movimiento openEHR-EHR- ACTION.movimiento_de_paciente.v1.adl Registrar el seguimiento, alta o traslado de un paciente. Nota: Fuente: Elaboración propia Se utilizó la herramienta Archetype Editor para crear los arquetipos anteriormente descritos. Se realizaron test basados en los resultados de compilación de la herramienta ADL Workbench. Las plantillas fueron creadas utilizando la aplicación Notepad++. Se integraron las plantillas y los arquetipos dentro del núcleo del framework OpenEHR GEN. Los arquetipos se colocaron en la carpeta «/archetypes/ehr/entry» según Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 112 su clasificación. Las plantillas fueron colocadas en la carpeta «/template/hce». Se añadió la configuración del dominio en el archivo «configuration/config.groovy» quedando como se observa en la Figura 32. Figura 32. Configuración de dominios clínicos Fuente: Elaboración propia Se realizaron las pruebas unitarias necesarias para comprobar las potencialidades y el correcto funcionamiento del framework.  Diseño de interfaz gráfica La interfaz original del Open Gen Framework fue totalmente rediseñada. Fue necesario cambiar la interfaz gráfica original del framework por dos motivos principales; mejorar la experiencia del usuario y adaptar las vistas al concepto visual de SOS Telemedicina. Para diseñar las interfaces se contó con la colaboración de la diseñadora Gabriela Delgado, designada por parte del equipo directivo del programa SOS Telemedicina como diseñadora del proyecto. En una mesa de trabajo se definieron los requerimientos de las vistas, dando como resultado una propuesta de interfaz presentada por la diseñadora. El requerimiento principal radicó en respetar el hipertexto generado por el GuiGen, obligando a que el diseño de la interfaz del registro clínico consistiera en crear un estilo utilizando «hojas de estilo en cascada» sobre el hipertexto formado por el generador de vistas. La Figura 33 muestra la interfaz original del OpenGen EHR, la Figura 34 muestra la interfaz resultante para SOS-HME. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 113 Figura 33. Registro clínico - Interfaz original de OpenEHR Gen Framework Fuente: Elaboración propia Figura 34. Registro clínico - Nueva interfaz Fuente: Elaboración propia Para lograr este cometido se elaboró una guía sobre la generación detallada del hipertexto. Se describieron en detalle cada uno de los ítems arquetipados presentes en el registro clínico. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 114 Se realizaron pruebas unitarias sobre cada vista para evaluar el funcionamiento de la nueva interfaz. Se integraron además nuevos elementos como: ventanas modales, indicadores de sección, marcas sobre secciones grabadas, efectos de suavizado en la entrada y salida de ítems (acordeones).  Acoplamiento con SOS-IMP El acoplamiento con el servicio externo identificador de pacientes consistió en consumir los servicios web ofrecidos por el SOS-IMP. Se utilizó el plugin de Grails CXF- Client desarrollado por Christian Oestreich (45) para facilitar la implantación. El plugin permite crear «interceptores». Los interceptores son componentes que permiten precisamente interceptar los mensajes enviados y recibidos durante el consumo de servicios web. Se construyeron dos interceptores para entradas y salidas de datos:  Interceptor para servicios CDA: enlaza con el paquete de servicio de documentos. Está incorporado en el servicio «customSecureServiceClientCda». Ver Figura 35. Figura 35. Atributos del customSecureServiceClientCda Fuente: Elaboración propia  Interceptor para servicios IMP: enlaza con el paquete de identificación de pacientes. Está incorporado en el servicio «customSecureServiceClientImp». Ver Figura 36. http://www.christianoestreich.com/ Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 115 Figura 36. Atributos del customSecureServiceClientImp Fuente: Elaboración propia Cada «CustomInterceptor» conecta con el punto de entrada ofrecido por el SOS- IMP el cual clasifica sus servicios en dos tipos; por una parte están todos los relacionados con la identificación de pacientes y por otro lado están los relacionados con el repositorio de documentos. La necesidad de utilizar interceptores como ya se mencionó en el apartado diseño detallado, radica en que es necesario garantizar la autoría, la integridad y confidencialidad de los mensajes enviados y recibidos. Para garantizar esto se implementó el protocolo de seguridad definido para SOAP en WS-SECURITY. Se construyó el ServiceController controlador encargado de realizar el enlace con el SOS-IMP mediante el uso de los CustomInterceptor. En el ServiceController se inyectan los servicios customSecureServiceClientCda y customSecureServiceClientImp mostrados en la Figura 35 y la Figura 36, permitiendo a través de éstos el acceso a los servicios web del SOS-IMP de forma transparente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 116 5.6 Sos Índice Maestro de Pacientes El índice maestro de pacientes es una aplicación esencial para lograr la interoperabilidad entre diversos sistemas de historia médicas electrónicas. De igual manera como se presentó el SOS-HME, en el punto siguiente denominado arquitectura se expone la estructura de la aplicación desde distintas perspectivas para un mejor entendimiento. 5.6.1 Arquitectura La aplicación SOS-IMP consta de dos componentes principales el módulo de administración y el módulo de servicios web. Al igual que el SOS-HME, este sistema está diseñado bajo un patrón MVC + Servicios.  Vista por componentes El módulo de servicios web ofrece a través de internet el total de las funcionalidades del índice maestro de pacientes a las organizaciones «participantes». El módulo de administración permite a las organizaciones participantes acceder a un panel de administración donde podrá obtener información sobre su cuenta. La Figura 37 muestra los componentes de SOS-IMP. Figura 37. Componentes de SOS-IMP Fuente: Elaboración propia  Vista por capas La aplicación está construida bajo el modelo MVC + Servicios, por tanto sus capas responden a éste patrón de diseño. La Figura 38 muestra las capas de la aplicación. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 117 Figura 38. Capas del IMP Fuente: Elaboración propia Vista o GUI: permite al usuario interactuar con el sistema. Controladores: encargado de procesar las peticiones realizadas por el usuario (a través de la interfaz gráfica), verificar si se cumplen las condiciones necesarias para ejecutar dichas acciones y por último realizar una tarea. Modelo: responde al modelo de información utilizado para modelar al índice de pacientes y al repositorio de documentos clínicos. Servicios: realizan tareas repetitivas y complejas simplificando el trabajo a los controladores. Sin embargo la mayoría de los servicios de ésta aplicación son expuestos a la web y mantienen poca o ninguna relación con los controladores. 5.6.2 Diseño detallado  Módulo de Servicios Web Los servicios web ofrecidos por el SOS-IMP están divididos en dos paquetes: el paquete CDA y el paquete IMP. Su diferenciación se debe a que son dos tipos de servicios, el primero está dedicado a la persistencia de documentos clínicos bajo el estándar CDA, el segundo se encarga de persistir los datos de identificación de los pacientes y las organizaciones involucradas. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 118 Los servicios fueron construidos bajo una arquitectura SOAP con implementación del protocolo de seguridad WS-SECURITY. Aplicar WS-SECURITY funciona bajo un esquema de clave pública y privada. El SOS-IMP cuenta con un certificado de seguridad (válido por un período de tiempo), del cual se extrae la clave pública y se entrega a las organizaciones involucradas en el intercambio de documentos clínicos. La clave privada la preserva la aplicación. Figura 39. Esquema clave pública y privada Fuente: Elaboración propia De esta manera el SOS-IMP puede emitir mensajes firmados con su clave privada que solo podrán ser vistos por quienes posean la clave pública. Por su parte las organizaciones involucradas podrán emitir mensaje firmados con la clave pública del SOS- IMP que solo éste podrá descifrar usando su clave privada, ver Figura 39. Se añadió un elemento extra de seguridad denominado «token id». Este elemento se agregó como parámetro obligatorio sobre todas las firmas de los servicios, de manera que permitiese identificar cual organización está accediendo al servicio. El detalle de los servicios web expuestos en el SOS-IMP pueden ser encontrados en el Apéndice B de este trabajo.  Módulo de administración El módulo de administración consta de una interfaz gráfica que permite tanto al administrador del SOS-IMP como a una organización involucrada ingresar al panel de Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 119 administración, véase Figura 40. Lo que se muestra en el panel dependerá del rol que posea el usuario. Los roles posibles son «administrador» y «organización». Figura 40. Inicio de sesión – Administración IMP Fuente: Elaboración propia  Gestión de usuarios El administrador del sistema SOS-IMP puede realizar el CRUD sobre los usuarios del sistema. Cabe destacar que los usuarios son todas organizaciones involucradas en la compartición de documento, por ejemplo: un hospital, clínica, ambulatorio, etc.  Datos de participación Permite a las organizaciones pertenecientes al SOS-IMP ingresar a una vista que muestra los datos de identificación de dicha organización. Desde esta vista se muestra el token id que debe ser enviado como parámetro al momento de realizar una petición al SOS- IMP. Ver figura Figura 41. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 120 Figura 41. Datos de participación – Administración SOS-IMP Fuente: Elaboración propia 5.6.3 Detalles de Implementación  Implementación de servicios web En primera instancia se intentó utilizar el formato recomendado por los libros y la documentación de Grails. Sin embargo surgió un inconveniente con respecto del envío de tipos de datos complejos a través de los servicios web utilizando el esquema mencionado. Se optó entonces por «serializar» los objetos en las consultas y en las respuestas, pero resultó ser una solución poco óptima pues volvía complejo el procesamiento de peticiones e involucraba tareas extras al momento de emitir una respuesta. Finalmente para construir los servicios web desde Grails se utilizó el plugin CXF. Éste plugin permite exponer los servicios propios de Grails como servicios web SOAP a través de Apache CXF, sin presentar problemas con los tipos de datos complejos. Apache CXF es un framework open source para servicios web. CXF ayuda a construir servicios web utilizando interfaces de programación (API) que agilizan el trabajo de los desarrolladores. CXF ofrece soporte para aplicar entre otros el protocolo WS- SECURITY (efectivamente fue usado en este proyecto) sobre los servicios web ofrecidos a través de SOAP. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 121 El detalle de éste y otros plugins pueden ser encontrados en el apéndice de éste documento, al igual que la documentación técnica del SOS-IMP. 5.7 Pruebas Con motivo de realización de las pruebas las aplicaciones SOS-IMP y SOS-HME fueron instaladas en los servidores de SOS Temedicina, los cuales residen físicamente en las oficinas del CAIBCO (Centro de Imágenes Biomédicas Computarizadas) dentro de la U.C.V.  Descripción de servidores Tabla 53. Descripción Servidor A Servidor A Tamaño de disco 28 GB Memoria Ram 3.041 MB Procesador 1 Intel(R) Xeon(TM) CPU 2.80GHz, cache 512 KB, 32 bits. Procesador 2 Intel(R) Xeon(TM) CPU 2.80GHz, cache 512 KB, 32 bits. Sistema Operativo Debian GNU/Linux 6.0, 32 bits. Accesible fuera de la UCV Si Aplicaciones instaladas SOS-HME, SOS-IMP. Base de datos MySQL 5.1.61-0+squeeze1 (Debian) Nota. Fuente: Elaboración propia Tabla 54. Descripción Servidor B Servidor B Tamaño de disco 57 GB Memoria Ram 2 GB Procesador 1 Intel(R) Xeon(R) CPU 2.50GHz, cache 6144 KB Procesador 2 Intel(R) Xeon(R) CPU 2.50GHz, cache 6144 KB Sistema Operativo Debian GNU/Linux 6.0.4, 64 bits. Accesible fuera de la UCV No Aplicaciones instaladas SOS-HME Base de datos MySQL 5.0.51a-24+lenny5-log (Debian) Nota. Fuente: Elaboración propia Las pruebas se realizaron en los servidores descritos en la Tabla 53 y la Tabla 54, particularmente para realizar las pruebas de interoperabilidad se añadieron virtualmente dos centros asistenciales al SOS-IMP. Una de las instancias SOS-HME se instaló en el servidor con dirección ip 190.169.161.50, el nombre otorgado al centro asistencial fue «SOS Ambulatorio 1». Por su parte la otra instancia se instaló en el servidor con dirección ip Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 122 190.169.161.38, el nombre otorgado fue «SOS Ambulatorio 2». También en el servidor con dirección ip 190.169.161.50 se instaló el SOS-IMP.  Pruebas de funcionamiento A continuación se muestran el conjunto de pruebas de tipo caja cerrada que se realizaron. Se destaca que generalmente se recomienda que el equipo de desarrollo no sea el mismo que realice las pruebas sobre las funcionalidades del sistema, es por eso que en las actividades de pruebas se contó con la participación de la Lic. Nancy Urbina. A continuación de describen las pruebas realizadas en el rango de Tablas 55-68. Las pruebas se realizaron en el período de tiempo comprendido desde el 01/04/12 hasta el 30/04/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 41- 46. Tabla 55. Prueba de funcionamiento 1 PRUEBAS Nombre de la prueba: Inicio de sesión Prueba: 1 Descripción: Constatar el inicio de sesión del personal médico, sanitario y administrativo. Entradas:  Se ingresa para cada uno de los roles del sistema, el nombre de usuario y contraseña. Evaluación de la prueba: Resultado esperado: Satisfactoria El usuario debe poder acceder al sistema y podrá realizar acciones según su rol. Observaciones: Se constata que efectivamente cada uno de los tipos de usuarios ingresa al sistema de manera correcta. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 123 Tabla 56. Prueba de funcionamiento 2 PRUEBAS Nombre de la prueba: Creación de registro clínico Prueba: 2 Descripción: Crear y llenar un registro clínicos Entradas:  Se crean nuevos registros.  Se llenan todas las secciones de los registros con valores de historias médicas reales. Evaluación de la prueba: Resultado esperado: Satisfactoria Capturar todos los valores presentes en una historia médica integral. Completar el registro clínico. Observaciones: Se observaron algunos problemas en la persistencia de los datos por arquetipos mal definidos. Los problemas presentados fueron corregidos y el resultado de la prueba fue satisfactorio. Nota. Fuente: Elaboración propia Tabla 57. Prueba de funcionamiento 3 PRUEBAS Nombre de la prueba: Admisión de paciente Prueba: 3 Descripción: Buscar un paciente en la base de datos del sistema. Entradas:  Se ingresan los datos propios de la identificación de un paciente. o Numero de documento de identidad. o Nombres. o Apellidos. o Sexo. o Fecha de Nacimiento. Evaluación de la prueba: Resultado esperado: Satisfactoria Lista de pacientes coincidentes con los valores ingresados Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 124 Tabla 58. Prueba de funcionamiento 4 PRUEBAS Nombre de la prueba: Creación de paciente Prueba: 4 Descripción: Crear un paciente en el sistema Entradas:  Se ingresan los valores demográficos vinculados con el paciente a registrar. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente agregado al sistema Observaciones: Se observaron problemas con valores desplegables de estados y municipios. Dichos inconvenientes fueron corregidos. Nota. Fuente: Elaboración propia Tabla 59. Prueba de funcionamiento 5 PRUEBAS Nombre de la prueba: Asociar paciente a registro clínico Prueba: 5 Descripción: Relacionar un paciente con un registro clínico creado Entradas:  Se crea un registro clínico.  Se selecciona un paciente. Evaluación de la prueba: Resultado esperado: Satisfactoria Asociación del paciente al registro clínico creado. Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 125 Tabla 60. Prueba de funcionamiento 6 PRUEBAS Nombre de la prueba: Cierre de registro clínico Prueba: 6 Descripción: Firma del registro clínico por parte de un médico Entradas:  Se introduce usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Registro firmado Observaciones: Nota. Fuente: Elaboración propia Tabla 61. Prueba de funcionamiento 7 PRUEBAS Nombre de la prueba: Reapertura de registro clínico Prueba: 7 Descripción: Reabrir un registro clínico firmado. Entradas:  Se introduce usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Registro abierto Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 126 Tabla 62. Prueba de funcionamiento 8 PRUEBAS Nombre de la prueba: Ver resumen y documento clínico Prueba: 8 Descripción: Ver resumen del registro clínico y el documento CDA. Entradas:  Se firma el registro.  Se selecciona la pestaña de resumen.  Se selecciona ver documento clínico. Evaluación de la prueba: Resultado esperado: Satisfactoria Ver el resumen del registro clínico que se ha cerrado y documento clínico electrónico relacionado. Observaciones: Se evidenció un problema para ver documentos clínicos generados en versiones anteriores que fueron borrados por error al realizar las actualizaciones del sistema. El problema fue solucionado. Nota. Fuente: Elaboración propia Tabla 63. Prueba de funcionamiento 9 PRUEBAS Nombre de la prueba: Agregar paciente a IMP Prueba: 9 Descripción: Agregar paciente al índice maestro de pacientes Entradas:  Se selecciona el paciente.  Se selecciona agregar paciente al IMP.  Se ingresa el usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente agregado a IMP Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 127 Tabla 64. Prueba de funcionamiento 10 PRUEBAS Nombre de la prueba: Relacionar paciente en IMP Prueba: 10 Descripción: Relacionar paciente con algún otro paciente registrado por otra organización en el SOS-IMP Entradas:  Se selecciona el paciente.  Se busca la lista de candidatos.  Se selecciona un paciente de la lista de candidatos.  Se ingresa usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente relacionado en el IMP Observaciones: Nota. Fuente: Elaboración propia Tabla 65. Prueba de funcionamiento 11 PRUEBAS Nombre de la prueba: Ver documento clínicos internos y externos Prueba: 11 Descripción: Ver los documentos clínicos del paciente internos y externos al sistema. Entradas:  Se selecciona el paciente.  Se consultan los registros internos por rango de fechas.  Se consultan los registros externos por rango de fechas. Evaluación de la prueba: Resultado esperado: Satisfactoria Visualización de registros internos y externos. Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 128 Tabla 66. Prueba de funcionamiento 12 PRUEBAS Nombre de la prueba: Desrelacionar paciente en IMP Prueba: 12 Descripción: Eliminar relación de un paciente con el IMP Entradas:  Se selecciona el paciente.  Se selecciona eliminar relación de paciente.  Se ingresa usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente sin relación con el IMP. Observaciones: Nota. Fuente: Elaboración propia Tabla 67. Prueba de funcionamiento 1 3 PRUEBAS Nombre de la prueba: Eliminar paciente de IMP Prueba: 13 Descripción: Eliminar paciente del índice maestro de pacientes. Entradas:  Se selecciona el paciente.  Se selecciona eliminar paciente del IMP.  Se ingresa usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente eliminado del IMP Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 129 Tabla 68. Prueba de funcionamiento 14 PRUEBAS Nombre de la prueba: Funciones administrativas Prueba: 14 Descripción: Prueba sobre las funciones administrativas Entradas:  Se ingresar usuario y contraseña de un administrador del sistema.  Se realiza CRUD de personas, roles y usuarios. Evaluación de la prueba: Resultado esperado: Satisfactoria Administración de las personas, roles y usuarios del sistema. Observaciones: Se evidenció que solo el administrador puede crear las contraseñas para los usuarios, cuestión que debía ser extendida a los propios usuarios. El requerimiento fue satisfecho. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 130 RESULTADOS Se analizó el proceso asistencial llevado a cabo en diferentes centros de salud de nivel ambulatorio, esto permitió diseñar una forma de emular ese proceso dentro de una herramienta de historia médica electrónica tomando elementos coincidentes observados en los distintos centros de salud. La creación de la estructura propuesta para los dominios de «historia médica integral» y «materno infantil» fueron realizados a partir de: formatos de historia médica recabados en los centros de salud y mediante reuniones con médicos especialistas en dichas áreas. El formato de historia médica integral fue aprobado por una «junta de médicos» que pudo llegar a un consenso sobre el formato de la historia, partiendo de la propuesta realizada por el equipo de desarrollo. Figura 42. Secciones historia médica integral Fuente: Elaboración propia En la Figura 42 se muestra el formato de la historia médica integral resultante del consenso de la junta de médicos. Cada una de sus secciones se detalla a continuación: Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 131  Interrogatorio: se refiere a los hábitos; consumo de drogas, medicamentos e indicadores dietéticos.  Motivo de consulta: responde a la pregunta ¿Por qué viene el paciente a la consulta?  Exploración funcional: tiene por objetivo determinar el estado de salud o enfermedad de un paciente.  Enfermedad actual: su objetivo es describir cada una de los síntomas que presenta el paciente.  Examen físico: análisis por aparatos y sistemas orientado en razón del motivo de consulta.  Diagnóstico: identificación de la enfermedad, síndrome o condición de salud del paciente. El diagnóstico se codifica según CIE-10.  Tratamiento: registrar el tipo de tratamiento aplicado al paciente.  Movimiento: refiere al movimiento del paciente, puede ser traslado, alta o seguimiento. Por otro lado el formato de historia materno-infantil sugerido fue pospuesto en implementación para futuros desarrollos, debido a que la historia materno infantil tal cual muestra la Figura 43 está compuesta por tres historias médicas que son la historia del embarazo, la historia del nacimiento y finalmente la historia del recién nacido, y su implementación sobrepasaba el alcance en tiempo de un trabajo de grado. Figura 43. Estructura de la historia materno infantil Fuente: Elaboración propia Al mismo tiempo se evaluaron herramientas software existentes de historias médicas electrónicas. Las herramientas evaluadas fueron las siguientes:  Medical. Historia del recien nacido Historia del nacimiento Historia del embarazo Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 132  OpenEHR Gen Framework.  OpenMRS. El puntaje final fue determinado por la suma de los valores ponderados de cada criterio de evaluación. Tal como se puede apreciar en la Figura 44 la herramienta que obtuvo mayor puntaje fue OpenEHR Gen Framework con un total de 30 puntos, seguida por OpenMRS con un total de 23 puntos, y por último la herramienta Medical obtuvo 19 puntos. Figura 44 Puntuación total obtenida Fuente: Elaboración propia Como resultado de ésta evaluación se recomendó el uso de OpenEHR Gen Framework para desarrollar el sistema de historias médicas electrónicas. Ésta recomendación fue aprobada por los coordinadores del programa SOS Telemedicina. Se diseñó y construyó un sistema de HME basado en OpenEHR Gen Framework. El resultado obtenido fue un sistema de historias médicas electrónicas capaz de compartir información clínica. Al sistema se le dio el nombre de SOS-HME. Dentro del sistema SOS-HME se aplicaron diversos estándares propios del ámbito de la informática médica. La Tabla 69 muestra el nombre del estándar aplicado, su clasificación dentro de los tipos de estándares, la versión utilizada y por último la organización creadora del estándar. Tabla 69. Estándares aplicados Nombre del estándar Clasificación Versión utilizada Organización creadora OpenEHR Diseño 1.0.2 OpenEHR Foundation CDA Comunicación R2 HL7 Foundation CIE Terminología 10 Organización Mundial de la Salud. Nota. Fuente: Elaboración propia 0 10 20 30 40 Medical Open EHR Gen Open MRS Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 133 Aplicar el estándar OpenEHR le da garantías al sistema de historias médicas de escalabilidad y mantenibilidad, ya que está sustentando sobre un modelo que fue pensado para tales fines. Por su parte CDA R2 le proporciona al sistema una manera eficiente para exportar e importar información clínica. Sin embargo la dificultad del intercambio de información radica en que se depende única y exclusivamente del formato CDA. El CIE 10 le permite al sistema manejar diagnósticos codificados. Es recomendable que los médicos y el resto del personal sanitario esté familiarizado con ésta clasificación como parte de una buena práctica para seleccionar los diagnósticos. Aplicar estándares le da solidez al trabajo realizado y le otorga al sistema de historias médicas una característica de vanguardia. Se desarrolló un índice maestro de pacientes utilizando servicios web SOAP y se aplicaron sobre los servicios políticas de seguridad WS-SECURITY. Se enlazó la aplicación SOS-HME con el servicio de identificación de pacientes, dando como resultado el intercambio de información clínica entre dos o más sistemas de historia médica electrónica. En la Figura 45 se puede apreciar la arquitectura resultante, donde cada ambulatorio o centro asistencial posee un sistema de historias médicas electrónicas, en este caso todos los sistemas son del tipo SOS-HME, pero pudiesen ser otros sistemas heterogéneos que implementen el consumo de los servicios web. Cada sistema SOS-HME se comunica a través de internet con el SOS-IMP, desde ahí pueden acceder a los documentos clínicos de un paciente que están compartidos en el repositorio documental del SOS-IMP. Es importante destacar que cada sistema de HME puede poseer una estructura particular, con base de datos, repositorios documentales, lista de pacientes, reportes, etc. Pero lo que se comparte a través del SOS-IMP es información clínica mediante el intercambio de documentos CDA, no se comparte información demográfica o estadística, tampoco información sobre el personal médico y sanitario, más allá de la información que pueda contener el propio CDA. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 134 Figura 45 Arquitectura de la solución Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 135 CONCLUSIONES Y RECOMENDACIONES El desarrollo de este trabajo dio como resultado un sistema de historias médicas electrónicas: SOS-HME, el sistema puede adaptarse al formato de registro clínico de un centro asistencial particular, y está en capacidad de intercambiar información clínica con otros sistemas a través del índice maestro de pacientes elaborado: SOS-IMP. El sistema de HME elaborado permite registrar información clínica relacionada con un sujeto de cuidado. Con esto se superan varias de las limitaciones de una tradicional historia médica en papel, tales como la ilegibilidad y el deterioro. Se posibilita un registro de historias médicas totalmente digitalizadas, sin necesidad de ocupar espacio físico con archivos contenedores de centenares de documentos clínicos en hojas de papel. Sin embargo es recomendable usar el registro clínico impreso como medio de respaldo por varias razones, entre ellas: fallas del servicio eléctrico, desperfectos de hardware y/o software, etc. Se supera la limitante relacionada con el extravío de historias médicas por almacenamiento erróneo, eliminaciones no autorizadas, traspapeleo, etc. Los registros clínicos en el sistema SOS-HME están asociados a cada paciente, los pacientes son identificables por cédula, pasaporte o algún otro identificador, también como parámetros de búsqueda se aceptan nombres, sexo y fecha de nacimiento. Por tanto no existe posibilidad dentro del sistema HME desarrollado el extravío o pérdida de información clínica. Los tiempos de búsquedas de la información clínica son casi inmediatos, en cuestiones de segundos se puede tener acceso a toda la historia médica de un paciente. Esto es un gran avance en comparación en el tiempo y esfuerzo invertido por parte del personal sanitario en la búsqueda de esa información en archivos tradicionales de historias médicas en formato de papel. Sobre el sistema SOS-HME se aplican mecanismos de autorización y acceso que solo permiten a personas autorizadas ver el contenido de la historia y ejecutar distintas acciones sobre ella. Se garantiza además una historia médica «única» por paciente, es decir que dentro del centro asistencial cada paciente puede poseer múltiples registros clínicos, pero todos los registros están asociados a una misma historia médica. Es importante destacar que aunque la HME viene a sustituir la HM tradicional sobre papel, el sistema SOS-HME conserva una de las características principales del papel: «soportar cualquier formato de historia». Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 136 El sistema es altamente escalable y está en capacidad de modelar distintos dominios clínicos, para esto será necesario definir los arquetipos y plantillas requeridos para generar el dominio clínico deseado. En este trabajo se modeló para SOS-HME el primer dominio clínico: «historia médica integral», el cual contempla el proceso de atención de medicina general o integral. Se evidenció la necesidad de estimar previamente la complejidad y la extensión de un dominio clínico, pues puede ocurrir que éste sea demasiado amplio para ser implementado en el período de tiempo de un trabajo de grado. tal cual ocurrió con el dominio materno infantil. Se recomienda para futuros trabajos realizar implementaciones de otros dominios clínicos. Así mismo se recomienda seguir trabajando en nuevas versiones del sistema SOS- HME para incorporar nuevas funcionalidades tales como: imagenología, salas situacionales con geo-referenciación, aplicaciones para telefonía móvil, etc. Por otra parte, fue beneficioso durante este trabajo contar con la ayuda de expertos del área médica e informática, nacionales e internacionales, a través de ellos se pudieron solventar muchas dudas, sus recomendaciones y asesoramientos fueron claves para la toma de decisiones. Esas decisiones que en su momento fueron complicadas de tomar, y en retrospectiva se puede decir que estuvieron acertadas. Tales son los casos de la definición de un formato de historia médica integral y la evaluación de las herramientas de software de historia médica. Se evidenció que cada centro asistencial realiza de diferentes maneras el proceso atención, las entrevistas realizadas a centros de salud permitieron determinar las similitudes entre ellos. Ese conocimiento fue utilizado en la construcción de la solución. Al momento de realizar la evaluación entre las herramientas propuestas para el desarrollo del sistema de historias médicas electrónicas se tuvieron dificultades para comparar a Open EHR Gen Framework con las demás herramientas. Las otras eran soluciones finales pensadas para un contexto específico, mientras que Open EHR Gen era un marco de trabajo, un producto no acabado. Finalmente, OpenEHR Gen Framewrok demostró ser una excelente herramienta que permite crear sistemas de historias médicas electrónicas. La elección de OpenEHR Gen Framework se debió en gran medida a la aplicación de estándares. Estandarizar la estructura de la historia médica mediante la aplicación de la norma OpenEHR dio como resultado un sistema económicamente mantenible y adaptable a nuevas necesidades. Para realizar un cambio sobre un dominio clínico, no será necesario Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 137 realizar modificaciones sobre el código fuente de la aplicación, solamente bastará con modificar los arquetipos que describen los conceptos clínicos de ese dominio. Esto redunda en disminución de costos y tiempo empleado a la hora de realizar cambios. Utilizar la arquitectura de documentos clínicos definida por HL7, permitió la interoperabilidad sintáctica y semántica entre diferentes instancias del sistema SOS-HME. El documento CDA demostró ser un elemento efectivo para el intercambio de información clínica. Sin embargo se depende única y exclusivamente del formato CDA para el intercambio de información clínica. Una posible solución sería incorporar al componente de interoperabilidad otros estándares de mensajería tales como el ISO/CEN 13606. El índice maestro de pacientes SOS-IMP, es una herramienta que va a permitir a cualquier sistema que implemente el estándar CDA y que esté en capacidad de consumir servicios web SOAP, intercambiar documentos con otros centros asistenciales. Es necesario destacar que fue invertida inicialmente gran cantidad de tiempo para analizar y comprender el funcionamiento de la herramienta OpenEHR Gen Framework. Ninguno de los miembros del equipo de desarrollo estaba familiarizado con el entorno Groovy & Grails. Esa inversión inicial repercutió en beneficios al momento de realizar modificaciones sobre la aplicación. Así mismo utilizar la metodología de desarrollo ágil XP permitió la adaptabilidad del proyecto frente a los esperados cambios de requisitos sobre la marcha, además agilizó el desarrollo permitiendo redefinir la orientación del mismo luego de culminada cada iteración con la finalidad de satisfacer los requisitos restantes. La solución software elaborada compuesta por las aplicaciones SOS-HME y SOS- IMP son un primer paso para acercar un servicio especializado de salud de calidad, como lo es la historia médica electrónica, a poblaciones rurales del país dónde hace presencia el programa SOS Telemedicina para Venezuela. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 138 REFERENCIAS BIBLIOGRÁFICAS 1. Martínez Hernandez, Juan. The Medical History. Informe técnico, Hospital Santa María del Rosell, Cartagena, Murcia. [En línea] 2006. [Citado el: 5 de Abril de 2012.] http://www.aebioetica.org/rtf/04-BIOETICA-59.pdf. 2. CEPAL. Salud electrónica en américa latina y el caribe: avances y desafíos. [En línea] Noviembre de 2010. [Citado el: 25 de Marzo de 2012.] http://www.eclac.cl/publicaciones/xml/5/41825/di-salud-electrinica-LAC.pdf. 3. CAIBCO. SOS Telemedicina para Venezuela. [En línea] 2010. [Citado el: 15 de Marzo de 2012.] http://www.sos.ucv.ve. 4. —. Proyecto SOS Telemedicina para Venezuela. [En línea] 2007. [Citado el: 12 de Marzo de 2012.] http://www.sos.ucv.ve/SOSTelemedicina.pdf. 5. Falagán Mota, José y Nogueira Fariña, Javier. La información clínica y de salud. [En línea] 2003. [Citado el: 17 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO3.pdf. 6. Zengarini, Hernán. Historia Clínica y Registros Médicos Informatizados. s.l. : DEC, 2000. 7. Carnicero, Javier. De la historia clínica a la historia de salud electrónica (resumen). [En línea] 2003. [Citado el: 13 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO1.pdf. 8. Salinas, Hernán. Historia y filosofía médica. s.l. : McGraw Hil, 1998. ISBN: 9789701020418. 9. International organization for standarization. ISO 18308 - Requirements for an Electronic Health Record Reference Architecture. [En línea] 2006. [Citado el: 1 de Marzo de 2012.] http://www.openehr.org/standards/iso.html. 10. Gabayo Sánchez , José Antonio, y otros, y otros. La seguridad, confidencialidad y disponibilidad de la información clínica. [En línea] 2003. [Citado el: 8 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO9.pdf. 11. Gervas, J, García Sagredo, P y Pérez Fernandez, M. El libre acceso del paciente a su historia clínica. [En línea] 1988. [Citado el: 9 de Marzo de 2012.] http://www.equipocesca.org/wp- content/uploads/2009/04/gervas-historia-del-paciente-bis-1987.pdf. 12. Carnicero, Javier y Vásquez López, José Manuel. La identificación, un requisito previo a la historia de salud electrónica. [En línea] 2003. [Citado el: 14 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO4.pdf. 13. SAIME. Servicio de cedulación. [En línea] 2011. [Citado el: 14 de Marzo de 2012.] http://www.saime.gob.ve/Mis_ident/servicios/cedulacion.php. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 139 14. Arellano Rodríguez, Madelein. Hacia una historia médica electrónica, entre lo legal y lo ético. [En línea] vol.5, no.1, Abril de 2008. [Citado el: 10 de Marzo de 2012.] http://www.scielo.org.ve/scielo.php?script=sci_arttext&pid=S1690- 75152008000100006&lng=es&nrm=iso. ISSN 1690-7515. 15. Geraci, Anne. IEEE Standard Computer Dictionary: Compilation of IEEE Standard Computer Glossaries. New York : s.n., 1991. ISBN:1559370793. 16. International organization for standarization. ISO/IEC Guide 2:2004. [En línea] 2004. [Citado el: 1 de Marzo de 2012.] http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39976. 17. Moneagudo Peña, José Luis y Hernández Salvador, Carlos. Estándares para la historia clínica electrónica. [En línea] 2003. [Citado el: 7 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO7.pdf. 18. The Open EHR Foundation. Useful Resources. [En línea] 2007. [Citado el: 11 de Abril de 2012.] http://www.openehr.org/shared-resources/getting_started/getting_started.html. 19. —. Architecture Overview. [En línea] 13 de Noviembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/overview.pdf. 20. —. Archetype Definition Language ADL 1.4. [En línea] 12 de Diciembre de 2008. [Citado el: 1 de Abril de 2012.] http://www.openehr.org/releases/1.0.2/architecture/am/adl.pdf. 21. —. Clinical Knowledge Manager. [En línea] 3 de Diciembre de 2010. [Citado el: 1 de Abril de 2012.] http://www.openehr.org/wiki/display/healthmod/Clinical+Knowledge+Manager. 22. The EN 13606 Association. The CEN/ISO EN13606 standard. [En línea] 2011. [Citado el: 11 de Abril de 2012.] http://www.en13606.org/the-ceniso-en13606-standard. 23. Health Level Seven International. About HL7. [En línea] 2012. [Citado el: 1 de Abril de 2012.] http://www.hl7.org/about/index.cfm?ref=nav. 24. —. HL7 Messaging Standard Version 2.x. [En línea] 2012. [Citado el: 13 de Abri de 2012.] http://www.hl7.org/implement/standards/product_matrix.cfm?Family=V2. 25. —. V3 Messages. [En línea] 2012. [Citado el: 13 de Abril de 2012.] http://www.hl7.org/implement/standards/v3messages.cfm. 26. —. HL7 Clinical Document Architecture, Release 2.0. [En línea] 2012. [Citado el: 29 de Marzo de 2012.] http://www.hl7.org/implement/standards/product_brief.cfm?product_id=7. 27. Junta de Castilla y León. Guias de integración CDa. [En línea] 2012. [Citado el: 5 de Abril de 2012.] http://www.saludcastillayleon.es/empresas/es/estandaresint. 28. SELA. II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares. [En línea] Julio de 2011. http://www.sela.org/view/index.asp?ms=258&pageMs=87355. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 140 29. García, José Manuel, Escalona, Marisol y Dias, Luis. Formularios y flujos del sistema de información de salud SIS. s.l. : Ministerio del poder popular para la salud. 30. Falcón, Luis. GNU Health. [En línea] [Citado el: 10 de Abril de 2012.] http://medical.sourceforge.net/es/index.html. 31. OpenMRS LLC. About OpenMRS. [En línea] 2011. [Citado el: 10 de Abril de 2012.] http://openmrs.org/about/. 32. Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] 2010. [Citado el: 10 de Abril de 2012.] http://code.google.com/p/open-ehr-gen-framework/. 33. Pazos, Pablo. Open EHR en Español. [En línea] 2012. [Citado el: 10 de Abril de 2012.] http://openehr.org.ed. 34. Smith, Glen y Ledbrook, Peter. Grails in action. Greenwich : Manning, 2009. ISBN 978-1- 933988-93-1. 35. König, Dierk. Groovy in action. Greenwich : Manning, 2007. ISBN 1-932394-84-2. 36. Rocher, Graeme y Brown, Jeff. The Definitive Guide to Grails, Second Edition. s.l. : Apress, 2009. ISBN-13 (electronic): 978-1-4302-0871-6. 37. Joskowicz, José. Reglas y Prácticas en eXtreme Programming. [En línea] 2008. [Citado el: 5 de Abril de 2012.] http://iie.fing.edu.uy/~josej/docs/XP%20-%20Jose%20Joskowicz.pdf. 38. Chen, Rong. OpenEHR Java Reference Implementation v1.0.1. 2007. 39. Schuler, Thilo, y otros, y otros. Towards Automatically Generating Graphical User Interfaces from openEHR Archetypes. [En línea] 2006. [Citado el: 5 de Marzo de 2012.] http://www.openehr.org/wiki/download/attachments/18513937/Schuler_et_al-MIE_2006_Paper- Very_late_draft.pdf?version=1&modificationDate=1291949770000. 40. Seely, Scott. Understanding WS-Security. [En línea] 2002. [Citado el: 20 de Marzo de 2012.] http://msdn.microsoft.com/en-us/library/ms977327.aspx. 41. Pazos, Pablo y Carrasco, Leandro. Guía de creación de arquetipos paso a paso. [En línea] 2010. [Citado el: 5 de Marzo de 2012.] http://code.google.com/p/open-ehr-gen- framework/downloads/detail?name=Creando%20arquetipos%20v01.pdf&can=2&q=. 42. —. Sintáxis y configuración de plantillas. [En línea] 2010. [Citado el: 5 de Marzo de 2012.] http://code.google.com/p/open-ehr-gen- framework/downloads/detail?name=Sintaxis%20y%20configuraci%C3%B3n%20de%20plantillas %20v0.1.pdf&can=2&q=. 43. Ocean Informatics. Archetype Editor. [En línea] 2007. [Citado el: 4 de Marzo de 2012.] https://wiki.oceaninformatics.com/confluence/display/TTL/Archetype+Editor. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 141 44. The OpenEHR Foundation. About ADL 1.5 Workbench. [En línea] 2012. [Citado el: 4 de Marzo de 2012.] http://www.openehr.org/svn/ref_impl_eiffel/TRUNK/apps/adl_workbench/doc/web/index.html. 45. Oestreich, Christian. Grails Cxf-Client. [En línea] 2011. [Citado el: 20 de Marzo de 2012.] http://grails.org/plugin/cxf. 46. Don Ho. About Notepad++. [En línea] 2011. [Citado el: 4 de Marzo de 2012.] http://notepad- plus-plus.org/. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 142 GLOSARIO DE SIGLAS ADL: Archetype Definition Language. En español: lenguaje de definición de arquetipos. ANSI: American National Estandards Institute. En español: instituto nacional americano de estándares. APS: Atención Primaria de Salud. ASTM: American Section of The International Association for Testing Materials. En español: sociedad americana para prueba de materiales. CAIBCO: Centro de Análisis de Imágenes Biomédicas Computarizadas. CDA: Clinical Document Architecture. En español: arquitectura de documento clínico electrónico. CEN: Comité Europeo de Normalización. CEPAL: Comisión Económica para América Latina y el Caribe. CI: Cédula de Identidad. CIE-10: Clasificación Internacional de Enfermedades. En ingles ICD-10. CRM: Customer Relationship Management. En español: administración basada en la relación con los clientes. CRUD: Create Read Update Delete. En español: crear, leer, actualizar, borrar. CXF: Marco de trabajo para implementación de servicios web. DSP: Dirección de Salud Poblacional. EPI: Formularios utilizados por el SIS para el registro estadístico en Venezuela. ERP: Enterprise Resource Planning. En español: planificación de recursos empresariales. GNU: Movimiento y comunidad de software y conocimiento libre. GORM: Grails Object Relational Mapping. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 143 GPL: GNU General public License. En español: licencia pública general de GNU. GUI: Graphic User Interface. En español: interfaz gráfica de usuario. HCE: Historia Clínica Electrónica. HCI: Historia Clínica Informatizada. HIS: Hospital información System. En español: sistema de información hospitalaria. HL7: Health Level Seven. En español: organización de desarrollo de estándares. HM: Historia Médica. HME: Historia Médica Electrónica. HSQL: Hibernate Sequence Query Language. En español: lenguaje declarativo hibernate de acceso a bases de datos relacionales HTML: Hyper Text Markup Language. En español: lenguaje de marcado de hipertexto HTTP: Hiper Text Transfer Protocol. En español: protocolo de transferencia de hipertexto. IDE: Integrated Development Environment. En español: entorno de desarrollo integrado. IEEE: Institute of Electrical and Electronics Engineers. En español: instituto de ingenieros eléctricos y electrónicos. IMP: Índice Maestro de Pacientes. IoC: Inversión of Control. En español: inversión de control. ISO/CEN 13606: Norma del CEN diseñada para lograr la interoperabilidad semántica en la comunicación de la HCE. Esta norma está aprobada por ISO. ISO: Organización Internacional de estandarización. LOINC: Logical Observation Identifies Names and Codes. En español: sistema de códigos universal para la identificación de observaciones clínicas y de laboratorio. MVC: Modelo Vista Controlador. OMS: Organización Mundial de la Salud. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 144 OpenEHR: Open Electronic Healt Record. En español: registro electrónico de salud abierto. OPS: Organización Panamericana de la Salud. RIM: Reference Information Model. En español: modelo de referencia de información. SAIME: Servicio Administrativo de Identificación, Migración y Extranjería. SELA: Sistema Económico Latinoamericano y del Caribe. SIS: Sistema de Información en Salud. SNOMED: Systematized Nomenclature of Medicine. En español: nomenclatura sistematizada de medicina. SOAP: Simple Object Access Protocol. En español: protocolo estándar que define cómo dos objetos en diferentes procesos pueden comunicarse por medio de intercambio de datos XML. SQL: Structured Query Language. En español: lenguaje declarativo de acceso a bases de datos relacionales. STS: Spring Source Tool Swite. En español: conjunto de herramientas Spring (framework de desarrollo de aplicaciones para Java Enterprice). SVN: Sistema de Control de Versiones. TCP/IP: Modelo de descripción de protocolos de red de internet. TIC: Tecnologías de la información y la comunicación. UML: Unified Modeling Language. En español: lenguaje unificado de modelado. UUID: Universally Unique Identifier. En español: identificador único universal. VIH: Virus de Inmunodeficiencia Humana. WS- SECURITY: Web Servicies Security. En español: seguridad en servicios web. XML: Extensible Markup Language. En español: metalenguaje extensible de etiquetas. XP: Extreme Programming. En español: programación extrema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 145 APÉNDICE A - DOCUMENTACIÓN TÉCNICA SOS- HME A continuación se expone de manera detallada la documentación técnica de la aplicación SOS-HME, compuesta por el modelo del dominio, modelo de base de datos y vistas. Modelo de dominio El modelo de dominio describe la estructura del sistema. A continuación se muestran los paquetes principales en los cuales está dividida la aplicación SOS-HME, sus clases con atributos y funciones, y las relaciones existentes entre las clases. Lista de paquetes:  Paquetes demograficos: o demographic.party  Paquetes clínicos: o Hce.core.common o Hce.core.composition o Hce.core.data_types o Hce.core.datastructure La descripción de las clases se realiza en el rango de tablas que va desde la Tabla - A- 1 hasta Tabla -A- 63. Paquetes Demográficos Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 146 demographic.party, ver Figura -A- 1. Figura -A- 1. Paquete Party Fuente: Elaboración propia Tabla -A- 1. PARTY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 147 Clase PATHABLE Propósito Generalización de todos los tipos de participantes, incluyendo entidades del mundo real y sus roles. Una instancia de la clase PARTY es una entidad que puede participar en una actividad. Hereda de LOCATABLE Atributos Firma Significado 1..1 uid: HIER_OBJECT_ID Identificador. 1..1 identities: List <PARTY_IDENTITY> Lista de diferentes identidades. Ej. nombre legal, alias, nombre comercial, etc. 0..1 contacts: List <CONTACT> Lista de contactos. 0..1 relationsships: List <PARTY_RELATIONSHIP> Relaciones dónde la entidad funciona como fuente. 1..1 type: String Nombre de la instancia de PARTY. Ej. “persona”, “organización”, etc. O nombre del rol. Ej. “medico general”, “enfermera”, etc. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 148 Tabla -A- 2. PERSON Class Clase PERSON Propósito Descripción genérica de persona. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 3. ORGANISATION Class Clase ORGANIZATION Propósito Descripción genérica de organización. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 4. GROUP Class Clase GROUP Propósito Descripción genérica de grupo. Un grupo por lo general es una agrupación de personas u organizaciones. Ej. “grupo de cardiología”. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 5. AGENT Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 149 Clase AGENT Propósito Concepto genérico de agente. El cual en este caso se refiere solo a sistemas software y otros dispositivos, sin incluir personas ni organizaciones. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 6. ROLE Class Clase ROLE Propósito Descripción genérica de un rol desempeñado por un actor. Ej. “médico”, “enfermera”, “paciente”, etc. Hereda de PARTY Atributos Firma Significado 0..1 time_validity_to: java.lang.Date Válido desde. 0..1 time_validity_from: java.lang.Date Válido hasta. 1..1 performer: ACTOR Referencia al actor que está actuando con este rol. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquetes Clínicos Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 150 Paquete hce.core.common.archetyped, ver Figura -A- 2 Figura -A- 2. Paquete hce.core.common.archetyped Fuente: Elaboración propia Tabla -A- 7. PATHABLE Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 151 Clase PATHABLE Propósito Generalización de todas las clases cuyas instanciaciones pueden ser accesibles mediante rutas (path), y de las cuales se puede localizar a un objeto hijo mediante una ruta. Atributos Firma Significado 0..1 rm_parent_id: Long Identificador del padre. 0..1 path: String Ruta. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 8. LOCATABLE Class Clase LOCATABLE Propósito Generalización de todas las clases que pueden ser arquetipas. Hereda de PATHABLE Atributos Firma Significado 1..1 archetype_node_id: String Identificador en tiempo de ejecución para un nodo de arquetipo. Precedido por las siglas “at”, luego un número de cuatro cifras. Ej. “at0005”. 0..1 name: DV_TEXT Nombre en tiempo de ejecución. 0..1 archetype_details: ARCHETYPED Detalles del arquetipo utilizado en este nodo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 9. ARCHETYPED Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 152 Clase ARCHETYPED Propósito Una instancia de la clase ARCHETYPED contiene información de identificación relevante del arquetipo al cual se hace referencia. Atributos Firma Significado 1..1 archetype_id: ARCHETYPE_ID Identificador universal del arquetipo. 0..1 template_id: TEMPLATE_ID Identificador universal de templates. 1..1 rm_version: String Versión del modelo de referencia. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.common.generic, ver Figura -A- 3 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 153 Figura -A- 3. Paquete hce.core.common.generic Fuente: Elaboración propia Tabla -A- 10. PARTY_PROXY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 154 Clase PARTY_PROXY Propósito Clase que describe el concepto de quien tiene alguna participación en el registro clínico. Atributos Firma Significado 0..1 external_ref: PARTY_REF Referencia externa a un sistema demográfico o de identificación. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 11. PARTY_SELF Class Clase PARTY_SELF Propósito Es un PARTY_PROXY que representa el sujeto de cuidado involucrado en el registro clínico. Uso Usado para indicar que le pertenece el registro. Puede o no tener una referencia externa. Hereda de PARTY_PROXY Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 12. PARTY_IDENTIFIED Class Clase PARTY_IDENTIFIED Propósito Identificación simple de un PARTY_PROXY que no sea el sujeto de cuidado. Tiene una referencia externa para profundizar en la identificación de ser necesario. Use Usado para describir instancias donde solo los identificadores pueden ser conocidos. Ej. Los proveedores de servicios de salud podemos describirlos con el nombre y un código asociado. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 155 Hereda de PARTY_PROXY Atributos Firma Significado 0..1 name: String Nombre. 0..1 identifiers: List <DV_IDENTIFIER> Lista de identificadores formales. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 13. PARTICIPATION Class Clase PARTICIPATION Propósito Modelo de participación de un actor en una actividad. Use Usado para representar cualquier participación. Atributos Firma Significado 1..1 performer: PARTY_PROXY Identifica al actor de la actividad. 1..1 function: DV_TEXT La función del actor. 1..1 mode: DV_CODED_TEXT La forma en la cual el actor realiza la actividad. Ej. presencial, por teléfono, por email, etc. 0..1 time: DV_INTERVAL Tiempo de la participación. De ser una participación a futuro se coloca un tiempo estimado. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 14. AUDIT_DETAILS Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 156 Clase AUDIT_DETAILS Propósito Detalles de auditoria. Uso Usado para representar cualquier participación. Atributos Firma Significado 1..1 system_id: String Identificador de la parte del sistema dónde fue realizado el cambio. 1..1 committer: PARTY_PROXY El actor responsable del cambio. 1..1 time_committed: DV_DATE_TIME Tiempo en el que fue realizado el cambio. 1..1 change_type: DV_CODED_TEXT Tipo de cambio realizado. 0..1 description: DV_TEXT Descripción opcional. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.common.directory, ver Figura -A- 4 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 157 Figura -A- 4. Paquete hce.core.common.directory Fuente: Elaboración propia Tabla -A- 15. FOLDER Class Clase FOLDER Propósito Clase que modela el concepto de carpeta. Hereda de LOCATABLE Atributos Firma Significado 0..1 folders: List <FOLDER> Sub-carpetas contenidas dentro de esta carpeta. 0..1 items: List <OBJECT_REF> Lista de objetos referenciados dentro de esta carpeta. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.common.change_control, ver Figura -A- 5 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 158 Figura -A- 5. Paquete hce.core.common.change_control Fuente: Elaboración propia Tabla -A- 16. VERSION Class Clase Version Propósito Clase utilizada para versionar las composiciones. Atributos Firma Significado 1..1 time_commited: DV_DATE_TIME Tiempo de creación de la versión. 1..1 commiter: PARTY_PROXY Creador de la versión. 1..1 party_self: PARTY_PROXY Sujeto de cuidado perteneciente a la composición. 1..1 life_cicle_state: Boolean Estado en el ciclo de vida de la composición. 0..1 nombre_arch_cda: String Nombre del archivo CDA HL7 asociado a la composición. Solo en caso de que la composición Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 159 esté completa y firmada. 1..1 num_of_version: Integer Número de la versión. 0..1 data: LOCATABLE Datos de la versión. 1..1 commit_audit: AUDIT_DETAILS Detalles de auditoria. 1..1 contribution: OBJECT_REF Referencia al objeto versionado. 0..1 signature: String Firma digital sobre el contenido de la versión. 0..1 inIMP: Boolean Indica si el objeto CDA creado a partir de la versión se encuentra en el índice maestro de pacientes SOS- IMP. 0..1 canonical_form: String Serializacion a String de los datos de la versión. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.composition, ver Figura -A- 6 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 160 Figura -A- 6. Paquete hce.core.composition Fuente: Elaboración propia Tabla -A- 17. COMPOSITION Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 161 Clase COMPOSITION Propósito Un registro clínico está compuesto por un conjunto de objetos de tipo COMPOSITION. La clase COMPOSITION modela documentos clínicos. Hereda de LOCATABLE Atributos Firma Significado 0..1 content: List <CONTENT_ITEM> Contenido de la composición. 0..1 context: EVENT_CONTEXT Contexto de la atención clínica. 1..1 composer: PARTY_PROXY El principal responsable del contenido de la composición. 1..1 category: DV_CODED_TEXT Indica la categoría a la cual pertenece la composición. 1..1 language: CODE_PHRASE Idioma en el que cual está escrita la composición. 1..1 territory: CODE_PHRASE Nombre del territorio en el cual ha sido escrita la composición. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 18. EVENT_CONTEXT Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 162 Clase EVENT_CONTEXT Propósito Registrar el contexto del evento clínico. Hereda de PATHABLE Atributos Firma Significado 0..1 start_time: DV_DATE_TIME Tiempo de comienzo de la atención clínica. end_time: DV_DATE_TIME Tiempo de finalización de la atención clínica. location: String Lugar dónde ocurre el acto clínico. setting: DV_CODED_TEXT Contexto en el que ocurre el acto clínico. participations: Actores involucrados en el evento clínico. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 19. CONTENT_ITEM Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 163 Clase CONTENT_ITEM Propósito Generalización de todos los tipos de contenido. Hereda de LOCATABLE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 20. SECTION Class Clase SECTION Propósito Representa un cabezal en una estructura de cabeceras, o árbol de secciones. Uso Agrupar entradas de la composición de acuerdo a la estructura arquetipada. Mal uso No debe confundirse su función con respecto al uso de la clase ENTRY. Hereda de CONTENT_ITEM Atributos Firma Significado 0..1 items: List <CONTENT_ITEM> La sección contiene una lista ordenada de ítems, la cual puede incluir clases del tipo SECTION o ENTRY. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 21. ENTRY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 164 Clase ENTRY Propósito Generalización de todos los tipos de entradas posibles. Hereda de CONTENT_ITEM Atributos Firma Significado 1..1 language: CODE_PHRASE Indicador del idioma en el cual está escrita la entrada. 1..1 encoding: CODE:PHRASE Nombre de la codificación de caracteres en la cual está escrita la entrada. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 22. ADMIN_ENTRY Class Clase ADMIN_ENTRY Propósito Subtipo de entrada destinada a grabar información administrativa. Información vinculada al proceso clínico, pero que no es propiamente clínica. Uso Usada en procesos administrativos como: admisión, identificación de sala, facturación, etc. Mal uso No debe ser usada para registrar información que puede ser clínicamente relevante. Hereda de ENTRY Atributos Firma Significado 1..1 data: ITEM_STRUCTURE Los datos a ser capturados en la entrada, modelado según definición de arquetipo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 23. CARE_ENTRY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 165 Clase CARE_ENTRY Propósito Generalización de todos los tipos de entradas clínicamente relevantes. Hereda de ENTRY Atributos Firma Significado 0..1 protocol: ITEM_STRUCTURE Descripción que sirve de contexto al registro de la información. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 24. OBSERVATION Class Clase CARE_ENTRY Propósito Subtipo de entrada de cuidado, para registrar información clínica ocurrida en el pasado o presente, que haya podido ser apreciada. Uso Registrar lo observado con una noción objetiva. Mal uso No debe ser utilizada para registrar opiniones sobre estados futuros, tales como: diagnósticos, instrucciones, planes, etc. Hereda de CARE_ENTRY Atributos Firma Significado 1..1 data: HISTORY Los datos de la observación. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 25. EVALUATION Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 166 Clase EVALUATION Propósito Subtipo de entrada de cuidado para entradas clasificadas como evaluaciones. Uso Se utiliza para registrar todo tipo de declaraciones que evalúan otro tipo de declaraciones, tales como: interpretación de observaciones, diagnósticos, hipótesis, etc. Mal uso No debe ser utilizada para declaraciones que involucren instrucciones, acciones u observaciones. Hereda de CARE_ENTRY Atributos Firma Significado 1..1 data: ITEM_STRUCTURE Los datos de la evaluación. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 26. INSTRUCTION Class Clase INSTRUCTION Propósito Usada para registrar acciones específicas en el futuro. Uso Registro de acciones a futuro, tales como: registro de órdenes de medicamentos, monitoreo, orden de exámenes, etc. Mal uso No debe ser utilizado para registrar observaciones, evaluaciones o acciones. Hereda de CARE_ENTRY Atributos Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 167 1..1 narrative: DV_TEXT Texto que indica sobre que trata la instrucción. 0..1 activities: List <ACTIVITY> Lista de actividades de la instrucción. 0..1 expiry_time: DV_DATE_TIME Tiempo de expiración que índica cuando una instrucción ha vencido. 0..1 wf_definition: DV_PARSEABLE Flujo de trabajo asociado con la instrucción, expresado en una cadena de texto con formato que pudiese ser externo al contexto del sistema. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 27. ACTIVITY Class Clase ACTIVITY Propósito Define una actividad a realizar dentro de una instrucción Hereda de LOCATABLE Atributos Firma Significado 1..1 description: ITEM_STRUCTURE Descripción de la actividad. 1..1 timing: DV_PARSABLE Tiempo de la actividad, en forma de un String parseable, como un HL7 GTS o ISO8601. 1.1 action_archetype_id: String Indica mediante una expresión regular los identificadores válidos de arquetipos para acciones correspondientes a esta actividad. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 168 Tabla -A- 28. ACTION Class Clase ACTION Propósito Se utiliza para registrar una acción clínica realizada, ya sea como desencadenante de alguna actividad que forma parte de una instrucción, o de manera aislada. Hereda de CARE_ENTRY Atributos Firma Significado 1..1 time: DV_DATE_TIME Punto en el tiempo en el que la acción fue realizada. 1..1 description: ITEM_STRUCTURE Descripción de la actividad a realizar. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 169 Paquete hce.core.data_types, ver Figura -A- 7 Figura -A- 7. Paquete hce.core.data_types.basic Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 170 Tabla -A- 29. DATA_VALUE Class Clase DATA_VALUE (abstract) Propósito Sirve como un antepasado común de todos los tipos de valor de datos en modelos openEHR. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 30. DV_BOOLEAN Class Clase DV_BOOLEAN Propósito Elementos booleanos, tales como verdadero o falso ó si o no Uso Representar valores booleanos Mal uso No debe utilizarse ingenuamente para modelado de tipos enumerados tales como masculino y femenino Hereda de DATA_VALUE Atributos Firma Significado value : Boolean Valor booleano que posee el objeto Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 31. DV_STATE Class Clase DV_STATE Propósito Para representar los valores de estado que obedecen a una máquina de estados Uso DV_STATE es expresado como un String cuyos valores deben ser derivados de una máquina de estados Mal uso Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 171 Hereda de DATA_VALUE Atributos Firma Significado value : DV_CODED_TEXT Nombre del estado Is_terminal: Boolean Indica si es un estado terminal, tal como “abortado”, “completado” etc. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 32. DV_IDENTIFIER Class Clase DV_IDENTIFIER Propósito Tipo utilizado para representar identificadores del mundo real, tales como: números de licencia, código de seguro social, número de orden etc. Uso DV_IDENTIFIER es utilizado para representar cualquier identificador del mundo real, vinculado con alguna autoridad o agencia. Mal uso No debe ser usado para identificar elementos propios de la infraestructura del sistema; los tipos OBJECT_ID y OBJECT_REF están definidos para ese propósito. Hereda de DATA_VALUE Atributos Firma Significado issuer : String Autoridad vinculada con el identificador. assigner: String Organización vinculada con el identificador. id: String Valor del identificador. Estructurado según las reglas de la entidad Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 172 asignadora. type: String Define el tipo de identificador. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Figura -A- 8. Paquete hce.core.data_types.encapsulated Fuente: Elaboración propia Tabla -A- 33. DV_ENCAPSULATED Class Clase DV_ENCAPSULATED (abstracta) Propósito Clase abstracta que define la metada común de todos los tipos de datos encapsulados. Hereda de DATA_VALUE Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 173 Atributos Firma Significado 1..1 size: Integer Tamaño original en bytes de los datos encapsulados sin codificar. 0..1 charset: CODE_PHRASE Nombre de la codificación de caracteres en el cual el valor ha sido codificado. 0..1 language: CODE_PHRASE Indicador opcional que indica el lenguaje en el cual los datos han sido escritos. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 34. DV_MULTIMEDIA Class Clase DV_MULTIMEDIA Propósito Es una especialización de DV_ENCAPSULATED para tipos audiovisuales. Hereda de DV_ENCAPSULATED Atributos Firma Significado 0..1 alternate_text: String Texto alternativo del elemento multimedia. 1..1 media_type: CODE_PHRASE “media type” del elemento 0..1 compression_algorithm: CODE_PHRASE Algoritmo de compresión utilizado. 0..1 integrity_check: Array <byte> Checksum de integridad. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 174 0..1 integrity_check_algorithm: CODE_PHRASE Algoritmo utilizado en Checksum de integridad. 0..1 thumbnail: DV_MULTIMEDIA Thumbnail de este element. 0..1 uri: DV_URI Referencia a algún elemento de información externa. 0..1 data: Array <byte> Datos del element multimedia. Funciones Firma Significado getTrasients: Object Los valores posibles son: external, inline, compresed. has_integrity_check: boolean Verdadero si la comprobación de integridad es satisfactoria Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 35. DV_PARSEABLE Class Clase DV_PARSEABLE Propósito Datos encapsulados no descritos en el modelo interno del sistema pero que puede ser representado como una cadena de texto Hereda de DV_ENCAPSULATED Atributos Firma Significado 1..1 value: String Datos encapsulados en formato texto. 1..1 formalism: String Nombre del formalismo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 175 Figura -A- 9. Paquete hce.core.data_types.quantity Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 176 Tabla -A- 36. DV_ORDERED Class Clase DV_ORDERED Propósito Generalización de los valores que pueden ser ordenados. Hereda de DATA_VALUE Atributos Firma Significado 0..1 normal_range: DV_INTERVAL Rango normal opcional. 0..1 other_reference_ranges: List <REFERENCE_RANGE> Rangos de referencia para un contexto particular de medición Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 37. DV_INTERVAL Class Clase DV_INTERVAL Propósito Clase genérica que define un intervalo o rango en tipos de datos que puedan ser comparados. Uso Es usado para definir intervalos de datos, tiempos, cantidades y otros. Hereda de DATA_VALUE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 38. REFERENCE_RANGE Class Clase REFERENCE_RANGE Propósito Define un nombre de rango de valores. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 177 Uso Puede ser utilizado para representar distintos tipos de rangos: normal, peligroso, crítico, etc. Hereda de DATA_VALUE Atributos Firma Significado 1..1 range: DV_INTERVAL<T> Valores del rango, máximo y mínimo. 1..1 meaning: DV_TEXT Indica el significado del rango, ej. “normal”, “crítico”, etc. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 39. DV_ORDINAL Class Clase DV_ORDINAL Propósito Modela clasificaciones y resultados. Ej. dolor, valores Apgar, etc. Donde a) entre valores existe un orden, b) no implica que la distancia entre cada valor sea una constante, y c) el número total de valores es finito. Aunque el término “ordinal” en matemáticas denote números naturales solamente, en DV_ORDINAL cualquier número entero es permitido, debido a que los números negativos y el número cero, son utilizados en medicina para establecer valores alrededor de un punto neutro. Por ejemplo: -3, -2, -1, 0, 1, 2, 3 – valores de respuesta de reflejos 0, 1, 2 – Valores Apgar. Uso Utilizado para grabar cualquier dato clínico que habitualmente se registra con valores simbólicos o textuales. Cada valor en DV_ORDINAL posee un valor numérico (índice) y un valor simbólico o textual. Hereda de DV_ORDERED Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 178 Atributos Firma Significado 1..1 value: Integer Valor numérico. 1..1 symbol: DV_CODED_TEXT Representación textual de la numeración. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 40. DV_QUANTIFIED Class Clase DV_QUANTIFIED Propósito Generalización de valores que son cuantificables, valores que poseen una magnitud precisa. Hereda de DV_ORDERED Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 41. DV_AMOUNT Class Clase DV_AMOUNT Propósito Generalización que define el concepto de cantidad. Hereda de DV_QUANTIFIED Atributos Firma Significado 0..1 accuracy: Real Número real que expresa la precisión de la medición 0..1 accuracy_is_percent: Boolean Verdadero si el registro de precisión se realizó en forma de porcentaje. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 179 Tabla -A- 42. DV_QUANTITY Class Clase DV_QUANTITY Propósito Expresar cantidades como magnitudes y unidades. Hereda de DV_AMOUNT Atributos Firma Significado 1..1 magnitude: Double Magnitud numérica de la cantidad. 1..1 units: String String que respresenta la unidad. Ej. “km/h”, “mm[Hg]”. 0..1 precisión: Integer Precisión que se refiere al número total de posiciones decimales. El valor -1 índica sin límites de posiciones decimales. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 43. DV_COUNT Class Clase DV_COUNT Propósito Registro de cantidades contables en el conjunto de números enteros Uso Se usa para tipos contables, tales como: cantidad de embarazos, números de cigarrillos por día, etc. Mal uso No debe ser usado para cantidades que deban ser acompañadas de unidades de medida, en ese caso usar DV_QUANTITY. Hereda de DV_AMOUNT Atributos Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 180 1..1 magnitude: Integer Magnitud numérica. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 44. DV_PROPORTION Class Clase DV_PROPORTION Propósito Modela valores expresados como fracciones. Uso Usado para representar proporciones y porcentajes. Mal uso No debe ser utilizado para presentar conceptos tales como la presión arterial, que a menudo son escritas utilizando el carácter “/”, propio de una fracción. Hereda de DV_AMOUNT Atributos Firma Significado 1..1 numerator: Real Numerador. 1..1 denominator: Real Denominador. 1..1 precisión: Integer Precisión que se refiere al número total de posiciones decimales en las que puede ser expresada la proporción. El valor -1 índica sin límites de posiciones decimales. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 181 Tabla -A- 45. DV_TEMPORAL Class Clase DV_TEMPORAL Propósito Generalización de los distintos tipos de tiempo. Hereda de DATA_VALUE Atributos Firma Significado 1..1 value: String Valor de tiempo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 46. DV_DATE Class Clase DV_DATE Propósito Representa un instante una fecha, de acuerdo al calendario Gregoriano. Semantica definida en ISO 8601 Uso Se usa para grabación de fechas. Hereda de DV_TEMPORAL Atributos Firma Significado 1..1 value: String Valor de fecha ISO8601. Funciones Firma Significado toDate: java.util.Date Convierte el valor String según ISO 8601 a un objeto tipo java.util.Date. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 182 Tabla -A- 47. DV_TIME Class Clase DV_TIME Propósito Representa una cantidad de horas, bajo el sistema de 24H. Semántica definida en ISO 8601. Uso Se usa para grabación de tiempo. Hereda de DV_TEMPORAL Atributos Firma Significado 1..1 value: String Valor de horas ISO8601. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 48. DV_DATE_TIME Class Clase DV_DATE_TIME Propósito Representa un punto absoluto en el tiempo, con precisión de segundos. Semántica definida en ISO 8601. Uso Se usa para grabación de fechas y hora en conjunto. Hereda de DV_TEMPORAL Atributos Firma Significado 1..1 value: String Valor de fecha y hora ISO8601. Funciones Firma Significado toDate: java.util.Date Convierte el valor String según ISO 8601 a un objeto tipo java.util.Date. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 183 Tabla -A- 49. DV_DURATION Class Clase DV_DURATION Propósito Representa un período de tiempo. Uso Se utiliza para registrar la duración de algo en el mundo real. Mal uso No debe ser utilizado para representar puntos en el tiempo. Hereda de DV_AMOUNT Atributos Firma Significado 1..1 value: String Valor de duración ISO8601. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 184 Figura -A- 10. Paquete hce.core.data_types.text Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 185 Tabla -A- 50. DV_TEXT Class Clase DV_TEXT Propósito Elemento de texto, puede contener palabras, frases, etc. Se le puede incluir formato de presentación e hipervínculos. Uso Contener fragmentos de texto, codificados o no codificados. Hereda de DATA_VALUE Atributos Firma Significado 1..1 value: String Valor del texto. 0..1 mappings: List <TERM_MAPPING> Mapeo de términos pertenecientes a terminologías. 0..1 formatting: String Formato de presentación sobre el String de la forma: “name:value; name:value...”, e.g. "font-weight : bold; font-family : Arial; font-size : 12pt;" 0..1 hyperlink: DV_URI Hipervinculo opcional asociado al texto. 0..1 language: CODE_PHRASE Valor opcional que permite identificar el lenguaje en el cual el texto está escrito 0..1 encoding: CODE_PHRASE Tipo de codificación utilizada para el texto, tal como UTF-8 o ISO-8859 Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 186 Tabla -A- 51. TERM_MAPPING Class Clase TERM_MAPPING Propósito Representa el mapeo de un DV_TEXT, indicando una coincidencia relativa según el término original a mapear. Uso Usado para añadir clasificación a términos, o para relacionar estos con otras terminologías. Hereda de DATA_VALUE Atributos Firma Significado 1..1 target: CODE_PHRASE Termino codificado. 1..1 match: Character Carácter que indica el mapeo relativo: -‘>’ más amplio que el término original. Ej texto original = “infección por arbovirus”, target = “infección viral” -‘=’ igual al término original -‘<’ menor al término original. Ej texto original = “diabetes”, target = “diabetes mellitus” -‘?’ desconocido Funciones Firma Significado broader: Boolean El mapeo es más amplio que el término equivalent: Boolean El mapeo es equivalente al texto Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 187 narrower: Boolean El mapeo es menor al término original unknown: Boolean El mapeo es desconocido isValidMatchCode(c: Character) : Boolean Verdadero si es un ‘match’ válido Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 52. CODE_PHRASE Class Clase CODE_PHRASE Propósito Código perteneciente a un servicio terminológico Atributos Firma Significado 1..1 terminology_id: TERMINOLOGY_ID Terminología a la cual pertenece este código 1..1 code_string: String Código Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 53. DV_CODED_TEXT Class Clase DV_CODED_TEXT Propósito Texto cuyo valor está asociado directamente con una terminología controlada Uso Un DV_CODED_TEXT es un subtipo de DV_TEXT, puede usarse en lugar de este último ya que tiene mayores posibilidades de ser codificado Mal uso Si la intención es realizar un mapeo a un término no debe Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 188 utilizarse DV_CODED_TEXT, en su lugar usar DV_TEXT y TERM_MAPPING vinculado a un CODE_PHRASE Hereda de DV_TEXT Atributos Firma Significado 1..1 defining_code: CODE_PHRASE Valor codificado. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 54. DV_PARAGRAPH Class Clase DV_PARAGRAPH Propósito Texto compuesto que consiste en una serie de DV_TEXTs Uso DV_PARAGRAPH is la manera estándar de construir un texto largo para reportes, resúmenes y similares Hereda de DATA_VALUE Atributos Firma Significado 1..1 items: List <DV_TEXT> Lista de ítems que conforman el parrafo Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 189 Paquete hce.core.datastructure, ver Figura -A- 11 Figura -A- 11. Paquete hce.core.datastructure Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 190 Tabla -A- 55. DATA_STRUCTURE Class Clase DATA_STRUCTURE Propósito Clase padre de la que heredan todos los tipos de estructuras de datos Hereda de LOCATABLE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 56. ITEM_STRUCTURE Class Clase ITEM_STRUCTURE Propósito Generalización de todas las estructuras de datos. Hereda de DATA_STRUCTURE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 57. ITEM_SINGLE Class Clase ITEM_SINGLE Propósito Representa una estructura formada solamente por un elemento simple. Hereda de ITEM_STRUCTURE Atributos Firma Significado 1..1 item: ELEMENT Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 191 Tabla -A- 58. ITEM_LIST Class Clase ITEM_LIST Propósito Lista lógica de elementos, donde cada elemento de la lista tiene un índice posicional. La lista puede ser vacía. Uso Usada para representar cualquier conjunto de datos que pueda ser presentado en forma de lista. Mal uso No debe ser utilizada como una lista ordenada en base al tiempo, para esto es recomendable usar la clase HISTORY. Hereda de ITEM_STRUCTURE Atributos Firma Significado 0..1 items: List <ELEMENT> Lista de elementos. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 59. ITEM_TABLE Class Clase ITEM_TABLE Propósito Estructura de tipo tabla. Cada fila de la tabla es de tipo CLUSTER, todos los CLUSTER son de igual tamaño. La tabla puede ser vacia. Uso Usada para representar cualesquiera datos en forma de valores en una tabla. Mal uso No debe ser utilizada como una tabla ordenada en base al tiempo, para esto es recomendable usar la clase HISTORY. Hereda de ITEM_STRUCTURE Atributos Firma Significado 0..1 rows: List <CLUSTER> Lista de filas. Cada fila es un CLUSTER. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 192 Tabla -A- 60. ITEM_TREE Class Clase ITEM_TREE Propósito Estructura de datos de tipo árbol. El árbol puede ser vacio. Uso Usado para representar lógicamente datos en forma de árbol. Hereda de ITEM_STRUCTURE Atributos Firma Significado 0..1 items: List <ITEM > Representación física de árbol. Listado de ítems. Los ítems pueden ser de tipo ELEMENT o CLUSTER. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 61. ITEM Class Clase ITEM Propósito Clase padre de la cual heredan Cluster y Element. Hereda de LOCATABLE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 62. CLUSTER Class Clase CLUSTER Propósito Agrupador de ITEM. Puede contener múltiples instancias de ITEM en una lista ordenada. Hereda de ITEM Atributos Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 193 0..1 items: List <ITEM > Lista ordenada de ítems que puede contener objetos de tipo CLUSTER O ELEMENT. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 63. ELEMENT Class Clase ELEMENT Propósito Es un nodo hoja al cual se adjunta un DATA_VALUE Hereda de ITEM Atributos Firma Significado 0..1 value: DATA_VALUE Valor asociado al ELEMENT. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 194 Base de datos La base de datos fue creada a través del framework de Grails. Ésta se deriva directamente y es fiel al modelo de dominio descrito en detalle en el punto anterior. El diseño y creación de la base de datos por parte del equipo desarrollador fue totalmente indirecta, pues Grails se encarga de esto de forma transparente. Por motivos de tamaño no es imposible colocar dentro de este documento el diagrama entidad relación de la base de dados resultante. Vistas A continuación se muestra la documentación de las distintas vistas del sistema SOS- HME. Para facilitar su entendimiento esta sección se ha dividido en las vistas involucradas con el acceso de usuarios al sistema y el acceso al sistema como administrador de usuarios. Figura -A- 12. Principales vistas del sistema SOS-HME Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 195 En la Figura -A- 12 se muestran las principales vistas del sistema SOS-HME, el menú de navegación de las vistas está compuesto por las tres opciones principales: lista de registros, admisión de paciente y reportes. Desde cualquiera de la vistas el usuario puede cerrar la sesión y volver a la pantalla de inicio. Vista de inicio de sesión Figura -A- 13. Inicio de sesión Fuente: Elaboración propia El inicio de sesión, ver Figura -A- 13, permite la captura de datos para la autenticación de usuarios en el sistema. Muestra un mensaje de error en caso de que los datos de la cuenta sean inválidos. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 196 Vista de dominios clínicos Figura -A- 14. Dominios clínicos Fuente: Elaboración propia La lista de dominios clínicos, ver Figura -A- 14, Muestra los distintos dominios existentes en la aplicación, permitiendo al usuario seleccionar el dominio de trabajo. Vista de lista de registros clínicos Figura -A- 15. Lista de registros clínicos Fuente: Elaboración propia La lista de registros clínicos, ver Figura -A- 15, muestra de manera paginada una lista de todos los registros clínicos existentes. A partir de cada registro se puede acceder al Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 197 detalle de registro clínico, así como al detalle del paciente asociado. Esta vista contiene la opción para la creación de un nuevo registro clínico. Vista crear registro Figura -A- 16. Crear registro Fuente: Elaboración propia La vista crear registro, ver Figura -A- 16, captura de datos para la creación de un nuevo registro clínico. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 198 Vista de registro clínico Figura -A- 17. Registro clínico – Edición Fuente: Elaboración propia En la vista de registro clínico Figura -A- 17, se presenta el formulario de entrada de datos divido por secciones que permite el registro de los datos clínicos relacionados con el tratamiento de un paciente El registro clínico puede tener dos formas, la de edición presentada en la Figura -A- 17 y la de consulta de los valores asignados, ver Figura -A- 18. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 199 Figura -A- 18. Registro clínico – Valores asignados Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 200 Vista admisión de pacientes Figura -A- 19. Admisión de paciente Fuente: Elaboración propia La vista de admisión de pacientes, ver Figura -A- 19 permite la búsqueda de pacientes en el sistema mediante diversos criterios (identificador, primero nombre, segundo nombre, primer apellido segundo apellido y fecha de nacimiento). La vista de admisión de pacientes se combina con la vista de pacientes candidatos mostrada en la Figura -A- 20, la cual muestra la lista de pacientes coincidentes con la búsqueda. Figura -A- 20. Lista de paciente candidatos Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 201 Vista de nuevo paciente Figura -A- 21. Nuevo paciente Fuente: Elaboración propia La vista de nuevo paciente mostrada en la Figura -A- 21, permite la creación de un nuevo paciente. Para ello se capturan sus datos demográficos paso por paso. Posteriormente existe la posibilidad de modificar los valores inicialmente registrados, mediante la edición de registro de paciente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 202 Vista detalle de paciente Figura -A- 22. Detalle de paciente Fuente: Elaboración propia A través de la vista detalle de paciente se puede ver el detalle del paciente seleccionado. A través de esta vista se puede tener acceso a la funciones del SOS-IMP para compartir la información clínica de este paciente. Ver Figura -A- 22. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 203 Figura -A- 23. Principales vistas del módulo de administración del sistema SOS-HME Fuente: Elaboración propia Todas las vistas del módulo de administración del sistema tienen acceso a la lista de usuarios y lista de personas a través del menú de administración. Las principales vistas del módulo de administración se muestran en la Figura -A- 23. Desde cualquiera de la vistas el administrador del sistema puede cerrar la sesión y volver a la pantalla de inicio. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 204 Vista listado de usuarios Figura -A- 24. Listado de usuarios Fuente: Elaboración propia En la lista de usuarios, ver Figura -A- 24, se Muestran de manera paginada todas las cuentas de usuario existentes en el sistema. A través de esta vista es posible acceder al detalle de cualquier cuanta de usuario. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 205 Vista detalle de usuario Figura -A- 25. Detalle de usuario. Fuente: Elaboración propia En la Figura -A- 25 se muestra el detalle de una cuenta de usuario. Con las opciones de crear uno nuevo, ver Figura -A- 26 , editar el usuario actual, ver Figura -A- 27, o borrar un usuario existente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 206 Figura -A- 26. Crear usuario Fuente: Elaboración propia Figura -A- 27. Editar usuario Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 207 Vista listado de personas Figura -A- 28. Listado de personas Fuente: Elaboración propia La Figura -A- 28 muestra manera paginada todas personas registradas en el sistema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 208 Vista crear persona Figura -A- 29. Crear persona Fuente: Elaboración propia La Figura -A- 29 muestra el formulario para creación de una persona en el sistema SOS- HME. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 209 Vista mostrar persona Figura -A- 30. Mostrar detalles de persona Fuente: Elaboración propia La Figura -A- 30 muestra el detalle de una de los valores de una persona. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 210 Vista edición de persona Figura -A- 31. Edición de personas Fuente: Elaboración propia La Figura -A- 31 muestra un formulario para la edición de los datos de una persona. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 211 Vista creación de rol Figura -A- 32. Creación de rol Fuente: Elaboración propia La Figura -A- 32 muestra la captura de datos para agregar un rol nuevo a una persona existente en el sistema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 212 Vista edición de rol Figura -A- 33. Edición de rol Fuente: Elaboración propia La Figura -A- 33 despliega un formulario para la edición de un rol perteneciente a una persona. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 213 Vista de visialización de persona Figura -A- 34. Visualización de persona Fuente: Elaboración propia La Figura -A- 34 muestra el detalle de un rol asignado a una persona en el sistema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 214 APÉNDICE B - DOCUMENTACIÓN TÉCNICA SOS-IMP A continuación se expone de manera detallada la documentación técnica de la aplicación SOS-HME, compuesta por el modelo del dominio, modelo de base de datos y servicios web. Modelo de dominio El modelo de dominio describe la estructura del sistema. A continuación se muestran los paquetes en los cuales está dividida la aplicación SOS-IMP, sus clases con atributos y funciones, y las relaciones existentes entre las clases. Lista de paquetes:  Paquete Admin.  Paquete Imp. Los paquetes se muestran en detalle en la Figura -B- 1. La descripción de las clases se realiza en el rango de tablas que va desde la Tabla -B- 1 hasta la Tabla -B- 7. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 215 Figura -B- 1. Clases de dominio SOS-IMP. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 216 Paquete Admin Tabla -B- 1. USER Class Clase USER Propósito Usuario del índice maestro de pacientes. Por lo general este usuario representa a un centro asistencial. Atributos Firma Significado 1..1 username: String Nombre de usuario. 1..1 password: String Contraseña. 1..1 enabled: Boolean Indica si el usuario está habilitado o deshabilitado. 1..1 accountExpired: Boolean Atributo que indica si la validez de la cuenta ha expirado. 1..1 accountLocked: Boolean Indica si la cuenta está bloqueada. 1..1 passwordExpired: Boolean Indica si la contraseña está vencida. Nota: Fuente: Elaboración propia. Tabla -B- 2. ROLE Class Clase ROLE Propósito Define un rol a un usuario del sistema Atributos Firma Significado 1..1 authority: String Nombre de la autoridad o rol. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 217 Tabla -B- 3. USER_ROLE Class Clase USER_ROLE Propósito Esta clase modela la relación entre un usuario y un rol. Atributos Firma Significado 1..1 user: User Usuario. 1..1 role: Rol Rol. Nota: Fuente: Elaboración propia. Paquete Imp Tabla -B- 4. ORGANIZACION Class Clase ORGANIZACION Propósito Modela una organización sanitaria presente en el índice maestro de pacientes. Atributos Firma Significado 1..1 User: User Usuario de la organización 1..1 uniqueIdentifier: String Es un UUID. Sirve como identificador único para la organización. 1..1 nombre: String Nombre de la organización. Ej. Ambulatorio El Pilar, Maracaibo. 1..1 pacientes: Paciente Lista de pacientes registrados en esa organización. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 218 Tabla -B- 5. PACIENTE Class Clase PACIENTE Propósito Mantener un registro de los pacientes que tienen documentos clínicos en distintas organizaciones. Atributos Firma Significado 1..1 idPacienteOrg: String Identificador que tiene asignado el paciente en la organización a la cual pertenece. 0..1 cedula: String Número de cedula de identidad. 0..1 pasaporte: String Número de pasaporte. 1..1 primerNombre: String Primer nombre. 0..1 segundoNombre: String Segundo Nombre. 1..1 primerApellido: String Primer Apellido 0..1 segundoApellido: String Segundo Apellido. 0..1 fechaNacimiento: String Fecha de nacimiento en formato ‘yyyy-mm-dd’ 0..1 sexo: String Sexo. 1..1 centro: Organizacion Centro asistencial dónde está registrado. 1..1 indice: IndicePaciente Identificador único de paciente, asociado con otras identidades del mismo paciente registradas en otros centros. 0..1 cdas: List <Cda> Lista de documentos clínicos. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 219 Tabla -B- 6. CDA Class Clase CDA Propósito Modelar de forma simple un documento clínico electrónico. Atributos Firma Significado 1..1 idCdaOrg: String Identificador de documento clínico asignado por a organización creadora. 1..1 documento: String Texto completo del documento XML. 1..1 titulo: String Titulo del documento. 1..1 fechaCreacion: String Fecha de creación del documento en formato ‘yyyy-mm-dd’. Nota: Fuente: Elaboración propia. Tabla -B- 7. INDICE_PACIENTE Class Clase INDICE_PACIENTE Propósito Enlazar registros de pacientes pertenecientes a diferentes organizaciones pero que pertenecen a una misma persona. Atributos Firma Significado 1..1 uniqueIdentifier: String Es un UUID, que sirve para identificar unívocamente un elemento del índice. 1..1 pacientes: List<Paciente> Lista de pacientes asociados. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 220 Base de datos Al igual que la base datos del SOS-HME, la base de datos del SOS-IMP es creada mediante el uso del framework de Grails. Por tanto el diseño y creación de la base de datos por parte del equipo desarrollador fue totalmente indirecta, pues Grails se encarga de esto de forma transparente. El diseño de la base de datos responde al modelo de dominio descrito en el punto anterior. A continuación se muestra el diagrama entidad relación de la base de datos resultante para el SOS-IMP. Figura -B- 2. Modelo entidad relación SOS-IMP. Fuente: Elaboración propia. Servicios Web Los servicios web que ofrece el SOS-IMP están divididos en dos paquetes, El primero, «paquete cda», está orientado al manejo del repositorio de documentos CDA. El segundo «paquete imp», se encarga de la identificación central de usuarios. La descripción de los servicios web se realiza en el rango de tablas que va desde la Tabla -B- 8 hasta la Tabla -B- 21. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 221 Paquete Cda Tabla -B- 8. Servicio BUSCAR_CDA_BY_ID Nombre BUSCAR_CDA_BY_ID Firma Cda buscarCdaById(Integer id, String idOrganizacion) Propósito Busca un documentos CDA por su identificador único Parametros Firma Significado 1..1 id : Integer Identificador del documento CDA. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna un documento CDA, retorna null en caso de no encontrar coincidencia. Nota: Fuente: Elaboración propia. Tabla -B- 9. Servicio BUSCAR_CDA_BY_PACIENTE Nombre BUSCAR_CDA_BY_PACIENTE Firma List<Cda> buscarCdaByPaciente(String paciente, Integer offset, String idOrganizacion) Propósito Busca un conjunto de documentos CDA pertenecientes a un paciente Parametros Firma Significado 1..1 paciente: String Identificador único de paciente, perteneciente a la organización que realiza la consulta. 1..1 idOrganizacion: Identificador único (UUID) de la Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 222 String organización consultante. 1..1 offset: Integer Número de la página. Valor de retorno Retorna una lista de documentos CDA´s, retorna null en caso de no encontrar coincidencias Nota: Fuente: Elaboración propia. Tabla -B- 10. Servicio BUSCAR_CDA_BY_PACIENTE_AND_ORGANIZACION Nombre BUSCAR_CDA_BY_PACIENTE_AND_ORGANIZACION Firma List<Cda> buscarCdaByPacienteAndOrganizacion(String paciente, Long numeroOrg, Integer offset, String idOrganizacion) Propósito Busca un conjunto de documentos CDA pertenecientes a un paciente y a una organización. Parametros Firma Significado 1..1 paciente: String Identificador único de paciente, perteneciente a la organización que realiza la consulta. 1..1 numeroOrg: Long Identificador simple de la organización a consultar. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. 1..1 offset: Integer Número de la página. Valor de retorno Retorna una lista de documentos CDA´s, retorna null en caso de no encontrar coincidencias Nota: Fuente: Elaboración propia. Tabla -B- 11. Servicio BUSCAR_CDA_BY_PACIENTE_AND_RANGO Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 223 Nombre BUSCAR_CDA_BY_PACIENTE_AND_RANGO Firma List<Cda> buscarCdaByPacienteAndRango(String paciente, String desde, String hasta, Integer offset, String idOrganizacion) Propósito Busca un conjunto de documentos CDA pertenecientes a un paciente dentro de un rango de fechas determinado. Parametros Firma Significado 1..1 paciente: String Identificador único de paciente, perteneciente a la organización que realiza la consulta. 1..1 desde: String Fecha en formato “yyyy-MM- dd”. 1..1 hasta: String Fecha en formato “yyyy-MM- dd”. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. 1..1 offset: Integer Número de la página. Valor de retorno Retorna una lista de documentos CDA´s, retorna null en caso de no encontrar coincidencias Nota: Fuente: Elaboración propia. Tabla -B- 12. Servicio ELIMINAR_CDA Nombre ELIMINAR_CDA Firma boolean eliminarCDA(Long idCda, String idPacienteOrg, String idOrganizacion) Propósito Elimina un documento CDA del repositorio compartido. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 224 Parámetros Firma Significado 1..1 idCda: Long Identificador simple de CDA. 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización eliminadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 13. Servicio REGISTRAR_CDA Nombre REGISTRAR_CDA Firma boolean registrarCDA(Cda cda, String idPacienteOrg, String idOrganizacion) Propósito Registra un documento CDA en el repositorio de documentos. Parámetros Firma Significado 1..1 cda: Cda Objeto de tipo Cda. 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización creadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 225 Paquete Cda Tabla -B- 14. Servicio AGREGAR_PACIENTE Nombre AGREGAR_PACIENTE Firma boolean agregarPaciente(Paciente paciente, String idOrganizacion) Propósito Registrar un paciente en el IMP. Parámetros Firma Significado 1..1 paciente: Paciente Objeto de tipo Paciente. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 15. Servicio EXISTE_PACIENTE Nombre EXISTE_PACIENTE Firma boolean existePaciente(String idPacienteOrg, String idOrganizacion) Propósito Saber si el paciente está o no registrado. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización consultante. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 226 Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 16. Servicio ELIMINAR_PACIENTE Nombre ELIMINAR_PACIENTE Firma boolean eliminarPaciente(String idPacienteOrg, String idOrganizacion) Propósito Eliminar un paciente del IMP. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización consultante. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 17. Servicio AGREGAR_RELACION_PACIENTE Nombre AGREGAR_RELACION_PACIENTE Firma boolean agregarRelacionPaciente(Long idCentroImp,String idPacienteImp, String idPacienteOrg, String idOrganizacion) Propósito Relaciona un paciente de una organización con algún otro perteneciente al IMP. Parámetros Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 227 1..1 idCentroImp: Long Identificador de la organización receptora en el IMP. 1..1 idPacienteImp: String Identificador perteneciente al paciente de la organización receptora. 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización cruzadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización cruzadora. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 18. Servicio EXISTE_RELACION_PACIENTE Nombre EXISTE_RELACION_PACIENTE Firma boolean existeRelacionPaciente(String idPacienteOrg, String idOrganizacion) Propósito Verifica si existe alguna relación con otro paciente. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización consultora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultora. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 228 Nota: Fuente: Elaboración propia. Tabla -B- 19. Servicio ELIMINAR_RELACION_PACIENTE Nombre ELIMINAR_RELACION_PACIENTE Firma boolean eliminarRelacionPaciente(String idPacienteOrg, String idOrganizacion) Propósito Elimina la relación existente entre un paciente de una organización con algún otro perteneciente al IMP. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización eliminadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización eliminadora. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 20. Servicio BUSCAR_CANDIDADOS Nombre BUSCAR_CANDIDADOS Firma List<Paciente> buscarCandidatos(Paciente paciente, Integer offset, String idOrganizacion) Propósito Búsqueda de candidatos coincidentes o similares a un paciente dado. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización consultora. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 229 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultora. 1..1 offset: Integer Número de página. Valor de retorno Retorna una lista de pacientes coincidentes, retorna null en caso de no encontrar coincidencias. Nota: Fuente: Elaboración propia. Tabla -B- 21. Servicio LISTAR_ORGANIZACIONES_BY_PACIENTE Nombre LISTAR_ORGANIZACIONES_BY_PACIENTE Firma List<Organizaciones> listarOrganizacionesByPaciente(String idPacienteOrg, String idOrganizacion) Propósito Lista un conjunto de organizaciones donde el paciente posee documentos CDA. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización consultora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultora. Valor de retorno Retorna una lista de organizaciones, retorna null en caso de no encontrar coincidencias. Nota: Fuente: Elaboración propia.UNIVERSIDAD CENTRAL DE VENEZUELA FACULTAD DE CIENCIAS ESCUELA DE COMPUTACIÓN SISTEMA DE HISTORIA MÉDICA ELECTRÓNICA, PROGRAMA SOS TELEMEDICINA PARA VENEZUELA Trabajo Especial de Grado Elaborado ante la ilustre Universidad Central de Venezuela Por los Bachilleres: Armando Alberto Prieto Padrón Ángel Alejandro Rodríguez León Para optar por el título de Licenciado en Computación Tutor: Robinson Rivas Caracas, Mayo de 2012 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 2 Dedicatoria A mis padres, porque ambos me han dado siempre lo mejor, son mi ejemplo de honestidad, constancia y sacrificio, por ustedes lo he logrado. A mi mamá por ser una en un millón, por todo su amor y compresión. A mi papá por su temple y valentía antes las adversidades. A mi hermana, Anier, porque es mi hermana favorita. A mi queridísima abuela Cruz, testigo de noches incansables de trabajo. A mis amigos del oratorio, por todo lo que hemos compartido. Armando Dedico este trabajo especial de grado primero a mi madre que me apoya desde que tengo uso de razón, a mi padre por su ejemplo de honestidad que siempre me ha dado. A toda mi familia porque de una u otra forma esto es fruto de su amor y por sobre todo a mi abuelo Ángel Custodio Rodríguez Ortiz persona de la cual a pesar de no estar con nosotros todavía sigo aprendiendo en esta vida. A mis amigos del alma que siempre han creído en mí y a todas las personas que puedan beneficiarse de este proyecto directa o indirectamente. Ángel Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 3 Agradecimientos A Dios. A nuestras familias. A Robinson Rivas. A Nancy Urbina. A Héctor Arrechedera. A Jesús Velázquez. A Juan Carlos Escalante. A Pablo Pazos. A Leandro Carrasco. A Christian Oestreich. Y a todo el equipo del Programa SOS Telemedicina para Venezuela. http://www.christianoestreich.com/ Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 4 RESUMEN Este trabajo presenta la elaboración de un sistema de historia médica electrónica (HME) para los ambulatorios del programa SOS Telemedicina para Venezuela. El sistema está basado en OpenEHR Gen Framework, herramienta que fue seleccionada luego de realizar una evaluación sobre otras herramientas de HME, resultando electa por ser un marco de trabajo para crear sistemas HME que acoge varios estándares, entre ellos: OpenEHR y HL7 CDA. Se normaliza un formato de historia médica integral, basado en el análisis de los procesos asistenciales de diferentes centros de atención sanitaria de nivel ambulatorio. El sistema de historia HME resultante: SOS-HME, puede adaptarse al formato de registro clínico de un centro asistencial particular, y está en capacidad de intercambiar información clínica con otros sistemas. Palabras clave: historia médica electrónica, estándares, openEHR, interoperabilidad. ABSTRACT This job presents the development of an electronic health record (EHR) system for the SOS Telemedicina ambulatory centers. The system is based in OpenEHR Gen Framework, this tool was selected after to realize an evaluation over others EHR tools, it was selected because it is a framework to build EHR systems that adopt several standars, including: OpenEHR and HL7 CDA. Also was normalized an integral history format, based in the analysis over various care process in ambulatory centers. The resulting system: SOS-HME, can to adapt to any clinical format, and it is in capacity to change clinical information with others systems. Key words: electronic health records, standards, openEHR, interoperability. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 5 ÍNDICE TEMÁTICO RESUMEN ......................................................................................................................................... 4 ABSTRACT ....................................................................................................................................... 4 INTRODUCCIÓN ........................................................................................................................... 11 CAPÍTULO I – PROBLEMA DE INVESTIGACIÓN ................................................................ 15 1.1 INTRODUCCIÓN ................................................................................................................... 15 1.1 PLANTEAMIENTO DEL PROBLEMA ............................................................................................ 15 1.2 SOLUCIÓN PROPUESTA............................................................................................................... 17 1.3. OBJETIVOS ................................................................................................................................. 19 1.3.1. OBJETIVO GENERAL ................................................................................................................ 19 1.3.2. OBJETIVOS ESPECÍFICOS .......................................................................................................... 19 1.4 REQUERIMIENTOS FUNCIONALES ............................................................................................. 19 1.5 REQUERIMIENTOS NO FUNCIONALES ....................................................................................... 21 1.6 JUSTIFICACIÓN ........................................................................................................................... 21 1.7 ALCANCES .................................................................................................................................. 22 CAPÍTULO II – MARCO CONCEPTUAL ................................................................................. 23 2.1 INTRODUCCIÓN .......................................................................................................................... 23 2.2 HISTORIA MÉDICA ..................................................................................................................... 23 2.2.1 DEFINICIONES CONCEPTUALES ................................................................................................. 23 2.2.2 ORIGEN ..................................................................................................................................... 24 2.2.3 FUNCIÓN ................................................................................................................................... 24 2.2.4 CARACTERÍSTICAS .................................................................................................................... 24 2.3 HISTORIA MÉDICA ELECTRÓNICA ........................................................................................... 26 2.3.1 SISTEMAS DE IDENTIFICACIÓN POR PACIENTE .......................................................................... 27 2.3.2 MECANISMOS DE SEGURIDAD ................................................................................................... 28 2.3.3 INTEROPERABILIDAD ................................................................................................................ 28 2.3.4 ESTÁNDARES ............................................................................................................................ 30 2.3.5 ESTÁNDARES SOBRE LA HME .................................................................................................. 32  Estándares de diseño ....................................................................................................... 32  Estándares de comunicación ........................................................................................... 39  Estándares de terminologías ........................................................................................... 45 CAPÍTULO III - LEVANTAMIENTO DE INFORMACIÓN ................................................... 46 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 6 3.1 INTRODUCCIÓN .......................................................................................................................... 46 3.2 ACTIVIDADES DE INVESTIGACIÓN ............................................................................................. 46 3.3 INFORMACIÓN RECOLECTADA .................................................................................................. 48 3.3.1 FORMATOS DE INFORMACIÓN RECOLECTADOS ........................................................................ 49 3.3.2 ACTIVIDADES IDENTIFICADAS .................................................................................................. 50 3.3.3 FLUJOS DE ATENCIÓN IDENTIFICADOS ...................................................................................... 53 3.3.4 REPORTES IDENTIFICADOS ....................................................................................................... 54 3.3.5 ACTORES IDENTIFICADOS ......................................................................................................... 55 3.3.6 OBSERVACIONES ...................................................................................................................... 55 3.4 INFORMACIÓN GENERADA ......................................................................................................... 56 3.4.1 ACTIVIDADES EN COMÚN ......................................................................................................... 56 CAPÍTULO IV – EVALUACIÓN DE HERRAMIENTAS DE HISTORIAS MÉDICAS ELCTRÓNICAS ............................................................................................................................. 60 4.1 INTRODUCCIÓN .......................................................................................................................... 60 4.2 HERRAMIENTAS DE SELECCIONADAS ....................................................................................... 60 4.2.1 MEDICAL .................................................................................................................................. 61 4.2.2 OPENMRS ................................................................................................................................ 62 4.2.3 OPENEHR-GEN-FRAMEWORK ................................................................................................. 64 3.3 CRITERIOS DE EVALUACIÓN ...................................................................................................... 66 3.4 METODOLOGÍA .......................................................................................................................... 69 3.5 RESULTADOS Y ANÁLISIS ........................................................................................................... 70 CAPÍTULO V – MARCO APLICATIVO .................................................................................... 73 5.1. INTRODUCCIÓN ......................................................................................................................... 73 5.1.1 CONTEXTO DEL PROYECTO ....................................................................................................... 73 5.2 DETALLE DE LA SOLUCIÓN ........................................................................................................ 74 5.3 PLATAFORMA DE DESARROLLO ................................................................................................ 75 5.3.1 GROOVY ................................................................................................................................... 76 5.3.2 GRAILS ...................................................................................................................................... 77 5.3.3 SISTEMA MANEJADOR DE BASE DE DATOS .............................................................................. 80  MySQL ........................................................................................................................... 80 5.4 GESTIÓN DEL PROYECTO .................................................................................................... 81 5.4.1 METODOLOGÍA DE DESARROLLO .............................................................................................. 81 5.4.2 PANIFICACIÓN DEL PROYECTO ................................................................................................. 82  Iteración 1: Análisis de funcionamiento de OpenEHR Gen Framework ........................ 82  Iteración 2: Definición de historia médica básica integral ............................................. 86  Iteración 3: Interoperabilidad ......................................................................................... 88  Iteración 4: Diseño de interfaz gráfica............................................................................ 89  Iteración 5: Acceso y autorización ................................................................................. 90  Iteración 6: Definición historia médica materno infantil ................................................ 91 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 7  Iteración 7: Pruebas integrales ........................................................................................ 92 5.5 SOS HISTORIA MÉDICA .............................................................................................................. 94 5.5.1 ARQUITECTURA ........................................................................................................................ 94  Vista por componentes ................................................................................................... 94  Vista por capas ............................................................................................................... 95  Vista de funcionalidades ................................................................................................. 96 5.5.2 DISEÑO DETALLADO ................................................................................................................. 98  Módulo registro clínico .................................................................................................. 99  Módulo registro demográfico ....................................................................................... 103  Módulo de reportes ....................................................................................................... 106  Módulo de interoperabilidad ........................................................................................ 107 5.5.3 DETALLES DE IMPLEMENTACIÓN ........................................................................................... 107  Elaboración de arquetipos y plantillas .......................................................................... 107  Implementación de la Historia Integral ........................................................................ 110  Diseño de interfaz gráfica ............................................................................................. 112  Acoplamiento con SOS-IMP ........................................................................................ 114 5.6 SOS ÍNDICE MAESTRO DE PACIENTES .................................................................................... 116 5.6.1 ARQUITECTURA ...................................................................................................................... 116  Vista por componentes ................................................................................................. 116  Vista por capas ............................................................................................................. 116 5.6.2 DISEÑO DETALLADO ............................................................................................................... 117  Módulo de Servicios Web ............................................................................................ 117  Módulo de administración ............................................................................................ 118 5.6.3 DETALLES DE IMPLEMENTACIÓN ........................................................................................... 120  Implementación de servicios web ................................................................................. 120 5.7 PRUEBAS ................................................................................................................................... 121  Descripción de servidores ............................................................................................. 121  Pruebas de funcionamiento ........................................................................................... 122 RESULTADOS .............................................................................................................................. 130 CONCLUSIONES Y RECOMENDACIONES .......................................................................... 135 REFERENCIAS BIBLIOGRÁFICAS ........................................................................................ 138 GLOSARIO DE SIGLAS ............................................................................................................. 142 APÉNDICE A - DOCUMENTACIÓN TÉCNICA SOS-HME ................................................. 145 APÉNDICE B - DOCUMENTACIÓN TÉCNICA SOS-IMP ................................................... 214 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 8 ÍNDICE DE FIGURAS Figura 1. Organismos de estandarización en salud. .......................................................................... 31 Figura 2. Modelo Dual Open EHR .................................................................................................... 33 Figura 3. Espacio de nombres org.OpenEHR ................................................................................... 34 Figura 4. Estructura de arquetipo ADL ............................................................................................. 36 Figura 5. Ejemplo de arquetipo guitarra ............................................................................................ 38 Figura 6. Estructura de la HME en EN13606 .................................................................................. 41 Figura 7 - Partes de un CDA ............................................................................................................. 44 Figura 8. II Seminario Regional sobre Salud-e y Telemedicina ....................................................... 47 Figura 9. Flujo de atención en ambulatorios sin sistema de HME .................................................... 53 Figura 10 - Diagrama de actividad manejo diario de historias médicas ............................................ 57 Figura 11. Diagrama de actividad Materno infantil – Prenatal ......................................................... 58 Figura 12. Diagrama de actividad Materno infantil – Recién nacido ................................................ 58 Figura 13. Diagrama de actividad Materno infantil – Madre ............................................................ 59 Figura 14. Diagrama de actividad Reportes estadísticos. .................................................................. 59 Figura 15 OpenMRS Atlas ................................................................................................................ 64 Figura 16. Estructura de aplicación basada en framework ................................................................ 64 Figura 17. Groovy & Grails .............................................................................................................. 76 Figura 18. Pila completa de Grails .................................................................................................... 77 Figura 19. Componentes SOS-HME ................................................................................................. 95 Figura 20. Capas SOS-HME ............................................................................................................. 95 Figura 21. Principales funcionalidades SOS-HME ......................................................................... 96 Figura 22. Componentes principales de SOS-HME .......................................................................... 98 Figura 23. DataBinder ..................................................................................................................... 101 Figura 24. Diagrama de estados de registro clínico ........................................................................ 102 Figura 25. Extracto del modelo demográfico .................................................................................. 103 Figura 26 Diagrama de jerarquía de roles. ...................................................................................... 106 Figura 27. Archetype Editor ............................................................................................................ 108 Figura 28. ADL Workbench............................................................................................................ 109 Figura 29. Notepad ++ .................................................................................................................... 110 Figura 30. Configuración de dominios clínicos .............................................................................. 112 Figura 31. Registro clínico - Interfaz original de OpenEHR Gen Framework ............................... 113 Figura 32. Registro clínico - Nueva interfaz ................................................................................... 113 Figura 33 Atributos del customSecureServiceClientCda ................................................................ 114 Figura 34 Atributos del customSecureServiceClientImp ................................................................ 115 Figura 35. Componentes de SOS-IMP ............................................................................................ 116 Figura 36. Capas del IMP ................................................................................................................ 117 Figura 37. Esquema clave pública y privada .................................................................................. 118 Figura 38. Inicio de sesión – Administración IMP ......................................................................... 119 Figura 39. Datos de participación – Administración SOS-IMP ...................................................... 120 Figura 43. Secciones historia médica integral ................................................................................. 130 Figura 44. Estructura de la historia materno infantil ....................................................................... 131 Figura 45 Puntuación total obtenida ................................................................................................ 132 Figura 46 Arquitectura de la solución ............................................................................................. 134 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 9 ÍNDICE DE TABLAS Tabla 1. Tipo de historia médica por centro asistencial .................................................................... 48 Tabla 2. Formatos de información clínica recolectados .................................................................... 49 Tabla 3. Actividades identificadas por centro asistencial ................................................................. 50 Tabla 4. Reportes identificados ........................................................................................................ 54 Tabla 5. Actores identificados ........................................................................................................... 55 Tabla 6. Resultados de la evaluación de los criterios ........................................................................ 70 Tabla 7. Resultados de la evaluación de los criterios por el factor de Importancia. ......................... 71 Tabla 8. Iteración 1, Tarea 1 ............................................................................................................. 83 Tabla 9. Iteración 1, Tarea 2 ............................................................................................................. 83 Tabla 10. Iteración 1, Tarea 3 ........................................................................................................... 83 Tabla 11. Iteración 1, Tarea 4 ........................................................................................................... 83 Tabla 12. Iteración 1, Tarea 5 ........................................................................................................... 84 Tabla 13. Iteración 1, Tarea 6 ........................................................................................................... 84 Tabla 14. Iteración 1, Tarea 7 ........................................................................................................... 84 Tabla 15. Iteración 1, Tarea 8 ........................................................................................................... 84 Tabla 16. Iteración 1, Tarea 9 ........................................................................................................... 85 Tabla 17. Iteración 1, Tarea 10 ......................................................................................................... 85 Tabla 18. Iteración 1, Tarea 11 ......................................................................................................... 85 Tabla 19. Iteración 1, Resultado ........................................................................................................ 85 Tabla 20. Iteración 2, Tarea 12 ......................................................................................................... 86 Tabla 21. Iteración 2, Tarea 13 ......................................................................................................... 86 Tabla 22. Iteración 2, Tarea 14 ......................................................................................................... 86 Tabla 23. Iteración 2, Tarea 15 ......................................................................................................... 87 Tabla 24. Iteración 2, Tarea 16 ......................................................................................................... 87 Tabla 25. Iteración 2, Tarea 17 ......................................................................................................... 87 Tabla 26. Iteración 2, Resultados ...................................................................................................... 87 Tabla 27. Iteración 3, Tarea 18 ......................................................................................................... 88 Tabla 28. Iteración 3, Tarea 19 ......................................................................................................... 88 Tabla 29. Iteración 3, Tarea 20 ......................................................................................................... 88 Tabla 30. Iteración 3, Tarea 21 ......................................................................................................... 89 Tabla 31. Iteración 3, Resultados ...................................................................................................... 89 Tabla 32. Iteración 4, Tarea 22 ......................................................................................................... 89 Tabla 33. Iteración 4, Tarea 23 ......................................................................................................... 90 Tabla 34. Iteración 4, Tarea 24 ......................................................................................................... 90 Tabla 35. Iteración 4, Resultados ...................................................................................................... 90 Tabla 36. Iteración 5, Tarea 25 ......................................................................................................... 91 Tabla 37. Iteración 5, Tarea 26 ......................................................................................................... 91 Tabla 38. Iteración 5, Resultados ...................................................................................................... 91 Tabla 39. Iteración 6, Tarea 27 ......................................................................................................... 92 Tabla 40. Iteración 6, Resultados ...................................................................................................... 92 Tabla 41. Iteración 7, Tarea 28 ......................................................................................................... 92 Tabla 42. Iteración 7, Tarea 29 ......................................................................................................... 93 Tabla 43. Iteración 7, Tarea 30 ......................................................................................................... 93 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 10 Tabla 44. Iteración 7, Tarea 31 ......................................................................................................... 93 Tabla 45. Iteración 7, Tarea 32 ......................................................................................................... 94 Tabla 46. Iteración 7, Tarea 33 ......................................................................................................... 94 Tabla 47. Tipos de datos OpenEHR y asociación con elementos HTML ....................................... 100 Tabla 48. Tabla muestra el lista de roles, descripción y permisos .................................................. 104 Tabla 49. Versión Archetype Editor ............................................................................................... 108 Tabla 50. Version ADL Workbench ............................................................................................... 109 Tabla 51. Version Notepad ++ ........................................................................................................ 110 Tabla 52. Lista de plantillas y arquetipos ........................................................................................ 111 Tabla 53. Descripción Servidor A ................................................................................................... 121 Tabla 54. Descripción Servidor B ................................................................................................... 121 Tabla 55. Prueba de funcionamiento 1 ............................................................................................ 122 Tabla 56. Prueba de funcionamiento 2 ............................................................................................ 123 Tabla 57. Prueba de funcionamiento 3 ............................................................................................ 123 Tabla 58. Prueba de funcionamiento 4 ............................................................................................ 124 Tabla 59. Prueba de funcionamiento 5 ............................................................................................ 124 Tabla 60. Prueba de funcionamiento 6 ............................................................................................ 125 Tabla 61. Prueba de funcionamiento 7 ........................................................................................... 125 Tabla 62. Prueba de funcionamiento 8 ............................................................................................ 126 Tabla 63. Prueba de funcionamiento 9 ............................................................................................ 126 Tabla 64. Prueba de funcionamiento 10 .......................................................................................... 127 Tabla 65. Prueba de funcionamiento 11 .......................................................................................... 127 Tabla 66. Prueba de funcionamiento 12 .......................................................................................... 128 Tabla 67. Prueba de funcionamiento 1 3 ......................................................................................... 128 Tabla 68. Prueba de funcionamiento 14 .......................................................................................... 129 Tabla 69. Estándares aplicados ....................................................................................................... 132 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 11 INTRODUCCIÓN La historia médica es un conjunto de documentos fuente de información clínica, demográfica y de atención sanitaria, que están asociados a un sujeto de cuidado. Tiene sus inicios en la antigüedad, cuando los médicos tuvieron la necesidad de registrar todo aquello que conocían acerca de la situación del paciente que pudiese resultar útil durante el proceso de asistencia. Tradicionalmente se ha registrado la historia médica en hojas de papel respetando un formato particular, variando su estructura dependiendo del tipo de información que se quiera registrar, el método de registro y la especialidad médica asociada. Aún hoy, esa historia es en gran medida un conjunto de documentos manuscritos, pero también está integrada con información digitalizada e insumos de formato analógico. La historia médica de un paciente tiene comienzo en el momento que se registra el primer episodio clínico asociado a él, debe durar durante toda la vida del paciente y un poco más después de su muerte. Esto pocas veces se cumple, puesto que existen eventos clínicos que nunca se registran y registros clínicos que no pueden ser almacenados durante tanto tiempo. A esta problemática se suma el eventual extravío, deterioro, duplicidad e ilegibilidad de los documentos de historia. En este sentido la historia médica electrónica puede dar soluciones a la problemática asociada al tratamiento tradicional de la historia médica. La informatización de la historia médica no debe constituir un cambio radical en la manera de trabajar del personal sanitario. No obstante pudiese ser una buena circunstancia para revisar la forma en que se gestionan los distintos servicios en beneficio de una atención sanitaria adaptada a un nuevo paradigma. El resultado de la aplicación de las tecnologías de información y comunicación en la base de información fundamental del sistema sanitario es la historia médica electrónica. Pero la pura historia médica por mas informatizada que sea, sin la aplicación de estándares sobre ella merma en gran medida sus potencialidades de aplicación. Usar estándares permite que la información sea utilizada de eficazmente tanto por los hombres como por las máquinas, y son precisamente las máquinas las que deben hablar un mismo lenguaje que les permita trabajar en conjunto. Es por eso que en este trabajo se hace hincapié sobre la aplicación de estándares en la historia médica electrónica, para lograr llevar a cabo tareas que involucren la interoperabilidad entre sistemas. Los tipos de estándares que son abordados en el marco Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 12 conceptual de este documento son los estándares de diseño sobre sistemas de historias médicas, estándares de comunicación y estándares de terminologías. Este trabajo se enmarca dentro del programa SOS Telemedicina para Venezuela, proyecto que contempla el diseño, el desarrollo y la implementación de las soluciones tecnológicas que permitan acercar oportunamente servicios especializados de salud a zonas remotas del país. SOS Telemedicina necesita implantar en sus centros de atención primaria un sistema de historias médicas electrónicas. Inicialmente, fue necesario realizar un levantamiento de información que permitiese obtener y generar información relevante a la hora de modelar un sistema de historias médicas electrónicas para los centros asistenciales de SOS Telemedicina, ese levantamiento de información está plasmado en el tercer capítulo de éste documento. En esta etapa se realizaron actividades de investigación que involucraron visitas a ambulatorios, llamadas telefónicas a ambulatorios rurales, recolección y análisis de formatos de historias, reuniones con médicos especialistas, asistencia a una clase sobre historias médicas, lecturas de bibliografías recomendadas por los especialistas e indagaciones por internet. Complementando esto con la participación en reuniones y conferencias con expositores y personalidades nacionales e internacionales de la informática médica y telemedicina. Surge luego la interrogante sobre desarrollar un sistema desde cero, utilizar uno ya existente (sin realizarle modificaciones) o utilizar uno ya existente realizándole adaptaciones. Es importante destacar que actualmente existen en el mercado decenas de sistemas de historias médicas electrónicas, dónde cada sistema se jacta de ofrecer la mejor solución para el registro de historias. Pero realmente resultó complicado apreciar cuál de estos sistemas se adaptaba mejor al contexto específico de los ambulatorios del programa SOS Telemedicina. Fue necesario entonces realizar una evaluación que permitiese determinar la toma de decisiones sobre la interrogante planteada. La valoración realizada puede ser vista con detalle en el capítulo cuarto de este documento. Se evaluaron tres herramientas que se consideraron pertinentes por su popularidad y carácter de tecnologías abiertas. Se establecieron criterios de evaluación los cuales se agruparon según su grado de importancia para el programa SOS Telemedicina. Resultó electa una herramienta de software llamada OpenEHR Gen-Framework, con la condición principal de adaptarla según los requerimientos del programa SOS Telemedicina, a manera de construir un sistema de historias médicas a la medida de las necesidades. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 13 Más que un sistema de historia médicas electrónicas la herramienta seleccionada es un «marco de trabajo» (framework) para desarrollar sistemas de historias médicas electrónicas. De manera que ésta característica agilizó el desarrollo del sistema de historias médicas electrónicas elaborado en este trabajo especial de grado. El sistema de historias médicas desarrollado en este trabajo hace uso de estándares en su diseño, mediante la implementación del modelo de referencia de OpenEHR, aplica estándares de comunicación a través del uso de CDA R2 de HL7, que es usado en la compartición de documentos clínicos y en el almacenamiento documental de la información clínica. Además, existe la posibilidad de ampliar el componente de interoperabilidad utilizando el estándar de comunicación ISO/CEN 13606 el cual es totalmente compatible con el estándar OpenEHR. En el marco aplicativo, capítulo quinto de este documento, se expone el contexto del proyecto de historias médicas electrónicas y el detalle de la solución de software presentada. Así mismo, se hace descripción de la plataforma de desarrollo «Groovy & Grails», la cual es la plataforma de la herramienta OpenEHR Gen-Framework y por ende también la plataforma del sistema de historias médicas electrónicas. La metodología utilizada en la construcción de la solución de software fue la conocida como «programación extrema» o «XP» (por siglas en inglés). Se seleccionó ésta metodología ágil pues pone el énfasis en la adaptabilidad del desarrollo más que sobre la previsibilidad. La metodología XP considera que los cambios de los requisitos sobre la marcha son un aspecto natural e inevitable, condición que la hace propicio al entorno «clínico-asistencial» en el cual está incrustada la solución. La solución software presentada consta de dos aplicaciones bien diferenciadas, por una parte está el sistema de historias médicas electrónicas, el cual se le ha dado el nombre de SOS-HME. Por otra parte está el índice maestro de pacientes, denominado con el nombre de SOS-IMP, es el elemento fundamental para lograr la interoperabilidad entre sistemas distintos sistemas de historias médicas electrónicas. La conjunción de ambas aplicaciones es la completitud del desarrollo de software realizado durante éste trabajo especial de grado. Por último se presentan las pruebas realizadas y resultados obtenidos sobre ambas aplicaciones de forma unitaria, así como las pruebas de integración para evaluar el funcionamiento conjunto. Los resultados de este trabajo especial de grado se muestran en un apartado final presentado previo a las conclusiones y recomendaciones. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 14 En los apéndices de esté documento podrán ser encontrados materiales relacionados con la documentación técnica de la aplicaciones elaboradas, manual de usuario final y otros manuales técnicos relacionados con el mantenimiento de las aplicaciones. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 15 CAPÍTULO I – PROBLEMA DE INVESTIGACIÓN 1.1 Introducción En este capítulo se plantea el problema actual en relación con las limitaciones de la historia médica tradicional y la aplicación de sistemas de historias médicas electrónicas sin aplicación de estándares. Seguidamente se expone la solución propuesta, se señala el objetivo general de éste trabajo y los objetivos específicos. Se detallan los requerimientos funcionales y no funcionales del sistema de historias médicas electrónicas a elaborar, se justifica la realización de éste trabajo y se delimita su alcance. 1.1 Planteamiento del problema La historia médica es un conjunto de documentos relativos al proceso de asistencia sanitaria y estado de salud de una persona (1). La historia médica se registra tradicionalmente en hojas de papel con un formato particular que va a depender entre otras cosas del tipo de historia, la metodología de registro y la especialidad médica. A la historia manuscrita se anexan también documentos en formatos digitales y analógicos. Los documentos generalmente se almacenan y organizan dentro de carpetas. A la vez esas carpetas se almacenan en archivos, mejor conocidos como «archivos de historias». El registro tradicional de la historia médica acarrea una serie de problemas e inconvenientes. Principalmente los registros son realizados con escritura manual, lo que trae como consecuencia problemas de legibilidad y deterioro. Se acumulan grandes cantidades de papel, utilizadas para documentar las historias de los pacientes. Evidentemente las grandes acumulaciones de papel ocasionan un problema de almacenamiento. En ocasiones para no generar grandes volúmenes de documentos, se les coloca a los expedientes de historia una fecha de vencimiento para deshacerse de ellos después de un determinado lapso de tiempo. Aunque esto es una solución al problema de almacenamiento, el período de vida de una historia médica debería ser igual o mayor al período de vida del paciente. Es recurrente la pérdida o extravío de los expedientes clínicos, debido a desorganización en el almacenamiento, dificultades de búsquedas en grandes archivos o simplemente debido a un muy común «traspapeleo». Se generan entonces multiplicidad de historias asociadas a un mismo paciente, cuando la regla debería ser mantener un «registro único» por paciente. Se pierde información valiosa en el hilo cronológico de la atención sanitaria a lo largo de la vida de un paciente, y sus factores comúnmente son: extravío, deterioro, Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 16 duplicidad, ilegibilidad y, deshecho. Se pierde también tiempo realizando búsquedas extensas para lograr localizar los documentos de historias médicas, dando como resultado en ocasiones búsquedas fallidas. Además los historiales médicos en papel no son garantes de confidencialidad. Cualquier persona que entrase en contacto con el documento clínico pudiese leerlo. Se le añade a esto la posibilidad de realizar tachaduras, enmendaduras e incluso anexos, siendo imposible determinar la autoría sobre los cambios. Es por esto que en la última década se ha ido incrementando en la región latinoamericana y en general alrededor de todo el mundo el uso de historias médicas informatizadas frente al registro tradicional en papel (2), pues los primeros dan respuesta, si bien no a todos, a muchos de los problemas e inconvenientes anteriormente presentados. Sin embargo la falta de aplicación de estándares tanto de diseño como de comunicación ha generado inconvenientes en el desempeño de los sistemas de historias médicas electrónicas. Un sistema de historias médicas electrónicas debe ser capaz de registrar cualquier hecho de «importancia clínica» relacionado con un sujeto de cuidado. Estos hechos pueden ser recabados en formas de texto, imágenes, audios, códigos, expresiones numéricas, etc. Las formas en la cuales se organiza un registro clínico (en papel) pueden ser múltiples. En este sentido un sistema de historias médicas electrónicas debe ser capaz de emular al papel. Un registro clínico es variable, puede cambiar en cualquier momento, ya sea por la anexión de nuevos elementos (anteriormente no necesarios o desconocidos), o por la eliminación o modificación de los existentes por considerarlos no pertinentes. En este sentido, la mayoría de los sistemas desarrollados bajo un contexto clínico particular, corren el riesgo de ser incapaces de cambiar y/o adaptarse, siendo inservibles fuera del contexto original en el cual fueron creados. Por eso es necesario aplicar estándares de diseño que permitan obtener como resultado un sistema de historias médicas electrónicas a prueba de futuro. El no usar estándares de comunicación en la creación de estos sistemas, ha dado como resultado especies de «islas de información clínica». Estos sistemas registran la información clínica y en su mayoría son incapaces de intercambiar esa información con otros sistemas. Intercambiar o difundir una información clínica tiene diversos fines, entre ellos: estadísticos, educativos, investigación, logísticos, etc. Pero lo más importante del intercambio de información radica en que beneficia directamente al paciente, pues ayuda a que su expediente de historia médica sea «único», es decir sin duplicados, gracias a la «integración» de distintos expedientes. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 17 Es fundamental la aplicación de estándares de diseño y comunicación, propios del ámbito de la informática médica, dentro de un sistema de historias médicas electrónicas. En este sentido, el programa SOS Telemedicina para Venezuela tiene como objetivo, entre otros, establecer una red de telemedicina a nivel nacional. Es de suma importancia que los datos de los pacientes almacenados en las instituciones que la conforman posean un mismo formato, o al menos puedan ser transformados a un formato estándar. De esta forma, al ingresar un paciente a un centro asistencial (bien sea por una emergencia o por una consulta) su registro de historia médica pueda ser formado a partir de los registros de datos de esa institución junto con los registros de datos de otras instituciones médicas que posean información sobre este paciente. SOS Telemedicina para Venezuela es un «proyecto que contempla el diseño, desarrollo e implementación de las soluciones tecnológicas que permitan acercar oportunamente servicios especializados de salud de calidad y sin salir de su región a la población, en particular en zonas remotas del país» (3). Es gestionado por el Centro de Análisis de Imágenes Biomédicas Computarizadas (CAIBCO) perteneciente a la Instituto de Medicina Tropical, Facultad de Medicina, Universidad Central de Venezuela (4). Actualmente el programa SOS Telemedicina no cuenta con un sistema de historias médicas electrónicas, que haga uso de estándares o normas que permitan la transformación de los datos a un formato que facilite el intercambio de información entre diferentes centros asistenciales. Más aún, el programa SOS Telemedicina no cuenta con un sistema de historias médicas electrónicas propiamente dicho. Existe entonces la necesidad de la implantación de un sistema de este tipo en los diferentes centros asistenciales pertenecientes al programa SOS Telemedicina. Es de gran importancia que cada uno de los centros esté en capacidad de intercambiar información con el resto de los centros asistenciales, que pertenezcan o que sean externos al programa. Todo esto con el fin de lograr una historia médica única e integrada dentro del programa SOS Telemedicina con capacidad de expansión y unificación con otros sistemas de historias médicas electrónicas. 1.2 Solución propuesta Se propone implantar, en los centros asistenciales pertenecientes al programa SOS Telemedicina, un sistema de historias médicas electrónicas, que haga uso de estándares de diseño y comunicación, propios de la informática médica, dando como resultado un sistema de historias médicas electrónicas que sea capaz de compartir información clínica con otros sistemas de historias. Para poder implantar un sistema de historias médicas electrónicas es necesario realizar un levantamiento de información que permita identificar elementos clave en el contexto y dominio de las historias médicas. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 18 Existen diversas alternativas en cuanto a la posible implantación de un sistema de historias médicas electrónicas. De hecho existen decenas de sistemas de software para registrar historias médicas electrónicas, propietarios y no propietarios disponibles en internet. Es por esto que al analizar problemática descrita en el punto anterior surgen tres alternativas principales:  Primera: evaluar los sistemas existentes y adoptar uno de ellos para ser implantado en los centros asistenciales del programa.  Segunda: ésta se deriva de la primera, a diferencia que en vez de adoptar íntegramente uno de los sistemas existentes e implantarlo, se realizarían sobre éste modificaciones a manera de adaptarlo a las necesidades de los centros asistenciales pertenecientes al programa.  Tercera: en contraposición a las dos anteriores, ésta plantea desarrollar un sistema desde cero. Implica conocer a fondo el modelo de negocio del ámbito de la asistencia clínica, el cual es extenso y variante dependiendo de cada centro asistencial. El sistema se debe diseñar desde las bases previendo cumplir con los requerimientos recabados y previendo las obligadas expansiones a futuro. Para optar por alguna de estas alternativas es necesario previamente conocer los estándares de comunicación y diseño que pueden aplicarse en un sistema de historias médicas electrónicas. Así mismo, se debe realizar una evaluación sobre los sistemas de historias médicas electrónicas de carácter «open source» disponibles a través de internet. Esta evaluación es un prerrequisito para el eventual desarrollo y/o implantación de un sistema de historia médicas. El objetivo de la evaluación es determinar en primer lugar si es mejor desarrollar un sistema desde cero, adoptar uno íntegramente o adoptar uno y realizarle modificaciones. La evaluación se realiza sobre productos de tecnología de carácter heterogéneo, es por esto que se tienen en cuenta criterios que permiten ponderar de manera objetiva las características, el funcionamiento y la pertinencia para este proyecto. Se destaca que esta evaluación es parte de una demanda explícita realizada por parte del equipo directivo del programa SOS Telemedicina. Posterior a la evaluación se realiza el desarrollo y/o implantación del sistema de historias médicas electrónicas, aplicando estándares de diseño y comunicación. Esto responde a la necesidad de tener dentro del programa SOS Telemedicina un sistema de historias médicas electrónicas capaz de registrar la información clínica asociada a un sujeto de cuidado, obtener información estadística a partir de esos registros e intercambiar información clínica con distintos centros asistenciales. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 19 1.3. Objetivos 1.3.1. Objetivo General «Analizar e implantar un sistema de historias médicas electrónicas aplicando estándares internacionales para SOS Telemedicina». 1.3.2. Objetivos Específicos Para alcanzar el objetivo general planteado se establecen los siguientes objetivos específicos:  Analizar en detalle el proceso asistencial llevado a cabo en centros de salud.  Recolectar información que permita modelar el dominio clínico en el ámbito de una historia médica integral y materno infantil.  Evaluar herramientas software existentes de historias médicas electrónicas.  Hacer uso de estándares en el sistema de historias médicas electrónicas.  Desarrollar un índice maestro de pacientes, basado en servicios web que permita compartir información clínica entre diferentes sistemas de historia médica electrónica. 1.4 Requerimientos funcionales Se requiere desarrollar un sistema de HME, que cumpla con los siguientes requerimientos funcionales:  Requerimiento 1 : autenticación y autorización: El sistema de historias médicas electrónicas deberá poseer tres tipos de usuarios, el usuario «médico» (exclusivamente médicos), el usuario «personal sanitario» (para enfermeras, paramédicos, etc.), y el usuario «administrador» (administrador del sistema). Todos los usuarios deberán autenticarse para poder ingresar al sistema. Solo el personal médico y sanitario tendrá acceso al registro clínico. Únicamente el personal médico tendrá la potestad de autenticar los registros clínicos.  Requerimiento 2: administración del sistema: El sistema debe poder ser administrado permitiendo la creación, edición y eliminación de usuarios. Así mismo se deberá permitir la asignación de roles a los usuarios del sistema. La administración del sistema debe ser realizada por el usuario administrador. Las cuentas (nombre de usuario y contraseña) de los usuarios deben ser válidas solo por un período de tiempo, pudiendo ser deshabilitadas y/o reactivadas por el administrador del sistema en cualquier momento  Requerimiento 3: registro clínico: Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 20 Se debe registrar información clínica asociada a un paciente. El registro clínico es de suma importancia, ha de ser abierto para que el médico pueda de forma narrativa describir cualquier fenómeno en el registro, pero también ha de ser estructurado para que la información clínica pueda ser computada (realizar consultas, mostrar información estadística, etc.). La estructura del registro clínico deberá adaptarse a ambos escenarios, por eso debe lograr un equilibrio entre el enfoque abierto y estructurado.  Requerimiento 4: registro demográfico: Se debe registrar la información demográfica de un paciente según se requiera o estipule en los formatos de historia médica manuscritos. Se anexa a esto la posibilidad de poder colocar en el registro demográfico una foto tipo carnet del paciente. El sistema deberá ser capaz de manejar múltiples números de identificación por paciente, como por ejemplo: número de cédula de identidad, número pasaporte, número de licencia de conducir, etc. Se podrán realizar búsquedas sobre los pacientes existentes utilizando como valores de búsquedas los datos que definen la identidad de un paciente (identificadores, nombres, sexo, fecha de nacimiento). Los datos de los pacientes podrán ser modificados, incluyendo los números de identificación.  Requerimiento 5: resumen de registro clínico Un registro clínico debe poder ser visto en resumen por pantalla. El resumen de un registro clínico también debe poder ser impreso.  Requerimiento 6: validación del registro clínico Cada registro clínico realizado sobre un paciente podrá ser transcrito por un médico, enfermera o por algún otro personal sanitario. Con la salvedad de que solamente un médico podrá tener la facultad de dar validez al registro realizado.  Requerimiento 7: no dependencia de internet El sistema de historias médicas electrónicas no debe depender de conexión a internet para su funcionamiento, debido a que ha de ser instalado en zonas rurales de baja conectividad. Por esto se requiere que el sistema funcione bajo un esquema de localidad. Sin embargo es recomendable que el sistema a implantar sea una aplicación web que pueda ser instalada localmente en casos de baja conectividad, y que pueda también funcionar como un sistema centralizado en lugares de mediana y alta conectividad. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 21  Requerimiento 8: compartir información clínica Se requiere que el sistema sea capaz de intercambiar información clínica con otros sistemas. Es necesario que la interoperabilidad entre sistemas sea sintáctica y semántica, de manera que la información intercambiada pueda ser entendida y procesada de forma homogénea por sistemas de naturaleza heterogénea. 1.5 Requerimientos no funcionales El sistema a desarrollar debe cumplir con los siguientes requerimientos no funcionales:  El sistema de ser usable: su interfaz gráfica debe ser agradable a la vista, intuitiva e ir acorde con el la imagen del proyecto SOS Telemedicina.  Aplicar estándares relacionados con la historia médica electrónica: de forma tal que pueda unificar procesos, procedimientos, términos y/o formatos a través de estándares reconocidos.  El sistema debe ser escalable: de manera que pueda extender su margen de operaciones permitiendo la agregación de nuevas funcionalidades.  El sistema debe ser mantenible: es decir que pueda ser modificado para corregir fallas y mejorar su funcionamiento.  El sistema debe de ser robusto: pudiendo recuperarse de posibles errores y mantenerse en funcionamiento.  Utilizar tecnologías no propietarias: el sistema debe ser realizado bajo un entorno de desarrollo open source. 1.6 Justificación El uso de un sistema de historias médicas electrónicas descrito en esta solución se justifica por las siguientes razones de peso:  Resuelve el problema recurrente en los sistemas tradicionales de historias médicas, sobre el almacenamiento de grandes volúmenes de documentos y riesgos por pérdida y deterioro.  Puede garantizar que cada persona tenga solo un expediente clínico asociado.  Asegura la legibilidad del registro clínico.  Garantiza la confidencialidad del registro clínico mediante el establecimiento de controles de acceso.  Certifica la autoría sobre cada registro clínico.  Facilita los procesos de auditoría.  Permite la compartición de información clínica entre distintos sistemas.  La información clínica puede ser consultada en diferentes lugares de forma simultánea.  Se pueden generar reportes estadísticos fiables e inmediatos. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 22  Hacer uso de estándares es una buena práctica de diseño y desarrollo de software. 1.7 Alcances En este proyecto se desarrollará un sistema de historias médicas electrónicas que esté en capacidad de intercambiar información con otros sistemas de historias médicas. El diseño de la solución debe incorporar estándares propios del ámbito de la informática médica. El intercambio de información estipulado no corresponderá a contenidos multimedia, se limitará a la compartición de datos de tipo texto. El proyecto no contempla la instalación del sistema en centros asistenciales por parte de los estudiantes. Sin embargo estos pueden asistir los procesos de implantación. Los dominios seleccionados a modelar son «historia integral» y «materno infantil», sin embargo se contempla la incorporación de nuevos dominios en futuros desarrollos. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 23 CAPÍTULO II – MARCO CONCEPTUAL 2.1 Introducción En este capítulo se abordará la conceptualización y definición de la historia médica, se describen sus orígenes, sus principales funciones y los elementos que la caracterizan. Se detalla la perspectiva de propiedad y uso, que en la práctica no siempre responde a los principios teóricos basados en la ética. De la misma manera se presenta la historia médica electrónica, no como contraposición a la historia médica tradicional, sino como complemento que trae consigo una serie de valores agregados. De la historia médica electrónica se detalla lo necesario de tener un sistema de identificación de pacientes que sea efectivo, y que en la mayoría de los casos está más allá del alcance del propio sistema de historia médica. Así mismo se mencionan los principios básicos de seguridad que deben estar garantizados en toda implementación de sistemas de este tipo. Se hace referencia al tema de interoperabilidad marcando diferencias entre distintas formas de lograr la colaboración entre sistemas. Por último se expone la importancia de la adopción de estándares en sistemas de historias médicas, los beneficios que ofrecen y los principales obstáculos de implementación. Se hace descripción principalmente de dos tipos de estándares: los de diseño y los de comunicación, también se realiza una breve referencia a los estándares de terminologías. 2.2 Historia Médica La historia médica (HM) surge de la necesidad de registrar, según el criterio del médico, los datos más importantes en relación a un sujeto de cuidado (paciente). A través del tiempo la ciencia de la medicina se ha diversificado en diferentes especialidades, y con esto la historia médica ha pasado a ser una responsabilidad compartida por un grupo de profesionales, lo que ha obligado a estructurar su contenido coordinadamente. 2.2.1 Definiciones conceptuales Se considera información clínica o de salud «todos aquellos datos que permiten adquirir o ampliar conocimientos sobre el estado de salud de una persona, o la forma de preservarla, cuidarla, mejorarla o recuperarla», según José A. Falagán Mota y Javier Nogueira Fariña (5) . «Es el documento que refleja la práctica médica (conducta del médico hacia el paciente durante la atención); y permite velar por el cumplimiento de ciertos deberes del personal sanitario, de allí, su importancia en el ámbito jurídico y administrativo, ámbitos estrechamente vinculados con toda actividad humana y, por tanto, moral», según Zengarini (6). Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 24 Por su parte, Javier Carnicero (7) asume que la historia médica es «el conjunto de documentos que contienen los datos, valoraciones e informaciones de cualquier índole sobre la situación y la evolución clínica de un paciente a lo largo del proceso asistencial». 2.2.2 Origen Los inicios de la historia médica se remontan a la antigua Grecia alrededor del 460 A.C., cuando Hipócrates de Cos denominado padre de la medicina, establece la historia médica como: «escribir la relación de un padecimiento dada por el enfermo, ya sea de manera espontánea o mediante el interrogatorio dirigido intencionalmente», con la finalidad de analizar la información para diagnósticos más acertados. Hipócrates también hacía referencia a otro tipo de información como lo es la información moral: «conocer los sufrimientos del paciente, sus hábitos, su hogar, su familia, sus medios de vida, sus creencias, sus costumbres; en una palabra, hacer del enfermo un amigo» (8). 2.2.3 Función El propósito principal de la HM es proveer un registro documentado de la atención médica, que apoye la toma de decisiones médicas presentes y futuras. Secundariamente se derivan de la HM las funciones de investigación, educación, análisis de estadísticas, gestión de recursos, facturación, contabilidad, etc. (9). 2.2.4 Características Estas características definen el deber ser una historia médica, se listan a continuación:  Disponibilidad Por su carácter asistencial y médico legal es necesario poder acceder a una historia médica de manera inmediata bien sea para beneficio asistencial del paciente o por algún otro motivo justificado. Por ejemplo, si un paciente asiste a una consulta, su médico tratante necesitará tener acceso a su historia médica para poder dar un diagnóstico más acertado.  Confidencialidad Se estipula la no divulgación por parte del personal sanitario la información clínica del paciente y por consiguiente su historia médica.  Seguridad La seguridad hace señalamiento a los mecanismos que deben existir para garantizar la confidencialidad, la integridad y la autoría sobre la historia médica, más detalladamente:  Mantener íntegra la información, es decir, que no se altere durante s u almacenamiento o transporte. Es el principio de integridad. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 25  Identificar claramente el autor de modificaciones o creaciones de una historia médica, y que este no pueda negar este hecho. Es el principio de autoría.  Que se pueda comprobar quién ha accedido a la información y en qué momento. Dar permiso de acceso solo a las autoridades pertinentes. Es el principio de confidencialidad.  Unicidad Una historia médica es única cuando existe un solo registro médico general asociado para un paciente. Así mismo, no se considera única cuando existen múltiples registros aislados, repetidos o con información redundante que estén asociados a un mismo paciente.  Acumulabilidad Una historia médica es acumulativa cuando toda la información médico sanitaria que se va generando con respecto a un paciente es adicionada a sus registros de historia médica a través del tiempo. Esto quiere decir que la información médica de un paciente debe ser acumulada en los centros asistenciales donde éste sea atendido, y debe perdurar durante el tiempo de vida del paciente.  Integridad La información registrada en la historia médica no debe ser alterada sin autorización, y de ser modificada por alguna razón debe mantenerse el registro anterior como medida de seguridad. En consecuencia la información contenida dentro de la historia médica debe reflejar sin alteración la práctica médica realizada sobre un paciente determinado (10).  Propiedad y uso Son varios los actores que interactúan con la historia médica, entre ellos: el personal administrativo, los médicos y el personal sanitario, pero la historia a fin de cuentas «pertenece al paciente». Es así como el paciente teóricamente es el propietario de la historia médica. Por otro lado, en la práctica no siempre se cumple esto, muchas instituciones públicas o privadas, aplican políticas que restringen el acceso sobre este documento a sus verdaderos propietarios (11).  Limitaciones Las historias médicas registradas en papel tienen limitaciones, la tecnologías existentes brindad oportunidades de mejoras que podrían introducir mayores beneficios a la atención sanitaria. Algunas de estas limitaciones pueden verse reflejadas en los siguientes casos: Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 26  La desorganización y fragmentación de los distintos documentos impiden el acceso de manera lógica a la información requerida.  La ilegibilidad de documentos manuscritos impide el acceso a los datos en muchos casos.  No es posible garantizar la no modificación de los datos por personal con acceso a los mismos.  El acceso a los datos se realiza de manera única y excluyente, es decir no es posible acceder a una misma historia médica por dos o más personas simultáneamente.  La no garantía de confidencialidad debido a la ausencia de mecanismos de control de acceso a las historias médicas.  La pérdida de información debido a elementos externos tales como agua, fuego o elementos de la naturaleza.  El evidente problema de espacio requerido para su almacenamiento y el personal requerido para su gestión.  La dificultad para separar la información demográfica de la información clínica. Acorde con cada época histórica se tiende a la aplicación y uso de la tecnología existente en las diversas áreas del desarrollo humano. En la actualidad surge la posibilidad de emplear las tecnologías de información y comunicación (TIC) en el campo de las HM para dar paso a las historias médicas electrónicas (HME). 2.3 Historia Médica Electrónica La historia médica informatizada o electrónica es el resultado la aplicación de las TIC en la base de información fundamental del sistema sanitario. Una historia médica electrónica deja de ser solo el reflejo de la relación entre un paciente con su médico tratante, para pasar a formar parte de un sistema sanitario integrado. La informatización o automatización de la historia médica (el uso de la HME) no debe representar un cambio drástico en la forma de trabajar del personal sanitario en su día a día. Pero pudiese ser una buena oportunidad para que se revise la gestión de los servicios y la forma de actuar de los profesionales, para una mejora en la práctica clínica en beneficio del paciente. La HME no es un ente aislado, de hecho una HME puede integrar información de diversos sistemas hospitalarios como pueden ser la información de admisión, datos de Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 27 laboratorio, farmacia, diagnósticos, servicios médicos, etc. Inclusive un sistema de historias médicas electrónicas puede establecer mecanismos de comunicación para intercambiar información médica con otros centros asistenciales. Por lo tanto la HME no necesariamente se reduce a la información médica de un paciente atada a un único centro sanitario, sino que hace referencia a toda la información de una persona independientemente de dónde haya sido generada, pudiendo permitir el acceso a la HM en el momento y lugar que sea necesario (12 págs. 108-109). 2.3.1 Sistemas de identificación por paciente El proceso de automatizar cualquier flujo de información implica la realización de una abstracción identificando aquellas entidades básicas, y así intentar representar un esquema simplificado de dichas entidades y sus relaciones. En cualquier historia médica, una de las entidades fundamentales es el paciente, por ende resulta de vital importancia poder identificarlo correctamente. Para que la integración de una historia médica con todos los sistemas requeridos sea viable, es necesaria la identificación personal de forma unívoca para cada paciente. Esto último se logra a través de un «índice maestro de pacientes» (IMP), el cual es un sistema centralizado que puede indexar información de identificación de los pacientes junto con el resto de los datos demográficos. Es necesario entender que una identificación única para cada paciente es un esfuerzo que va más allá del sector de salud de un país; requiere de un esfuerzo de estado para su desarrollo y puesta en marcha. A continuación se muestra información en materia de identificación de salud en Venezuela y en otros países.  En Venezuela En Venezuela el acta de nacimiento asentada en el registro civil, identifica a los ciudadanos al nacer, registrando nombres, apellidos y haciendo referencia a sus progenitores o padres, fecha y lugar de nacimiento junto con su sexo. Según el SAIME (Servicio Administrativo de Identificación Migración y Extranjería) a partir de los 9 años en adelante los venezolanos pueden tramitar su cedula de identidad (C.I.), en esta se adjuntan los datos de identificación: nombres y apellidos, fecha de nacimiento, y un número único de identificación (13). Realizar la identificación de pacientes por nombres y apellidos, fecha y lugar de nacimiento puede generar errores y aumentar la probabilidad de coincidencias múltiples (la existencia de más de una persona con dichos datos repetidos en el sistema de identificación). Se puede pensar que una solución factible es la utilización del número de cédula de identidad, no obstante existe una parte de la población venezolana sin éste documento, tal como son los niños menores de nueve años y la población extranjera que Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 28 aún no logra tramitarlo. Por esto la cédula de identidad deja de ser una solución al problema de identificación inequívoca.  En otros países Para el año 2003 se tiene conocimiento de la existencia y uso de identificación personal de carácter nacional, usos administrativos, fiscales y sanitarios, en países escandinavos como Suecia, Noruega, Finlandia y Dinamarca, junto a Luxemburgo. A su vez se utilizan códigos nacionales o regionales, restringidos para el sector sanitario en Irlanda, Portugal, Italia, Canadá, Alemania y España. Por su parte, los Países Bajos tienen un número nacional de identidad, pero no sanitario. Bélgica tiene un identificador nacional para utilización en salud, pero distinto del que se emplea para otros usos. Francia utiliza como identificador en el sector sanitario el número de seguridad social, que es el del documento nacional de identidad al que se añaden una clave de dos dígitos (12 pág. 110). A todas estas, el adoptar un número único de identificación para todos los pacientes o ciudadanos, es un factor de suprema importancia para poder intercambiar información entre distintos sistemas de historias médicas electrónicas, pero no imprescindible. 2.3.2 Mecanismos de seguridad Tal como sugiere Arellano Rodríguez «los sistemas de información pueden estar a disposición de diversos miembros del equipo de salud, acotando que requieren: a) limitaciones de acceso mediante claves para resguardar la confidencialidad de los datos; b) flexibilidad, para incorporar directrices asistenciales; c) despliegue de información clínica directa de cada paciente para una adecuada atención médica; y d) cumplimiento de las políticas epidemiológicas y de gestión a nivel poblacional» (14). En lo que concierne directamente con sistemas de HME se debe garantizar la autoría de la historia, la integridad y la confidencialidad. Actualmente existen múltiples mecanismos que permiten garantizar estos principios de seguridad en los sistemas de HME. 2.3.3 Interoperabilidad La interoperabilidad es una propiedad que refiere sobre la capacidad de diversos sistemas y organizaciones para trabajar conjuntamente. El Instituto de Ingenieros Eléctricos y Electrónicos, Institute of Electrical and Electronics Engineers (IEEE), define interoperabilidad como «la capacidad de dos o más sistemas o componentes para intercambiar información y hacer uso de la información que está siendo intercambiada» (15). Se puede hablar de dos tipos de interoperabilidad; interoperabilidad sintáctica e interoperabilidad semántica. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 29 Se habla de interoperabilidad sintáctica, si dos o más sistemas son capaces de intercambiar datos. Es necesario utilizar formatos de datos específicos y establecer protocolos de comunicación. En general, los estándares como: Extensible Markup Language (XML) o Structured Query Language (SQL), satisfacen una interoperabilidad sintáctica. La interoperabilidad semántica, va más allá de la capacidad que puedan tener dos o más sistemas para intercambiar datos, la interoperabilidad semántica es la capacidad de interpretar automáticamente la información intercambiada de manera significativa y precisa con el fin de producir resultados útiles según lo definido por los usuarios finales de ambos sistemas. Para lograr la interoperabilidad semántica, ambas partes deben ceder ante un modelo de referencia común para el intercambio de información; el contenido de la información de las solicitudes de intercambio se define sin ambigüedades. En el sector sanitario intervienen un sin número de sistemas informáticos de naturaleza heterogénea, cada uno de estos sistemas manipula datos que están relacionados con un sujeto de cuidado. Sucede frecuentemente que estos sistemas son incapaces de comunicarse unos con otros para lograr un mejoramiento en la atención sobre un paciente. Pensar en servicios sanitarios integrados capaces de intercambiar información para mejora de los cuidados médicos sobre el paciente, requiere indiscutiblemente establecer protocolos para el intercambio de información, hacer uso de formatos y codificaciones que permitan definir una sintaxis y una semántica adecuada a los dominios del conocimiento médico. Un problema complejo muchas veces requiere una solución compleja, sería irreal concebir un sistema de historias médicas electrónicas como simple y trivial. Por el contrario un sistema de historias médicas electrónicas que pretenda ser eficaz, es decir; lograr el objetivo de toda historia médica, tiende a ser por lo general una solución software compleja. La utopía que persigue la historia médica electrónica es la interoperabilidad. Consiste en compartir información acerca de los pacientes; primero entre los distintos sistemas de un centro asistencial, llámese hospital, ambulatorio, clínica, etc.; segundo, entre uno o más centros asistenciales; tercero, formar una red a nivel zonal, municipal, estadal o regional; cuarto, levantar un sistema nacional unificado de historias médicas; quinto, poder edificar sistemas de historias médicas de rango internacional. Hay ejemplos tangibles de la vida cotidiana que permiten vislumbrar sistemas de historias médicas con capacidad de interoperar. Un ejemplo concreto es la banca mundial, pues ha resuelto ya en gran medida el problema del movimiento de divisas entre distintas entidades bancarias, utilizando para esto mecanismos electrónicos como las tarjetas de Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 30 crédito y débito, la banca electrónica que permite hacer transferencias, consultas y pagos de deudas, desde cualquier computador. Todo esto se ha logrado mediante el establecimiento y uso de estándares para el intercambio de la información, con la salvedad que el dominio bancario no se compara con la complejidad del dominio clínico. En la actualidad existen innumerables sistemas de historias médicas alrededor de todo el mundo y Venezuela no es la excepción a la norma. Por lo general, estos sistemas están concebidos como unidades individuales capaces de digitalizar datos y de esta manera llevar un registro médico electrónico, pero prescinden de una visión global sobre el cuidado del paciente y por ende plantean una solución muy limitada. Funcionan como islas separadas e incapaces muchas veces de importar o exportar los datos que contienen. De poco sirve tener información digitalizada sobre un paciente y no poder compartirla de forma digital, en consecuencia se debe hacer uso de medios analógicos, como la impresión. En otras palabras, se tiene información digitalizada pero no se puede hacer uso automatizado de ella. La interoperabilidad tiene entonces un rol protagónico al momento de pensar en un sistema de historias médicas electrónicas. No solo es registrar información sobre la atención realizada a un paciente, sino qué se debe estar en capacidad de intercambiar información con distintas aplicaciones. Se trata entonces de producir y consumir información. La importancia del uso de estándares para lograr la interoperabilidad entre sistemas hospitalarios radica en:  Compartir información sobre pacientes, promoviendo así el cuidado compartido entre profesionales de la salud de diversas áreas o dominios clínicos.  Lograr comunicar software de distintos proveedores.  Formar redes entre los diferentes sistemas hospitalarios y establecer flujos de información coherentes.  Mejorar la atención y cuidado sobre los pacientes. 2.3.4 Estándares De acuerdo a la Organización de Estandarización Internacional (ISO, 1992) un estándar (o norma) es «un documento establecido por consenso y aprobado por un organismo reconocido que establece, para usos comunes y repetidos, reglas, criterios o características para las actividades o sus resultados, que procura la obtención de un nivel óptimo de ordenamiento en un contexto determinado» (16). Existen dos tipos de estándares o normas: las oficiales y las de uso de facto. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 31 Una norma oficial es un documento público, elaborado por consenso, de acuerdo con un procedimiento establecido con el respaldo de un organismo reconocido. También hay que tener en cuenta las normas «de facto» normalmente impulsadas por fabricantes o grupos de interés. Se convierten en una norma debido a su uso continuo y extendido, como por ejemplo; el protocolo TCP/IP. Algunos de los organismos de estandarización a nivel mundial se observan en la Figura 1, entre los cuales destacan: el Comité Europeo de Normalización (CEN), la Organización Internacional de Estándares (ISO), el Instituto Nacional Americano de estándares (ANSI) . Figura 1. Organismos de estandarización en salud. Fuente: Moneagudo Peña, José Luis y Hernández Salvador, Carlos. Estándares para la historia clínica electrónica. [En línea] 2003. [Citado el: 7 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO7.pdf.  Beneficios de uso Cuando estandarizamos la estructura y el contenido de la información, puede ser utilizada con mayor eficacia por los hombres y las máquinas. Un estándar es simplemente un sistema común de los términos y de las definiciones que se presentan en un formato estructurado. Utilizar estándares proporciona un gran sentido de amplitud, de compartir un mismo esquema, de hablar un mismo idioma, que sin duda alguna redunda en garantías de compatibilidad.  Obstáculos de implementación Implementar estándares no siempre es fácil, puede resultar agobiante e incrementar el trabajo a realizar, añadiéndole mayores grados de dificultad. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 32 Algunas de las definiciones de estándares son extremadamente largas y complejas, en algunos casos resultan inentendibles sin la asesoría de un experto. Resulta más simple implementar una propia versión del estándar o no respetar las definiciones a cabalidad, lo que trae como consecuencia incompatibilidades y malos funcionamientos. Además un estándar no termina de serlo hasta que existan un gran número de implantaciones y por demás tenga un uso generalizado, pero no se puede forzar a ninguna entidad a utilizar un estándar. Sobre todo en proyectos innovadores existe el riesgo de implementar algo que nadie más hará. 2.3.5 Estándares sobre la HME En este trabajo se hará referencia a tres tipos de estándares, los estándares de diseño, de comunicación y de terminologías (17).  Estándares de diseño Estos definen como debe ser diseñado un sistema de historias médicas electrónicas, haciendo hincapié sobre los requerimientos básicos que debe cumplir todo sistema. Por lo general cada sistema responde a las necesidades de un contexto particular y estos estándares responden a un contexto global. Pueden surgir dificultades a la hora de intentar adaptar un modelo a una determinada situación. Es por eso que una de las características de estos estándares es la flexibilidad en la implementación, ya que no son una camisa de fuerza que obliga a los diseñadores ceñirse solo a sus especificaciones. Uno de los estándares a tener en cuenta al momento de comenzar a trabajar en un sistema de historias médicas es el «ISO 18308», el cual define un conjunto de requerimientos que debe cumplir toda arquitectura de un sistema que maneje, procese y comunique registros médicos electrónicos. Está también el estándar OpenEHR, este define una arquitectura para sistemas de HME, es ampliamente difundido y por ser de carácter abierto y de libre acceso ha sido tomado como objeto de estudio en este trabajo (18).  OPEN EHR La organización OpenEHR Es una fundación internacional sin fines de lucro. Sus objetivos son hacer realidad la creación del registro de salud, que sea interoperable entre distintos actores del sistema de salud y durable a lo largo de la vida del paciente, y de esta forma mejorar el nivel de atención de salud haciendo uso de las herramientas disponibles en la moderna sociedad de la información. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 33 Para cumplir sus objetivos la organización desarrolla especificaciones abiertas, herramientas de software y recursos de conocimiento libres. Además participa en la implementación de proyectos clínicos y en el desarrollo de normas internacionales. OpenEHR proporciona una especificación para la comunicación de extractos de HME de varios niveles de complejidad, también una especificación completa para la creación, almacenamiento, mantenimiento y consulta de la HME (19). Estándar OpenEHR Es un estándar abierto para crear HME normalizadas orientadas a la gestión del conocimiento. Para soportar proyectos de HME económicamente viables, mantenibles y adaptables. Fundamentalmente OpenEHR se basa en una arquitectura de modelo dual. Bajo este enfoque de modelo dual, tal como se muestra en la Figura 2. Figura 2. Modelo Dual Open EHR Fuente: Elaboración propia De estos dos niveles, solo el primero es el que se implementa en software de manera significativa. Como consecuencia los sistemas tienen la posibilidad de ser mucho más pequeños y más fáciles de mantener que los sistemas que incorporan el modelo del negocio, en este caso los conceptos clínicos dentro del software. De esta manera se plantea que los sistemas sean capaces de auto-adaptarse, ya que deben ser diseñados para consumir arquetipos y plantillas a medida que se desarrollen en el futuro. El modelo dual cambia la manera tradicional de implementar una solución de software. El enfoque tradicional para desarrollar software comienza con un levantamiento de requerimientos o solicitud de requisitos a través de debates, conversaciones, reuniones, etc. Normalmente de la recolección de esta información se construyen los conocidos «casos de uso», se procede luego al diseño, implementación, pruebas y puesta en producción, sin olvidar posteriormente el mantenimiento. Bajo el paradigma de modelo dual, la parte fundamental del software se basa en implementar el modelo de referencia y los arquetipos Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 34 son los encargados en manejar los conceptos clínicos, es decir, la lógica del negocio no está inmersa en el código fuente de la aplicación. El resultado clave de este enfoque es que los arquetipos constituyen una tecnología totalmente independiente, estos en el tiempo pueden cambiar y evolucionar, mientras que las estructuras de datos se mantienen. La Figura 3, ilustra la estructura formal de OpenEHR. Son tres los paquetes principales: MR, MA, MS. Todos los paquetes de definición están contenidos dentro de estos tres, pueden ser vistos también como espacios de nombres. Los tres paquetes se definen a su vez dentro del espacio de nombres «org.openEhr». Figura 3. Espacio de nombres org.OpenEHR Fuente: Adaptado de The OpenEHR Foundation. Architecture Overview. [En línea] 13 de Noviembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/overview.pdf. Alcance Proporciona una especificación para la comunicación de los extractos de HME de varios niveles de complejidad, también una especificación completa para la creación, almacenamiento, mantenimiento y consulta de la HME. Descripción técnica  Modelo de Referencia (MR): Está compuesto por diversos paquetes, cada uno de estos define un contexto local para la definición de clases. Todos estos paquetes juntos proveen identificación, acceso a los recursos de conocimiento, tipos de datos y estructuras, y apoyo al arquetipado. La Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 35 estructura de estos paquetes pueden ser expresados en distintos esquemas como XML o lenguajes de programación orientado a objetos como Java, C# o cualquier otro.  Modelo de Arquetipos (MA): Contiene los modelos necesarios para describir la semántica de los arquetipos y plantillas, de acuerdo a su uso dentro de un sistema basado en OpenEHR. OpenEHR hace uso del Lenguaje de Definición de Arquetipos (ADL) explicado con detalle más adelante.  Modelo de Servicios (MS): El modelo de servicios es una extensión de OpenEHR que incluye servicios en torno a la HME. Posiblemente este conjunto de servicios descritos actualmente en el modelo se expanda con el pasar del tiempo, por lo tanto desde OpenEHR no se recomienda tomarlo como definitivo.  Lenguaje de definición de arquetipos (ADL): El Lenguaje de Definición de Arquetipos, Archetype Definition Language (ADL), es un lenguaje formal para expresar arquetipos. ADL no se basa en ningún modelo de referencia concreto, puede ser utilizado en cualquier dominio utilizando un modelo de referencia base, es decir que no está sujeto al MR de OpenEHR. ADL está compuesto por dos sintaxis; cADL, utilizado para restricciones y dADL, utilizado para definición de datos. Es decir, dADL se emplea para expresar instancias de datos, mientras el cADL se usa para determinar restricciones que deben cumplir esas instancias (20). La estructura de un arquetipo definido en lenguaje ADL se ilustra en la Figura 4. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 36 Figura 4. Estructura de arquetipo ADL Fuente: Adaptado de The OpenEHR Foundation. Archetype Definition Language. [En línea] 12 de Diciembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/am/adl.pdf. Un arquetipo está definido por tres secciones principales: cabecera, definición y ontología. La cabecera básicamente contiene metadatos, como identificadores o datos sobre la autoría de la información. En la sección de definición es dónde el concepto clínico que representa el arquetipo es descrito en términos de entidades del modelo de referencia. Esta descripción se construye mediante la limitación de las entidades de diferentes maneras: Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 37  Restricciones en el rango de atributos de tipos primitivos.  Restricciones sobre la existencia de atributos, por ejemplo: si un valor es mandatorio para el atributo en tiempo de ejecución.  Restricciones sobre la cardinalidad de atributos, por ejemplo: si el atributo puede tener múltiples valores o no.  Restricciones sobre las ocurrencias de objetos, dependiendo de las restricciones que existan sobre la clase del objeto.  Restricciones sobre objetos complejos. Estos pueden ser escritos por restricciones sobre sus atributos o reutilizando arquetipos previamente definidos o incluso fragmentos de arquetipos. Por último, todas las entidades lingüísticas se definen en la parte de la ontología del arquetipo. Hay cuatro partes principales en una ontología de un arquetipo: definiciones de términos, definiciones de restricciones, los enlaces de largo plazo y los enlaces de restricción. Los dos primeros definen el significado de diversos términos y restricciones textuales que se producen en el arquetipo, estas se indexan con identificadores únicos, que se usan en el cuerpo del arquetipo. Las dos últimas secciones ontológicas describen las asignaciones de los términos utilizados internamente para ser usados en terminologías externas.  Ejemplo de Arquetipo: A manera de ilustración se muestra en la Figura 5 un ejemplo simple de arquetipo, en código ADL, describiendo genéricamente el concepto de guitarra como instrumento musical. Donde se definen dos partes del instrumento que son el mástil «neck» y el cuerpo «body». Posteriormente se describen cada uno de los elementos en la sección de ontología. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 38 Figura 5. Ejemplo de arquetipo guitarra Fuente: The OpenEHR Foundation. Archetype Definition Language. [En línea] 12 de Diciembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/am/adl.pdf. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 39 A los efectos de este trabajo no se incluirán ejemplos de arquetipos de dominio clínico reales, ya que son bastante voluminosos, pero se anima al lector a revisar la base de arquetipos que está disponible en línea en un sistema de nombre «Clinical Knowledge Manager», cuya finalidad es el desarrollo colaborativo de gestión y publicación de una amplia gama de recursos de conocimiento clínico (21).  Estándares de comunicación Los estándares de comunicación son propios de la interoperabilidad de sistemas, y en el ámbito de la informática médica existen gran número de estos. Se destaca el trabajo realizado por el Comité Europeo de Normalización (CEN) con su estándar avalado por ISO, ISO/CEN 13606, el cual está basado al igual que OpenEHR en un modelo dual caracterizado por la definición de arquetipos para intercambiar información o pedazos de información clínica entre distintos sistemas. Una estrategia distinta a la de definición de arquetipos es la propuesta por Health Level Seven (HL7), que apuesta por el intercambio de mensajes bajo formatos estandarizados. Los trabajos de estas dos prestigiosas organizaciones, una americana y la otra europea, son considerados sobresalientes, es por eso que se detallan con detenimiento en este trabajo, y son tomadas como referencias.  CEN ISO13606 Es una norma propuesta por el CEN y aprobada como estándar internacional por ISO. Está diseñado con miras a lograr la interoperabilidad semántica en la comunicación de historiales médicos electrónicos. Los objetivos de la norma EN13606 son (extracto de la introducción de EN13606): «El objetivo general de esta norma es definir una arquitectura de la información rigurosa y estable para la comunicación de parte o de la totalidad de la historia médica electrónica de un paciente. Esto es para soportar la interoperabilidad de sistemas y componentes que necesitan comunicar (acceder, transferir, agregar o modificar) datos de HME a través de mensajes electrónicos o como objetos distribuidos:  Preservando el significado clínico original previsto por el autor.  Que refleje la confidencialidad de los datos según lo previsto por el autor y el paciente» (22). Para lograr estos, EN13606 presenta un enfoque innovador descrito como arquitectura de Modelo Dual. Este modelo dual propone la separación de la información y el conocimiento. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 40 La información está estructurada a través de un modelo de referencia que contiene las entidades de base para la representación de toda la información de la HME. Por otro lado el conocimiento se construye en base a arquetipos, en estos se definen los conceptos clínicos, como pueden ser; medición de glucosa, presión arterial o historia familiar, en una estructura que permite las combinaciones de restricciones sobre las entidades definidas. Además proporciona un significado semántico gracias a la estructura del Modelo de Referencia. La interacción entre el modelo de referencia y el modelo de arquetipos, proporciona una ventaja en la evolución de los sistemas de información. Alcance Este estándar especifica la arquitectura necesaria para lograr la interoperabilidad entre sistemas o servicios, que provean o consuman datos de HME. Esta norma no pretende especificar la arquitectura interna o diseño de base de datos para sistemas de HME. El registro o extracto de registro que será objeto de comunicación es un registro sobre una única persona, y el alcance de la comunicación de ese registro gira en torno a esa persona y en beneficio de ella. El uso de los registros de historias médicas para otros fines tales como administración, gestión, investigación y epidemiología, no son el foco de esta norma, pero sin embargo se pudiese encontrar en ella alguna utilidad. En esta norma se define un lenguaje para la representación de arquetipos que puede ser utilizada como formato de comunicación entre arquetipos individuales. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 41 Figura 6. Estructura de la HME en EN13606 Fuente: Adaptado de CEN. EN13606 Part 1. [En línea] 11 de Septiembre de 2009. http://www.en13606.org/resources/files/doc_details/1-en13606-part-1. En la Figura 6 se observa que la HME se divide en una jerarquía de carpetas, cada carpetas tiene un conjunto de composiciones, estas a su vez se dividen en secciones que tienen diferentes tipos de entradas agrupadas o individuales. El uso de arquetipos proporciona una manera de representar esta información y hace posible la distribución de estas especificaciones, en apoyo a la interoperabilidad semántica de HME compartida. A largo plazo, se espera que mediante la participación de organismos nacionales en al área de salud, organizaciones académicas y organismos profesionales, en el desarrollo de arquetipos, contribuirá al impulso de una práctica clínico-informática de calidad. De la misma forma se estipula la existencia de bibliotecas de arquetipos de dominio público de rango regional o nacional, en distintos países, que contengan definiciones de arquetipos que se puedan acceder a través de internet, y descargar para el uso local dentro de los sistemas de HME. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 42  HL7 Es una organización internacional sin fines de lucro, con sede principal en E.E.U.U., se encarga de generar especificaciones que pretenden dar solución al problema de la comunicación de sistemas heterogéneos en al área de la salud (23). Esta organización ha definido un número importante de estándares relacionados con mensajería y documentos clínicos, estos son: Mensajería HL7 Versión 2 (HL7 V2) Es un estándar para el intercambio de mensajes en los ámbitos clínicos, económicos, asistenciales y logísticos, entre otros. Su primera versión fue creada en 1989, por su antigüedad cabe destacar que es uno de los estándares de mensajería más utilizado en el mundo de la salud (24). HL7 V2 no está basado en ningún modelo de referencia, es el estándar HL7 más aceptado y utilizado a nivel internacional pues es sencillo de implantar, siempre y cuando los entes involucrados en la emisión y recepción de los mensajes definan previamente la estructura semántica del mensaje. Mensajería HL7 Versión 3 (HL7 V3) Se puede decir que es la evolución de HL7 V2, respondiendo a superar problemas presentados con HL7 V2 y presentando una nueva forma de abordar el problema de la interoperabilidad. Está basado en un modelo de referencia llamado Reference Information Model (RIM). Todos los mensajes se derivan de un núcleo en común, el RIM. Se pretende que el modelo común dé soporte y sea capaz de extenderse para los distintos dominios del área de la salud (25). Este modelo de referencia está escrito en lenguaje Unified Modeling Language (UML). De éste se derivan los D-MIN (modelos de dominio), y a su vez de los dominios los R-MIN (modelos enriquecidos), para así desembocar en los HMD (modelos jerárquicos de mensaje). De los modelos jerárquicos se pasa entonces a las plantillas XML que son utilizadas para el intercambio de la información. La importancia del modelo de referencia es que establece un marco para hacer posible la interoperabilidad semántica. HL7 CDA R2 Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 43 El HL7 Clinical Document Architecture (CDA), Arquitectura de Documento Clínico, es un Documento/Mensaje, es decir, el mensaje a intercambiar es el documento mismo y el documento en sí es un mensaje. Un documento CDA está escrito en lenguaje XML, con entradas normalizadas que permiten el fácil procesamiento de su contenido. La estructura de CDA está definida por una cabecera y un cuerpo, este último a su vez tiene una entrada de datos estructurada y otra no estructurada. El objetivo de CDA es lograr el intercambio de documentos/mensajes estandarizados entre aplicaciones heterogéneas, pero no es una especificación de sistemas de HME como tal. Tampoco determina aspectos relacionados con el almacenamiento, intercambio de documentos, políticas de seguridad y secreto compartido (26). CDA es un modelo de documento de marcado, que especifica la estructura y semántica de «documentos clínicos» con el propósito de intercambiar documentos. Un documento clínico tiene las siguientes características:  Persistencia: un documento clínico continúa existiendo en un estado inalterable, por un período de tiempo definido por las leyes o necesidades de la localidad o país.  Administración: un documento clínico es gestionado por una organización que se encarga de su cuidado.  Potencial para la autenticación: un documento clínico es un compuesto de información que se destina a ser legalmente autenticado.  Contexto: un documento clínico establece por defecto el contexto para su contenido.  Integridad: la autentificación de un documento clínico se aplica en su totalidad y no se aplica a porciones o partes del documento sin el contexto completo del documento.  Legibilidad humana: un documento clínico es humanamente legible. Un documento CDA es un definido y completo objeto de información que puede incluir texto, imágenes, sonidos y otros contenidos multimedia. Alcance El propósito de CDA es la estandarización de documentos clínicos para compartirlos o intercambiarlos entre sistemas heterogéneos. Sistema Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 44 El formato de los documentos clínicos más allá del intercambio, no se abordan en la especificación CDA, como por ejemplo, el formato de datos usado para almacenar los documentos clínicos. CDA no especifica la creación o administración de documentos, sólo la estructura del documento a ser intercambiado. Si bien puede ser posible utilizar directamente el esquema de CDA en un entorno de creación de documentos, tal uso no es el propósito principal del CDA. Descripción técnica  Estructura de un documento CDA: Un documento CDA se compone de una cabecera y un cuerpo. El encabezado identifica y clasifica el documento, se proporciona información sobre la autenticación, el encuentro, el paciente, y el proveedor, y establece el contexto para el documento en su conjunto. El cuerpo contiene el informe clínico, y se divide conceptualmente en secciones anidadas (27). Un documento CDA se divide en tres partes: cabecera, cuerpo estructurado y cuerpo no estructurado. La estructura del documento CDA se ilustra en la Figura 7. Figura 7 - Partes de un CDA Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 45  Estándares de terminologías Son vocabularios que proporcionan códigos determinados para conceptos clínicos tales como alergias, listas de problemas, enfermedades, diagnósticos y medicaciones, que pueden tener variantes en el registro en papel o en una transcripción. Algunos estándares de terminologías son; ICD 10, para realizar diagnósticos médicos, SNOMED, para utilización de términos clínicos y LOINC, para registrar resultados de laboratorio. Los estándares relacionados con terminologías no son de interés directo de este trabajo, por eso no se realiza una profundización sobre ellos. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 46 CAPÍTULO III - LEVANTAMIENTO DE INFORMACIÓN 3.1 Introducción Teniendo en cuenta los conceptos planteados en el marco conceptual sobre la historia médica, la historia médica electrónica y sus estándares, es necesario pasar a un proceso de recolección de información relacionada con el contexto a modelar (historias médicas). Esto para poder avanzar hacia una solución viable del problema antes expuesto. El proceso de recolección de información consta de una serie de actividades de investigación, con el propósito de obtener información y generar información a través de ella. Información que es relevante a la hora de modelar un sistema de historias médicas electrónicas. Debido a que la solución propuesta está orientada a ser aplicada en los ambulatorios del programa SOS Telemedicina muchas de las actividades realizadas en el levantamiento de información están relacionadas con centros asistenciales de nivel ambulatorio. 3.2 Actividades de investigación Para recolectar información inherente al sistema de historias médicas que se maneja en los distintos ambulatorios o centros de salud, se realizaron las siguientes actividades:  Visitas y llamadas telefónicas a ambulatorios: el equipo de desarrollo se entrevistó con trabajadores de salud que laboran en los ambulatorios con el objetivo de identificar actores y procesos en los centros de atención sanitaria. El tipo de la entrevista fue no estructurada. Las entrevistas fueron grabadas para su mejor aprovechamiento.  Recolección de formatos de historia: se recolectaron diversos formatos usados para la historia médica, manejo de estadísticas y otros fines de salud. Esto se hizo a través de la colaboración del equipo SOS Telemedicina y en las visitas a ambulatorios.  Reuniones con médicos: para consolidar y validar los formatos y flujos de trabajo elaborados, se realizaron entrevistas con médicos de distintas especialidades, algunas se realizaron personalmente y otras por medio de video- llamadas.  Investigación particular: indagación por parte del equipo de desarrollo mediante bibliografías recomendadas y en el internet.  Otras actividades: reuniones y conferencias con panelistas y personalidades ilustradas en informática médica y telemedicina. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 47 Todas estas actividades fueron realizadas coordinadamente con la ayuda del equipo de SOS Telemedicina. Los centros ambulatorios entrevistados fueron los siguientes:  Ambulatorio Jesús Reguetti, Edo. Miranda Municipio. El Hatillo. Visita de campo.  Ambulatorio de Mapire, Edo Anzoátegui. Llamada telefónica.  Ambulatorio de medicina tropical UCV. Visita de campo.  Ambulatorio Docente UCV. Visita de campo. Las reuniones concretadas con los médicos incluyen a los siguientes especialistas:  Dra. Jacqueline Panvini. Médico especialista en Puericultura y Pediatría.  Dr. Jesús Velásquez. Médico especialista en Puericultura y Pediatría.  Dr. Héctor Arrechedera. Director del Centro de Informática Médica.  Dr. Fernando Jiménez. Médico especialista en Psiquiatría.  Detalle de otras actividades Una de las actividades adicionales que se llevó ha cabo en este trabajo de grado fue asistir al «II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares» que se realizó en la ciudad de Caracas el 26 y 27 de julio de 2011. Promovido por la Secretaría Permanente del SELA con el apoyo de la OPS/OMS y de la CEPAL. En la Figura 8 se muestran las organizaciones y empresas participantes en el evento. Figura 8. II Seminario Regional sobre Salud-e y Telemedicina Fuente: SELA. II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares. [En línea] Julio de 2011. http://www.sela.org/view/index.asp?ms=258&pageMs=87355. El objetivo general de dicho seminario fue «Contribuir al diálogo regional, a partir del intercambio de experiencias y buenas prácticas relacionadas con el uso de las Tecnologías de Información y Comunicación (TIC) en la prestación de servicios médico- sanitarios, con particular énfasis en la innovación, en las nuevas herramientas y soportes y Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 48 en los nuevos desarrollos normativos, en apoyo a los procesos de integración social en América Latina y el Caribe» (28). También se participó en reuniones organizadas por el Equipo de SOS Telemedicina entre las que se puede destacar:  Reunión con el Dr. Jorge Hernández Rojas perteneciente a la Dirección de Salud de la alcaldía del municipio Sucre, el día martes 02 de Agosto de 2011, donde se conversó sobre las iniciativas de historia médica electrónica de alcaldía y los resultados obtenidos de la aplicación del sistema de HME (desarrollado por ellos) en los ambulatorios del municipio.  Actividad divulgativa organizada por la Facultad de Medicina UCV, con tres invitados internacionales la Dra. Selene Indarte, Dr. Andrés Fernández y Lic. Enrique Oviedo, panelistas en el evento «II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares» organizado por la SELA, actividad en la cual se conversó sobre e- Salud, particularmente sobre la historia médica electrónica. 3.3 Información recolectada Mediante las actividades de recolección de información realizadas fue posible obtener variedad de formatos de historias médicas y de reportes de tipo estadístico. Se pudo identificar las distintas actividades realizadas en los ambulatorios y los actores que intervienen en dichas actividades. Se determinó el tipo de historia médica (en formato) en cada ambulatorio entrevistado, véase la Tabla 1. Tabla 1. Tipo de historia médica por centro asistencial Ambulatorio de Mapire. Historia médica tradicional en papel. Ambulatorio de medicina tropical UCV. Historia médica tradicional en papel y electronica. Ambulatorio docente UCV Historia médica tradicional en papel y electronica. Ambulatorio Jesús Reguetti. Historia médica tradicional en papel. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 49 3.3.1 Formatos de información recolectados A través del programa SOS Telemedicina y por medio de las visitas a ambulatorios se pudo recolectar una serie de formatos de donde se recoge información clínica y estadística. En la siguiente Tabla 2 se muestran los formatos recolectados del sistema de información de salud (29) y otros, indicando el centro de salud o ambulatorio de origen. Tabla 2. Formatos de información clínica recolectados Centro asistencial Formato de información clínica Ambulatorio de Mapire.  EPI 10: registro diario de morbilidad de la consulta general.  EPI 15: registro mensual de enfermedades por aparatos y sistemas.  SIS-01 FF: ficha Familiar.  SIS-01 HCBI: historia clínica básica integral.  DSP 03: formato de sistema estadístico anterior.  DSP 04: formato de sistema estadístico anterior. Ambulatorio de medicina tropical UCV.  No se obtuvieron formatos de este centro. Sin embargo se observó el funcionamiento de la historima médica electrónica que se usa en el ambulatorio. Ambulatorio docente UCV  Se observó el funcionamiento de la historima médica electrónica que se usa en el ambulatorio. La cual resulta ser una suerte de híbrido entre manuscrita y electrónica. No se obtuvieron formatos de este centro. Ambulatorio Jesús Reguetti.  Formato de historia propuesto por la Alcaldía de Miranda.  Forma SIS-01 HCBI: historia clínica básica integral.  Formatos propios por área o especialidad Equipo SOS Telemedicina  Formato sistema básico del niño. MPPS.  Formato carnet Perinatal. OPS / OMS.  Formato historia clínica perinatal. MPPS.  Formato historia clínica pediátrica. Instituto Mexicano de Seguro Social Cruz / Contreras.  Formato historia obstétrica. Alcaldía Metropolitana de Caracas, Maternidad «Concepción Palacios». Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 50 3.3.2 Actividades identificadas Mediante las visitas y llamadas telefónicas se pudo identificar las principales actividades que se llevan a cabo en los ambulatorios entrevistados. La Tabla 3 tabla tal muestra los distintos ambulatorios entrevistados y sus actividades. Tabla 3. Actividades identificadas por centro asistencial Centro asistencial Actividades o procesos Ambulatorio de Mapire.  Manejo diario de historias médicas.  Proceso de atención Materno infantil.  Programa de inmunización.  Control de obesidad.  Realización de reportes. Ambulatorio de medicina tropical UCV.  Seguimiento de pacientes con VIH.  Activiades de infectología. Ambulatorio docente UCV.  Manejo diario de historias de medicina general. Ambulatorio Jesús Reguetti.  Manejo diario de historias médicas.  Archivo general de historias médicas.  Programa de inmunización.  Activiades de farmacia.  Activiades de odontología.  Activiades de laboratorio.  Activiades de ginecología.  Realización de reportes. Nota. Fuente: Elaboración propia Una muestra de los formatos recolectados puede observarse en la Figura 9 y Figura 10. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 51 Figura 9. SIS-01 FF Fuente: Sistema de información de salud, MPPS Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 52 Figura 10. SIS-01 HCBI Fuente: Sistema de información de salud, MPPS. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 53 3.3.3 Flujos de atención identificados A través de las visitas y entrevistas a los distintos ambulatorios y centros de salud se logró identificar un flujo genérico de atención al paciente. A continuación en la Figura 11 se presenta el flujo del proceso asistencial, según la información recabada. Figura 11. Flujo de atención en ambulatorios sin sistema de HME Fuente: Elaboración propia Los principales sitios o espacios de un ambulatorio son:  Recepción: lugar donde se llevan a cabo actividades administrativas.  Sala de espera: lugar donde el paciente espera a ser atendido.  Consultorio: lugar donde el paciente es atendido por el médico.  Archivo de historias: lugar donde se almacenan las historias médicas de los pacientes. La Figura 11 describe el flujo del proceso asistencial de la siguiente manera: 1. Llegada de paciente. 2. Búsqueda de cita. 3. Búsqueda de historia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 54 -Crear historia* (Si no posee) 4. Enviar paciente a sala de espera. 5. Enviar historia a consultorio. 6. Pasar paciente a consultorio. 7. Atender paciente. -Actualizar historia. 8. Almacenar historia. 9. Mover paciente. 3.3.4 Reportes identificados En su mayoría los centros de salud y ambulatorios visitados tienen el deber de entregar un conjunto de reportes estadísticos mensuales al MPPS (Ministerio del Poder Popular para la Salud), la Tabla 4 muestra los reportes que maneja cada centro de salud entrevistado. Tabla 4. Reportes identificados Centro asistencial Reportes Ambulatorio de Mapire.  Morbilidad.  Enfermedades de notificación obligatoria.  Inmunizaciones  Atención primaria por programas. Ambulatorio de medicina tropical UCV.  No entregan reportes al ministerio. Ambulatorio docente UCV  No se determinó. Ambulatorio Jesús Reguetti.  Morbilidad.  Enfermedades de notificación obligatoria.  Inmunizaciones  Atención primaria por programas. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 55 3.3.5 Actores identificados En los distintos ambulatorios entrevistados se pudo identificar los siguientes actores que hacen vida dentro de los centros de salud que interactúan con el sistema de historias médicas, ver Tabla 5. Tabla 5. Actores identificados Actor Descripción Personal médico  Médico general o especializado encargado de tratar al paciente. Personal sanitario o de enfermería  Personal de enfermería o asistente médico que labora en el ambulatorio. Personal administrativo  Personal que realiza distintas actividades administrativas en el ambulatorio, entre ellas llevar el proceso de reportes estadísticos. Nota. Fuente: Elaboración propia Adicionalmente se confirmó el hecho de que dichos actores no solo realizan sus propias actividades sino que en casos de dificultad pueden asumir roles pertenecientes a otro actor, como es el caso de las enfermeras que en centros ambulatorios llevan el manejo de los reportes estadísticos, o el caso de algún personal sanitario el cual asume roles correspondientes al médico si éste no se encuentra. Por lo cual un actor dentro de los centros de salud puede cumplir con más de un rol a la vez. 3.3.6 Observaciones Cierta información recolectada referente a los centros asistenciales y al manejo de la HM que no se pudo categorizar por su carácter heterogéneo, se muestra a continuación como una lista de observaciones obtenidas:  No existe una historia médica única (manual o electrónica).  Se encontraron diversas formas y maneras de llevar una historia médica.  Es variado el número de áreas especializadas en los ambulatorios (0 – muchas).  Carencia de integración entre los formatos encontrados.  Intención del Estado Venezolano de estandarizar los formatos de historias médicas.  Los proceso de registro, control y seguimiento encontrados son similares. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 56  Utilización de diversos términos para referirse a un mismo concepto.  Se encontraron problemas de unificación en la nomenclatura. 3.4 Información generada Mediante la información de recabada fue posible generar información necesaria para poder modelar un sistema de historias médicas electrónicas. Esta información consta de los siguientes elementos:  Actividades relacionadas con el sistema de historias médicas.  Formatos de historia médica integral.  Propuesta de formato de historia materno-infantil. 3.4.1 Actividades en común Se pudieron identificar actividades en común que realizan los centros asistenciales visitados con relación a:  Manejo diario de historia médica.  Atención materno-infantil.  Reportes estadísticos. Estas actividades fueron modeladas mediante diagramas de actividades en los que se representan los flujos de trabajo presentes, las distintas sub-tareas que los conforman y los actores que intervienen normalmente en cada una.  Manejo diario de historia médica El manejo diario de la historia médica hace referencia a aquellas actividades que se realizan para atender a un paciente y que están relacionadas con el registro de la historia médica general o integral. Estas actividades van desde el momento en que el paciente llega a la consulta hasta que es dado de alta o trasladado a otro centro de salud. La Figura 12 muestra el flujo de actividades que se realizan en el proceso asistencial. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 57 Inicio ¿Es primera consulta? Búsqueda de HM e HM familiar NO Creación de HM del paciente SI Agregación de datos consulta actual ¿Es necesario traslado? Se realiza el traslado SI NO Fin Se registra en la HM el traslado Se le da de alta al paciente Creación de HM familiar La HM es almacenada Registro de alta en la HM Personal médico Personal sanitario o de enfermería. Asignación de nueva cita SI ¿Necesita de seguimiento? No Figura 12. Diagrama de actividad manejo diario de historias médicas Fuente: Elaboración propia  Atención Materno-Infantil El control materno infantil abarca desde los primeros días del embarazo hasta los 40 días después del nacimiento del bebe. El manejo de HM en el área de materno infantil se puede dividir en dos actividades: la que se realiza antes del nacimiento denominada «prenatal» y la que se realiza después del nacimiento denominada «posnatal».  Prenatal Se puede apreciar en la Figura 13 el flujo de actividades que se realizan en el proceso de atención materno infantil en la etapa prenatal. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 58 Inicio ¿Posee HM? Búsqueda de la HM MI SI Creación de HM Materno- Infantil NO ¿Es necesario traslado? Traslado SI Se le da de alta a la madre NOFin Registro de traslado en la HM de la madre Indicaciones y recomendaciones a la madre Evaluación de la madre Registro de datos obtenidos en la HM Materno-Infantil Registro de alta en la HM La HM es almacenada Personal médico Nota: prenatal comprende el control de la madre durante el embarazo hasta el nacimiento del niño. Personal sanitario o de enfermería. ¿Necesita de seguimiento? Asignación de nueva cita Figura 13. Diagrama de actividad Materno infantil – Prenatal Fuente: Elaboración propia  Postnatal Se puede apreciar en la Figura 14 el flujo de actividades que se realizan en el proceso de atención materno infantil en la etapa postnatal para el cuidado del recién nacido. Fin Indicaciones y recomendaciones Inicio Evaluación del niño Asignación de próxima cita Se abre una HM Materno-Infantil nueva para el niño Se registra la información recolectada en la HM ¿Posee HM MI? Búsqueda de la HM Materno- Iinfantil del niño SI NO Personal sanitario o de enfermería. Personal medico Nota: el posnatal para el recien nacido comprende desde el nacimiento del niño hasta los cuarenta días de nacido. La HM es almacenada Figura 14. Diagrama de actividad Materno infantil – Recién nacido Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 59 Fin Indicaciones y recomendaciones Inicio Evaluación de la madre Asignación de próxima cita Se abre una HM Materno- infantil Se registra la información recolectada en la HM ¿Posee HM Materno- Infantil? Búsqueda de la HM Materno- Infantil SI NO Personal sanitario o de enfermería. Personal médico Nota: el posnatal para la madre comprende desde el nacimiento del niño hasta los cuarenta días del parto a este período se le denomina puerperio. La HM es almacenada Figura 15. Diagrama de actividad Materno infantil – Madre Fuente: Elaboración propia Se puede apreciar en la Figura 15 el flujo de actividades que se realizan en el proceso de atención materno infantil en la etapa postnatal para la el cuidado de la madre. A esta etapa se le denomina puerperio y comprende los cuarenta días después del parto.  Reportes estadísticos Concierne a la emisión de reportes estadísticos de morbilidad y enfermedades de notificación obligatoria. Esta es una tarea asignada al personal administrativo y en la que interviene también el personal sanitario. Tabulación diaria de morbilidad Registro semanal y mensual de morbilidad Entrega mensual de reportes a distrito Inicio Fin Personal sanitario o d enfermería. Personal administrativo Figura 16. Diagrama de actividad Reportes estadísticos. Fuente: Elaboración propia Se puede apreciar en la Figura 16 las actividades realizadas para recabar la información necesaria para la entrega del reporte mensual al distrito sanitario correspondiente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 60 CAPÍTULO IV – EVALUACIÓN DE HERRAMIENTAS DE HISTORIAS MÉDICAS ELCTRÓNICAS 4.1 Introducción En el mundo de la medicina existen un sin número de herramientas, aplicaciones o sistemas de software que se encargan de llevar un registro electrónico de las historias médicas. Escoger una herramienta, mejorarla y adaptarla a las necesidades, es la mejor opción cuando no se quiere empezar un proyecto desde cero. Es siempre una ganancia poder observar lo que otros han hecho o están haciendo, sirve para hacerse una idea puntual sobre la forma que debe tener el proyecto propio. Evaluar herramientas existentes de HME permite tomar una decisión en cuanto al desarrollo propio de un sistema de HME. Partiendo inicialmente por determinar si se opta por adaptar una de esas herramientas a las necesidades del proyecto, apoyarse en las potencialidades que puedan tener desde su «núcleo» y crear un sistema partiendo desde ahí, o bien tomar cada una de ellas tan solo como referencias para realizar un proyecto de base. Es importante destacar que en la actualidad no existe ningún sistema de HME que sea reconocido ampliamente (nacional o internacionalmente) por sus beneficios al sistema de salud o al cuidado del paciente, según lo observado por los autores durante el proceso de investigación de este trabajo. Por el contrario son múltiples las ofertas de sistemas de HME, donde cada empresa o casa de software presenta su herramienta como la mejor. Por tanto resulta complicado discernir cual es el sistema de historias médicas indicado para satisfacer las necesidades de una organización de salud. Por el carácter del programa SOS Telemedicina se privilegiaron las iniciativas de naturaleza open source. Para realizar una evaluación adecuada, primeramente se debe dejar en claro cuáles son las necesidades a satisfacer. Un sistema de HME para el programa SOS Telemedicina debe cumplir como mínimo con los requerimientos expuestos en el primer capítulo de este documento. Fue de vital importancia que la evaluación realizada pudiese ser verificada por terceros, por lo cual se hizo necesario definir, medir y analizar ciertos criterios para justificar la selección de la herramienta adecuada para que SOS Telemedicina logre alcanzar los objetivos propuestos. 4.2 Herramientas de seleccionadas Se seleccionaron tres herramientas considerando como característica predominante el hecho de que fuesen herramientas open source. Luego de una extensa búsqueda a través Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 61 de la «world wide web» y de recibir distintas recomendaciones por parte del programa SOS Telemedicina, las herramientas seleccionadas fueron las siguientes:  Medical, http://medical.sourceforge.net/es/index.html  Open MRS, http://openmrs.org/  OpenEHR Gen-Framework, http://code.google.com/p/open-ehr-gen-framework/ Las dos primeras son sistemas de historias médicas electrónicas, de gran «popularidad» utilizadas en varias partes del mundo, y la tercera es un «framework» (un conjunto estandarizado de conceptos, prácticas y criterios para enfocar un tipo de problemática particular) para la construcción de aplicaciones de HME. 4.2.1 Medical Es una herramienta de control de atención médica y administración de instituciones de salud que ofrece las siguientes funciones:  Expediente Médico Electrónico.  Sistema de Gestión Hospitalaria (HIS).  Sistema de Información de Salud (SIS). El objetivo de esta herramienta es contribuir con los profesionales de la salud alrededor del mundo para mejorar la calidad de vida de los más necesitados, ofreciendo un sistema libre que optimice la promoción de la salud y la prevención de la enfermedad. Medical funciona bajo Open ERP, el cual es un sistema ERP-CRM. Tiene componentes separados en esquema cliente-servidor. Anteriormente era conocido como TinyErp. Su arquitectura es cliente-servidor (aplicación de escritorio) y web, está desarrollado en lenguaje Python y trabaja con el manejador de base de datos PostgreSql. Está optimizado para trabajar sobre un entorno Linux, pero tiene también soporte completo para ambientes Windows (30). Comunidad de Medical: http://medical.sourceforge.net/community.html  Funcionalidades:  Está focalizado en medicina familiar y APS (Atención Primaria de la Salud).  Interés en condiciones socio-económicas (estilos de vida, ámbito familiar, educación...).  Enfermedades y procedimientos médicos bajo los estándares (ICD-10 / ICD-10- PCS). http://medical.sourceforge.net/es/index.html http://openmrs.org/ http://code.google.com/p/open-ehr-gen-framework/ http://es.wikipedia.org/wiki/Planificaci%C3%B3n_de_Recursos_Empresariales http://es.wikipedia.org/wiki/CRM http://medical.sourceforge.net/community.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 62  Marcadores genéticos y riesgos hereditarios: más de 4200 genes relacionados con enfermedades.  Epidemiología y otros registros estadísticos.  Recetas.  Facturación.  Administración del paciente (creación, evaluación / consultas, historia ...).  Administración del personal médico.  Administración de laboratorio.  Gestión de almacén y de cadena de abastecimiento.  Administración financiera y gestión hospitalaria.  Software libre: Licencia GPL v3.  Medical cuenta con una comunidad abierta de desarrollo, y aunque funciona bajo OpenERP es independiente del ERP/CRM, posee soporte multiplataforma y protocolos para el desarrollo de nuevos módulos.  Fortalezas:  Es un producto software terminado, listo para usar.  Maneja registros de enfermedades y procedimientos médicos bajo los estándares (ICD-10 / ICD-10-PCS).  Ofrece un sistema completo de gestión hospitalaria.  Genera registros estadísticos.  Brinda un registro electrónico de pacientes.  Posee una estructura modular, favoreciendo la escalabilidad.  Debilidades:  No maneja estándares de interoperabilidad. 4.2.2 OpenMRS Es un proyecto colaborativo de código abierto. El sistema está diseñado para ser utilizado en entornos de recursos muy pobres y puede ser modificado con la adición de nuevos elementos de datos, formularios e informes sin necesidad de programación. Está concebido como una plataforma que muchas organizaciones pueden adoptar y modificar evitando la necesidad de desarrollar un sistema desde cero. OpenMRS se basa en un «diccionario de conceptos» en el que se describen todos los elementos de datos que se pueden almacenar en el sistema, tales como los hallazgos clínicos, pruebas de laboratorio o datos socio-económicos. Este método evita la necesidad de modificar la estructura de base de datos para añadir nuevas enfermedades, por ejemplo, y facilita el intercambio de diccionarios de datos entre los proyectos y los sitios. Una de las características importantes OpenMRS es su construcción modular que permite la programación de nuevas funciones sin tener que modificar el código del núcleo. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 63 OpenMRS está basado en web, pero se puede implementar en una sola computadora portátil o en un servidor grande y se ejecuta en Linux, Windows o Mac OS X (31).  Características:  Diccionario de conceptos.  Seguridad: autentificación de usuarios.  Control de acceso: basado en privilegios.  Registro de pacientes.  Multiplicidad de identificadores de pacientes.  Importación y exportación de datos.  Soporta estándares HL7 – V2.  Estructura modular desde el punto de vista administrativo y de desarrollo.  Relaciones entre pacientes.  Mezcla de pacientes duplicados.  Localización e internacionalización.  Soporta datos complejos: imágenes, archivos de sonido etc.  Herramientas flexibles para realizar reportes.  Fortalezas:  Es un producto software terminado, listo para usar.  Brinda un registro electrónico de pacientes.  Posee una estructura modular, favoreciendo la escalabilidad.  Es configurable y adaptable a las necesidades.  Está basado en tecnologías Java.  Puede utilizar distintos manejadores de base de datos (MySQL, Oracle, SqlServer, PostgreSQL).  Posee una comunidad de desarrollo.  Módulos desarrollados para telefonía móvil.  Debilidades:  No posee protocolos de comunicación, para interoperabilidad.  Dificultades en los procesos de creación y/o modificación de módulos, así como la implementación de las vistas necesarias para adecuar la aplicación a las necesidades del programa SOS. La Figura 17 muestra las aplicaciones de OpenMRS desplegadas en el mundo. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 64 Figura 17 OpenMRS Atlas Fuente: OpenMRS. OpenMRS Atlas. [En línea] http://openmrs.org/about/locations/.  Características de la plataforma  Estándares: Manejo de HL7 versión 2.  Plataforma de Desarrollo: Java  Soporte: extensa comunidad de desarrollo, soporte, mailing list, blogs, pruebas y documentación.  Despliegue: base de datos Mysql, plataforma java, servidor Tomcat. Rápido despliegue en la situación de prueba de la aplicación. 4.2.3 OpenEHR-Gen-Framework Es un generador de sistemas de historia médica electrónica basado en el estándar OpenEHR. Un Framework, ver Figura 18, es un marco de trabajo, aplicación parcial, genérica y reusable, que resuelve funcionalidades básicas simplifica y acelera nuevos desarrollos (32). Figura 18. Estructura de aplicación basada en framework Fuente: Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-gen-framework/. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 65 OpenEHR es un estándar abierto para crear HME normalizadas orientadas a la gestión del conocimiento. Para soportar proyectos de HME económicamente viables, mantenibles y adaptables. OpenEHR se basa en una arquitectura de modelo dual. El llamado modelo de referencia establece un primer nivel, mientras que las definiciones formales de los conceptos clínicos en forma de arquetipos y plantillas, establecen un segundo nivel. El resultado clave de este enfoque es que los arquetipos constituyen una tecnología totalmente independiente, estos en el tiempo pueden cambiar y evolucionar, mientras que las estructuras de datos se mantienen en el tiempo. Las funcionalidades de Open EHR-Gen Framework son las siguientes:  En función de la base de conocimiento: o Generación automática de GUI. o Validación automática de datos. o Generación de estructuras y persistencia automática.  Generación de CDA no estructurado, incorporada.  Soporte para generar cualquier sistema de historias médicas: o El sistema se genera automáticamente a partir de la base de conocimientos definida por los médicos, enfermeras y técnicos.  Internacionalízable / Localizable: todos los textos son traducibles y adaptables a culturas locales. La arquitectura del framework es MVC (modelo, vista, controlador) + Servicios. Está compuesto por; un generador de GUI; un generador y validador de estructuras; implementa el modelo de referencia normalizado de OpenEHR; posee una base de conocimientos, donde se agrupan arquetipos y plantillas; tiene un repositorio de datos clínicos en formato CDA. Por otra parte, el entorno de desarrollo consta de los siguientes componentes software:  JDK 1.6 o superior (Java).  Grais 1.3.7.  IDE Spring Source Tool Swite (STS) (basado en Eclipse), puede ser también NetBeans.  Un cliente SVN.  Un Manejador de Base de Datos (se recomienda MySQL ). Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 66  Fortalezas:  Está basado en el estándar OpenEHR y hace uso del estándar CIE10 y HL7 CDA.  Es un marco de trabajo, para desarrollar sistemas de historias médicas electrónicas.  Es configurable y adaptable a las necesidades.  Está basado en tecnologías Java.  Puede utilizar distintos manejadores de base de datos (MySQL, Oracle, SqlServer, PostgreSQL).  Se tiene contacto con los desarrolladores del framework.  Es altamente escalable.  Debilidades:  No posee protocolos de comunicación, para interoperabilidad. Aunque sí se generan documentos CDA. Foro OpenEHR Gen- Framework: http://groups.google.com/group/openehr-es Iniciativas que usan el estándar OpenEHR: http://www.openehr.org/shared/resources/usage/commercial.html 3.3 Criterios de evaluación Para evaluar las herramientas se consideraron seis criterios, cada uno con un conjunto específico de características. Por cada herramienta se evaluó cada criterio de la siguiente forma: 1. Por cada característica se acumula:  Un (1) punto si la característica está presente en la herramienta.  Cero (0) puntos si la característica se encuentra ausente. 2. Al finalizar de evaluar las características asociadas a un criterio, cada herramienta obtiene el acumulado en número de las características que posee. Para culminar la evaluación se definió el factor de importancia de cada criterio dentro del programa SOS Telemedicina y se le asignó un valor entre uno y tres puntos, siendo tres el valor que indica mayor importancia. Estos factores son:  Alto grado de importancia (3 puntos)  Grado medio de importancia (2 puntos)  Grado menor de importancia (1 punto) http://groups.google.com/group/openehr-es http://www.openehr.org/shared/resources/usage/commercial.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 67 La valoración de la herramienta en un determinado criterio depende del resultado total de las características por el factor importancia asociado a ese elemento, y la ponderación total de la herramienta corresponde al total de las valoraciones en todos los criterios. Los criterios definidos fueron:  Estándares: Se refiere al uso de estándares. A través de su uso es posible el intercambio de información médica entre distintos centros asistenciales y facilita la unificación de términos, formatos y procedimientos médicos, ambos requerimientos del programa SOS Telemedicina. En la evaluación se consideraron los estándares expuestos en el capítulo anterior: 1. Health Level Seven (HL7 CDA R2): estándar para el intercambio de documentos clínicos (en lugar de mensajes), 2. Open EHR: estándar para describir la administración almacenamiento de información clínica en forma de informes de historia clínica electrónica. 3. Clasificación internacional de enfermedades, CIE 10, estándar para la clasificación y codificación de las enfermedades y una amplia variedad de signos, síntomas, hallazgos anormales, denuncias, circunstancias sociales y causas externas de daños y/o enfermedad.  Plataforma de desarrollo: entorno de software común en el cual se desenvuelve la programación de la herramienta. 1. Plataforma open source: implica que las herramientas utilizan ambientes de desarrollos open source. 2. Multiplataforma: hace referencia al diferente entorno de desarrollo en software libre.  Soporte: documentación de la herramienta, comunidad de desarrollo y contacto con personas inmersas en estos proyectos. Esto incrementa la capacidad de escalabilidad del producto. 1. Documentación de la herramienta: describe el funcionamiento y uso de la misma, la descripción de funcionamiento viene acompañada de la debida documentación del código fuente. 2. Comunidad de Desarrollo: grupo de personas que cooperan en el desarrollo de la herramienta. Estas personas pueden ser usuarios, desarrolladores, distribuidores, soportistas, traductores entre otras cosas. http://es.wikipedia.org/wiki/Informaci%C3%B3n http://es.wikipedia.org/wiki/Sanidad http://es.wikipedia.org/wiki/Informe http://es.wikipedia.org/wiki/Software Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 68  Despliegue: permite conocer los factores necesarios para la instalación implantación y puesta en marcha del sistema. 1. Multiplataforma: refiere a que puede utilizarse en diversas plataformas (distintas combinaciones de hardware y software). 2. No requiere la instalación previa de software acoplado: no depende de algún paquete de software adicional para funcionar. 3. Posee implementaciones en distintos países del mundo: indica el índice de popularidad, si la herramienta ha sido instalada y es utilizada en diferentes iniciativas en varias partes del mundo.  Funcionalidades: acciones o tareas que es capaz de realizar el sistema. Algunas de las funcionalidades que debe cumplir dicha herramienta son: 1. Llevar un registro unificado de pacientes: permite tener un registro único de pacientes e historias, en otras palabras no existe la duplicidad ni de pacientes ni de historias. Un paciente posee una historia. 2. Gestión de especialidades de manera modular: hace referencia a la incorporación de módulos independientes asociados a los dominios clínicos, es decir: Pediatría, Ginecología, Emergencias, Psiquiatría, entre otros. 3. Manejo de información estadística y de reportes: refiere a la capacidad de generar estadísticas y reportes.  Escalabilidad: habilidad para extender el margen de operaciones sin perder calidad. La escalabilidad determina la dificultad para que un sistema pueda evolucionar o modificarse en el tiempo y por ende la dificultad para adaptar por ejemplo: la interfaz de usuario o permitir en un futuro la posibilidad de interoperar a través de telefonía móvil, ambos requerimientos del programa SOS Telemedicina. 1. Capacidad de adaptación sin modificar la lógica interna: esto implica que posee una estructura adaptable sin la realización de cambios drásticos en su estructura. 2. Posee una estructura modular incrementable: permite incorporar nuevos módulos a la aplicación sin modificar el núcleo (kernel). 3. Permite adaptar la interfaz gráfica: refiere a los cambios que se puedan realizar a las interfaces gráficas haciendo uso de hojas de estilo, templates, layouts, etc. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 69  Los criterios con un alto grado de importancia (3 puntos) son:  Escalabilidad, por lo importante que es para el programa SOS Telemedicina adaptarse y ayudar en las tareas diarias de un centro de salud sin descartar el posible incremento de funcionalidades y dominios médicos a futuro.  Estándares, requerido para llevar a cabo el intercambio de información médica tanto interna dentro de la red SOS y a futuro con otros sistemas de HME.  Los criterios con grado medio de importancia (2 puntos) son:  Soporte, por la capacidad que da a la escalabilidad y la capacidad de modificación del sistema.  Despliegue, de la herramienta para poder valorar la dificultad de su instalación y puesta en marcha.  Los parámetros con un grado menor de importancia (1 punto) son:  Funcionalidades, las cuales algunas de ellas se cubren en todas las herramientas, sin embargo existen algunas funcionalidades que corren el riesgo de no adaptarse a la realidad de las labores de los centros de salud dentro del programa SOS Telemedicina.  Plataforma de Desarrollo, la cual no afecta directamente la lógica de la aplicación pero si pudiese afectar los tiempos de desarrollo. 3.4 Metodología Se realizaron las instalaciones y pruebas de funcionamiento pertinentes sobre las herramientas, en ambientes virtuales (destinados solo para pruebas), de manera que se pudiese observar y determinar que las herramientas cumpliesen o no con las funcionalidades expuestas en las documentaciones descritas en sus portales web. Se efectuaron video-conferencias con personas con conocimiento en la materia e involucradas en los desarrollos de las herramientas evaluadas, para lograr un mayor acercamiento y compresión:  Medical: Ing. Luis Falcón, Argentina. Principal desarrollador de la herramienta.  OpenEHR Gen-Framework: Ing. Pablo Pazos, Uruguay. Co-creador de la herramienta, fundador de la comunidad OpenEHR en Español.  OpenMRS: no se concretó video-conferencia.  Asosoría general: Dr. Daniel Luna Claro, Jefe del Departamento de Informática en Salud del Hospital Italiano de Buenos Aires. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 70 Se optó por realizar la evaluación bajo un enfoque cuantitativo en aras de la objetividad, por lo cual fue necesario: 1. Evaluar las características de cada uno de los criterios, ver 2. Tabla 6. Resultados de la evaluación de los criterios. 3. Evaluar cada criterio de acuerdo con el grado de importancia dentro del programa SOS Telemedicina, ver 4. Tabla 7. 5. Expresar métricas o valoraciones para estos parámetros en cada una de las herramientas evaluadas. Ver 6. Tabla 7, específicamente ponderación total. 3.5 Resultados y análisis Tabla 6. Resultados de la evaluación de los criterios Criterios Características Medical Open EHR Gen Open MRS Estándares Soporta Open EHR 0 1 0 Soporta HL7 CDA R2 0 1 1 ICD 10 1 1 1 total 1 3 0 Plataforma de Desarrollo Plataforma open source 1 1 1 Multiplataforma 1 1 1 total 2 2 2 Soporte Documentación de la herramienta 1 1 1 Comunidad de desarrollo 1 1 1 total 2 2 2 Despliegue Multiplataforma 1 1 1 No requiere la instalación previa de software acoplados 0 1 1 Posee implementaciones en distintos países del mundo. 1 0 1 total 2 2 3 Funcionalidades Registro unificado de pacientes. 1 1 1 Gestión de especialidades de manera modular 1 1 0 Manejo de información estadística y de reportes. 1 0 1 total 3 2 2 Escalabilidad Capacidad de adaptación sin modificar la lógica interna 0 1 1 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 71 Posee una estructura modular incrementable 1 1 1 Permite adaptar la interfaz grafica. 0 1 1 total 1 3 3 Nota. Fuente: Elaboración propia Tabla 7. Resultados de la evaluación de los criterios por el factor de Importancia. Estándares Plataforma Soporte Despliegue Funcionalidades Escalabilidad Ponderación total E a P b E a P b E a P b E a P b E a P b E a P b Medical 1 3 2 2 2 4 2 4 3 3 1 3 19 Open EHR Gen 3 9 2 2 2 4 2 4 2 2 3 9 30 Open MRS 0 0 2 2 2 4 3 6 2 2 3 9 23 Importancia 3 1 2 2 1 3 Nota. Fuente: Elaboración propia. a Puntaje por criterio. b Puntaje de criterio multiplicado por valor de importancia. Luego de realizadas las evaluaciones se advirtió que había un empate técnico entre las tres opciones estudiadas en los criterios: plataforma de desarrollo y soporte, generando enorme flexibilidad de desarrollo y capacidad de mantenimiento. Se llegó a una decisión teniendo en cuenta los cuatros criterios restantes: 1. Open MRS y OpenEHR Gen Framework son herramientas altamente escalables lo que significa que pueden evolucionar o modificarse en el tiempo. 2. Al nivel de funcionalidades, se visualiza que la fortaleza de Medical radica en su amplia gama de funcionalidades que van desde las gestiones de salud, administrativas, estadísticas entre otras, pero dentro del contexto del programa SOS Telemedicina son funcionalidades que quedan por fuera de los requerimientos planteados. Tanto OpenEHR Gen-Framework como Open MRS necesitarían de programación. En principio no tiene una funcionalidad elevada a la hora de registrar los diferentes procesos médicos que tienen lugar en los centros asistenciales. No obstante, presenta gran flexibilidad al permitir almacenar metadatos, lo que le confiere una gran capacidad para adaptarse a los diversos requisitos que presente cada contexto de trabajo. 3. Open MRS es superior en el despliegue lo que significa que puede ser utilizado bajo múltiples plataformas, sin instalación de otros componentes y tiene muchos usuarios alrededor del mundo, principalmente porque, entre otras cosas, es útil en contextos donde no existen jerarquías u organizaciones claramente definidas, y es necesario mantener información que pueda adaptarse a todo tipo de cambios estructurales y situaciones. Con OpenEHR Gen Framework se puede generar una estructura de roles de los usuarios identificados en los diferentes procesos médicos, y prever todas las interacciones médico-paciente que tengan Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 72 lugar en los diferentes centros asistenciales, con la finalidad de poder realizar estadísticas y analizar los datos. 4. OpenEHR Gen Framework es superior en el criterio estándares, una muestra clara de ser una herramienta futurista que prevé obtener soluciones altamente interoperables, capaz de comunicarse y compartir más que datos, documentos con otros sistemas e instituciones. Este criterio es determinante para la selección de la herramienta a utilizar. Por lo antes expuesto y considerando que en SOS Telemedicina se requiere un sistema de HME altamente escalable con capacidad de intercambio de documentos con otros sistemas de historias médicas electrónicas se recomendó el uso de Open EHR Gen Framework para el desarrollo de la historia médica de SOS Telemedicina. OpenEHR Gen Framework es una herramienta que se apoya en el estándar del mismo nombre, y hace uso además de otros estándares de mensajerías y terminologías. Por tanto tiene un marco conceptual bien afianzado sobre lo que debe ser un sistema de historias médicas. Además OpenEHR Gen Framework no es una herramienta terminada y lista para usar, por el contrario ofrece un «núcleo» que puede ser expandido, mejorado y adaptado según las necesidades. Se puede describir la herramienta dentro del contexto del programa SOS Temedicina como «idónea» para apoyarse en ella para realizar un sistema de HME. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 73 CAPÍTULO V – MARCO APLICATIVO 5.1. Introducción Este capítulo contiene la descripción detallada de la solución software desarrollada, y realiza un acercamiento sobre el contexto de ésta solución. Se exponen las tecnologías utilizadas en el desarrollo de la aplicación, detallando los componentes de la plataforma de desarrollo. Aunque el desarrollo está basado en tecnologías Java, los componentes de «Groovy & Grails» expanden el entorno de desarrollo llevando a la aplicación a otros ambientes más allá de Java. Por su parte Groovy es un lenguaje dinámico ágil para la Plataforma Java con características novedosas, muchas de ellas inspiradas en otros lenguajes de programación. Grails es a la vez un framework para aplicaciones web libre desarrollado sobre el lenguaje de programación Groovy. Un entorno de desarrollo Groovy & Grails garantiza una alta productividad en el desarrollo del software. La solución fue elaborada bajo una metodología de desarrollo ágil, pues se consideró que era la más adecuada según las condiciones dadas desde el inicio del proyecto. De los métodos de desarrollo ágiles se decidió utilizar el de «Programación Extrema», mejor conocido como «XP». La planificación del proyecto se realizó en torno a las iteraciones que fueron definidas según ésta metodología. En este capítulo hace referencia a las actividades realizadas y las decisiones tomadas en el desarrollo de la solución. De las aplicaciones software desarrolladas se describe la arquitectura, el diseño y los detalles de implementación que se consideraron pertinentes exponer. Finalmente se muestran el conjunto de pruebas realizadas sobre el producto final y los resultados obtenidos. 5.1.1 Contexto del proyecto Este proyecto se enmarca dentro del programa SOS Telemedicina y ha sido desarrollado en el contexto del Trabajo Especial de Grado presentado ante la Universidad Central de Venezuela, Facultad de Ciencias, Escuela de Computación, bajo la tutoría del Prof. Robinsón Rivas, para optar al Título de Licenciado en Computación, por parte de los bachilleres: Armando Prieto y Ángel Rodríguez, como integrantes del equipo desarrollador. Participó también en el equipo desarrollador el bachiller Juan Carlos Escalante, estudiante de pregrado de la Universidad Católica Andrés Bello, tutorado por la Prof. Simy Blomer, de la referida universidad. El equipo de desarrollo fue supervisado por la Lic. http://es.wikipedia.org/wiki/Framework_para_aplicaciones_web http://es.wikipedia.org/wiki/Software_libre http://es.wikipedia.org/wiki/Groovy_(lenguaje_de_programaci%C3%B3n) Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 74 Nancy Urbina. La toma de decisiones fue asesorada y compartida en su mayoría con los Drs. Héctor Arrechedera y Jesús Velásquez. Se contó además con la destacada colaboración del Ing. Pablo Pazos, nacional de Uruguay, co-creador de la herramienta OpenEHR Gen Framework y fundador de la comunidad OpenEHR en español (33). 5.2 Detalle de la solución El proyecto consistió en el desarrollo de una solución computacional comprendida por dos aplicaciones de software. La primera, un sistema de HME, encargado de registrar expedientes de historias médicas en un centro de cuidado. La segunda, un IMP, que permite a distintos sistemas de HME (incluyendo al desarrollado en esta solución), compartir registros de historias médicas. El sistema de HME desarrollado, SOS-HME, está basado en el estándar OpenEHR, descrito en las especificaciones de su modelo de referencia y es compatible con ADL 1.4. Se utilizó el núcleo de la herramienta OpenEHR Gen Framework como base para desarrollar el sistema SOS-HME. SOS-HME permite el registro de historias médicas electrónicas. Dentro del sistema los registros clínicos se clasifican por dominios de trabajo, los dominios pueden ser por ejemplo, pediatría, cardiología, trauma, etc. La composición de cada dominio es particular, posee unas secciones y las secciones tienen diferentes entradas de cuidado. En las entradas de cuidado se registran los valores propios resultantes del acto de asistencia médica. Las secciones y las entradas de cuidados están determinadas por las estructuras definidas en los arquetipos existentes en la base de arquetipos de la aplicación SOS-HME. Para un dominio de trabajo existe un grupo de plantillas, cada plantilla está dividida en secciones, y cada sección contiene un conglomerado de arquetipos, como ya se dijo, cada arquetipo modela las entradas de cuidado. SOS-HME es capaz de adaptarse y modelar cualquier estructura de datos que pueda ser definida mediante arquetipos, pertenecientes a la versión ADL 1.4. En otras palabras, el sistema es capaz de transformarse, de mutar o adaptarse a las necesidades de un centro de atención sanitaria. Basta definir las plantillas y los arquetipos, según lo que se quiera registrar, alojarlos en la base de arquetipos de la aplicación y configurar unos pocos parámetros de entrada, para que la aplicación formule unas estructuras capturadoras de datos fieles a los arquetipos definidos. Cada registro clínico que se realiza tiene un estado asociado definido por la «máquina de estados» de registros clínicos. Es necesario destacar que cada registro clínico tiene asociado un responsable (puede no ser la persona que ha realizado la transcripción en Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 75 el computador), éste es el encargado de «firmar y cerrar» un registro clínico. Está definido que el responsable sea un usuario del sistema que posea el rol de médico. Dentro del sistema SOS-HME la historia médica está conformada por un conglomerado de registros clínicos realizados a lo largo de la vida de un sujeto de cuidado. SOS-HME puede agrupar por paciente todos los registros clínicos asociados a él, los registros asociados pueden ser internos o externos. Los internos son los propios del sistema, realizados en el centro de atención sanitaria. Los externos son aquellos que han sido importados desde otros sistemas de HME. Los registros importados cumplen con la arquitectura de documentos clínicos «CDA R2» definida por HL7. Así mismo, cada registro clínico creado en el sistema, que posea un estado firmado y cerrado, puede ser compartido con otros sistemas de HME, utilizando el mismo formato CDA R2. Para esto último es necesario un índice maestro de pacientes, que sirva de intermediario entre cada uno de los sistemas de HME involucrados en el intercambio. El IMP desarrollado, SOS-IMP, es el encargado de hacer posible la compartición de documentos clínicos en formato CDA R2 entre sistemas heterogéneos de HME. Bajo un esquema centralizado el SOS-IMP ofrece una serie de servicios web SOAP a través de internet. Estos servicios pueden ser consumidos por cualquier sistema HME que haya sido suscrito previamente al SOS-IMP. Es importante destacar la heterogeneidad que pueda tener cada sistema conectado al SOS-IMP. Cada sistema de HME puede ser distinto, con una estructura de datos diferente, con manejadores de bases de datos cualesquiera. Lo importante es que todos ellos conozcan y hagan uso correcto del estándar CDA R2, cuestión que va a permitir el intercambio satisfactorio de documentos clínicos. 5.3 Plataforma de desarrollo Como consecuencia de la evaluación realizada sobre las herramientas de HME presentadas en el capítulo anterior, la herramienta selecciona fue OpenEHR Gen Framework. Dicha herramienta está basada en tecnologías «Java». Para ser específicos la herramienta seleccionada está programada bajo un framework para aplicaciones web llamado Grails. A su vez Grails se basa en Groovy, un lenguaje dinámico ágil basado en Java. A fin de cuentas existe un precepto para desarrolladores que sirve para entender un entorno de desarrollo basado en Groovy & Grails, en ingles reza así «Just to convince yourself that Groovy is Java» (34), en español la traducción sería «Convéncete de que Groovy es Java». En la sección «Plataforma de desarrollo» se describe con detenimiento el marco de trabajo Groovy & Grails, ver Figura 19. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 76 Figura 19. Groovy & Grails Fuente: Elaboración propia El patrón de diseño utilizado fue «MVC + Servicios», respetando el marco de trabajo de Grails. El patrón MVC, modelo, vista, controlador, es ampliamente usado en aplicaciones web, este separa los datos de la aplicación, la interfaz de usuario, y la lógica de negocio en tres componentes distintos. A esto se le suma la integración de los servicios, los cuales sirven para desvincular a los controladores de realizar tareas complejas, repetitivas y transversales entre distintos controladores. Los servicios son los encargados de realizar las tareas complejas de la lógica de negocio. De la misma manera respetando el marco de trabajo de Grails, se utilizó la herramienta de mapeo objeto-relacional «Hibernate», haciendo uso del motor generador propio del framework de nombre «GORM». Además se eligió «MySQL» como manejador de bases de datos. La opción por este manejador de base de datos se fundamenta en la gran experiencia de desarrollo disponible en la web compartida por grupos de desarrolladores y comunidades virtuales, además este manejador puede ser utilizado bajo licencia open- source. 5.3.1 Groovy Groovy es un lenguaje dinámico ágil para la Plataforma Java, con muchas características que están inspiradas en lenguajes como Python, Ruby y Smaltalk, haciéndole posible a los desarrolladores Java, usar una sintaxis similar a Java. Este lenguaje añade y simplifica elementos propios de la sintaxis de Java, está sobrentendido que todo lo que se hace en Groovy puede hacerse en Java, sin embargo según Dierk König y otros «sería una locura escribir todo el código Java necesario para realizar la magia de Groovy» (35). Desde Groovy se puede tener acceso a todas las librerías de aplicación de Java existentes, el byte code generado por el compilador de Groovy es completamente compatible para la Java Virtual Machine (JVM). Además, casi todo el código escrito en Java es compatible con Groovy. Aunque sus versiones beta datan desde 2003, apareció formalmente Groovy 1.0 para el 2 de enero de 2007, para la fecha en la que se escribe este documento la última versión de Groovy es la 1.8.6 de 9 de febrero de 2012. Fue creado por la Java Community Process http://es.wikipedia.org/wiki/Datos http://es.wikipedia.org/wiki/Interfaz_de_usuario http://es.wikipedia.org/wiki/L%C3%B3gica_de_negocio http://es.wikipedia.org/wiki/L%C3%B3gica_de_negocio http://es.wikipedia.org/wiki/Componentes Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 77 (JCP), éste es un proceso formalizado que data desde 1998 que permite a partes de la comunidad Java involucrarse en nuevas versiones y características de la plataforma Java. 5.3.2 Grails Grails es un framework para aplicaciones web libre desarrollado sobre el lenguaje de programación Groovy. Grails pretende ser un marco de trabajo altamente productivo que hace uso de paradigmas de programación novedosos (36). Figura 20. Pila completa de Grails Fuente: Adaptado de Rocher, Graeme y Brown, Jeff. The Definitive Guide to Grails, Second Edition. s.l. : Apress, 2009. Se observa en la Figura 20 que Grails está compuesto por algunas de las más populares tecnologías de código abierto en cada una de sus categorías:  Hibernate: el estándar de facto para el mapeo de objetos relacionales (ORM) en el mundo de java.  Spring: framework de código abierto para desarrolladores Java.  SiteMesh: un robusto y estable framework para renderizado de layout.  Jetty: un comprobado recipiente capaz de integrar servlets.  HSQLDB: sistema gestor de bases de datos relacionales. http://es.wikipedia.org/wiki/Framework_para_aplicaciones_web http://es.wikipedia.org/wiki/Software_libre http://es.wikipedia.org/wiki/Groovy_(lenguaje_de_programaci%C3%B3n) Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 78  MVC El funcionamiento general del framework sigue el patrón Modelo-Vista-Controlador (MVC), a continuación se describen en detalle los componentes de este patrón implementado en Grails.  Clases de Dominio Las aplicaciones orientadas a objetos (OO), casi todas, representan en el modelo de dominio las entidades de negocio. Los desarrolladores de aplicaciones orientadas a objetos tienden a tener problemas en el mapeo de objetos con bases de datos de tipo relacional. No radica el problema en que sea complicado manipular bases de datos relaciones, la dificultad está en que normalmente no se encuentra una correspondencia directa entre el modelo de objetos y el modelo relacional de base de datos centrado en tablas. Grails es un framework que se encarga de hacer la correspondencia entre el modelo de objetos y el modelo relacional de base de datos, liberando así al programador de ésta tarea. A través de las clases de dominio se define a su vez la estructura de la base de datos, los campos de una tabla y sus relaciones con otras tablas, inclusive se pueden definir restricciones sobre esos campos e indicar el tipo de relación que se desea. Grails provee soporte para distintos tipos de relaciones entre los modelos de dominio, entre estas destacan: la agregación simple «hasOne», la relación de pertenencia «belongsTo» y la relación de tiene muchos «hasMany».  Controladores Un controlador en Grails es una clase que está encargada de manejar las peticiones de la aplicación. Generalmente el controlador recibe una petición, luego realiza alguna acción asociada a esta y por último decide que va a suceder luego. Las opciones que tiene un controlador luego de realizar una acción a partir de una petición son las siguientes:  Ejecutar otra acción, no necesariamente dentro del mismo controlador.  Desplegar una vista.  Renderizar alguna información como respuesta sin necesidad de llamar a una vista. Como se dijo anteriormente un controlador en una clase, de esta clase se crea siempre una nueva instancia por cada petición. Los desarrolladores no necesitan preocuparse de mantener un hilo seguro de ejecución como lo fuese dentro de un patrón de controladores de tipo singleton. Se pueden ver los controladores como los encargados de orquestar el comportamiento de la aplicación. Estos son el punto de entrada principal para una Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 79 aplicación, pueden delegar tareas a un servicio o interactuar con las clases de dominio para manejar la lógica del negocio, y renderizar vistas.  Vistas Las vistas en Grails son invocadas desde un controlador. El controlador es el encargado de enviar a la vista el «modelo». El modelo es un conjunto de variables y objetos que es utilizado por la vista para generar una interfaz. En el mundo de aplicaciones open-source basadas en Java existen un sin número de tecnologías de generación de vistas. Sin embargo «Java Server Pages sigue siendo la más popular tecnología de generación de vistas» Dierk König. [54] Java Server Pages (JSP) fue creado por Sun Microsystems para competir con Microsoft Active Server Pages (ASP). Sin embargo, a pesar de la madurez, robustez y familiaridad que JSP pueda tener Grails utiliza una tecnología de generación de vistas distinta llamada Groovy Server Pages (GSP). Las ventajas de GSP radican en el tiempo de ejecución:  Groovy ofrece un lenguaje de expresión mucho más potente debido a las expresiones GPath (librería de etiquetas), y la notación propia del lenguaje.  Otras características Groovy como soporte para expresiones regulares, GStrings (manejo particular de tipos de datos String), y una expresión de sintaxis para los tipos de datos Map y List lo hacen perfecto para una tecnología de visión.  Servicios Un patrón común en el desarrollo de software empresarial es la capa de servicios. Es considerada en general una buena práctica poseer una capa de servicios ya que permite centralizar el comportamiento complejo de una aplicación en una API que puede ser reutilizada por otros controladores y servicios. Los servicios en Grails al igual que los controladores son «clases».Pero a diferencia de los controladores, los servicios pueden ser «inyectados» en controladores y otros servicios, de acuerdo al patrón de diseño «Control de Inversión» (IoC), por su nombre en ingles, Inversion of Control), el cual explicamos anteriormente que mantiene la filosofía de «no me llames, yo te llamaré». De ahí la limitante de que un servicio no pueda invocar una instancia de un controlador, pues estaría en contra de este principio.  GORM Grails Object Relational Mapping, mejor conocido como GORM, es el motor de Grails que se encarga de hacer el mapeo objeto-relacional del cual se habla anteriormente Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 80 en «clases de dominio». Está basado en Hibernate, motor objeto-relacional muy utilizado en entornos Java. Automáticamente GORM genera los «métodos» necesarios relacionados con la persistencia de los objetos, tales como: guardar «save», editar «update» y eliminar «delete». Las búsquedas pueden realizarse de múltiples formas, ya sea mediante; «dynamic finders», los cuales permiten realizar búsquedas utilizando nombres de atributos de objetos buscados; o mediante el uso de «criterios», que permite realizar consultas más complejas; o inclusive utilizar Hibernate Sequence Query Language (HSQL) para consultas que sobrepasan en complejidad a los criterios y a los dynamic finders. Dejando a juicio de los desarrolladores utilizar el método de búsqueda que mejor convenga en determinando momento. GORM además permite gestionar un «política de caché», sobre objetos persistidos en memoria, para ser eficaz sobre consultadas repetidas al no buscar objetos que aún permanecen en memoria Por último, tal como se dijo anteriormente en este documento, en las definiciones de las clases de dominio se pueden colocar restricciones sobre los atributos. GORM es el encargado de validar dichas restricciones, de manera que si un objeto que necesita ser persistido no cumple con las restricciones de su clase de dominio, GORM no realiza el salvado del objeto y retorna una «colleccion» de errores sobre el método save invocado.  Plugins Los plugins en Grails son un elemento clave. Grails en sí mismo es un plugin que en tiempo de ejecución tiene el conocimiento necesario para cargar y configurar el resto de plugins incluidos en la aplicación. La idea del trabajar bajo un enfoque orientado a plugins, razonablemente puede estar en la capacidad de dividir la aplicación en pequeñas partes que pueden ser mantenidas por separado y que puedan ser compuestas y trabajar como un todo en tiempo de ejecución. La comunidad de Grails encargada de crear plugins es bastante activa, al momento de escribir este documento, están activos 768 plugins en total. Es decir, 768 complementos de software que expanden las funcionalidades del nucleo de Grails, pero que también pueden llevar a ocasionar errores por posibles incompatibilidades entre ellos. 5.3.3 Sistema Manejador de Base de Datos  MySQL Es un sistema de gestión de bases de datos relacionales, multi-hilo y multi-usuario. MySQL es muy utilizado en aplicaciones open source web y de escritorio. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 81 Es un manejador ideal para aplicaciones web, pues garantiza una rápida lectura sobre los datos, y tiene un mejor desempeño en un entorno de baja concurrencia de escritura. Según las cifras del propio fabricante, existen más de seis millones de copias de MySQL funcionando en la actualidad, lo que supera la base instalada de cualquier otra herramienta de bases de datos. 5.4 Gestión del proyecto 5.4.1 Metodología de desarrollo Se consideró pertinente utilizar una metodología de desarrollo ágil. Hacer uso de una metodología ágil promueve el desarrollo de iteraciones a lo largo de la vida del proyecto. Por lo general al final de cada iteración se cuenta con una versión funcional del sistema. De los métodos de desarrollo ágiles se decidió utilizar el de «Programación Extrema», mejor conocido como «XP», acrónimo de sus siglas en ingles. Se privilegia la metodología XP frente al resto de metodologías ágiles porque ésta pone el énfasis en la adaptabilidad del desarrollo más que sobre la previsibilidad. Esto no quiere decir que bajo un enfoque de trabajo XP el grupo de desarrollo no sea previsivo de lo necesario para el cumplimiento de los requerimientos y mucho menos que la planificación del proyecto carezca de profundidad. Por el contrario, en la metodología XP se considera que los cambios de los requisitos sobre la marcha son un aspecto natural, inevitable y en muchos casos indeseable. Por tano ser capaz de adaptarse a los posibles cambios de los requisitos durante la vida del proyecto es una aproximación mejor y más real que intentar definir todos los requisitos al mínimo detalle para luego invertir esfuerzos en controlar que no cambien. Las características fundamentales de la programación extrema son: simplicidad, comunicación, retroalimentación y coraje (37).  Simplicidad: es la base de la programación extrema. Dividir el problema en pequeñas partes alcanzables es una buena práctica. Los diseños iniciales deben ser simples y a medida que el proyecto crece deben ser redefinidos para evitar que la complejidad aumente en forma desmedida. La programación extrema apuesta que es más sencillo hacer algo simple y tener un poco de trabajo extra para cambiarlo si se requiere, que realizar algo complicado y quizás nunca utilizarlo.  Comunicación: debe ser constante entre programadores y fluida con el cliente. El cliente forma parte del equipo de desarrollo. Se considera que el código Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 82 autodocumentado es más fiable y debe documentarse solo aquello que no va a variar, por ejemplo el objetivo de una clase o un método.  Retroalimentación: se realiza un reacomodo al final de cada ciclo iterativo, de manera de reorientar el proyecto en base a satisfacer los requisitos restantes y/o realizar modificaciones sobre partes desarrolladas que no alcanzan a los requisitos planteados. La opinión del cliente es muy importante y se conoce en tiempo real.  Coraje: le permite a los desarrolladores sentirse cómodos por construir su código cuando sea necesario. Esto significa revisar el estado del sistema existente y realizar cambios sobre lo creado si estos cambios a futuro repercuten en una implementación más simple. Un ejemplo tangible de coraje es saber cuándo desechar código obsoleto, sin importar el tiempo y el esfuerzo invertido en crearlo. Se considera que esta metodología adopta las mejores características del resto de las metodologías de desarrollo, y que se aplican de acuerdo a la realidad del proyecto durante el ciclo de vida de la creación del software. 5.4.2 Panificación del proyecto En este apartado se describe la planificación inicial del proyecto en base a las iteraciones involucradas en el proceso. Cada iteración consta de un número de tareas relacionadas entre sí, que se encuentran clasificadas según por tipo. Los tipos de tareas se describen a continuación:  Aprendizaje: actividades relacionadas con la obtención de conocimientos por parte del equipo de desarrollo.  Análisis: actividad en la que es necesario estudiar una situación determinada dentro de un contexto.  Retroalimentación: tareas que permite al equipo de desarrollo compartir información y nutrirse de los conocimientos generados durante la realización de tareas anteriores.  Diseño: creación o definición de comportamiento de alguna entidad o conjunto.  Implementación: tareas de desarrollo o aplicación de diseños previamente elaborados.  Prueba: observación sobre el funcionamiento de un componente.  Presentación: dar a conocer o comunicar el estado alcanzado.  Iteración 1: Análisis de funcionamiento de OpenEHR Gen Framework Se realizó ésta iteración en el período de tiempo comprendido desde el 20/10/11 hasta el 30/11/11. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 8- 19. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 83 Tabla 8. Iteración 1, Tarea 1 TAREAS Nombre de tarea: Estudiar libro «Grails in Action» Tarea: 1 Predecesora: - Tipo de tarea: Aprendizaje Responsable: Equipo desarrollador Descripción: Estudiar libro «Grails in Action» (34) , de manera que el grupo de desarrolladores aprenda los elementos básicos para desarrollar aplicaciones en un ambiente Groovy & Grails. Nota. Fuente: Elaboración propia Tabla 9. Iteración 1, Tarea 2 TAREAS Nombre de tarea: Estudiar libro «Groovy in Action» Tarea: 2 Predecesora: - Tipo de tarea: Aprendizaje Responsable: Equipo desarrollador Descripción: Estudiar libro «Groovy in Action» (35) , de manera que el grupo de desarrolladores se familiarice con la sintaxis y elementos novedosos del lenguaje dinámico basado en Java. Nota. Fuente: Elaboración propia Tabla 10. Iteración 1, Tarea 3 TAREAS Nombre de tarea: Identificar punto de entrada del sistema Tarea: 3 Predecesora: 1, 2 Tipo de tarea: Análisis Responsable: Armando Prieto Descripción: Identificar elementos referenciados en el punto de carga del sistema, en el archivo de configuración «BootStrap.groovy». Nota. Fuente: Elaboración propia Tabla 11. Iteración 1, Tarea 4 TAREAS Nombre de tarea: Identificar parámetros de configuración Tarea: 4 Predecesora: 1, 2 Tipo de tarea: Análisis Responsable: Juan Escalante Descripción: Identificar los parámetros de configuración presentes en el archivo de configuración «Config.groovy». Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 84 Nota. Fuente: Elaboración propia Tabla 12. Iteración 1, Tarea 5 TAREAS Nombre de tarea: Seguridad y control de acceso Tarea: 5 Predecesora: 1, 2 Tipo de tarea: Análisis Responsable: Ángel Rodríguez Descripción: Identificar los elementos de seguridad y control de acceso utilizados en la herramienta. Nota. Fuente: Elaboración propia Tabla 13. Iteración 1, Tarea 6 TAREAS Nombre de tarea: Reunión de control Tarea: 6 Predecesora: 3, 4, 5 Tipo de tarea: Retroalimentación Responsable: Equipo desarrollador Descripción: Compartir los resultados obtenidos en las tareas 3, 4 y 5. Nota. Fuente: Elaboración propia Tabla 14. Iteración 1, Tarea 7 TAREAS Nombre de tarea: Proceso de generación de CDA´s Tarea: 7 Predecesora: 6 Tipo de tarea: Análisis Responsable: Armando Prieto Descripción: Determinar el método de generación de documentos CDA que posee la herramienta. Nota. Fuente: Elaboración propia Tabla 15. Iteración 1, Tarea 8 TAREAS Nombre de tarea: Vistas, plantillas y CSS Tarea: 8 Predecesora: 6 Tipo de tarea: Análisis Responsable: Ángel Rodríguez Descripción: Examinar el total de vistas y plantillas presentes en la herramienta. Examinar los distintos documentos de cascada de hojas de estilo existentes. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 85 Tabla 16. Iteración 1, Tarea 9 TAREAS Nombre de tarea: Controladores y modelo de dominio Tarea: 9 Predecesora: 6 Tipo de tarea: Análisis Responsable: Juan Escalante Descripción: Examinar el total de controladores y clases de dominio presentes en la herramienta. Nota. Fuente: Elaboración propia Tabla 17. Iteración 1, Tarea 10 TAREAS Nombre de tarea: Servicios Tarea: 10 Predecesora: 6 Tipo de tarea: Análisis Responsable: Armando Prieto Descripción: Examinar el total de servicios existentes en la herramienta. Identificar métodos principales. Nota. Fuente: Elaboración propia Tabla 18. Iteración 1, Tarea 11 TAREAS Nombre de tarea: Reunión de control Tarea: 11 Predecesora: 7, 8, 9, 10 Tipo de tarea: Retroalimentación Responsable: Equipo desarrollador Descripción: Compartir los resultados obtenidos en las tareas 7, 8, 9 y 10. Nota. Fuente: Elaboración propia Tabla 19. Iteración 1, Resultado RESULTADOS Nombre resultado: Conocimientos obtenidos resultado: 1 Responsable: Equipo desarrollador Descripción: Conocimiento sobre el framework y lenguaje en que fue desarrollada la herramienta, un mejor entendimiento sobre las partes que componen la herramienta y su funcionamiento. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 86  Iteración 2: Definición de historia médica básica integral Se realizó ésta iteración en el período de tiempo comprendido desde el 01/09/11 hasta el 30/12/11. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 20- 26. Tabla 20. Iteración 2, Tarea 12 TAREAS Nombre de tarea: Definición de formato HME integral Tarea: 12 Predecesora: - Tipo de tarea: Diseño Responsable: Equipo desarrollador, médicos especialistas Descripción: Definir en una mesa de trabajo con la ayuda de médicos especialistas el formato que debe tener una historia médica integral. Nota. Fuente: Elaboración propia Tabla 21. Iteración 2, Tarea 13 TAREAS Nombre de tarea: Creación de arquetipos y templates Tarea: 13 Predecesora: 12 Tipo de tarea: Diseño e implementación Responsable: Equipo desarrollador Descripción: Diseño e implementación de los arquetipos y templates que modelan los conceptos clínicos definidos en el formato de HME integral. Estos son: -Interrogatorio. -Motivo de Consulta. -Exploración funcional. -Enfermedad actual. -Examen físico. -Tratamiento. -Diagnóstico. -Movimiento de paciente. Nota. Fuente: Elaboración propia Tabla 22. Iteración 2, Tarea 14 TAREAS Nombre de tarea: Instalación y prueba unitarias de arquetipos y templates Tarea: 14 Predecesora: 13 Tipo de tarea: Prueba Responsable: Equipo desarrollador Descripción: Pruebas sobre de funcionamiento sobre los arquetipos y templates creados. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 87 Nota. Fuente: Elaboración propia Tabla 23. Iteración 2, Tarea 15 TAREAS Nombre de tarea: Reunión de control Tarea: 15 Predecesora: 14 Tipo de tarea: Retroalimentación Responsable: Equipo desarrollador Descripción: Evaluar los resultados obtenidos en las pruebas de funcionalidades realizadas sobre los arquetipos y templates. Nota. Fuente: Elaboración propia Tabla 24. Iteración 2, Tarea 16 TAREAS Nombre de tarea: Modificación de arquetipos y templates Tarea: 16 Predecesora: 15 Tipo de tarea: Diseño e implementación Responsable: Equipo desarrollador Descripción: Modificar los arquetipos y templates según las deficiencias y problemas encontrados en la instalación y pruebas, según los resultados obtenidos de la evaluación realizada sobre estos. Nota. Fuente: Elaboración propia Tabla 25. Iteración 2, Tarea 17 TAREAS Nombre de tarea: Presentación de estructura final de arquetipos y templates Tarea: 17 Predecesora: 16 Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Presentar las formas finales obtenidas en los arquetipos y templates que modelan la historia médica integral. Nota. Fuente: Elaboración propia Tabla 26. Iteración 2, Resultados RESULTADOS Nombre resultado: Prototipo de historia médica integral. resultado: 2 Responsable: Equipo desarrollador Descripción: Dominio de historia médica integral aprobado por especialistas e implantado correctamente. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 88  Iteración 3: Interoperabilidad Se realizó ésta iteración en el período de tiempo comprendido desde el 01/12/11 hasta el 31/01/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 27-31. Tabla 27. Iteración 3, Tarea 18 TAREAS Nombre de tarea: Creación de SOS-IMP Tarea: 18 Predecesora: - Tipo de tarea: Diseño e implementación Responsable: Armando Prieto Descripción: Creación de la aplicación índice maestro de pacientes, SOS-HME. Implementación de servicios web para la compartición de documentos clínicos entre distintos centros de salud. Basado en políticas HL7 PIX y PDQ. Nota. Fuente: Elaboración propia Tabla 28. Iteración 3, Tarea 19 TAREAS Nombre de tarea: Políticas de seguridad sobre servicios web Tarea: 19 Predecesora: 18 Tipo de tarea: Diseño e implementación Responsable: Armando Prieto Descripción: Establecimiento de mecanismos de seguridad mediante WS-SECURITY sobre servicios web SOAP. Garantizar en el intercambio de documentos clínicos la autenticidad, la integridad y la confidencialidad del mensaje. Nota. Fuente: Elaboración propia Tabla 29. Iteración 3, Tarea 20 TAREAS Nombre de tarea: Acoplamiento de SOS-HME con SOS- IMP Tarea: 20 Predecesora: 19 Tipo de tarea: Diseño e implementación Responsable: Armando Prieto Descripción: Integración del sistema de historias médicas electrónicas con el índice maestro de pacientes. Consiste en consumir desde SOS-HME los servicios web ofrecidos por el SOS-IMP. Cumplir con las políticas de seguridad establecidas. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 89 Tabla 30. Iteración 3, Tarea 21 TAREAS Nombre de tarea: Pruebas unitarias sobre SOS-IMP Tarea: 21 Predecesora: 20 Tipo de tarea: Pruebas Responsable: Armando Prieto Descripción: Realización de pruebas sobre el intercambio de documentos clínicos. Se utilizan varios clientes SOS-HME como distintos centros de atención conectados al SOS-IMP. Nota. Fuente: Elaboración propia Tabla 31. Iteración 3, Resultados RESULTADOS Nombre resultado: Interoperabilidad implantada. resultado: 3 Responsable: Equipo desarrollador Descripción: Se logró el enlace entres las aplicaciones SOS-IMP y SOS-HME, mediante el consumo de servicios web. Nota. Fuente: Elaboración propia  Iteración 4: Diseño de interfaz gráfica Se realizó ésta iteración en el período de tiempo comprendido desde el 13/12/11 hasta el 31/03/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 32- 35. Tabla 32. Iteración 4, Tarea 22 TAREAS Nombre de tarea: Reunión con equipo de diseño Tarea: 22 Predecesora: 3 Tipo de tarea: Presentación Responsable: Equipo desarrollador, Equipo de diseñadores gráficos Descripción: Compartir ideas y visiones de manera que se pueda definir en una mesa de trabajo las pautas principales de una interfaz gráfica para el sistema SOS-HME. Las principales interfaces a modelar son: -Acceso principal. -Registro de pacientes. -Registro de episodios clínicos. -Reportes EPI. -Consulta de historias por paciente. -Administración del sistema. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 90 Tabla 33. Iteración 4, Tarea 23 TAREAS Nombre de tarea: Creación de hojas de estilos para interfaz gráfica Tarea: 23 Predecesora: 22 Tipo de tarea: Diseño Responsable: Equipo de diseñadores gráficos Descripción: Creación de hojas de estilo CSS para interfaces gráficas de la aplicación SOS- HME. Nota. Fuente: Elaboración propia Tabla 34. Iteración 4, Tarea 24 TAREAS Nombre de tarea: Integración de hojas de estilo y adaptación de interfaz gráfica Tarea: 24 Predecesora: 23 Tipo de tarea: Presentación Responsable: Armando Prieto Juan Escalante Descripción: Adaptar la interfaz gráfica por defecto de OpenEHR GEN Framework a la definida para SOS-HME. Consiste en realizar cambios a los layouts y vistas existentes, y crear nuevos de ser necesario. Incorporar las hojas de estilo creadas por el equipo de diseñadores. Nota. Fuente: Elaboración propia Tabla 35. Iteración 4, Resultados RESULTADOS Nombre resultado: Nueva interfaz gráfica implementada resultado: 4 Responsable: Equipo desarrollador Descripción: Se implementó la nueva interfaz gráfica Nota. Fuente: Elaboración propia  Iteración 5: Acceso y autorización Se realizó ésta iteración en el período de tiempo comprendido desde el 01/11/11 hasta el 15/03/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 36- 38. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 91 Tabla 36. Iteración 5, Tarea 25 TAREAS Nombre de tarea: Creación de administración de usuarios del sistema. Tarea: 25 Predecesora: - Tipo de tarea: Diseño e implementación Responsable: Ángel Rodríguez Descripción: Adecuación de modelo de dominio para las necesidades de una administración de usuarios. Creación de controladores y vistas para la administración de usuario. Establecer Mecanismos de seguridad para la manipulación de claves de usuarios en la administración del sistema. Nota. Fuente: Elaboración propia Tabla 37. Iteración 5, Tarea 26 TAREAS Nombre de tarea: Adecuación de accesos en la aplicación. Tarea: 26 Predecesora: - Tipo de tarea: Diseño e implementación Responsable: Ángel Rodríguez Descripción: Establecimiento de reglas de acceso a ciertas áreas y funcionalidades de la aplicación de acuerdo a los roles de usuario antes definidos. Implementación de los mecanismos necesarios para que dichas reglas de acceso se cumplan a cabalidad. Nota. Fuente: Elaboración propia Tabla 38. Iteración 5, Resultados RESULTADOS Nombre resultado: Módulo de administración de usuarios resultado: 5 Responsable: Equipo desarrollador Descripción: Prototipo de la aplicación con módulo agregado de administración de usuarios y manejo de roles. Nota. Fuente: Elaboración propia  Iteración 6: Definición historia médica materno infantil Se realizó ésta iteración en el período de tiempo comprendido desde el 15/03/12 hasta el 15/04/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 39- 40. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 92 Tabla 39. Iteración 6, Tarea 27 TAREAS Nombre de tarea: Definición de formato HME materno infantil Tarea: 27 Predecesora: - Tipo de tarea: Diseño Responsable: Ángel Rodríguez, médicos especialistas Descripción: Definir en varias reuniones con médicos especialistas y a partir de una serie de documentos de historias médicas materno infantil recopilados un formato de historia materno-infantil. Nota. Fuente: Elaboración propia Tabla 40. Iteración 6, Resultados RESULTADOS Nombre resultado: Formato de historia materno infantil Resultado: 6 Predecesora: 3 Responsable: Equipo desarrollador Descripción: Propuesta de formato de historia materno infantil. Nota. Fuente: Elaboración propia  Iteración 7: Pruebas integrales Se realizó ésta iteración en el período de tiempo comprendido desde el 01/04/12 hasta el 04/05/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 41- 46. Tabla 41. Iteración 7, Tarea 28 TAREAS Nombre de tarea: Evaluación del sistema por parte del Dr. Jesús Velásquez Tarea: 28 Predecesora: Tipo de tarea: Evaluación Responsable: Armando Prieto Juan Escalante Descripción: Evaluación del funcionamiento del sistema por parte del Dr. Jesús Velásquez. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 93 Tabla 42. Iteración 7, Tarea 29 TAREAS Nombre de tarea: Charla y realización de pruebas con estudiantes de 4to y 5to año de medicina Tarea: 29 Predecesora: Tipo de tarea: Evaluación Responsable: Nancy Urbina Descripción: Charla divulgativa a estudiantes de 4to y 5to año de medicina. Realización de pruebas por parte de los estudiantes asistentes a la charla. Nota. Fuente: Elaboración propia Tabla 43. Iteración 7, Tarea 30 TAREAS Nombre de tarea: Presentación formal del sistema Tarea: 30 Predecesora: Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Presentación formal de la herramienta por parte del equipo de desarrollo a los Doctores y al personal del Programa SOS Telemedicina. Nota. Fuente: Elaboración propia Tabla 44. Iteración 7, Tarea 31 TAREAS Nombre de tarea: Reunión con la directiva del programa SOS Telemedicina Tarea: 31 Predecesora: Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Reunión con la directiva del programa para determinar correcciones pertinentes sobre el sistema SOS-HME. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 94 Tabla 45. Iteración 7, Tarea 32 TAREAS Nombre de tarea: Realización de correcciones Tarea: 32 Predecesora: Tipo de tarea: Presentación Responsable: Equipo desarrollador Descripción: Realización de correcciones en base a las correcciones realizadas por la directiva del programa SOS Telemedicina. Nota. Fuente: Elaboración propia Tabla 46. Iteración 7, Tarea 33 RESULTADOS Nombre resultado: Aprobación de la solución Resultado: 33 Predecesora: 4 Responsable: Equipo desarrollador Descripción: Aprobación de la solución por parte del equipo de SOS Telemedicina Nota. Fuente: Elaboración propia 5.5 Sos Historia Médica Según los requerimientos de este proyecto se diseñó e implementó un sistema de historias médicas electrónicas. Se muestra a continuación su arquitectura (basada en OpenEHR Gen Framework), sus componentes en detalle y algunas tareas propias de la implementación que se consideraron pertinentes reflejar. En el apartado de arquitectura se podrá examinar la estructura del sistema desde diferentes ópticas para facilitar una mejor compresión. 5.5.1 Arquitectura La aplicación SOS-HME está basada en OpenEHR Gen Framework, se describe la arquitectura general de la aplicación, sus principales componentes y las relaciones existentes entre ellos. Se describen los componentes desde diferentes ópticas para poder apreciar en totalidad su funcionamiento.  Vista por componentes Los principales componentes son el clínico, demográfico, reportes y servicios. El componente clínico es aquel que está encargado del registro y muestra de la información clínica. El componente demográfico ofrece las funcionalidades de gestión de personas y roles. El componente de reportes es el encargado de generar informes estadísticos basados en los registros clínicos. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 95 También cuenta la aplicación con un componente dedicado a realizar las tareas de interoperabilidad. La Figura 21 ilustra los componentes de la aplicación. Figura 21. Componentes SOS-HME Fuente: Elaboración propia  Vista por capas Debido a que el framework está implementado bajo un patrón MVC + Servicios, las capas del sistemas preservan este orden. La Figura 22 muestra las capas del sistema. Figura 22. Capas SOS-HME Fuente: Basado en Pazos, Pablo y Carrasco, Leandro. TRAUMAGEN. 2010.  Vista o GUI: permite al usuario interactuar con el sistema.  Controladores: encargado de procesar las peticiones realizadas por el usuario, verificar si se cumplen las condiciones necesarias para ejecutar dichas acciones y por último realizar una tarea. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 96  Modelo: compone el modelo de referencia (RM) de OpenEHR, para información clínica y demográfica.  Servicios: realizan tareas repetitivas y complejas simplificando el trabajo a los controladores. Se destacan los servicios demográficos, los servicios clínicos y los servicios de comunicación con otros sistemas.  Persistencia: esta capa está compuesta por tres bases de datos. La primera, una base de datos objeto-relacional que almacena información clínica-demográfica directamente. La segunda base de datos, es una base de conocimiento clínico formada por arquetipos y plantillas. Por último existe un repositorio documental, donde los registros son agrupados y organizados en documentos, análogos a los registros en papel, que cumplen con la norma CDA.  Vista de funcionalidades En la Figura 23 se muestran las funcionalidades principales del sistema. Figura 23. Principales funcionalidades SOS-HME Fuente: Elaboración propia  Crear registro clínico: la creación de episodio registra la hora de comienzo y una observación referente al episodio a registrar. Al crear el episodio el equipo médico puede comenzar a registrar información clínica.  Registro clínico: esta funcionalidad permite el registro de información relevante durante el proceso asistencial.  Firma del registro clínico: al culminar la atención médica o completado el registro clínico, habiendo previamente identificado al paciente, se procede a Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 97 firmar el registro. El responsable de realizar la firma es el médico responsable de la atención del referido paciente. Un registro clínico firmado es un documento médico-legal inalterable, respaldado por un documento clínico en formato CDA.  Reapertura de registro clínico: permite en casos que requieran por alguna circunstancia especial reabrir un registro clínico. En la base de datos documental el registro anterior permanece sin cambios, pues es un documento médico-legal que no puede ser eliminado.  Generación de documentos clínicos: una vez cerrado y firmado un documento clínico, se genera un documento en formato CDA, contentivo de todos los datos plasmados en el registro clínico.  Registro demográfico: se encarga de manejar toda la información de las personas y roles. Todas las personas que participan en un acto médico deben estar registradas previamente en este componente.  Ver historia médica: permite consultar toda la información clínica correspondiente a un paciente. La historia médica está compuesta por los registros internos y por los registros externos a través del componente de interoperabilidad.  Generación de reportes: genera los reportes estadísticos correspondientes al SIS 02 consulta general, SIS 02 registro de morbilidad por enfermedades notificables y SIS 04 registro semanal de enfermedades de notificación obligatoria.  Administrar personas y roles: administra a las personas que interactúan con el sistema, su identificación, roles y permisos. En SOS-HME las vistas son creadas «dinámicamente» a partir de la información presente en la base de conocimiento en arquetipos y plantillas. El componente manejador de arquetipos en SOS-HME lleva por nombre «Archetype Manager» y el manejador de plantillas «Template Manager». El componente encargado de generar la interfaz gráfica a través de los arquetipos y plantillas se llama «GuiGen». Otro componente importante es el «Data Binder», este es el encargado de vincular el RM y la información registrada por los médicos a través de la interfaz de usuario. Crea las instancias de los objetos del RM partiendo de los arquetipos y plantillas, verifica las restricciones y valida los datos ingresados. Véase la Figura 24. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 98 Figura 24. Componentes principales de SOS-HME Fuente: Adaptado de Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-Gen Framework/. Aplicar este enfoque redunda en un sistema de HME que fácilmente puede ser modificado. No es necesario alterar el código fuente de la aplicación software para generar los cambios, gracias a la separación del conocimiento repartido entre arquetipos y templates. Se obtiene un sistema durable en el tiempo, económicamente viable y mantenible. 5.5.2 Diseño detallado En este apartado se describen los principales módulos del sistema, que ya han sido presentados en el punto anterior dedicado a la arquitectura del sistema. Se listan los módulos a continuación:  Módulo registro clínico. o Gestor de plantillas. o Gestor de arquetipos. o Gestor de interfaz. o Data Binder. o Máquina de estados. o Diagnóstico codificado.  Módulo de registro demográfico. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 99 o Gestión de pacientes o Autenticación de usuarios.  Módulo de interoperabilidad  Módulo registro clínico Es el encargado de realizar las tareas de persistencia sobre la información clínica. En este apartado se exponen en detalle los elementos que conforman el componente del registro clínico.  Gestor de plantillas, (Template Manager) Las plantillas agrupan un conjunto de arquetipos, en SOS-HME las plantillas son utilizadas para formar formularios partiendo de los arquetipos contenidos. Un arquetipo puede ser utilizado en varias plantillas al mismo tiempo, dándole la capacidad al sistema de generar una captura de datos específica para un determinado escenario clínico. Template Manager o Gestor de Plantillas, realiza la carga de plantillas en tiempo de ejecución, se encarga de buscar y cargar las plantillas en memoria. Las plantillas se leen desde su formato de origen XML y son cacheadas en memoria para acelerar próximas referencias. El framework OpenEHR Gen define un formato propio para definición de plantillas distinto al propuesto por la organización OpenEHR. Según sus autores debido a que en ese momento las especificaciones de plantillas de OpenEHR aún se encontraban en etapa de desarrollo.  Gestor de arquetipos (Archetype Manager) Es un componente que se encarga de cargar los arquetipos desde la base de arquetipos y montarlos en memoria. Para modelo de arquetipos de OpenEHR existe una completa especificación a diferencia del modelo de plantillas. Para el modelo de arquetipos existen implementaciones de referencia, el framework OpenEHR GEN utiliza la implementación de Java realizada por Rong Chen (38).  Generador de interfaz En OpenEHR Gen Framework la interfaz del registro clínico se genera automáticamente partiendo de los arquetipos y plantillas. Esta funcionalidad está basada en un trabajo previo «Towards Automatically Generating Graphical User Interfaces from Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 100 openEHR Archetypes» (39). En este apartado se especificará el funcionamiento de este componente. Para generar la interfaz gráfica partiendo de los ítems de los arquetipos primeramente se establece una relación entre los componentes para captura de datos de los formularios web y los tipos de datos propios de OpenEHR. Los arquetipos tienen una estructura de árbol la cual es recorrida por el Generador de Interfaz o GUI-GEN en profundidad con una secuencia de pre-orden (raíz, izquierda, derecha) que permite mostrar cada nodo hoja dependiendo de su tipo de dato OpenEHR y su asociación como elemento HTML. Véase la Tabla 47. Tabla 47. Tipos de datos OpenEHR y asociación con elementos HTML Tipo OpenEHR Control HTML Observaciones CLUSTER <div> Agrupador de Cluster y Element. ELEMENT <div> Contenedor de elementos. DV_BOOLEAN <select>, tres opciones «si, no, nulo» Ítem para valores booleanos. DV_TEXT <textarea> Ítem para texto largo DV_CODED_TEXT <select>, opciones codificadas Ítem para texto codificado. DV_DATE <input type=´text´ class=´date´> Se usa «dataPicker» de jQuery. DV_DATE_TIME <input type=´text´ class=´dateTime´> Se usa «dataPicker» de jQuery. DV_QUANTITY <input type=´text´> para magnitude, <select> para unidades. Cantidades expresadas en unidad y magnitud. DV_ORDINAL <select> opciones codificadas y ordenadas según índice Valores ordenados. DV_COUNT <input type=´text´> solo para número enteros Números enteros. Nota. Fuente: Adaptado de Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] http://code.google.com/p/open-ehr-Gen Framework/. El punto de entrada para la generación de interfaces es el GuiGenController, el cual se encarga de proyectar la vista/plantilla (view/template, en Grails) adecuada según sea el método de visualización: create, show, edit.  Create: genera una vista nueva para el llenado de datos.  Show: muestra los datos guardados sin posibilidad de realizar edición.  Edit: mustra los datos guardados con posibilidad de realizar edición. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 101 Existe una vista dedicada a cada elemento: una vista para DV_DATE, una para DV_TEXT, DV_COUNT, etc. El GuiGen recorre cada nodo del arquetipo a la vez que va generando la interfaz según sean los nodos encontrados en el camino. Por ejemplo si el GuiGen encuentra un nodo de tipo DV_TEXT genera en HTML un “<input type=´text´>”. Si encuentra un CLUSTER entonces genera un “<div>” que agrupa a todos los nodos hoja de las ramas asociadas a la raíz, que en este caso sería el CLUSTER.  Data Binder Es el encargado de crear las estructuras del RM de OpenEHR partiendo de la información recopilada de arquetipos y templates, y de los datos que se obtienen al procesar un formulario web. El Data Binder asocia tres elementos principales: id_Plantilla, id_Arquetipo e id_Nodo_de_arquetipo. Con estos tres identificadores es suficiente para determinar la estructura del RM a instanciar y a persistir. A la vez este componente realiza las tareas de validación de los datos según sean las restricciones definidas para un nodo particular en un arquetipo. Figura 25. DataBinder Fuente: Elaboración propia La Figura 25 muestra la clase DataBinder. El método «bind(…)» toma los datos provenientes del envío del formulario (arquetipos y nodos), junto con el identificador de la plantilla y forma la estructura del RM. La función «getErros()» retorna todos los errores ocurridos en el proceso de validación. El método «getFieldErros(…)» devuelve una lista de errores para un nodo determinado.  Máquina de estados La máquina de estados original del framework fue simplificada eliminando el estado «registro cerrado», quedando solo dos estados posibles para los registros clínicos: «registros abiertos» y «registros firmados», Véase Figura 26. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 102 Al ser creado un registro éste tiene un estado de registro abierto y permanece abierto hasta el momento en el que un médico aprueba con su firma el cierre del registro. Un registro puede pasar de firmado a abierto en caso de ocurrir una reapertura, con la salvedad de que la versión anterior del registro se mantiene guardada en la base de datos documental. Figura 26. Diagrama de estados de registro clínico Fuente: Elaboración propia  Diagnósticos codificados Es una funcionalidad propia del framework OpenEHR Gen que permite realizar diagnósticos codificados en un registro clínico utilizando CIE-10. Sin embargo el conjunto de diagnósticos del framework se limita solo al dominio de trauma. Se expandió esta funcionalidad anexando todos los grupos y subgrupos del CIE-10 a la base de datos del sistema. De esta manera se puede realizar cualquier diagnóstico codificado contemplado en el CIE-10. Cabe destacar que se pueden realizar diagnósticos no codificados, es decir sin utilizar la norma anteriormente citada. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 103  Módulo registro demográfico El componente demográfico es el que modela la información con respecto a las entidades, personas, organizaciones, roles, permisos, etc. En la Figura 27 se muestra un extracto. El modelo no discrimina entre entidades de médicos, pacientes y enfermeras por separado. Todo lo que interactúe con el sistema es un «Party» (entidad genérica). «Role» modela el rol que puede poseer un actor. Las entidades con roles de llaman «Actor». Un «Agent» es un actor que no es ni persona ni organización, podría ser un dispositivo o aparato. Un «Person» modela una persona. Un «Organization» modela una organización, e.j. Hospital, departamento, etc. Figura 27. Extracto del modelo demográfico Fuente: Elaboración propia  Gestión de pacientes La gestión de pacientes es parte fundamental de SOS-HME, debido a que requiere integración con sistemas externos de identificación.  Admisión de pacientes Consiste en la búsqueda o registro de un paciente en el sistema. Se considera obligatoria en la admisión de pacientes la búsqueda de un paciente, para verificar si existe o no con antelación.  Listado de candidatos Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 104 Muestra una lista de pacientes coincidentes con los parámetros de búsqueda. De los pacientes de la lista resultante se pueden examinar sus detalles, o simplemente seleccionar dicho paciente para asignarlo a un registro clínico creado previamente.  Registro de nuevo paciente Consiste en registrar los datos de un nuevo paciente al sistema. El registro contempla solo los datos demográficos, de los cuales destacan: la identificación, procedencia, datos personales, dirección y contacto.  Edición de paciente Se realizan modificaciones sobre los datos pertenecientes a un paciente registrado previamente en el sistema. El formulario se autocompleta con la información preliminarmente registrada, todos los valores son modificables incluyendo los identificadores.  Selección de paciente Permite asociar al paciente como sujeto de cuidado a un registro clínico abierto con anterioridad. Previo a la asociación se pregunta al usuario si está seguro de seleccionar esa acción puesto que todo el registro clínico será asociado a ese paciente y no puede reversarse el proceso.  Detalle de paciente Se muestra el detalle demográfico-clínico del paciente, con opción de ver los registros clínicos internos o externos. Permite a un usuario con rol «médico» realizar asignaciones y cruces del paciente en el SOS-IMP.  Autenticación de usuarios Es el encargado de autorizar el acceso de los usuarios al sistema. El autentificador verifica si el usuario existe y es válido, y si posee las credenciales necesarias para realizar una tarea determinada. La Tabla 48 muestra la lista de roles que puede poseer un usuario del sistema, se muestra una breve descripción y se listan los permisos que posee. Tabla 48. Tabla muestra el lista de roles, descripción y permisos Administrador de usuarios Encargado de administrar los usuarios y sus roles en la aplicación.  CRUD de usuarios.  CRUD de personas.  Asignar roles a una determinada persona en el sistema. Médico Encargado de principalmente del manejo del registro clínico de  Crear un registro clínico.  Registrar un nuevo paciente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 105 los pacientes pero también puede realizar actividades administrativas.  Editar los datos de un paciente ya registrado.  Puede editar y firmar el registro clínico de un paciente.  Puede reabrir un registro clínico ya firmado.  Puede registrar un paciente en el IMP.  Puede eliminar el registro de un paciente en el IMP.  Puede establecer una relacion de un paciente con otro paciente en el IMP.  Puede eliminar una relacion de un paciente en el IMP. Personal- Enfermería Dedicado al cuidado del paciente y ayuda a la edición de los registros clínicos de los pacientes.  Crear un registro clínico nuevo.  Registrar un nuevo paciente.  Editar los datos de un paciente.  Generar reportes estadísticos.  Acceso al registro clínico del paciente para editarlo en caso de que esté abierto o para verlo en el caso que ya haya sido firmado. Personal- Administrativo Dedicado a realizar labores administrativas en la aplicación.  Crear un registro clínico.  Registrar un nuevo paciente.  Editar los datos de un paciente.  Generar reportes estadísticos.  No tiene acceso los registros clínicos. Nota. Fuente: Elaboración propia Los roles implementados siguen una jerarquía en la que los privilegios asociados al rol de «personal administrativo» están contenidos en los privilegios asociados al «personal de enfermería» y los de este a su vez se encuentran contenidos en los privilegios del «personal médico». Por otra parte los privilegios asociados al rol «administrador usuarios» Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 106 están fuera de estar jerarquía y excluyen completamente el acceso a los privilegios pertenecientes a los roles antes mencionados. Ver Figura 28. Figura 28 Diagrama de jerarquía de roles. Fuente: Elaboración propia Al asignar un rol a un usuario, éste podrá realizar todas las acciones asociadas a dicho rol. En el caso de que a un usuario le sean asignados más de un rol, podrá realizar las acciones permitidas del rol con mayor rango la jerarquía de roles, y si uno de los roles asignados es el de «administrador de usuarios» este usuario solo podrá realizar las acciones asociadas al rol de «administrador usuarios».  Módulo de reportes Consiste en realizar consulta sobre los registros clínicos de acuerdo a los formatos requeridos por el Ministerio del Poder Popular Para la Salud. Las consultas se pueden realizar en un rango de fechas dado por el usuario. Los formatos disponibles son:  EPI 10: correspondiente al SIS 02 Consulta General.  EPI 13: correspondiente al SIS 02 Registro de Morbilidad por Enfermedades Notificables.  EPI 12: correspondiente al SIS 04 Registro Semanal de Enfermedades de Notificación Obligatoria. Es importante destacar que no todos los valores de los formatos «EPI» (29) pueden ser obtenidos de los datos clínicos que se registran en el dominio Historia Integral. Es por esto que los reportes deben ser completados de forma manuscrita. Los reportes son obtenidos a través de un vínculo de descarga bajo el formato «PDF». Personal médico Personal de enfermeria Personal administrativos Administrador de usuarios Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 107  Módulo de interoperabilidad Conecta con el sistema SOS-IMP y gestiona los servicios ofrecidos por éste. El módulo de interoperabilidad aplica una serie de mecanismos de seguridad basados en SOAP WS Security (40), para garantizar la autoría, integridad y confidencialidad de los mensajes intercambiados entre SOS-HME y SOS-IMP. Para garantizar la autoría, se utiliza «USERNAME_TOKEN» y «TIMESTAMP», el mensaje es autenticado con un «digesto» válido por un corto lapso de tiempo (por defecto 5 minutos). El mensaje se firma para certificar la integridad, se utiliza «SIGNATURE». Por último para garantizar la confidencialidad del mensaje, éste se encripta utilizando un esquema de clave pública y privada, de manera que el mensaje solo pueda ser desencriptado por la entidad de destino, se utiliza «ENCRYPT». 5.5.3 Detalles de Implementación En esta sección se describen en detalle las principales tareas realizadas en la etapa de implementación de la aplicación. Las actividades que se destacan son la elaboración de arquetipos y plantillas, el rediseño de la interfaz gráfica y el acoplamiento de la aplicación con el servicio externo de identificación de pacientes.  Elaboración de arquetipos y plantillas Para la elaboración de arquetipos y templates se hizo uso de unas guías de creación disponibles en el repositorio de OpenGenEHR; «Guía de creación de plantillas» (41) y «Sintaxis y configuración de plantillas» (42). Además se utilizaron las herramientas de software detalladas a continuación.  Archetype Editor Es una herramienta creada por Oceans Informátics, para apoyar la creación de arquetipos para los estándares CEN y OpenEHR. El editor está disponible en siete idiomas, incluidos entre ellos el español (43). Se eligió esta herramienta como editor de arquetipos porque es compatible casi es su totalidad con todos los tipos de datos definidos en las especificaciones de OpenEHR. Tiene capacidad para guardar arquetipos en versiones ADL 1.4 y XML. Ofrece una funcionalidad para documentar arquetipos en formato HTML. Ver captura de pantalla en Figura 29 y Tabla 49. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 108 Figura 29. Archetype Editor Fuente: Elaboración propia Tabla 49. Versión Archetype Editor Versión utilizada: 2.1.583 Fecha de publicación: 2 de Julio de 2009 Estado: Versión estable Nota. Fuente: Elaboración propia  ADL Workbench Permite la revisión en detalle de cada uno de los elementos de un arquetipo dado, es compatible con los estándares CEN y OpenEHR. Puede realizar pruebas sobre los arquetipos, muestra errores y advertencias en arquetipos formados incorrectamente. Despliega los arquetipos en los diferentes idiomas en los que estén definidos. Tiene la capacidad de crear un formulario HMTL basado en un arquetipo dado. Es una herramienta creada por Oceans Informátics, compatible con ADL 1.4. Esta herramienta se eligió por su versatilidad en el manejo de arquetipos (44; 45). Ver captura de pantalla en Figura 30 y Tabla 50. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 109 Figura 30. ADL Workbench Fuente: Elaboración propia Tabla 50. Version ADL Workbench Version utilizada: 1.4.1.595 Fecha de publicación: 2 de Abril de 2008 Estado: Versión estable Nota. Fuente: Elaboración propia  Notepad ++ Es un es un editor de texto y de código fuente libre con soporte para varios lenguajes de programación (46). Ver captura de pantalla en Figura 31 y Tabla 51. http://es.wikipedia.org/wiki/Editor_de_texto http://es.wikipedia.org/wiki/Editor_de_c%C3%B3digo_fuente http://es.wikipedia.org/wiki/Software_libre http://es.wikipedia.org/wiki/Lenguaje_de_programaci%C3%B3n Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 110 Figura 31. Notepad ++ Fuente: Elaboración propia Tabla 51. Version Notepad ++ Version utilizada: 5.9.5 Fecha de publicación: 23 de Octubre de 2011 Estado: Versión estable Nota. Fuente: Elaboración propia  Implementación de la Historia Integral El dominio de historia integral se dividió en ocho secciones. Cada sección es descrita por una plantilla, el conjunto de plantillas engloban en su totalidad a nueve arquetipos distintos. Las plantillas llevan los nombres del proceso asistencial, véase la Tabla 52. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 111 Tabla 52. Lista de plantillas y arquetipos Plantilla Arquetipos Propósito Interrogatorio openEHR-EHR- OBSERVATION.interrogatorio.v1.adl Capturar información referente a los hábitos del paciente. Motivo de consulta openEHR-EHR- OBSERVATION.motivo_de_consulta.v1.adl Registrar el motivo de consulta de los pacientes. Exploración funcional openEHR-EHR- OBSERVATION.antecedentes_o_anamnesis. v1.adl Contempla los elementos relacionados a los antecedentes e historia personal y familiar, antecedentes epidemiológicos y alergias. openEHR-EHR- EVALUATION.exploracion_funcional.v1.adl Registro por aparatos y sistemas de la exploración o interrogatorio funcional. Enfermedad actual openEHR-EHR- OBSERVATION.enfermedad_actual.v1.adl Se describen detalladamente los síntomas que el paciente presenta. Examen físico openEHR-EHR- OBSERVATION.examen_fisico.v1.adl Recabar información sobre sobre los resultados del examen físico. Tratamiento openEHR-EHR- ACTION.accion_y_tratamiento.v1.adl Tratamientos y plan de acción y seguimiento a un paciente asignado por medico tratante. Diagnóstico openEHR-EHR- EVALUATION.diagnosticos.v1.adl Diagnósticos codificados con CIE10. Movimiento openEHR-EHR- ACTION.movimiento_de_paciente.v1.adl Registrar el seguimiento, alta o traslado de un paciente. Nota: Fuente: Elaboración propia Se utilizó la herramienta Archetype Editor para crear los arquetipos anteriormente descritos. Se realizaron test basados en los resultados de compilación de la herramienta ADL Workbench. Las plantillas fueron creadas utilizando la aplicación Notepad++. Se integraron las plantillas y los arquetipos dentro del núcleo del framework OpenEHR GEN. Los arquetipos se colocaron en la carpeta «/archetypes/ehr/entry» según Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 112 su clasificación. Las plantillas fueron colocadas en la carpeta «/template/hce». Se añadió la configuración del dominio en el archivo «configuration/config.groovy» quedando como se observa en la Figura 32. Figura 32. Configuración de dominios clínicos Fuente: Elaboración propia Se realizaron las pruebas unitarias necesarias para comprobar las potencialidades y el correcto funcionamiento del framework.  Diseño de interfaz gráfica La interfaz original del Open Gen Framework fue totalmente rediseñada. Fue necesario cambiar la interfaz gráfica original del framework por dos motivos principales; mejorar la experiencia del usuario y adaptar las vistas al concepto visual de SOS Telemedicina. Para diseñar las interfaces se contó con la colaboración de la diseñadora Gabriela Delgado, designada por parte del equipo directivo del programa SOS Telemedicina como diseñadora del proyecto. En una mesa de trabajo se definieron los requerimientos de las vistas, dando como resultado una propuesta de interfaz presentada por la diseñadora. El requerimiento principal radicó en respetar el hipertexto generado por el GuiGen, obligando a que el diseño de la interfaz del registro clínico consistiera en crear un estilo utilizando «hojas de estilo en cascada» sobre el hipertexto formado por el generador de vistas. La Figura 33 muestra la interfaz original del OpenGen EHR, la Figura 34 muestra la interfaz resultante para SOS-HME. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 113 Figura 33. Registro clínico - Interfaz original de OpenEHR Gen Framework Fuente: Elaboración propia Figura 34. Registro clínico - Nueva interfaz Fuente: Elaboración propia Para lograr este cometido se elaboró una guía sobre la generación detallada del hipertexto. Se describieron en detalle cada uno de los ítems arquetipados presentes en el registro clínico. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 114 Se realizaron pruebas unitarias sobre cada vista para evaluar el funcionamiento de la nueva interfaz. Se integraron además nuevos elementos como: ventanas modales, indicadores de sección, marcas sobre secciones grabadas, efectos de suavizado en la entrada y salida de ítems (acordeones).  Acoplamiento con SOS-IMP El acoplamiento con el servicio externo identificador de pacientes consistió en consumir los servicios web ofrecidos por el SOS-IMP. Se utilizó el plugin de Grails CXF- Client desarrollado por Christian Oestreich (45) para facilitar la implantación. El plugin permite crear «interceptores». Los interceptores son componentes que permiten precisamente interceptar los mensajes enviados y recibidos durante el consumo de servicios web. Se construyeron dos interceptores para entradas y salidas de datos:  Interceptor para servicios CDA: enlaza con el paquete de servicio de documentos. Está incorporado en el servicio «customSecureServiceClientCda». Ver Figura 35. Figura 35. Atributos del customSecureServiceClientCda Fuente: Elaboración propia  Interceptor para servicios IMP: enlaza con el paquete de identificación de pacientes. Está incorporado en el servicio «customSecureServiceClientImp». Ver Figura 36. http://www.christianoestreich.com/ Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 115 Figura 36. Atributos del customSecureServiceClientImp Fuente: Elaboración propia Cada «CustomInterceptor» conecta con el punto de entrada ofrecido por el SOS- IMP el cual clasifica sus servicios en dos tipos; por una parte están todos los relacionados con la identificación de pacientes y por otro lado están los relacionados con el repositorio de documentos. La necesidad de utilizar interceptores como ya se mencionó en el apartado diseño detallado, radica en que es necesario garantizar la autoría, la integridad y confidencialidad de los mensajes enviados y recibidos. Para garantizar esto se implementó el protocolo de seguridad definido para SOAP en WS-SECURITY. Se construyó el ServiceController controlador encargado de realizar el enlace con el SOS-IMP mediante el uso de los CustomInterceptor. En el ServiceController se inyectan los servicios customSecureServiceClientCda y customSecureServiceClientImp mostrados en la Figura 35 y la Figura 36, permitiendo a través de éstos el acceso a los servicios web del SOS-IMP de forma transparente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 116 5.6 Sos Índice Maestro de Pacientes El índice maestro de pacientes es una aplicación esencial para lograr la interoperabilidad entre diversos sistemas de historia médicas electrónicas. De igual manera como se presentó el SOS-HME, en el punto siguiente denominado arquitectura se expone la estructura de la aplicación desde distintas perspectivas para un mejor entendimiento. 5.6.1 Arquitectura La aplicación SOS-IMP consta de dos componentes principales el módulo de administración y el módulo de servicios web. Al igual que el SOS-HME, este sistema está diseñado bajo un patrón MVC + Servicios.  Vista por componentes El módulo de servicios web ofrece a través de internet el total de las funcionalidades del índice maestro de pacientes a las organizaciones «participantes». El módulo de administración permite a las organizaciones participantes acceder a un panel de administración donde podrá obtener información sobre su cuenta. La Figura 37 muestra los componentes de SOS-IMP. Figura 37. Componentes de SOS-IMP Fuente: Elaboración propia  Vista por capas La aplicación está construida bajo el modelo MVC + Servicios, por tanto sus capas responden a éste patrón de diseño. La Figura 38 muestra las capas de la aplicación. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 117 Figura 38. Capas del IMP Fuente: Elaboración propia Vista o GUI: permite al usuario interactuar con el sistema. Controladores: encargado de procesar las peticiones realizadas por el usuario (a través de la interfaz gráfica), verificar si se cumplen las condiciones necesarias para ejecutar dichas acciones y por último realizar una tarea. Modelo: responde al modelo de información utilizado para modelar al índice de pacientes y al repositorio de documentos clínicos. Servicios: realizan tareas repetitivas y complejas simplificando el trabajo a los controladores. Sin embargo la mayoría de los servicios de ésta aplicación son expuestos a la web y mantienen poca o ninguna relación con los controladores. 5.6.2 Diseño detallado  Módulo de Servicios Web Los servicios web ofrecidos por el SOS-IMP están divididos en dos paquetes: el paquete CDA y el paquete IMP. Su diferenciación se debe a que son dos tipos de servicios, el primero está dedicado a la persistencia de documentos clínicos bajo el estándar CDA, el segundo se encarga de persistir los datos de identificación de los pacientes y las organizaciones involucradas. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 118 Los servicios fueron construidos bajo una arquitectura SOAP con implementación del protocolo de seguridad WS-SECURITY. Aplicar WS-SECURITY funciona bajo un esquema de clave pública y privada. El SOS-IMP cuenta con un certificado de seguridad (válido por un período de tiempo), del cual se extrae la clave pública y se entrega a las organizaciones involucradas en el intercambio de documentos clínicos. La clave privada la preserva la aplicación. Figura 39. Esquema clave pública y privada Fuente: Elaboración propia De esta manera el SOS-IMP puede emitir mensajes firmados con su clave privada que solo podrán ser vistos por quienes posean la clave pública. Por su parte las organizaciones involucradas podrán emitir mensaje firmados con la clave pública del SOS- IMP que solo éste podrá descifrar usando su clave privada, ver Figura 39. Se añadió un elemento extra de seguridad denominado «token id». Este elemento se agregó como parámetro obligatorio sobre todas las firmas de los servicios, de manera que permitiese identificar cual organización está accediendo al servicio. El detalle de los servicios web expuestos en el SOS-IMP pueden ser encontrados en el Apéndice B de este trabajo.  Módulo de administración El módulo de administración consta de una interfaz gráfica que permite tanto al administrador del SOS-IMP como a una organización involucrada ingresar al panel de Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 119 administración, véase Figura 40. Lo que se muestra en el panel dependerá del rol que posea el usuario. Los roles posibles son «administrador» y «organización». Figura 40. Inicio de sesión – Administración IMP Fuente: Elaboración propia  Gestión de usuarios El administrador del sistema SOS-IMP puede realizar el CRUD sobre los usuarios del sistema. Cabe destacar que los usuarios son todas organizaciones involucradas en la compartición de documento, por ejemplo: un hospital, clínica, ambulatorio, etc.  Datos de participación Permite a las organizaciones pertenecientes al SOS-IMP ingresar a una vista que muestra los datos de identificación de dicha organización. Desde esta vista se muestra el token id que debe ser enviado como parámetro al momento de realizar una petición al SOS- IMP. Ver figura Figura 41. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 120 Figura 41. Datos de participación – Administración SOS-IMP Fuente: Elaboración propia 5.6.3 Detalles de Implementación  Implementación de servicios web En primera instancia se intentó utilizar el formato recomendado por los libros y la documentación de Grails. Sin embargo surgió un inconveniente con respecto del envío de tipos de datos complejos a través de los servicios web utilizando el esquema mencionado. Se optó entonces por «serializar» los objetos en las consultas y en las respuestas, pero resultó ser una solución poco óptima pues volvía complejo el procesamiento de peticiones e involucraba tareas extras al momento de emitir una respuesta. Finalmente para construir los servicios web desde Grails se utilizó el plugin CXF. Éste plugin permite exponer los servicios propios de Grails como servicios web SOAP a través de Apache CXF, sin presentar problemas con los tipos de datos complejos. Apache CXF es un framework open source para servicios web. CXF ayuda a construir servicios web utilizando interfaces de programación (API) que agilizan el trabajo de los desarrolladores. CXF ofrece soporte para aplicar entre otros el protocolo WS- SECURITY (efectivamente fue usado en este proyecto) sobre los servicios web ofrecidos a través de SOAP. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 121 El detalle de éste y otros plugins pueden ser encontrados en el apéndice de éste documento, al igual que la documentación técnica del SOS-IMP. 5.7 Pruebas Con motivo de realización de las pruebas las aplicaciones SOS-IMP y SOS-HME fueron instaladas en los servidores de SOS Temedicina, los cuales residen físicamente en las oficinas del CAIBCO (Centro de Imágenes Biomédicas Computarizadas) dentro de la U.C.V.  Descripción de servidores Tabla 53. Descripción Servidor A Servidor A Tamaño de disco 28 GB Memoria Ram 3.041 MB Procesador 1 Intel(R) Xeon(TM) CPU 2.80GHz, cache 512 KB, 32 bits. Procesador 2 Intel(R) Xeon(TM) CPU 2.80GHz, cache 512 KB, 32 bits. Sistema Operativo Debian GNU/Linux 6.0, 32 bits. Accesible fuera de la UCV Si Aplicaciones instaladas SOS-HME, SOS-IMP. Base de datos MySQL 5.1.61-0+squeeze1 (Debian) Nota. Fuente: Elaboración propia Tabla 54. Descripción Servidor B Servidor B Tamaño de disco 57 GB Memoria Ram 2 GB Procesador 1 Intel(R) Xeon(R) CPU 2.50GHz, cache 6144 KB Procesador 2 Intel(R) Xeon(R) CPU 2.50GHz, cache 6144 KB Sistema Operativo Debian GNU/Linux 6.0.4, 64 bits. Accesible fuera de la UCV No Aplicaciones instaladas SOS-HME Base de datos MySQL 5.0.51a-24+lenny5-log (Debian) Nota. Fuente: Elaboración propia Las pruebas se realizaron en los servidores descritos en la Tabla 53 y la Tabla 54, particularmente para realizar las pruebas de interoperabilidad se añadieron virtualmente dos centros asistenciales al SOS-IMP. Una de las instancias SOS-HME se instaló en el servidor con dirección ip 190.169.161.50, el nombre otorgado al centro asistencial fue «SOS Ambulatorio 1». Por su parte la otra instancia se instaló en el servidor con dirección ip Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 122 190.169.161.38, el nombre otorgado fue «SOS Ambulatorio 2». También en el servidor con dirección ip 190.169.161.50 se instaló el SOS-IMP.  Pruebas de funcionamiento A continuación se muestran el conjunto de pruebas de tipo caja cerrada que se realizaron. Se destaca que generalmente se recomienda que el equipo de desarrollo no sea el mismo que realice las pruebas sobre las funcionalidades del sistema, es por eso que en las actividades de pruebas se contó con la participación de la Lic. Nancy Urbina. A continuación de describen las pruebas realizadas en el rango de Tablas 55-68. Las pruebas se realizaron en el período de tiempo comprendido desde el 01/04/12 hasta el 30/04/12. Se muestran las tareas realizadas durante esta iteración en el rango de Tablas 41- 46. Tabla 55. Prueba de funcionamiento 1 PRUEBAS Nombre de la prueba: Inicio de sesión Prueba: 1 Descripción: Constatar el inicio de sesión del personal médico, sanitario y administrativo. Entradas:  Se ingresa para cada uno de los roles del sistema, el nombre de usuario y contraseña. Evaluación de la prueba: Resultado esperado: Satisfactoria El usuario debe poder acceder al sistema y podrá realizar acciones según su rol. Observaciones: Se constata que efectivamente cada uno de los tipos de usuarios ingresa al sistema de manera correcta. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 123 Tabla 56. Prueba de funcionamiento 2 PRUEBAS Nombre de la prueba: Creación de registro clínico Prueba: 2 Descripción: Crear y llenar un registro clínicos Entradas:  Se crean nuevos registros.  Se llenan todas las secciones de los registros con valores de historias médicas reales. Evaluación de la prueba: Resultado esperado: Satisfactoria Capturar todos los valores presentes en una historia médica integral. Completar el registro clínico. Observaciones: Se observaron algunos problemas en la persistencia de los datos por arquetipos mal definidos. Los problemas presentados fueron corregidos y el resultado de la prueba fue satisfactorio. Nota. Fuente: Elaboración propia Tabla 57. Prueba de funcionamiento 3 PRUEBAS Nombre de la prueba: Admisión de paciente Prueba: 3 Descripción: Buscar un paciente en la base de datos del sistema. Entradas:  Se ingresan los datos propios de la identificación de un paciente. o Numero de documento de identidad. o Nombres. o Apellidos. o Sexo. o Fecha de Nacimiento. Evaluación de la prueba: Resultado esperado: Satisfactoria Lista de pacientes coincidentes con los valores ingresados Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 124 Tabla 58. Prueba de funcionamiento 4 PRUEBAS Nombre de la prueba: Creación de paciente Prueba: 4 Descripción: Crear un paciente en el sistema Entradas:  Se ingresan los valores demográficos vinculados con el paciente a registrar. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente agregado al sistema Observaciones: Se observaron problemas con valores desplegables de estados y municipios. Dichos inconvenientes fueron corregidos. Nota. Fuente: Elaboración propia Tabla 59. Prueba de funcionamiento 5 PRUEBAS Nombre de la prueba: Asociar paciente a registro clínico Prueba: 5 Descripción: Relacionar un paciente con un registro clínico creado Entradas:  Se crea un registro clínico.  Se selecciona un paciente. Evaluación de la prueba: Resultado esperado: Satisfactoria Asociación del paciente al registro clínico creado. Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 125 Tabla 60. Prueba de funcionamiento 6 PRUEBAS Nombre de la prueba: Cierre de registro clínico Prueba: 6 Descripción: Firma del registro clínico por parte de un médico Entradas:  Se introduce usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Registro firmado Observaciones: Nota. Fuente: Elaboración propia Tabla 61. Prueba de funcionamiento 7 PRUEBAS Nombre de la prueba: Reapertura de registro clínico Prueba: 7 Descripción: Reabrir un registro clínico firmado. Entradas:  Se introduce usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Registro abierto Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 126 Tabla 62. Prueba de funcionamiento 8 PRUEBAS Nombre de la prueba: Ver resumen y documento clínico Prueba: 8 Descripción: Ver resumen del registro clínico y el documento CDA. Entradas:  Se firma el registro.  Se selecciona la pestaña de resumen.  Se selecciona ver documento clínico. Evaluación de la prueba: Resultado esperado: Satisfactoria Ver el resumen del registro clínico que se ha cerrado y documento clínico electrónico relacionado. Observaciones: Se evidenció un problema para ver documentos clínicos generados en versiones anteriores que fueron borrados por error al realizar las actualizaciones del sistema. El problema fue solucionado. Nota. Fuente: Elaboración propia Tabla 63. Prueba de funcionamiento 9 PRUEBAS Nombre de la prueba: Agregar paciente a IMP Prueba: 9 Descripción: Agregar paciente al índice maestro de pacientes Entradas:  Se selecciona el paciente.  Se selecciona agregar paciente al IMP.  Se ingresa el usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente agregado a IMP Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 127 Tabla 64. Prueba de funcionamiento 10 PRUEBAS Nombre de la prueba: Relacionar paciente en IMP Prueba: 10 Descripción: Relacionar paciente con algún otro paciente registrado por otra organización en el SOS-IMP Entradas:  Se selecciona el paciente.  Se busca la lista de candidatos.  Se selecciona un paciente de la lista de candidatos.  Se ingresa usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente relacionado en el IMP Observaciones: Nota. Fuente: Elaboración propia Tabla 65. Prueba de funcionamiento 11 PRUEBAS Nombre de la prueba: Ver documento clínicos internos y externos Prueba: 11 Descripción: Ver los documentos clínicos del paciente internos y externos al sistema. Entradas:  Se selecciona el paciente.  Se consultan los registros internos por rango de fechas.  Se consultan los registros externos por rango de fechas. Evaluación de la prueba: Resultado esperado: Satisfactoria Visualización de registros internos y externos. Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 128 Tabla 66. Prueba de funcionamiento 12 PRUEBAS Nombre de la prueba: Desrelacionar paciente en IMP Prueba: 12 Descripción: Eliminar relación de un paciente con el IMP Entradas:  Se selecciona el paciente.  Se selecciona eliminar relación de paciente.  Se ingresa usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente sin relación con el IMP. Observaciones: Nota. Fuente: Elaboración propia Tabla 67. Prueba de funcionamiento 1 3 PRUEBAS Nombre de la prueba: Eliminar paciente de IMP Prueba: 13 Descripción: Eliminar paciente del índice maestro de pacientes. Entradas:  Se selecciona el paciente.  Se selecciona eliminar paciente del IMP.  Se ingresa usuario y contraseña de un médico. Evaluación de la prueba: Resultado esperado: Satisfactoria Paciente eliminado del IMP Observaciones: Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 129 Tabla 68. Prueba de funcionamiento 14 PRUEBAS Nombre de la prueba: Funciones administrativas Prueba: 14 Descripción: Prueba sobre las funciones administrativas Entradas:  Se ingresar usuario y contraseña de un administrador del sistema.  Se realiza CRUD de personas, roles y usuarios. Evaluación de la prueba: Resultado esperado: Satisfactoria Administración de las personas, roles y usuarios del sistema. Observaciones: Se evidenció que solo el administrador puede crear las contraseñas para los usuarios, cuestión que debía ser extendida a los propios usuarios. El requerimiento fue satisfecho. Nota. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 130 RESULTADOS Se analizó el proceso asistencial llevado a cabo en diferentes centros de salud de nivel ambulatorio, esto permitió diseñar una forma de emular ese proceso dentro de una herramienta de historia médica electrónica tomando elementos coincidentes observados en los distintos centros de salud. La creación de la estructura propuesta para los dominios de «historia médica integral» y «materno infantil» fueron realizados a partir de: formatos de historia médica recabados en los centros de salud y mediante reuniones con médicos especialistas en dichas áreas. El formato de historia médica integral fue aprobado por una «junta de médicos» que pudo llegar a un consenso sobre el formato de la historia, partiendo de la propuesta realizada por el equipo de desarrollo. Figura 42. Secciones historia médica integral Fuente: Elaboración propia En la Figura 42 se muestra el formato de la historia médica integral resultante del consenso de la junta de médicos. Cada una de sus secciones se detalla a continuación: Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 131  Interrogatorio: se refiere a los hábitos; consumo de drogas, medicamentos e indicadores dietéticos.  Motivo de consulta: responde a la pregunta ¿Por qué viene el paciente a la consulta?  Exploración funcional: tiene por objetivo determinar el estado de salud o enfermedad de un paciente.  Enfermedad actual: su objetivo es describir cada una de los síntomas que presenta el paciente.  Examen físico: análisis por aparatos y sistemas orientado en razón del motivo de consulta.  Diagnóstico: identificación de la enfermedad, síndrome o condición de salud del paciente. El diagnóstico se codifica según CIE-10.  Tratamiento: registrar el tipo de tratamiento aplicado al paciente.  Movimiento: refiere al movimiento del paciente, puede ser traslado, alta o seguimiento. Por otro lado el formato de historia materno-infantil sugerido fue pospuesto en implementación para futuros desarrollos, debido a que la historia materno infantil tal cual muestra la Figura 43 está compuesta por tres historias médicas que son la historia del embarazo, la historia del nacimiento y finalmente la historia del recién nacido, y su implementación sobrepasaba el alcance en tiempo de un trabajo de grado. Figura 43. Estructura de la historia materno infantil Fuente: Elaboración propia Al mismo tiempo se evaluaron herramientas software existentes de historias médicas electrónicas. Las herramientas evaluadas fueron las siguientes:  Medical. Historia del recien nacido Historia del nacimiento Historia del embarazo Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 132  OpenEHR Gen Framework.  OpenMRS. El puntaje final fue determinado por la suma de los valores ponderados de cada criterio de evaluación. Tal como se puede apreciar en la Figura 44 la herramienta que obtuvo mayor puntaje fue OpenEHR Gen Framework con un total de 30 puntos, seguida por OpenMRS con un total de 23 puntos, y por último la herramienta Medical obtuvo 19 puntos. Figura 44 Puntuación total obtenida Fuente: Elaboración propia Como resultado de ésta evaluación se recomendó el uso de OpenEHR Gen Framework para desarrollar el sistema de historias médicas electrónicas. Ésta recomendación fue aprobada por los coordinadores del programa SOS Telemedicina. Se diseñó y construyó un sistema de HME basado en OpenEHR Gen Framework. El resultado obtenido fue un sistema de historias médicas electrónicas capaz de compartir información clínica. Al sistema se le dio el nombre de SOS-HME. Dentro del sistema SOS-HME se aplicaron diversos estándares propios del ámbito de la informática médica. La Tabla 69 muestra el nombre del estándar aplicado, su clasificación dentro de los tipos de estándares, la versión utilizada y por último la organización creadora del estándar. Tabla 69. Estándares aplicados Nombre del estándar Clasificación Versión utilizada Organización creadora OpenEHR Diseño 1.0.2 OpenEHR Foundation CDA Comunicación R2 HL7 Foundation CIE Terminología 10 Organización Mundial de la Salud. Nota. Fuente: Elaboración propia 0 10 20 30 40 Medical Open EHR Gen Open MRS Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 133 Aplicar el estándar OpenEHR le da garantías al sistema de historias médicas de escalabilidad y mantenibilidad, ya que está sustentando sobre un modelo que fue pensado para tales fines. Por su parte CDA R2 le proporciona al sistema una manera eficiente para exportar e importar información clínica. Sin embargo la dificultad del intercambio de información radica en que se depende única y exclusivamente del formato CDA. El CIE 10 le permite al sistema manejar diagnósticos codificados. Es recomendable que los médicos y el resto del personal sanitario esté familiarizado con ésta clasificación como parte de una buena práctica para seleccionar los diagnósticos. Aplicar estándares le da solidez al trabajo realizado y le otorga al sistema de historias médicas una característica de vanguardia. Se desarrolló un índice maestro de pacientes utilizando servicios web SOAP y se aplicaron sobre los servicios políticas de seguridad WS-SECURITY. Se enlazó la aplicación SOS-HME con el servicio de identificación de pacientes, dando como resultado el intercambio de información clínica entre dos o más sistemas de historia médica electrónica. En la Figura 45 se puede apreciar la arquitectura resultante, donde cada ambulatorio o centro asistencial posee un sistema de historias médicas electrónicas, en este caso todos los sistemas son del tipo SOS-HME, pero pudiesen ser otros sistemas heterogéneos que implementen el consumo de los servicios web. Cada sistema SOS-HME se comunica a través de internet con el SOS-IMP, desde ahí pueden acceder a los documentos clínicos de un paciente que están compartidos en el repositorio documental del SOS-IMP. Es importante destacar que cada sistema de HME puede poseer una estructura particular, con base de datos, repositorios documentales, lista de pacientes, reportes, etc. Pero lo que se comparte a través del SOS-IMP es información clínica mediante el intercambio de documentos CDA, no se comparte información demográfica o estadística, tampoco información sobre el personal médico y sanitario, más allá de la información que pueda contener el propio CDA. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 134 Figura 45 Arquitectura de la solución Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 135 CONCLUSIONES Y RECOMENDACIONES El desarrollo de este trabajo dio como resultado un sistema de historias médicas electrónicas: SOS-HME, el sistema puede adaptarse al formato de registro clínico de un centro asistencial particular, y está en capacidad de intercambiar información clínica con otros sistemas a través del índice maestro de pacientes elaborado: SOS-IMP. El sistema de HME elaborado permite registrar información clínica relacionada con un sujeto de cuidado. Con esto se superan varias de las limitaciones de una tradicional historia médica en papel, tales como la ilegibilidad y el deterioro. Se posibilita un registro de historias médicas totalmente digitalizadas, sin necesidad de ocupar espacio físico con archivos contenedores de centenares de documentos clínicos en hojas de papel. Sin embargo es recomendable usar el registro clínico impreso como medio de respaldo por varias razones, entre ellas: fallas del servicio eléctrico, desperfectos de hardware y/o software, etc. Se supera la limitante relacionada con el extravío de historias médicas por almacenamiento erróneo, eliminaciones no autorizadas, traspapeleo, etc. Los registros clínicos en el sistema SOS-HME están asociados a cada paciente, los pacientes son identificables por cédula, pasaporte o algún otro identificador, también como parámetros de búsqueda se aceptan nombres, sexo y fecha de nacimiento. Por tanto no existe posibilidad dentro del sistema HME desarrollado el extravío o pérdida de información clínica. Los tiempos de búsquedas de la información clínica son casi inmediatos, en cuestiones de segundos se puede tener acceso a toda la historia médica de un paciente. Esto es un gran avance en comparación en el tiempo y esfuerzo invertido por parte del personal sanitario en la búsqueda de esa información en archivos tradicionales de historias médicas en formato de papel. Sobre el sistema SOS-HME se aplican mecanismos de autorización y acceso que solo permiten a personas autorizadas ver el contenido de la historia y ejecutar distintas acciones sobre ella. Se garantiza además una historia médica «única» por paciente, es decir que dentro del centro asistencial cada paciente puede poseer múltiples registros clínicos, pero todos los registros están asociados a una misma historia médica. Es importante destacar que aunque la HME viene a sustituir la HM tradicional sobre papel, el sistema SOS-HME conserva una de las características principales del papel: «soportar cualquier formato de historia». Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 136 El sistema es altamente escalable y está en capacidad de modelar distintos dominios clínicos, para esto será necesario definir los arquetipos y plantillas requeridos para generar el dominio clínico deseado. En este trabajo se modeló para SOS-HME el primer dominio clínico: «historia médica integral», el cual contempla el proceso de atención de medicina general o integral. Se evidenció la necesidad de estimar previamente la complejidad y la extensión de un dominio clínico, pues puede ocurrir que éste sea demasiado amplio para ser implementado en el período de tiempo de un trabajo de grado. tal cual ocurrió con el dominio materno infantil. Se recomienda para futuros trabajos realizar implementaciones de otros dominios clínicos. Así mismo se recomienda seguir trabajando en nuevas versiones del sistema SOS- HME para incorporar nuevas funcionalidades tales como: imagenología, salas situacionales con geo-referenciación, aplicaciones para telefonía móvil, etc. Por otra parte, fue beneficioso durante este trabajo contar con la ayuda de expertos del área médica e informática, nacionales e internacionales, a través de ellos se pudieron solventar muchas dudas, sus recomendaciones y asesoramientos fueron claves para la toma de decisiones. Esas decisiones que en su momento fueron complicadas de tomar, y en retrospectiva se puede decir que estuvieron acertadas. Tales son los casos de la definición de un formato de historia médica integral y la evaluación de las herramientas de software de historia médica. Se evidenció que cada centro asistencial realiza de diferentes maneras el proceso atención, las entrevistas realizadas a centros de salud permitieron determinar las similitudes entre ellos. Ese conocimiento fue utilizado en la construcción de la solución. Al momento de realizar la evaluación entre las herramientas propuestas para el desarrollo del sistema de historias médicas electrónicas se tuvieron dificultades para comparar a Open EHR Gen Framework con las demás herramientas. Las otras eran soluciones finales pensadas para un contexto específico, mientras que Open EHR Gen era un marco de trabajo, un producto no acabado. Finalmente, OpenEHR Gen Framewrok demostró ser una excelente herramienta que permite crear sistemas de historias médicas electrónicas. La elección de OpenEHR Gen Framework se debió en gran medida a la aplicación de estándares. Estandarizar la estructura de la historia médica mediante la aplicación de la norma OpenEHR dio como resultado un sistema económicamente mantenible y adaptable a nuevas necesidades. Para realizar un cambio sobre un dominio clínico, no será necesario Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 137 realizar modificaciones sobre el código fuente de la aplicación, solamente bastará con modificar los arquetipos que describen los conceptos clínicos de ese dominio. Esto redunda en disminución de costos y tiempo empleado a la hora de realizar cambios. Utilizar la arquitectura de documentos clínicos definida por HL7, permitió la interoperabilidad sintáctica y semántica entre diferentes instancias del sistema SOS-HME. El documento CDA demostró ser un elemento efectivo para el intercambio de información clínica. Sin embargo se depende única y exclusivamente del formato CDA para el intercambio de información clínica. Una posible solución sería incorporar al componente de interoperabilidad otros estándares de mensajería tales como el ISO/CEN 13606. El índice maestro de pacientes SOS-IMP, es una herramienta que va a permitir a cualquier sistema que implemente el estándar CDA y que esté en capacidad de consumir servicios web SOAP, intercambiar documentos con otros centros asistenciales. Es necesario destacar que fue invertida inicialmente gran cantidad de tiempo para analizar y comprender el funcionamiento de la herramienta OpenEHR Gen Framework. Ninguno de los miembros del equipo de desarrollo estaba familiarizado con el entorno Groovy & Grails. Esa inversión inicial repercutió en beneficios al momento de realizar modificaciones sobre la aplicación. Así mismo utilizar la metodología de desarrollo ágil XP permitió la adaptabilidad del proyecto frente a los esperados cambios de requisitos sobre la marcha, además agilizó el desarrollo permitiendo redefinir la orientación del mismo luego de culminada cada iteración con la finalidad de satisfacer los requisitos restantes. La solución software elaborada compuesta por las aplicaciones SOS-HME y SOS- IMP son un primer paso para acercar un servicio especializado de salud de calidad, como lo es la historia médica electrónica, a poblaciones rurales del país dónde hace presencia el programa SOS Telemedicina para Venezuela. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 138 REFERENCIAS BIBLIOGRÁFICAS 1. Martínez Hernandez, Juan. The Medical History. Informe técnico, Hospital Santa María del Rosell, Cartagena, Murcia. [En línea] 2006. [Citado el: 5 de Abril de 2012.] http://www.aebioetica.org/rtf/04-BIOETICA-59.pdf. 2. CEPAL. Salud electrónica en américa latina y el caribe: avances y desafíos. [En línea] Noviembre de 2010. [Citado el: 25 de Marzo de 2012.] http://www.eclac.cl/publicaciones/xml/5/41825/di-salud-electrinica-LAC.pdf. 3. CAIBCO. SOS Telemedicina para Venezuela. [En línea] 2010. [Citado el: 15 de Marzo de 2012.] http://www.sos.ucv.ve. 4. —. Proyecto SOS Telemedicina para Venezuela. [En línea] 2007. [Citado el: 12 de Marzo de 2012.] http://www.sos.ucv.ve/SOSTelemedicina.pdf. 5. Falagán Mota, José y Nogueira Fariña, Javier. La información clínica y de salud. [En línea] 2003. [Citado el: 17 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO3.pdf. 6. Zengarini, Hernán. Historia Clínica y Registros Médicos Informatizados. s.l. : DEC, 2000. 7. Carnicero, Javier. De la historia clínica a la historia de salud electrónica (resumen). [En línea] 2003. [Citado el: 13 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO1.pdf. 8. Salinas, Hernán. Historia y filosofía médica. s.l. : McGraw Hil, 1998. ISBN: 9789701020418. 9. International organization for standarization. ISO 18308 - Requirements for an Electronic Health Record Reference Architecture. [En línea] 2006. [Citado el: 1 de Marzo de 2012.] http://www.openehr.org/standards/iso.html. 10. Gabayo Sánchez , José Antonio, y otros, y otros. La seguridad, confidencialidad y disponibilidad de la información clínica. [En línea] 2003. [Citado el: 8 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO9.pdf. 11. Gervas, J, García Sagredo, P y Pérez Fernandez, M. El libre acceso del paciente a su historia clínica. [En línea] 1988. [Citado el: 9 de Marzo de 2012.] http://www.equipocesca.org/wp- content/uploads/2009/04/gervas-historia-del-paciente-bis-1987.pdf. 12. Carnicero, Javier y Vásquez López, José Manuel. La identificación, un requisito previo a la historia de salud electrónica. [En línea] 2003. [Citado el: 14 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO4.pdf. 13. SAIME. Servicio de cedulación. [En línea] 2011. [Citado el: 14 de Marzo de 2012.] http://www.saime.gob.ve/Mis_ident/servicios/cedulacion.php. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 139 14. Arellano Rodríguez, Madelein. Hacia una historia médica electrónica, entre lo legal y lo ético. [En línea] vol.5, no.1, Abril de 2008. [Citado el: 10 de Marzo de 2012.] http://www.scielo.org.ve/scielo.php?script=sci_arttext&pid=S1690- 75152008000100006&lng=es&nrm=iso. ISSN 1690-7515. 15. Geraci, Anne. IEEE Standard Computer Dictionary: Compilation of IEEE Standard Computer Glossaries. New York : s.n., 1991. ISBN:1559370793. 16. International organization for standarization. ISO/IEC Guide 2:2004. [En línea] 2004. [Citado el: 1 de Marzo de 2012.] http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39976. 17. Moneagudo Peña, José Luis y Hernández Salvador, Carlos. Estándares para la historia clínica electrónica. [En línea] 2003. [Citado el: 7 de Marzo de 2012.] http://www.conganat.org/seis/informes/2003/PDF/CAPITULO7.pdf. 18. The Open EHR Foundation. Useful Resources. [En línea] 2007. [Citado el: 11 de Abril de 2012.] http://www.openehr.org/shared-resources/getting_started/getting_started.html. 19. —. Architecture Overview. [En línea] 13 de Noviembre de 2008. http://www.openehr.org/releases/1.0.2/architecture/overview.pdf. 20. —. Archetype Definition Language ADL 1.4. [En línea] 12 de Diciembre de 2008. [Citado el: 1 de Abril de 2012.] http://www.openehr.org/releases/1.0.2/architecture/am/adl.pdf. 21. —. Clinical Knowledge Manager. [En línea] 3 de Diciembre de 2010. [Citado el: 1 de Abril de 2012.] http://www.openehr.org/wiki/display/healthmod/Clinical+Knowledge+Manager. 22. The EN 13606 Association. The CEN/ISO EN13606 standard. [En línea] 2011. [Citado el: 11 de Abril de 2012.] http://www.en13606.org/the-ceniso-en13606-standard. 23. Health Level Seven International. About HL7. [En línea] 2012. [Citado el: 1 de Abril de 2012.] http://www.hl7.org/about/index.cfm?ref=nav. 24. —. HL7 Messaging Standard Version 2.x. [En línea] 2012. [Citado el: 13 de Abri de 2012.] http://www.hl7.org/implement/standards/product_matrix.cfm?Family=V2. 25. —. V3 Messages. [En línea] 2012. [Citado el: 13 de Abril de 2012.] http://www.hl7.org/implement/standards/v3messages.cfm. 26. —. HL7 Clinical Document Architecture, Release 2.0. [En línea] 2012. [Citado el: 29 de Marzo de 2012.] http://www.hl7.org/implement/standards/product_brief.cfm?product_id=7. 27. Junta de Castilla y León. Guias de integración CDa. [En línea] 2012. [Citado el: 5 de Abril de 2012.] http://www.saludcastillayleon.es/empresas/es/estandaresint. 28. SELA. II Seminario Regional sobre Salud-e y Telemedicina en América Latina y el Caribe: Prácticas de innovación y estándares. [En línea] Julio de 2011. http://www.sela.org/view/index.asp?ms=258&pageMs=87355. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 140 29. García, José Manuel, Escalona, Marisol y Dias, Luis. Formularios y flujos del sistema de información de salud SIS. s.l. : Ministerio del poder popular para la salud. 30. Falcón, Luis. GNU Health. [En línea] [Citado el: 10 de Abril de 2012.] http://medical.sourceforge.net/es/index.html. 31. OpenMRS LLC. About OpenMRS. [En línea] 2011. [Citado el: 10 de Abril de 2012.] http://openmrs.org/about/. 32. Pazos, Pablo y Carrasco, Leandro. OpenEHR Gen Framework. [En línea] 2010. [Citado el: 10 de Abril de 2012.] http://code.google.com/p/open-ehr-gen-framework/. 33. Pazos, Pablo. Open EHR en Español. [En línea] 2012. [Citado el: 10 de Abril de 2012.] http://openehr.org.ed. 34. Smith, Glen y Ledbrook, Peter. Grails in action. Greenwich : Manning, 2009. ISBN 978-1- 933988-93-1. 35. König, Dierk. Groovy in action. Greenwich : Manning, 2007. ISBN 1-932394-84-2. 36. Rocher, Graeme y Brown, Jeff. The Definitive Guide to Grails, Second Edition. s.l. : Apress, 2009. ISBN-13 (electronic): 978-1-4302-0871-6. 37. Joskowicz, José. Reglas y Prácticas en eXtreme Programming. [En línea] 2008. [Citado el: 5 de Abril de 2012.] http://iie.fing.edu.uy/~josej/docs/XP%20-%20Jose%20Joskowicz.pdf. 38. Chen, Rong. OpenEHR Java Reference Implementation v1.0.1. 2007. 39. Schuler, Thilo, y otros, y otros. Towards Automatically Generating Graphical User Interfaces from openEHR Archetypes. [En línea] 2006. [Citado el: 5 de Marzo de 2012.] http://www.openehr.org/wiki/download/attachments/18513937/Schuler_et_al-MIE_2006_Paper- Very_late_draft.pdf?version=1&modificationDate=1291949770000. 40. Seely, Scott. Understanding WS-Security. [En línea] 2002. [Citado el: 20 de Marzo de 2012.] http://msdn.microsoft.com/en-us/library/ms977327.aspx. 41. Pazos, Pablo y Carrasco, Leandro. Guía de creación de arquetipos paso a paso. [En línea] 2010. [Citado el: 5 de Marzo de 2012.] http://code.google.com/p/open-ehr-gen- framework/downloads/detail?name=Creando%20arquetipos%20v01.pdf&can=2&q=. 42. —. Sintáxis y configuración de plantillas. [En línea] 2010. [Citado el: 5 de Marzo de 2012.] http://code.google.com/p/open-ehr-gen- framework/downloads/detail?name=Sintaxis%20y%20configuraci%C3%B3n%20de%20plantillas %20v0.1.pdf&can=2&q=. 43. Ocean Informatics. Archetype Editor. [En línea] 2007. [Citado el: 4 de Marzo de 2012.] https://wiki.oceaninformatics.com/confluence/display/TTL/Archetype+Editor. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 141 44. The OpenEHR Foundation. About ADL 1.5 Workbench. [En línea] 2012. [Citado el: 4 de Marzo de 2012.] http://www.openehr.org/svn/ref_impl_eiffel/TRUNK/apps/adl_workbench/doc/web/index.html. 45. Oestreich, Christian. Grails Cxf-Client. [En línea] 2011. [Citado el: 20 de Marzo de 2012.] http://grails.org/plugin/cxf. 46. Don Ho. About Notepad++. [En línea] 2011. [Citado el: 4 de Marzo de 2012.] http://notepad- plus-plus.org/. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 142 GLOSARIO DE SIGLAS ADL: Archetype Definition Language. En español: lenguaje de definición de arquetipos. ANSI: American National Estandards Institute. En español: instituto nacional americano de estándares. APS: Atención Primaria de Salud. ASTM: American Section of The International Association for Testing Materials. En español: sociedad americana para prueba de materiales. CAIBCO: Centro de Análisis de Imágenes Biomédicas Computarizadas. CDA: Clinical Document Architecture. En español: arquitectura de documento clínico electrónico. CEN: Comité Europeo de Normalización. CEPAL: Comisión Económica para América Latina y el Caribe. CI: Cédula de Identidad. CIE-10: Clasificación Internacional de Enfermedades. En ingles ICD-10. CRM: Customer Relationship Management. En español: administración basada en la relación con los clientes. CRUD: Create Read Update Delete. En español: crear, leer, actualizar, borrar. CXF: Marco de trabajo para implementación de servicios web. DSP: Dirección de Salud Poblacional. EPI: Formularios utilizados por el SIS para el registro estadístico en Venezuela. ERP: Enterprise Resource Planning. En español: planificación de recursos empresariales. GNU: Movimiento y comunidad de software y conocimiento libre. GORM: Grails Object Relational Mapping. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 143 GPL: GNU General public License. En español: licencia pública general de GNU. GUI: Graphic User Interface. En español: interfaz gráfica de usuario. HCE: Historia Clínica Electrónica. HCI: Historia Clínica Informatizada. HIS: Hospital información System. En español: sistema de información hospitalaria. HL7: Health Level Seven. En español: organización de desarrollo de estándares. HM: Historia Médica. HME: Historia Médica Electrónica. HSQL: Hibernate Sequence Query Language. En español: lenguaje declarativo hibernate de acceso a bases de datos relacionales HTML: Hyper Text Markup Language. En español: lenguaje de marcado de hipertexto HTTP: Hiper Text Transfer Protocol. En español: protocolo de transferencia de hipertexto. IDE: Integrated Development Environment. En español: entorno de desarrollo integrado. IEEE: Institute of Electrical and Electronics Engineers. En español: instituto de ingenieros eléctricos y electrónicos. IMP: Índice Maestro de Pacientes. IoC: Inversión of Control. En español: inversión de control. ISO/CEN 13606: Norma del CEN diseñada para lograr la interoperabilidad semántica en la comunicación de la HCE. Esta norma está aprobada por ISO. ISO: Organización Internacional de estandarización. LOINC: Logical Observation Identifies Names and Codes. En español: sistema de códigos universal para la identificación de observaciones clínicas y de laboratorio. MVC: Modelo Vista Controlador. OMS: Organización Mundial de la Salud. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 144 OpenEHR: Open Electronic Healt Record. En español: registro electrónico de salud abierto. OPS: Organización Panamericana de la Salud. RIM: Reference Information Model. En español: modelo de referencia de información. SAIME: Servicio Administrativo de Identificación, Migración y Extranjería. SELA: Sistema Económico Latinoamericano y del Caribe. SIS: Sistema de Información en Salud. SNOMED: Systematized Nomenclature of Medicine. En español: nomenclatura sistematizada de medicina. SOAP: Simple Object Access Protocol. En español: protocolo estándar que define cómo dos objetos en diferentes procesos pueden comunicarse por medio de intercambio de datos XML. SQL: Structured Query Language. En español: lenguaje declarativo de acceso a bases de datos relacionales. STS: Spring Source Tool Swite. En español: conjunto de herramientas Spring (framework de desarrollo de aplicaciones para Java Enterprice). SVN: Sistema de Control de Versiones. TCP/IP: Modelo de descripción de protocolos de red de internet. TIC: Tecnologías de la información y la comunicación. UML: Unified Modeling Language. En español: lenguaje unificado de modelado. UUID: Universally Unique Identifier. En español: identificador único universal. VIH: Virus de Inmunodeficiencia Humana. WS- SECURITY: Web Servicies Security. En español: seguridad en servicios web. XML: Extensible Markup Language. En español: metalenguaje extensible de etiquetas. XP: Extreme Programming. En español: programación extrema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 145 APÉNDICE A - DOCUMENTACIÓN TÉCNICA SOS- HME A continuación se expone de manera detallada la documentación técnica de la aplicación SOS-HME, compuesta por el modelo del dominio, modelo de base de datos y vistas. Modelo de dominio El modelo de dominio describe la estructura del sistema. A continuación se muestran los paquetes principales en los cuales está dividida la aplicación SOS-HME, sus clases con atributos y funciones, y las relaciones existentes entre las clases. Lista de paquetes:  Paquetes demograficos: o demographic.party  Paquetes clínicos: o Hce.core.common o Hce.core.composition o Hce.core.data_types o Hce.core.datastructure La descripción de las clases se realiza en el rango de tablas que va desde la Tabla - A- 1 hasta Tabla -A- 63. Paquetes Demográficos Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 146 demographic.party, ver Figura -A- 1. Figura -A- 1. Paquete Party Fuente: Elaboración propia Tabla -A- 1. PARTY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 147 Clase PATHABLE Propósito Generalización de todos los tipos de participantes, incluyendo entidades del mundo real y sus roles. Una instancia de la clase PARTY es una entidad que puede participar en una actividad. Hereda de LOCATABLE Atributos Firma Significado 1..1 uid: HIER_OBJECT_ID Identificador. 1..1 identities: List <PARTY_IDENTITY> Lista de diferentes identidades. Ej. nombre legal, alias, nombre comercial, etc. 0..1 contacts: List <CONTACT> Lista de contactos. 0..1 relationsships: List <PARTY_RELATIONSHIP> Relaciones dónde la entidad funciona como fuente. 1..1 type: String Nombre de la instancia de PARTY. Ej. “persona”, “organización”, etc. O nombre del rol. Ej. “medico general”, “enfermera”, etc. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 148 Tabla -A- 2. PERSON Class Clase PERSON Propósito Descripción genérica de persona. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 3. ORGANISATION Class Clase ORGANIZATION Propósito Descripción genérica de organización. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 4. GROUP Class Clase GROUP Propósito Descripción genérica de grupo. Un grupo por lo general es una agrupación de personas u organizaciones. Ej. “grupo de cardiología”. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 5. AGENT Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 149 Clase AGENT Propósito Concepto genérico de agente. El cual en este caso se refiere solo a sistemas software y otros dispositivos, sin incluir personas ni organizaciones. Hereda de ACTOR Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 6. ROLE Class Clase ROLE Propósito Descripción genérica de un rol desempeñado por un actor. Ej. “médico”, “enfermera”, “paciente”, etc. Hereda de PARTY Atributos Firma Significado 0..1 time_validity_to: java.lang.Date Válido desde. 0..1 time_validity_from: java.lang.Date Válido hasta. 1..1 performer: ACTOR Referencia al actor que está actuando con este rol. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquetes Clínicos Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 150 Paquete hce.core.common.archetyped, ver Figura -A- 2 Figura -A- 2. Paquete hce.core.common.archetyped Fuente: Elaboración propia Tabla -A- 7. PATHABLE Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 151 Clase PATHABLE Propósito Generalización de todas las clases cuyas instanciaciones pueden ser accesibles mediante rutas (path), y de las cuales se puede localizar a un objeto hijo mediante una ruta. Atributos Firma Significado 0..1 rm_parent_id: Long Identificador del padre. 0..1 path: String Ruta. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 8. LOCATABLE Class Clase LOCATABLE Propósito Generalización de todas las clases que pueden ser arquetipas. Hereda de PATHABLE Atributos Firma Significado 1..1 archetype_node_id: String Identificador en tiempo de ejecución para un nodo de arquetipo. Precedido por las siglas “at”, luego un número de cuatro cifras. Ej. “at0005”. 0..1 name: DV_TEXT Nombre en tiempo de ejecución. 0..1 archetype_details: ARCHETYPED Detalles del arquetipo utilizado en este nodo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 9. ARCHETYPED Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 152 Clase ARCHETYPED Propósito Una instancia de la clase ARCHETYPED contiene información de identificación relevante del arquetipo al cual se hace referencia. Atributos Firma Significado 1..1 archetype_id: ARCHETYPE_ID Identificador universal del arquetipo. 0..1 template_id: TEMPLATE_ID Identificador universal de templates. 1..1 rm_version: String Versión del modelo de referencia. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.common.generic, ver Figura -A- 3 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 153 Figura -A- 3. Paquete hce.core.common.generic Fuente: Elaboración propia Tabla -A- 10. PARTY_PROXY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 154 Clase PARTY_PROXY Propósito Clase que describe el concepto de quien tiene alguna participación en el registro clínico. Atributos Firma Significado 0..1 external_ref: PARTY_REF Referencia externa a un sistema demográfico o de identificación. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 11. PARTY_SELF Class Clase PARTY_SELF Propósito Es un PARTY_PROXY que representa el sujeto de cuidado involucrado en el registro clínico. Uso Usado para indicar que le pertenece el registro. Puede o no tener una referencia externa. Hereda de PARTY_PROXY Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 12. PARTY_IDENTIFIED Class Clase PARTY_IDENTIFIED Propósito Identificación simple de un PARTY_PROXY que no sea el sujeto de cuidado. Tiene una referencia externa para profundizar en la identificación de ser necesario. Use Usado para describir instancias donde solo los identificadores pueden ser conocidos. Ej. Los proveedores de servicios de salud podemos describirlos con el nombre y un código asociado. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 155 Hereda de PARTY_PROXY Atributos Firma Significado 0..1 name: String Nombre. 0..1 identifiers: List <DV_IDENTIFIER> Lista de identificadores formales. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 13. PARTICIPATION Class Clase PARTICIPATION Propósito Modelo de participación de un actor en una actividad. Use Usado para representar cualquier participación. Atributos Firma Significado 1..1 performer: PARTY_PROXY Identifica al actor de la actividad. 1..1 function: DV_TEXT La función del actor. 1..1 mode: DV_CODED_TEXT La forma en la cual el actor realiza la actividad. Ej. presencial, por teléfono, por email, etc. 0..1 time: DV_INTERVAL Tiempo de la participación. De ser una participación a futuro se coloca un tiempo estimado. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 14. AUDIT_DETAILS Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 156 Clase AUDIT_DETAILS Propósito Detalles de auditoria. Uso Usado para representar cualquier participación. Atributos Firma Significado 1..1 system_id: String Identificador de la parte del sistema dónde fue realizado el cambio. 1..1 committer: PARTY_PROXY El actor responsable del cambio. 1..1 time_committed: DV_DATE_TIME Tiempo en el que fue realizado el cambio. 1..1 change_type: DV_CODED_TEXT Tipo de cambio realizado. 0..1 description: DV_TEXT Descripción opcional. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.common.directory, ver Figura -A- 4 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 157 Figura -A- 4. Paquete hce.core.common.directory Fuente: Elaboración propia Tabla -A- 15. FOLDER Class Clase FOLDER Propósito Clase que modela el concepto de carpeta. Hereda de LOCATABLE Atributos Firma Significado 0..1 folders: List <FOLDER> Sub-carpetas contenidas dentro de esta carpeta. 0..1 items: List <OBJECT_REF> Lista de objetos referenciados dentro de esta carpeta. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.common.change_control, ver Figura -A- 5 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 158 Figura -A- 5. Paquete hce.core.common.change_control Fuente: Elaboración propia Tabla -A- 16. VERSION Class Clase Version Propósito Clase utilizada para versionar las composiciones. Atributos Firma Significado 1..1 time_commited: DV_DATE_TIME Tiempo de creación de la versión. 1..1 commiter: PARTY_PROXY Creador de la versión. 1..1 party_self: PARTY_PROXY Sujeto de cuidado perteneciente a la composición. 1..1 life_cicle_state: Boolean Estado en el ciclo de vida de la composición. 0..1 nombre_arch_cda: String Nombre del archivo CDA HL7 asociado a la composición. Solo en caso de que la composición Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 159 esté completa y firmada. 1..1 num_of_version: Integer Número de la versión. 0..1 data: LOCATABLE Datos de la versión. 1..1 commit_audit: AUDIT_DETAILS Detalles de auditoria. 1..1 contribution: OBJECT_REF Referencia al objeto versionado. 0..1 signature: String Firma digital sobre el contenido de la versión. 0..1 inIMP: Boolean Indica si el objeto CDA creado a partir de la versión se encuentra en el índice maestro de pacientes SOS- IMP. 0..1 canonical_form: String Serializacion a String de los datos de la versión. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Paquete hce.core.composition, ver Figura -A- 6 Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 160 Figura -A- 6. Paquete hce.core.composition Fuente: Elaboración propia Tabla -A- 17. COMPOSITION Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 161 Clase COMPOSITION Propósito Un registro clínico está compuesto por un conjunto de objetos de tipo COMPOSITION. La clase COMPOSITION modela documentos clínicos. Hereda de LOCATABLE Atributos Firma Significado 0..1 content: List <CONTENT_ITEM> Contenido de la composición. 0..1 context: EVENT_CONTEXT Contexto de la atención clínica. 1..1 composer: PARTY_PROXY El principal responsable del contenido de la composición. 1..1 category: DV_CODED_TEXT Indica la categoría a la cual pertenece la composición. 1..1 language: CODE_PHRASE Idioma en el que cual está escrita la composición. 1..1 territory: CODE_PHRASE Nombre del territorio en el cual ha sido escrita la composición. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 18. EVENT_CONTEXT Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 162 Clase EVENT_CONTEXT Propósito Registrar el contexto del evento clínico. Hereda de PATHABLE Atributos Firma Significado 0..1 start_time: DV_DATE_TIME Tiempo de comienzo de la atención clínica. end_time: DV_DATE_TIME Tiempo de finalización de la atención clínica. location: String Lugar dónde ocurre el acto clínico. setting: DV_CODED_TEXT Contexto en el que ocurre el acto clínico. participations: Actores involucrados en el evento clínico. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 19. CONTENT_ITEM Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 163 Clase CONTENT_ITEM Propósito Generalización de todos los tipos de contenido. Hereda de LOCATABLE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 20. SECTION Class Clase SECTION Propósito Representa un cabezal en una estructura de cabeceras, o árbol de secciones. Uso Agrupar entradas de la composición de acuerdo a la estructura arquetipada. Mal uso No debe confundirse su función con respecto al uso de la clase ENTRY. Hereda de CONTENT_ITEM Atributos Firma Significado 0..1 items: List <CONTENT_ITEM> La sección contiene una lista ordenada de ítems, la cual puede incluir clases del tipo SECTION o ENTRY. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 21. ENTRY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 164 Clase ENTRY Propósito Generalización de todos los tipos de entradas posibles. Hereda de CONTENT_ITEM Atributos Firma Significado 1..1 language: CODE_PHRASE Indicador del idioma en el cual está escrita la entrada. 1..1 encoding: CODE:PHRASE Nombre de la codificación de caracteres en la cual está escrita la entrada. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 22. ADMIN_ENTRY Class Clase ADMIN_ENTRY Propósito Subtipo de entrada destinada a grabar información administrativa. Información vinculada al proceso clínico, pero que no es propiamente clínica. Uso Usada en procesos administrativos como: admisión, identificación de sala, facturación, etc. Mal uso No debe ser usada para registrar información que puede ser clínicamente relevante. Hereda de ENTRY Atributos Firma Significado 1..1 data: ITEM_STRUCTURE Los datos a ser capturados en la entrada, modelado según definición de arquetipo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 23. CARE_ENTRY Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 165 Clase CARE_ENTRY Propósito Generalización de todos los tipos de entradas clínicamente relevantes. Hereda de ENTRY Atributos Firma Significado 0..1 protocol: ITEM_STRUCTURE Descripción que sirve de contexto al registro de la información. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 24. OBSERVATION Class Clase CARE_ENTRY Propósito Subtipo de entrada de cuidado, para registrar información clínica ocurrida en el pasado o presente, que haya podido ser apreciada. Uso Registrar lo observado con una noción objetiva. Mal uso No debe ser utilizada para registrar opiniones sobre estados futuros, tales como: diagnósticos, instrucciones, planes, etc. Hereda de CARE_ENTRY Atributos Firma Significado 1..1 data: HISTORY Los datos de la observación. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 25. EVALUATION Class Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 166 Clase EVALUATION Propósito Subtipo de entrada de cuidado para entradas clasificadas como evaluaciones. Uso Se utiliza para registrar todo tipo de declaraciones que evalúan otro tipo de declaraciones, tales como: interpretación de observaciones, diagnósticos, hipótesis, etc. Mal uso No debe ser utilizada para declaraciones que involucren instrucciones, acciones u observaciones. Hereda de CARE_ENTRY Atributos Firma Significado 1..1 data: ITEM_STRUCTURE Los datos de la evaluación. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 26. INSTRUCTION Class Clase INSTRUCTION Propósito Usada para registrar acciones específicas en el futuro. Uso Registro de acciones a futuro, tales como: registro de órdenes de medicamentos, monitoreo, orden de exámenes, etc. Mal uso No debe ser utilizado para registrar observaciones, evaluaciones o acciones. Hereda de CARE_ENTRY Atributos Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 167 1..1 narrative: DV_TEXT Texto que indica sobre que trata la instrucción. 0..1 activities: List <ACTIVITY> Lista de actividades de la instrucción. 0..1 expiry_time: DV_DATE_TIME Tiempo de expiración que índica cuando una instrucción ha vencido. 0..1 wf_definition: DV_PARSEABLE Flujo de trabajo asociado con la instrucción, expresado en una cadena de texto con formato que pudiese ser externo al contexto del sistema. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 27. ACTIVITY Class Clase ACTIVITY Propósito Define una actividad a realizar dentro de una instrucción Hereda de LOCATABLE Atributos Firma Significado 1..1 description: ITEM_STRUCTURE Descripción de la actividad. 1..1 timing: DV_PARSABLE Tiempo de la actividad, en forma de un String parseable, como un HL7 GTS o ISO8601. 1.1 action_archetype_id: String Indica mediante una expresión regular los identificadores válidos de arquetipos para acciones correspondientes a esta actividad. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 168 Tabla -A- 28. ACTION Class Clase ACTION Propósito Se utiliza para registrar una acción clínica realizada, ya sea como desencadenante de alguna actividad que forma parte de una instrucción, o de manera aislada. Hereda de CARE_ENTRY Atributos Firma Significado 1..1 time: DV_DATE_TIME Punto en el tiempo en el que la acción fue realizada. 1..1 description: ITEM_STRUCTURE Descripción de la actividad a realizar. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 169 Paquete hce.core.data_types, ver Figura -A- 7 Figura -A- 7. Paquete hce.core.data_types.basic Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 170 Tabla -A- 29. DATA_VALUE Class Clase DATA_VALUE (abstract) Propósito Sirve como un antepasado común de todos los tipos de valor de datos en modelos openEHR. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 30. DV_BOOLEAN Class Clase DV_BOOLEAN Propósito Elementos booleanos, tales como verdadero o falso ó si o no Uso Representar valores booleanos Mal uso No debe utilizarse ingenuamente para modelado de tipos enumerados tales como masculino y femenino Hereda de DATA_VALUE Atributos Firma Significado value : Boolean Valor booleano que posee el objeto Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 31. DV_STATE Class Clase DV_STATE Propósito Para representar los valores de estado que obedecen a una máquina de estados Uso DV_STATE es expresado como un String cuyos valores deben ser derivados de una máquina de estados Mal uso Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 171 Hereda de DATA_VALUE Atributos Firma Significado value : DV_CODED_TEXT Nombre del estado Is_terminal: Boolean Indica si es un estado terminal, tal como “abortado”, “completado” etc. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 32. DV_IDENTIFIER Class Clase DV_IDENTIFIER Propósito Tipo utilizado para representar identificadores del mundo real, tales como: números de licencia, código de seguro social, número de orden etc. Uso DV_IDENTIFIER es utilizado para representar cualquier identificador del mundo real, vinculado con alguna autoridad o agencia. Mal uso No debe ser usado para identificar elementos propios de la infraestructura del sistema; los tipos OBJECT_ID y OBJECT_REF están definidos para ese propósito. Hereda de DATA_VALUE Atributos Firma Significado issuer : String Autoridad vinculada con el identificador. assigner: String Organización vinculada con el identificador. id: String Valor del identificador. Estructurado según las reglas de la entidad Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 172 asignadora. type: String Define el tipo de identificador. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Figura -A- 8. Paquete hce.core.data_types.encapsulated Fuente: Elaboración propia Tabla -A- 33. DV_ENCAPSULATED Class Clase DV_ENCAPSULATED (abstracta) Propósito Clase abstracta que define la metada común de todos los tipos de datos encapsulados. Hereda de DATA_VALUE Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 173 Atributos Firma Significado 1..1 size: Integer Tamaño original en bytes de los datos encapsulados sin codificar. 0..1 charset: CODE_PHRASE Nombre de la codificación de caracteres en el cual el valor ha sido codificado. 0..1 language: CODE_PHRASE Indicador opcional que indica el lenguaje en el cual los datos han sido escritos. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 34. DV_MULTIMEDIA Class Clase DV_MULTIMEDIA Propósito Es una especialización de DV_ENCAPSULATED para tipos audiovisuales. Hereda de DV_ENCAPSULATED Atributos Firma Significado 0..1 alternate_text: String Texto alternativo del elemento multimedia. 1..1 media_type: CODE_PHRASE “media type” del elemento 0..1 compression_algorithm: CODE_PHRASE Algoritmo de compresión utilizado. 0..1 integrity_check: Array <byte> Checksum de integridad. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 174 0..1 integrity_check_algorithm: CODE_PHRASE Algoritmo utilizado en Checksum de integridad. 0..1 thumbnail: DV_MULTIMEDIA Thumbnail de este element. 0..1 uri: DV_URI Referencia a algún elemento de información externa. 0..1 data: Array <byte> Datos del element multimedia. Funciones Firma Significado getTrasients: Object Los valores posibles son: external, inline, compresed. has_integrity_check: boolean Verdadero si la comprobación de integridad es satisfactoria Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 35. DV_PARSEABLE Class Clase DV_PARSEABLE Propósito Datos encapsulados no descritos en el modelo interno del sistema pero que puede ser representado como una cadena de texto Hereda de DV_ENCAPSULATED Atributos Firma Significado 1..1 value: String Datos encapsulados en formato texto. 1..1 formalism: String Nombre del formalismo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 175 Figura -A- 9. Paquete hce.core.data_types.quantity Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 176 Tabla -A- 36. DV_ORDERED Class Clase DV_ORDERED Propósito Generalización de los valores que pueden ser ordenados. Hereda de DATA_VALUE Atributos Firma Significado 0..1 normal_range: DV_INTERVAL Rango normal opcional. 0..1 other_reference_ranges: List <REFERENCE_RANGE> Rangos de referencia para un contexto particular de medición Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 37. DV_INTERVAL Class Clase DV_INTERVAL Propósito Clase genérica que define un intervalo o rango en tipos de datos que puedan ser comparados. Uso Es usado para definir intervalos de datos, tiempos, cantidades y otros. Hereda de DATA_VALUE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 38. REFERENCE_RANGE Class Clase REFERENCE_RANGE Propósito Define un nombre de rango de valores. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 177 Uso Puede ser utilizado para representar distintos tipos de rangos: normal, peligroso, crítico, etc. Hereda de DATA_VALUE Atributos Firma Significado 1..1 range: DV_INTERVAL<T> Valores del rango, máximo y mínimo. 1..1 meaning: DV_TEXT Indica el significado del rango, ej. “normal”, “crítico”, etc. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 39. DV_ORDINAL Class Clase DV_ORDINAL Propósito Modela clasificaciones y resultados. Ej. dolor, valores Apgar, etc. Donde a) entre valores existe un orden, b) no implica que la distancia entre cada valor sea una constante, y c) el número total de valores es finito. Aunque el término “ordinal” en matemáticas denote números naturales solamente, en DV_ORDINAL cualquier número entero es permitido, debido a que los números negativos y el número cero, son utilizados en medicina para establecer valores alrededor de un punto neutro. Por ejemplo: -3, -2, -1, 0, 1, 2, 3 – valores de respuesta de reflejos 0, 1, 2 – Valores Apgar. Uso Utilizado para grabar cualquier dato clínico que habitualmente se registra con valores simbólicos o textuales. Cada valor en DV_ORDINAL posee un valor numérico (índice) y un valor simbólico o textual. Hereda de DV_ORDERED Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 178 Atributos Firma Significado 1..1 value: Integer Valor numérico. 1..1 symbol: DV_CODED_TEXT Representación textual de la numeración. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 40. DV_QUANTIFIED Class Clase DV_QUANTIFIED Propósito Generalización de valores que son cuantificables, valores que poseen una magnitud precisa. Hereda de DV_ORDERED Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 41. DV_AMOUNT Class Clase DV_AMOUNT Propósito Generalización que define el concepto de cantidad. Hereda de DV_QUANTIFIED Atributos Firma Significado 0..1 accuracy: Real Número real que expresa la precisión de la medición 0..1 accuracy_is_percent: Boolean Verdadero si el registro de precisión se realizó en forma de porcentaje. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 179 Tabla -A- 42. DV_QUANTITY Class Clase DV_QUANTITY Propósito Expresar cantidades como magnitudes y unidades. Hereda de DV_AMOUNT Atributos Firma Significado 1..1 magnitude: Double Magnitud numérica de la cantidad. 1..1 units: String String que respresenta la unidad. Ej. “km/h”, “mm[Hg]”. 0..1 precisión: Integer Precisión que se refiere al número total de posiciones decimales. El valor -1 índica sin límites de posiciones decimales. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 43. DV_COUNT Class Clase DV_COUNT Propósito Registro de cantidades contables en el conjunto de números enteros Uso Se usa para tipos contables, tales como: cantidad de embarazos, números de cigarrillos por día, etc. Mal uso No debe ser usado para cantidades que deban ser acompañadas de unidades de medida, en ese caso usar DV_QUANTITY. Hereda de DV_AMOUNT Atributos Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 180 1..1 magnitude: Integer Magnitud numérica. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 44. DV_PROPORTION Class Clase DV_PROPORTION Propósito Modela valores expresados como fracciones. Uso Usado para representar proporciones y porcentajes. Mal uso No debe ser utilizado para presentar conceptos tales como la presión arterial, que a menudo son escritas utilizando el carácter “/”, propio de una fracción. Hereda de DV_AMOUNT Atributos Firma Significado 1..1 numerator: Real Numerador. 1..1 denominator: Real Denominador. 1..1 precisión: Integer Precisión que se refiere al número total de posiciones decimales en las que puede ser expresada la proporción. El valor -1 índica sin límites de posiciones decimales. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 181 Tabla -A- 45. DV_TEMPORAL Class Clase DV_TEMPORAL Propósito Generalización de los distintos tipos de tiempo. Hereda de DATA_VALUE Atributos Firma Significado 1..1 value: String Valor de tiempo. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 46. DV_DATE Class Clase DV_DATE Propósito Representa un instante una fecha, de acuerdo al calendario Gregoriano. Semantica definida en ISO 8601 Uso Se usa para grabación de fechas. Hereda de DV_TEMPORAL Atributos Firma Significado 1..1 value: String Valor de fecha ISO8601. Funciones Firma Significado toDate: java.util.Date Convierte el valor String según ISO 8601 a un objeto tipo java.util.Date. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 182 Tabla -A- 47. DV_TIME Class Clase DV_TIME Propósito Representa una cantidad de horas, bajo el sistema de 24H. Semántica definida en ISO 8601. Uso Se usa para grabación de tiempo. Hereda de DV_TEMPORAL Atributos Firma Significado 1..1 value: String Valor de horas ISO8601. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 48. DV_DATE_TIME Class Clase DV_DATE_TIME Propósito Representa un punto absoluto en el tiempo, con precisión de segundos. Semántica definida en ISO 8601. Uso Se usa para grabación de fechas y hora en conjunto. Hereda de DV_TEMPORAL Atributos Firma Significado 1..1 value: String Valor de fecha y hora ISO8601. Funciones Firma Significado toDate: java.util.Date Convierte el valor String según ISO 8601 a un objeto tipo java.util.Date. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 183 Tabla -A- 49. DV_DURATION Class Clase DV_DURATION Propósito Representa un período de tiempo. Uso Se utiliza para registrar la duración de algo en el mundo real. Mal uso No debe ser utilizado para representar puntos en el tiempo. Hereda de DV_AMOUNT Atributos Firma Significado 1..1 value: String Valor de duración ISO8601. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 184 Figura -A- 10. Paquete hce.core.data_types.text Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 185 Tabla -A- 50. DV_TEXT Class Clase DV_TEXT Propósito Elemento de texto, puede contener palabras, frases, etc. Se le puede incluir formato de presentación e hipervínculos. Uso Contener fragmentos de texto, codificados o no codificados. Hereda de DATA_VALUE Atributos Firma Significado 1..1 value: String Valor del texto. 0..1 mappings: List <TERM_MAPPING> Mapeo de términos pertenecientes a terminologías. 0..1 formatting: String Formato de presentación sobre el String de la forma: “name:value; name:value...”, e.g. "font-weight : bold; font-family : Arial; font-size : 12pt;" 0..1 hyperlink: DV_URI Hipervinculo opcional asociado al texto. 0..1 language: CODE_PHRASE Valor opcional que permite identificar el lenguaje en el cual el texto está escrito 0..1 encoding: CODE_PHRASE Tipo de codificación utilizada para el texto, tal como UTF-8 o ISO-8859 Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 186 Tabla -A- 51. TERM_MAPPING Class Clase TERM_MAPPING Propósito Representa el mapeo de un DV_TEXT, indicando una coincidencia relativa según el término original a mapear. Uso Usado para añadir clasificación a términos, o para relacionar estos con otras terminologías. Hereda de DATA_VALUE Atributos Firma Significado 1..1 target: CODE_PHRASE Termino codificado. 1..1 match: Character Carácter que indica el mapeo relativo: -‘>’ más amplio que el término original. Ej texto original = “infección por arbovirus”, target = “infección viral” -‘=’ igual al término original -‘<’ menor al término original. Ej texto original = “diabetes”, target = “diabetes mellitus” -‘?’ desconocido Funciones Firma Significado broader: Boolean El mapeo es más amplio que el término equivalent: Boolean El mapeo es equivalente al texto Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 187 narrower: Boolean El mapeo es menor al término original unknown: Boolean El mapeo es desconocido isValidMatchCode(c: Character) : Boolean Verdadero si es un ‘match’ válido Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 52. CODE_PHRASE Class Clase CODE_PHRASE Propósito Código perteneciente a un servicio terminológico Atributos Firma Significado 1..1 terminology_id: TERMINOLOGY_ID Terminología a la cual pertenece este código 1..1 code_string: String Código Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 53. DV_CODED_TEXT Class Clase DV_CODED_TEXT Propósito Texto cuyo valor está asociado directamente con una terminología controlada Uso Un DV_CODED_TEXT es un subtipo de DV_TEXT, puede usarse en lugar de este último ya que tiene mayores posibilidades de ser codificado Mal uso Si la intención es realizar un mapeo a un término no debe Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 188 utilizarse DV_CODED_TEXT, en su lugar usar DV_TEXT y TERM_MAPPING vinculado a un CODE_PHRASE Hereda de DV_TEXT Atributos Firma Significado 1..1 defining_code: CODE_PHRASE Valor codificado. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 54. DV_PARAGRAPH Class Clase DV_PARAGRAPH Propósito Texto compuesto que consiste en una serie de DV_TEXTs Uso DV_PARAGRAPH is la manera estándar de construir un texto largo para reportes, resúmenes y similares Hereda de DATA_VALUE Atributos Firma Significado 1..1 items: List <DV_TEXT> Lista de ítems que conforman el parrafo Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 189 Paquete hce.core.datastructure, ver Figura -A- 11 Figura -A- 11. Paquete hce.core.datastructure Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 190 Tabla -A- 55. DATA_STRUCTURE Class Clase DATA_STRUCTURE Propósito Clase padre de la que heredan todos los tipos de estructuras de datos Hereda de LOCATABLE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 56. ITEM_STRUCTURE Class Clase ITEM_STRUCTURE Propósito Generalización de todas las estructuras de datos. Hereda de DATA_STRUCTURE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 57. ITEM_SINGLE Class Clase ITEM_SINGLE Propósito Representa una estructura formada solamente por un elemento simple. Hereda de ITEM_STRUCTURE Atributos Firma Significado 1..1 item: ELEMENT Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 191 Tabla -A- 58. ITEM_LIST Class Clase ITEM_LIST Propósito Lista lógica de elementos, donde cada elemento de la lista tiene un índice posicional. La lista puede ser vacía. Uso Usada para representar cualquier conjunto de datos que pueda ser presentado en forma de lista. Mal uso No debe ser utilizada como una lista ordenada en base al tiempo, para esto es recomendable usar la clase HISTORY. Hereda de ITEM_STRUCTURE Atributos Firma Significado 0..1 items: List <ELEMENT> Lista de elementos. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 59. ITEM_TABLE Class Clase ITEM_TABLE Propósito Estructura de tipo tabla. Cada fila de la tabla es de tipo CLUSTER, todos los CLUSTER son de igual tamaño. La tabla puede ser vacia. Uso Usada para representar cualesquiera datos en forma de valores en una tabla. Mal uso No debe ser utilizada como una tabla ordenada en base al tiempo, para esto es recomendable usar la clase HISTORY. Hereda de ITEM_STRUCTURE Atributos Firma Significado 0..1 rows: List <CLUSTER> Lista de filas. Cada fila es un CLUSTER. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 192 Tabla -A- 60. ITEM_TREE Class Clase ITEM_TREE Propósito Estructura de datos de tipo árbol. El árbol puede ser vacio. Uso Usado para representar lógicamente datos en forma de árbol. Hereda de ITEM_STRUCTURE Atributos Firma Significado 0..1 items: List <ITEM > Representación física de árbol. Listado de ítems. Los ítems pueden ser de tipo ELEMENT o CLUSTER. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 61. ITEM Class Clase ITEM Propósito Clase padre de la cual heredan Cluster y Element. Hereda de LOCATABLE Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 62. CLUSTER Class Clase CLUSTER Propósito Agrupador de ITEM. Puede contener múltiples instancias de ITEM en una lista ordenada. Hereda de ITEM Atributos Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 193 0..1 items: List <ITEM > Lista ordenada de ítems que puede contener objetos de tipo CLUSTER O ELEMENT. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Tabla -A- 63. ELEMENT Class Clase ELEMENT Propósito Es un nodo hoja al cual se adjunta un DATA_VALUE Hereda de ITEM Atributos Firma Significado 0..1 value: DATA_VALUE Valor asociado al ELEMENT. Nota. Fuente: Traducido y adaptado de The Open EHR Foundation. (2008). Reference Model. Recuperado el 1 de Marzo de 2012, de http://www.openehr.org/releases/1.0.2/roadmap.html Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 194 Base de datos La base de datos fue creada a través del framework de Grails. Ésta se deriva directamente y es fiel al modelo de dominio descrito en detalle en el punto anterior. El diseño y creación de la base de datos por parte del equipo desarrollador fue totalmente indirecta, pues Grails se encarga de esto de forma transparente. Por motivos de tamaño no es imposible colocar dentro de este documento el diagrama entidad relación de la base de dados resultante. Vistas A continuación se muestra la documentación de las distintas vistas del sistema SOS- HME. Para facilitar su entendimiento esta sección se ha dividido en las vistas involucradas con el acceso de usuarios al sistema y el acceso al sistema como administrador de usuarios. Figura -A- 12. Principales vistas del sistema SOS-HME Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 195 En la Figura -A- 12 se muestran las principales vistas del sistema SOS-HME, el menú de navegación de las vistas está compuesto por las tres opciones principales: lista de registros, admisión de paciente y reportes. Desde cualquiera de la vistas el usuario puede cerrar la sesión y volver a la pantalla de inicio. Vista de inicio de sesión Figura -A- 13. Inicio de sesión Fuente: Elaboración propia El inicio de sesión, ver Figura -A- 13, permite la captura de datos para la autenticación de usuarios en el sistema. Muestra un mensaje de error en caso de que los datos de la cuenta sean inválidos. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 196 Vista de dominios clínicos Figura -A- 14. Dominios clínicos Fuente: Elaboración propia La lista de dominios clínicos, ver Figura -A- 14, Muestra los distintos dominios existentes en la aplicación, permitiendo al usuario seleccionar el dominio de trabajo. Vista de lista de registros clínicos Figura -A- 15. Lista de registros clínicos Fuente: Elaboración propia La lista de registros clínicos, ver Figura -A- 15, muestra de manera paginada una lista de todos los registros clínicos existentes. A partir de cada registro se puede acceder al Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 197 detalle de registro clínico, así como al detalle del paciente asociado. Esta vista contiene la opción para la creación de un nuevo registro clínico. Vista crear registro Figura -A- 16. Crear registro Fuente: Elaboración propia La vista crear registro, ver Figura -A- 16, captura de datos para la creación de un nuevo registro clínico. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 198 Vista de registro clínico Figura -A- 17. Registro clínico – Edición Fuente: Elaboración propia En la vista de registro clínico Figura -A- 17, se presenta el formulario de entrada de datos divido por secciones que permite el registro de los datos clínicos relacionados con el tratamiento de un paciente El registro clínico puede tener dos formas, la de edición presentada en la Figura -A- 17 y la de consulta de los valores asignados, ver Figura -A- 18. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 199 Figura -A- 18. Registro clínico – Valores asignados Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 200 Vista admisión de pacientes Figura -A- 19. Admisión de paciente Fuente: Elaboración propia La vista de admisión de pacientes, ver Figura -A- 19 permite la búsqueda de pacientes en el sistema mediante diversos criterios (identificador, primero nombre, segundo nombre, primer apellido segundo apellido y fecha de nacimiento). La vista de admisión de pacientes se combina con la vista de pacientes candidatos mostrada en la Figura -A- 20, la cual muestra la lista de pacientes coincidentes con la búsqueda. Figura -A- 20. Lista de paciente candidatos Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 201 Vista de nuevo paciente Figura -A- 21. Nuevo paciente Fuente: Elaboración propia La vista de nuevo paciente mostrada en la Figura -A- 21, permite la creación de un nuevo paciente. Para ello se capturan sus datos demográficos paso por paso. Posteriormente existe la posibilidad de modificar los valores inicialmente registrados, mediante la edición de registro de paciente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 202 Vista detalle de paciente Figura -A- 22. Detalle de paciente Fuente: Elaboración propia A través de la vista detalle de paciente se puede ver el detalle del paciente seleccionado. A través de esta vista se puede tener acceso a la funciones del SOS-IMP para compartir la información clínica de este paciente. Ver Figura -A- 22. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 203 Figura -A- 23. Principales vistas del módulo de administración del sistema SOS-HME Fuente: Elaboración propia Todas las vistas del módulo de administración del sistema tienen acceso a la lista de usuarios y lista de personas a través del menú de administración. Las principales vistas del módulo de administración se muestran en la Figura -A- 23. Desde cualquiera de la vistas el administrador del sistema puede cerrar la sesión y volver a la pantalla de inicio. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 204 Vista listado de usuarios Figura -A- 24. Listado de usuarios Fuente: Elaboración propia En la lista de usuarios, ver Figura -A- 24, se Muestran de manera paginada todas las cuentas de usuario existentes en el sistema. A través de esta vista es posible acceder al detalle de cualquier cuanta de usuario. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 205 Vista detalle de usuario Figura -A- 25. Detalle de usuario. Fuente: Elaboración propia En la Figura -A- 25 se muestra el detalle de una cuenta de usuario. Con las opciones de crear uno nuevo, ver Figura -A- 26 , editar el usuario actual, ver Figura -A- 27, o borrar un usuario existente. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 206 Figura -A- 26. Crear usuario Fuente: Elaboración propia Figura -A- 27. Editar usuario Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 207 Vista listado de personas Figura -A- 28. Listado de personas Fuente: Elaboración propia La Figura -A- 28 muestra manera paginada todas personas registradas en el sistema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 208 Vista crear persona Figura -A- 29. Crear persona Fuente: Elaboración propia La Figura -A- 29 muestra el formulario para creación de una persona en el sistema SOS- HME. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 209 Vista mostrar persona Figura -A- 30. Mostrar detalles de persona Fuente: Elaboración propia La Figura -A- 30 muestra el detalle de una de los valores de una persona. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 210 Vista edición de persona Figura -A- 31. Edición de personas Fuente: Elaboración propia La Figura -A- 31 muestra un formulario para la edición de los datos de una persona. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 211 Vista creación de rol Figura -A- 32. Creación de rol Fuente: Elaboración propia La Figura -A- 32 muestra la captura de datos para agregar un rol nuevo a una persona existente en el sistema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 212 Vista edición de rol Figura -A- 33. Edición de rol Fuente: Elaboración propia La Figura -A- 33 despliega un formulario para la edición de un rol perteneciente a una persona. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 213 Vista de visialización de persona Figura -A- 34. Visualización de persona Fuente: Elaboración propia La Figura -A- 34 muestra el detalle de un rol asignado a una persona en el sistema. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 214 APÉNDICE B - DOCUMENTACIÓN TÉCNICA SOS-IMP A continuación se expone de manera detallada la documentación técnica de la aplicación SOS-HME, compuesta por el modelo del dominio, modelo de base de datos y servicios web. Modelo de dominio El modelo de dominio describe la estructura del sistema. A continuación se muestran los paquetes en los cuales está dividida la aplicación SOS-IMP, sus clases con atributos y funciones, y las relaciones existentes entre las clases. Lista de paquetes:  Paquete Admin.  Paquete Imp. Los paquetes se muestran en detalle en la Figura -B- 1. La descripción de las clases se realiza en el rango de tablas que va desde la Tabla -B- 1 hasta la Tabla -B- 7. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 215 Figura -B- 1. Clases de dominio SOS-IMP. Fuente: Elaboración propia Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 216 Paquete Admin Tabla -B- 1. USER Class Clase USER Propósito Usuario del índice maestro de pacientes. Por lo general este usuario representa a un centro asistencial. Atributos Firma Significado 1..1 username: String Nombre de usuario. 1..1 password: String Contraseña. 1..1 enabled: Boolean Indica si el usuario está habilitado o deshabilitado. 1..1 accountExpired: Boolean Atributo que indica si la validez de la cuenta ha expirado. 1..1 accountLocked: Boolean Indica si la cuenta está bloqueada. 1..1 passwordExpired: Boolean Indica si la contraseña está vencida. Nota: Fuente: Elaboración propia. Tabla -B- 2. ROLE Class Clase ROLE Propósito Define un rol a un usuario del sistema Atributos Firma Significado 1..1 authority: String Nombre de la autoridad o rol. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 217 Tabla -B- 3. USER_ROLE Class Clase USER_ROLE Propósito Esta clase modela la relación entre un usuario y un rol. Atributos Firma Significado 1..1 user: User Usuario. 1..1 role: Rol Rol. Nota: Fuente: Elaboración propia. Paquete Imp Tabla -B- 4. ORGANIZACION Class Clase ORGANIZACION Propósito Modela una organización sanitaria presente en el índice maestro de pacientes. Atributos Firma Significado 1..1 User: User Usuario de la organización 1..1 uniqueIdentifier: String Es un UUID. Sirve como identificador único para la organización. 1..1 nombre: String Nombre de la organización. Ej. Ambulatorio El Pilar, Maracaibo. 1..1 pacientes: Paciente Lista de pacientes registrados en esa organización. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 218 Tabla -B- 5. PACIENTE Class Clase PACIENTE Propósito Mantener un registro de los pacientes que tienen documentos clínicos en distintas organizaciones. Atributos Firma Significado 1..1 idPacienteOrg: String Identificador que tiene asignado el paciente en la organización a la cual pertenece. 0..1 cedula: String Número de cedula de identidad. 0..1 pasaporte: String Número de pasaporte. 1..1 primerNombre: String Primer nombre. 0..1 segundoNombre: String Segundo Nombre. 1..1 primerApellido: String Primer Apellido 0..1 segundoApellido: String Segundo Apellido. 0..1 fechaNacimiento: String Fecha de nacimiento en formato ‘yyyy-mm-dd’ 0..1 sexo: String Sexo. 1..1 centro: Organizacion Centro asistencial dónde está registrado. 1..1 indice: IndicePaciente Identificador único de paciente, asociado con otras identidades del mismo paciente registradas en otros centros. 0..1 cdas: List <Cda> Lista de documentos clínicos. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 219 Tabla -B- 6. CDA Class Clase CDA Propósito Modelar de forma simple un documento clínico electrónico. Atributos Firma Significado 1..1 idCdaOrg: String Identificador de documento clínico asignado por a organización creadora. 1..1 documento: String Texto completo del documento XML. 1..1 titulo: String Titulo del documento. 1..1 fechaCreacion: String Fecha de creación del documento en formato ‘yyyy-mm-dd’. Nota: Fuente: Elaboración propia. Tabla -B- 7. INDICE_PACIENTE Class Clase INDICE_PACIENTE Propósito Enlazar registros de pacientes pertenecientes a diferentes organizaciones pero que pertenecen a una misma persona. Atributos Firma Significado 1..1 uniqueIdentifier: String Es un UUID, que sirve para identificar unívocamente un elemento del índice. 1..1 pacientes: List<Paciente> Lista de pacientes asociados. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 220 Base de datos Al igual que la base datos del SOS-HME, la base de datos del SOS-IMP es creada mediante el uso del framework de Grails. Por tanto el diseño y creación de la base de datos por parte del equipo desarrollador fue totalmente indirecta, pues Grails se encarga de esto de forma transparente. El diseño de la base de datos responde al modelo de dominio descrito en el punto anterior. A continuación se muestra el diagrama entidad relación de la base de datos resultante para el SOS-IMP. Figura -B- 2. Modelo entidad relación SOS-IMP. Fuente: Elaboración propia. Servicios Web Los servicios web que ofrece el SOS-IMP están divididos en dos paquetes, El primero, «paquete cda», está orientado al manejo del repositorio de documentos CDA. El segundo «paquete imp», se encarga de la identificación central de usuarios. La descripción de los servicios web se realiza en el rango de tablas que va desde la Tabla -B- 8 hasta la Tabla -B- 21. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 221 Paquete Cda Tabla -B- 8. Servicio BUSCAR_CDA_BY_ID Nombre BUSCAR_CDA_BY_ID Firma Cda buscarCdaById(Integer id, String idOrganizacion) Propósito Busca un documentos CDA por su identificador único Parametros Firma Significado 1..1 id : Integer Identificador del documento CDA. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna un documento CDA, retorna null en caso de no encontrar coincidencia. Nota: Fuente: Elaboración propia. Tabla -B- 9. Servicio BUSCAR_CDA_BY_PACIENTE Nombre BUSCAR_CDA_BY_PACIENTE Firma List<Cda> buscarCdaByPaciente(String paciente, Integer offset, String idOrganizacion) Propósito Busca un conjunto de documentos CDA pertenecientes a un paciente Parametros Firma Significado 1..1 paciente: String Identificador único de paciente, perteneciente a la organización que realiza la consulta. 1..1 idOrganizacion: Identificador único (UUID) de la Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 222 String organización consultante. 1..1 offset: Integer Número de la página. Valor de retorno Retorna una lista de documentos CDA´s, retorna null en caso de no encontrar coincidencias Nota: Fuente: Elaboración propia. Tabla -B- 10. Servicio BUSCAR_CDA_BY_PACIENTE_AND_ORGANIZACION Nombre BUSCAR_CDA_BY_PACIENTE_AND_ORGANIZACION Firma List<Cda> buscarCdaByPacienteAndOrganizacion(String paciente, Long numeroOrg, Integer offset, String idOrganizacion) Propósito Busca un conjunto de documentos CDA pertenecientes a un paciente y a una organización. Parametros Firma Significado 1..1 paciente: String Identificador único de paciente, perteneciente a la organización que realiza la consulta. 1..1 numeroOrg: Long Identificador simple de la organización a consultar. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. 1..1 offset: Integer Número de la página. Valor de retorno Retorna una lista de documentos CDA´s, retorna null en caso de no encontrar coincidencias Nota: Fuente: Elaboración propia. Tabla -B- 11. Servicio BUSCAR_CDA_BY_PACIENTE_AND_RANGO Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 223 Nombre BUSCAR_CDA_BY_PACIENTE_AND_RANGO Firma List<Cda> buscarCdaByPacienteAndRango(String paciente, String desde, String hasta, Integer offset, String idOrganizacion) Propósito Busca un conjunto de documentos CDA pertenecientes a un paciente dentro de un rango de fechas determinado. Parametros Firma Significado 1..1 paciente: String Identificador único de paciente, perteneciente a la organización que realiza la consulta. 1..1 desde: String Fecha en formato “yyyy-MM- dd”. 1..1 hasta: String Fecha en formato “yyyy-MM- dd”. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. 1..1 offset: Integer Número de la página. Valor de retorno Retorna una lista de documentos CDA´s, retorna null en caso de no encontrar coincidencias Nota: Fuente: Elaboración propia. Tabla -B- 12. Servicio ELIMINAR_CDA Nombre ELIMINAR_CDA Firma boolean eliminarCDA(Long idCda, String idPacienteOrg, String idOrganizacion) Propósito Elimina un documento CDA del repositorio compartido. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 224 Parámetros Firma Significado 1..1 idCda: Long Identificador simple de CDA. 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización eliminadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 13. Servicio REGISTRAR_CDA Nombre REGISTRAR_CDA Firma boolean registrarCDA(Cda cda, String idPacienteOrg, String idOrganizacion) Propósito Registra un documento CDA en el repositorio de documentos. Parámetros Firma Significado 1..1 cda: Cda Objeto de tipo Cda. 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización creadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 225 Paquete Cda Tabla -B- 14. Servicio AGREGAR_PACIENTE Nombre AGREGAR_PACIENTE Firma boolean agregarPaciente(Paciente paciente, String idOrganizacion) Propósito Registrar un paciente en el IMP. Parámetros Firma Significado 1..1 paciente: Paciente Objeto de tipo Paciente. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 15. Servicio EXISTE_PACIENTE Nombre EXISTE_PACIENTE Firma boolean existePaciente(String idPacienteOrg, String idOrganizacion) Propósito Saber si el paciente está o no registrado. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización consultante. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 226 Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 16. Servicio ELIMINAR_PACIENTE Nombre ELIMINAR_PACIENTE Firma boolean eliminarPaciente(String idPacienteOrg, String idOrganizacion) Propósito Eliminar un paciente del IMP. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador del paciente perteneciente a la organización consultante. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultante. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 17. Servicio AGREGAR_RELACION_PACIENTE Nombre AGREGAR_RELACION_PACIENTE Firma boolean agregarRelacionPaciente(Long idCentroImp,String idPacienteImp, String idPacienteOrg, String idOrganizacion) Propósito Relaciona un paciente de una organización con algún otro perteneciente al IMP. Parámetros Firma Significado Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 227 1..1 idCentroImp: Long Identificador de la organización receptora en el IMP. 1..1 idPacienteImp: String Identificador perteneciente al paciente de la organización receptora. 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización cruzadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización cruzadora. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 18. Servicio EXISTE_RELACION_PACIENTE Nombre EXISTE_RELACION_PACIENTE Firma boolean existeRelacionPaciente(String idPacienteOrg, String idOrganizacion) Propósito Verifica si existe alguna relación con otro paciente. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización consultora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultora. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 228 Nota: Fuente: Elaboración propia. Tabla -B- 19. Servicio ELIMINAR_RELACION_PACIENTE Nombre ELIMINAR_RELACION_PACIENTE Firma boolean eliminarRelacionPaciente(String idPacienteOrg, String idOrganizacion) Propósito Elimina la relación existente entre un paciente de una organización con algún otro perteneciente al IMP. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización eliminadora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización eliminadora. Valor de retorno Retorna “verdadero” en caso de éxito, retorna “falso” en caso contrario. Nota: Fuente: Elaboración propia. Tabla -B- 20. Servicio BUSCAR_CANDIDADOS Nombre BUSCAR_CANDIDADOS Firma List<Paciente> buscarCandidatos(Paciente paciente, Integer offset, String idOrganizacion) Propósito Búsqueda de candidatos coincidentes o similares a un paciente dado. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización consultora. Sistema de Historia Médica Electrónica para SOS Telemedicina U.C.V. Facultad de Ciencias, Escuela de Computación Página 229 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultora. 1..1 offset: Integer Número de página. Valor de retorno Retorna una lista de pacientes coincidentes, retorna null en caso de no encontrar coincidencias. Nota: Fuente: Elaboración propia. Tabla -B- 21. Servicio LISTAR_ORGANIZACIONES_BY_PACIENTE Nombre LISTAR_ORGANIZACIONES_BY_PACIENTE Firma List<Organizaciones> listarOrganizacionesByPaciente(String idPacienteOrg, String idOrganizacion) Propósito Lista un conjunto de organizaciones donde el paciente posee documentos CDA. Parámetros Firma Significado 1..1 idPacienteOrg: String Identificador perteneciente al paciente en la organización consultora. 1..1 idOrganizacion: String Identificador único (UUID) de la organización consultora. Valor de retorno Retorna una lista de organizaciones, retorna null en caso de no encontrar coincidencias. Nota: Fuente: Elaboración propia.