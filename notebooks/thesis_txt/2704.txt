[Jorge Ramirez] Tesis18x UNIVERSIDAD CENTRAL DE VENEZUELA CENTRO DE COMPUTACION GRÁFICA De una Mesa Interactiva de Bajo Costo Universidad Central de Venezuela UNIVERSIDAD CENTRAL DE VENEZUELA FACULTAD DE CIENCIAS ESCUELA DE COMPUTACIÓN CENTRO DE COMPUTACION GRÁFICA Desarrollo De una Mesa Interactiva de Bajo Costo Usando Webcams Trabajo Especial de Grado Presentado ante la Ilustre Universidad Central de Venezuela Por el Bachiller en Ciencias: Ramírez B. Jorge A. Para optar por el titulo Licenciado en Computación Tutor Prof. Robinson Rivas Caracas, Mayo 2011 UNIVERSIDAD CENTRAL DE VENEZUELA 2 3 Resumen En la actualidad están en crecimiento nuevas tecnologías de interacción humano computador, como son los dispositivos manejados por la tecnología multitouch, que en este caso particular se hace un enfoque sobre mesas multitouch para trabajos colaborativos. Sin embargo, estos dispositivos que salen al mercado como productos comerciales, son excesivamente costosos y difíciles de adquirir. En este trabajo especial de grado se presenta el diseño y elaboración de una mesa multitouch, a partir de un pequeño conjunto de elementos de fácil adquisición, como una webcam, LEDs infrarrojos, una lamina de acrílico, entre otros. Se pretende utilizar una de las técnicas mas conocidas en estos sistemas conocidos como FTIR (iniciales de Reflexión Total Interna Frustrada en inglés), haciendo alusión al fenómeno físico clave que ocurre en la mesa para su adecuado funcionamiento. Palabras Claves: Tecnología Multitouch, FTIR, procesamiento digital de imágenes, Interacción Humano Computador. 4 5 Agradecimientos Agradezco a mi familia, a mis amigos. El apoyo aportado por el Laboratorio Centro de Computación Paralela y Distribuida y al Centro de Computación Grafica. Agradecimientos especiales a Gino Lagiar y David Rodríguez. A mi tutor Robinson Rivas por toda la atención prestada en este trabajo. 6 7 Acta Quienes suscriben, Miembros del Jurado designado por el Consejo de la Escuela de Computación para examinar el Trabajo Especial de Grado, presentado por el Bachiller Jorge Ramírez C.I.: 19.200.457, con el título “Desarrollo de una mesa interactiva de bajo costo usando webcams”, a los fines de cumplir con el requisito legal para optar al título de Licenciado en Computación, dejan constancia de lo siguiente: Leído el trabajo por cada uno de los Miembros del Jurado, se fijó el día 29 de Mayo de 2010, a las 03:00pm, para que su autor lo defienda en forma pública, en la Escuela de Computación, Facultad de Ciencias de la Universidad Central de Venezuela, lo cual este realizó mediante una exposición oral de su contenido, y luego respondió satisfactoriamente a las preguntas que les fueron formuladas por el Jurado, todo ello conforme a lo dispuesto en la Ley de Universidades y demás normativas vigentes de la Universidad Central de Venezuela. Finalizada la defensa pública del Trabajo Especial de Grado, el jurado decidió aprobarlo. En fe de lo cual se levanta la presente acta, en Caracas el 29 de Mayo de 2011, dejándose también constancia de que actuó como Coordinador del Jurado el Profesor Tutor Robinson Rivas. ______________________ Prof. Robinson Rivas (Tutor) _____________________________ ______________________________ Prof. Rhadames Carmona Prof. Jorge Manrique (Jurado Principal) (Jurado Principal) 8 9 10 Índice General Capitulo 1 - Planteamiento del problema ........................................................... 18 1.1 Objetivo General ...........................................................................................................19 1.2 Objetivos Específicos .....................................................................................................19 1.3 Delimitación del problema ............................................................................................19 Capitulo 2 - Visión Por Computador .................................................................... 20 2.1 Imagen Digital ..............................................................................................................20 2.2 Procesamiento Digital de Imágenes .............................................................................22 2.2.1 Procesamiento de bajo nivel................................................................................................. 23 2.2.2 Procesamiento de nivel medio ............................................................................................. 23 2.2.3 Procesamiento de alto nivel ................................................................................................. 23 2.5 Dispositivos de Captura ................................................................................................24 2.5.1 Cámara Digital ...................................................................................................................... 24 2.5.2 Webcams ............................................................................................................................. 25 2.6 La Luz.............................................................................................................................26 2.6.1 Propiedades ......................................................................................................................... 28 2.6.1.1 Interferencia .................................................................................................................. 29 2.6.1.2 Absorción ...................................................................................................................... 29 2.6.1.3 Refracción ..................................................................................................................... 30 2.6.1.4 Reflexión ....................................................................................................................... 31 2.6.2 Espectro Electromagnético ................................................................................................... 31 2.7 Luz Infrarroja ................................................................................................................32 2.7.1 Longitudes de onda .............................................................................................................. 33 2.7.1.1 Infrarrojo cercano .......................................................................................................... 33 2.7.1.2 Infrarrojo medio ............................................................................................................ 33 11 2.7.1.3 Infrarrojo lejano ............................................................................................................ 33 2.8.2 Aplicaciones ......................................................................................................................... 34 2.8.2.1 Visión Nocturna ............................................................................................................. 34 2.8.2.2 Imágenes Termales ........................................................................................................ 35 2.8.2.3 Comunicación ................................................................................................................ 35 2.8.2.5 Astronomía .................................................................................................................... 37 Capitulo 3 - Tecnologías Multitouch .................................................................... 38 3.1 Antecedentes .................................................................................................................38 3.2 Dispositivos multitouch actuales ..................................................................................39 3.2.2 Microsoft Surface ................................................................................................................. 40 3.2.3 PQ Labs iTable ...................................................................................................................... 44 3.2.4 DOC-MTS multitouch technology ......................................................................................... 45 3.2.5 SMART Table ........................................................................................................................ 46 3.3 Técnicas empleadas para dispositivos multitouch .......................................................47 3.3.1 FTIR (Frustrated Total Internal Reflection) [22] ..................................................................... 47 3.3.2 DI (Diffused Illumination) ..................................................................................................... 50 3.3.3 LLP (Laser Light Plane) .......................................................................................................... 52 3.3.4 DSI (Diffused Surface Illumination) ....................................................................................... 53 3.4 Desarrollo de software multitouch ...............................................................................54 3.4.1 Protocolo TUIO ..................................................................................................................... 54 3.4.2 ReacTIVision ......................................................................................................................... 56 3.4.3 TouchLib .............................................................................................................................. 57 3.4.4 Comunity Core Vision ........................................................................................................... 58 Capitulo 4 - Diseño y desarrollo de la solución propuesta ............................. 62 4.1 Plataforma de Hardware ..............................................................................................62 4.1.1 Diseño del prototipo ............................................................................................................ 62 4.1.2 Materiales ............................................................................................................................ 65 4.1.3 Proceso de Elaboración ........................................................................................................ 66 4.2 Plataforma de Software ................................................................................................70 4.2.1 Librerías de desarrollo .......................................................................................................... 70 12 4.2.2 Lenguaje de programación ................................................................................................... 71 Capitulo 5 - Diseño del software de demostración ........................................... 74 5.1 Propósito de la aplicación ..............................................................................................74 5.2 Detalles de Implementación .........................................................................................74 5.1.1 Agujero Negro ...................................................................................................................... 76 4.1.2 Sistema Solar ........................................................................................................................ 78 4.1.3 Fases Lunares ....................................................................................................................... 80 Capitulo 6 - Pruebas y resultados ......................................................................... 82 6.1 Pruebas a nivel de hardware ........................................................................................82 6.1.1 Pantallas de proyección ........................................................................................................ 82 6.1.2 Filtros infrarrojos .................................................................................................................. 83 6.1.3 Desempeño de webcams ...................................................................................................... 83 6.2 Pruebas a nivel de software ..........................................................................................84 6.2.1 Proyectos código abierto para desarrollo de aplicaciones multitouch Multitouch ................. 84 Conclusiones ............................................................................................................. 86 Referencias ................................................................................................................ 88 13 Índice de Figuras Figura 2.1 - Convención de coordenadas para una imagen digital 21 Figura 2.2 - Un sensor de una cámara digital 24 Figura 2.3 - Modelos de webcams 25 Figura 2.4 - Distintos enfoques de comportamiento físico de la luz 27 Figura 2.5 - Sombras formadas por una fuente de luz puntual y una amplia 27 Figura 2.6 - (a) Interferencia Constructiva, (b) Interferencia Destructiva 29 Figura 2.7 - Fenómeno de la absorción 29 Figura 2.8 - Fenómeno de la Refracción 30 Figura 2.9 - Representación gráfica del espectro electromagnético 31 Figura 2.10 - Representación gráfica del espectro electromagnético 32 Figura 2.11 - Dispositivo de visión nocturna y una imagen de captura 34 Figura 2.12 - Dispositivo de visión nocturna y una imagen de captura 35 Figura 2.13 - (a) Un LED infrarrojo | (b) Conexión infrarroja entre dispositivos 36 Figura 2.14 - Imágenes termales satelitales para la meteorología. 36 Figura 2.15 - Un telescopio infrarrojo y una imagen de captura de un cuerpo celeste 37 Figura 3.1 - Esquema de un escritorio Memex 39 Figura 3.2 - El Surface de Microsoft 40 Figura 3.3 - Interacción directa con la superficie de la mesa 41 Figura 3.4 - Soporte de interacción multi-usuario 42 Figura 3.5 - Reconocimiento de gestos multitouch 42 Figura 3.6 - Interoperabilidad con dispositivos móviles 43 Figura 3.7 - El iTable de la compañía PQ Labs 44 Figura 3.8 - La mesa interactiva de la compañía DOC-MTS 46 Figura 3.9 - La mesa interactiva de la compañía SMART 46 Figura 3.10 - Esquema del funcionamiento de un dispositivo FTIR 48 Figura 3.11 - Esquema del funcionamiento de un dispositivo DI 51 Figura 3.12 - Esquema del funcionamiento de un dispositivo LLP 52 Figura 3.13 - Esquema del funcionamiento de un dispositivo DSI 53 Figura 3.14 - Configuración de la cámara usando Touchlib 57 Figura 3.15 - Configuración de la cámara usando CCV 58 Figura 4.1 - Esquema del funcionamiento de un dispositivo DSI 63 Figura 4.2 - Esquema del funcionamiento de un dispositivo DSI 64 Figura 4.3 - Marco externo que unifica el marco IR, el acrílico y el vidrio esmerilado 66 14 Figura 4.4 - Vista superior e inferior de la superficie del usuario 67 Figura 4.5 - Vista de las tablas ensamblables de soporte del tope de la mesa 67 Figura 4.6 - Vista del interior y exterior de las tablas de soporte de la mesa 68 Figura 4.7 - Vista de la tabla de soporte de la webcam y el espejo 69 Figura 4.8 - Esquema del funcionamiento de un dispositivo DSI 70 Figura 4.9 - Esquema del funcionamiento para diversos lenguajes de programación 71 Figura 5.1 - Vista superior e inferior de la superficie del usuario 74 Figura 5.2 - Vista del programa sin la interacción el usuario 75 Figura 5.3 - Vista del programa con la interacción con el usuario 76 Figura 5.4 - Vista del programa sin la interacción el usuario 77 Figura 5.5 - Vista del programa con la interacción con el usuario 78 Figura 5.6 - Vista del programa sin la interacción el usuario 79 Figura 5.7 - Vista del programa con la interacción con el usuario 80 Figura 6.1 - Elementos candidatos para filtros infrarrojos 83 Figura 6.2 - Webcams que fueron evaluadas para el rendimiento de la mesa 84 15 16 Introducción Mientras que los dispositivos mono-táctiles resultan comunes y conocidos en diversos países, todavía resulta complejo construir dispositivos que puedan registrar múltiples puntos de contacto simultáneamente. Tales dispositivos proveen la comodidad de la interacción de múltiples usuarios simultáneamente, lo que resulta especialmente útil para sistemas de grandes pantallas-compartidas como las paredes interactivas y mesas interactivas. Las primeras investigaciones, aún escasas debido al poco alcance de interactuar con estos dispositivos, revelan gran potencial para aplicaciones novedosas bajo este tipo de interacción. El principal problema de estos dispositivos multitouch es el alto costo asociado, que imposibilita la masificación de estos sistemas para cualquier usuario e institución. En este trabajo se explica el diseño y elaboración de un dispositivo multitouch de bajo costo, cubriendo la explicación tanto en aspectos de hardware como de software. En cada capítulo se explicará en detalle cada elemento que forma parte del sistema. En el primer capítulo se explica el planteamiento del problema, los objetivos generales y específicos que se pretenden alcanzar en este trabajo de investigación, y el alcance o limite que define hasta donde se pretende llegar con este trabajo. En el segundo capítulo se refiere a la visión por computador, donde se explican los fundamentos de una imagen digital, el procesamiento de imágenes digitales, y una breve sección acerca de la luz infrarroja, y sus aplicaciones. El tercer capítulo contiene información referente a los dispositivos multitouch, explicando sus antecedentes, productos comerciales en el mercado, y por último las diversas 17 técnicas empleadas para la elaboración de estos dispositivos. En cada técnica, se puede apreciar la relación de los capítulos anteriores, observando el papel que juega cada elemento en el sistema, como lo es la luz infrarroja, con los dispositivos de captura y el procesamiento digital de las imágenes capturadas. En el capítulo 4 se muestra el diseño y desarrollo de la solución propuesta, donde se explican las pautas realizadas para la elaboración de la mesa interactiva tanto a nivel de hardware como software. Para el capitulo 5 se explica la implementación del software multitouch, apoyado por una librería que maneja el procesamiento de imágenes capturadas por una webcam infrarroja. En el capítulo 5 se explican las pruebas realizadas para calibrar y mejorar el desempeño del dispositivo. Por último, la conclusiones, explicando los objetivos alcanzados, mencionados en el capitulo 1. 1 Planteamiento del problema En la última década, los dispositivos táctiles se han popularizado a nivel mundial, y se ha generado una gran competencia en el mercado de la masificación de tablas y teléfonos inteligentes que proveen este novedoso medio de interacción humano-maquina. Sin embargo, los grandes dispositivos táctiles, como las mesas interactivas aún resultan muy costosos para ser adquiridas por parte de cualquier usuario, limitando el alcance de adquisición de estos dispositivos a diversas instituciones que les interesa sacar provecho. A pesar que han surgido diversos proyectos e instituciones que presentan estos dispositivos más económicos, estos presentan ciertas desventajas, como la naturaleza del software que no es multiplataforma, la dependencia de instrumentos especiales como un lápiz infrarrojo, que en ocasiones resultan difíciles de conseguir. Por esta razón, se propone la construcción de una mesa interactiva al mínimo costo, con la finalidad de interactuar de primera mano con aplicaciones que hacen uso de estos dispositivos. Se presenta con la finalidad de proveer una herramienta para desarrollo de aplicaciones táctiles, e incluso como un instrumento de educación para todas las edades. 19 1.1 Objetivo General Diseñar una mesa interactiva con tecnología “multitouch” para el manejo del computador, usando dispositivos de bajo costo 1.2 Objetivos Específicos Los objetivos a alcanzar con esta propuesta son: • Evaluar las diferentes técnicas de elaboración de mesas interactivas que involucran visión por computador. • Revisar diversas librerías código abierto para el procesamiento de imágenes, orientadas al desarrollo de software multitouch. • Desarrollar un software dedicado al manejo del sistema operativo MS Windows usando las capacidades de la mesa interactiva. • Implementar un software interactivo que explote la capacidad multitouch que provee la mesa interactiva. • Elaborar un prototipo funcional que pueda ser utilizado en un ámbito educativo. 1.3 Delimitación del problema El alcance para este trabajo de tesis es el diseño y construcción de la mesa con los componentes necesario para su funcionamiento, y por último, desarrollar una aplicación que implante la tecnología multitouch para el uso de la mesa. 20 2 Visión Por Computador La visión por computador tiene como finalidad, extraer propiedades del mundo real a partir de un conjunto de imágenes. Esta ciencia tiene innumerables aplicaciones, como el desplazamiento de un vehículo autónomo, la evaluación de la calidad de una pieza de cerámica, entre muchos otros. Este capítulo explica los procesos que se involucran en la visión por computador, explicando a priori los conceptos básicos de una imagen digital, el concepto de un histograma, profundidad de bits, para luego adentrarse a definiciones mas técnicas referentes al procesamiento digital de imágenes, junto con un conjunto de operaciones puntuales que se realizan sobre las imágenes, como la inversión de colores, umbralización, etc.; y por último, la explicación acerca de operadores utilizados en la actualidad para la detección de bordes en una imagen digital. 2.1 Imagen Digital Una imagen digital es una función discreta f(x,y) en coordenadas espaciales y en brillo. Una imagen digital puede considerarse como una matriz cuyos elementos de las filas y columnas indican un punto de la imagen y el valor correspondiente del elemento de la matriz que identifica el nivel de intensidad de luz en ese punto. Los elementos de tal arreglo digital son llamados elementos de imagen, elementos de pintura, pixels o pels (estos dos últimos son abreviaturas del ingles picture elements). [1] 21 En la figura 2.1 se observa una imagen digital, junto con la convención de coordenadas; importante tener en cuenta esta convención al momento de realizar alguna operación sobre la imagen. Figura 2.1 - Convención de coordenadas para una imagen digital En la actualidad, se trabaja con imágenes digitales obtenidas de dispositivos de captura como fotografías a color de personas, paisajes, escaneos en escala de grises de documentos impresos, planos arquitectónicos, documentos de fax, imágenes médicas como rayos x o ultrasonidos, etc. [1] Independientemente de la naturaleza de donde proviene la imagen digital, todas, absolutamente todas las imágenes se representan como una matriz de pixels. Sin embargo, todas estas imágenes digitales se pueden presentar en distintos formatos que pueden ser interpretados por el computador. También cada imagen puede variar en cuanto a resolución, dimensiones de la misma, profundidad de color, espacio que ocupa en memoria, etc. 2 Visión Por Computador 22 2.2 Procesamiento Digital de Imágenes El procesamiento de una imagen digital se refiere al conjunto de técnicas que se aplican a las imágenes digitales con el objetivo de mejorar la calidad o facilitar la búsqueda de información. Cabe notar que una imagen digital está compuesta por un número finito de elementos, donde cada uno tiene una localidad y valor particular. Estos elementos son llamados "elementos de imagen", o "pixels". Pixel es el término más usado para denotar los elementos de una imagen digital. [2] La visión es el sentido más avanzado del ser humano, por ende, las imágenes juegan el papel más importante en la percepción humana. Sin embargo, a diferencia de los seres humanos, que están limitados por la banda visual del espectro electromagnético, dispositivos que capturan imágenes trabajan con casi todo el espectro, capturando desde rayos gamma a ondas de radio. Pueden operar con imágenes generadas por fuentes que humanos no están acostumbrados a asociar con imágenes. Estos incluyen ultrasonido, microscopio a nivel de electrones, e imágenes generadas por computadora. Por ende, el procesado de imágenes digitales engloba una amplia variedad de campos y aplicaciones. No existe ningún acuerdo entre diversos autores para definir los límites entre el procesamiento de imágenes y relación con otras aéreas, tales como el análisis de imágenes o la visión por computadora. Algunas veces surge la distinción definiendo el procesamiento de imágenes como una disciplina el cual tanto la entrada como la salida son imágenes. De igual modo, esto puede estar generando una barrera artificial a este campo. Por ejemplo, si se considera esa definición, hasta la tarea más trivial como calcular el nivel de gris promedio en una imagen, (el cual el resultado es un solo número) no podría ser considerado como una operación de procesamiento de imagen. Por otro lado, existen campos tales como la visión por computadora, que tienen como objetivo fundamental en usar la computadora para emular la visión humana, donde incluye aprendizaje y se tomen acciones basados en las imágenes de entrada. Esta área relacionada a la emulación de la inteligencia humana es conocida como Inteligencia Artificial [3]. 2.2 Procesamiento Digital de Imágenes 23 El procesamiento digital de imágenes considera tres distintos niveles de cómputo, ligados al costo y carga de trabajo que conlleva a operar sobre una imagen: 2.2.1 Procesamiento de bajo nivel Involucra operaciones primitivas como pre-procesamiento de una imagen para reducir ruido, mejora de contraste, brillo, etc. Está caracterizado por el hecho que tanto la entrada como la salida son imágenes. 2.2.2 Procesamiento de nivel medio Involucra tareas como la segmentación (subdividir una imagen en regiones u objetos), descripción de esos objetos para reducirlos a una forma adecuada para procesarlas en la computadora, y clasificación (reconocimiento) de objetos individuales. Es caracterizado por el hecho que la entrada son generalmente imágenes, pero la salida son atributos extraídos de las imágenes, como bordes, siluetas y la identidad de objetos individuales. 2.2.3 Procesamiento de alto nivel Involucra no solo reconocer objetos en imágenes, sino adicionalmente analizarlas, y realizar funciones cognitivas normalmente asociadas con la visión. Desde las últimas décadas, el procesamiento digital de imágenes y la computación grafica se han tratado como dos áreas distintas. El conocimiento en ambas áreas ha ido en incremento, con capacidad de resolver problemas más complejos, aunque diferentes. La computación grafica está orientada a obtener imágenes foto-realistas generadas a computadora, mientras que el procesamiento digital de imágenes se enfoca en reconstruir, reconfigurar o modificar una imagen obtenida por una cámara. Se podría decir que el procesamiento de imagen es el procedimiento inverso de la computación grafica. Sin embargo, para trabajar en estas dos áreas, básicamente se debe tener presente el mismo conocimiento, como la interacción de la iluminación con diversos objetos, como una escena de tres dimensiones puede ser proyectado sobre un plano, etc. 2 Visión Por Computador 24 2.3 Dispositivos de Captura Se llaman dispositivos de captura a todos aquellos que permiten de una u otra forma introducir información en la computadora. Este documento se centra en dispositivos de capturas de imágenes, los cuales están compuestos por sensores ópticos que captan la intensidad de luz que le llega y la convierten en números, y por ultimo generar un archivo de una imagen digital. 2.3.1 Cámara Digital Es un dispositivo de captura de imágenes digitales mediante un sensor electrónico en lugar de una película fotosensible. El sistema óptico funciona de la misma manera que las cámaras de película [4]. Los sensores de imagen en los dispositivos electrónicos están compuestos por una matriz de electrodos, donde estos tienen la capacidad de medir la intensidad de luz que le llega a cada celda, para luego ser cuantificados y procesados por la cámara, generando un mapa de bits de la imagen, donde finalmente, se genera la imagen digital, y se almacena en la memoria del dispositivo [5]. En la Figura 2.2 se muestra un sensor de una cámara digital. Figura 2.2 – Un sensor de imagen de una cámara digital 2.3 Dispositivos de Captura 25 El tipo de sensor de imagen utilizado en las cámaras digitales son los dispositivos de carga acoplada (mejor conocido como CCD), y los sensores basados en la tecnología de metal oxido semiconductor complementado (o CMOS) [6]. 2.3.2 Webcams Una cámara web, o mejor conocidas como webcams, es en esencia una cámara que se encuentra conectada a un computador, ya sea por conexión directa o inalámbrica, y esta captura una serie de imágenes para ser desplegarlas en la pantalla. Son muy utilizadas para generar imágenes en tiempo real, y para una gran cantidad de aplicaciones, generalmente para realizar video llamadas [7]. Entre los diversos modelos y marcas que existen en el mercado, se diferencian principalmente por la resolución de la imagen de captura, la calidad de imagen, y sobre todo por frecuencia de capturas. Para una buena transmisión de video, se necesitan al menos 15 capturas por segundo (FPS), aunque lo ideal es 30 [8]. Además de la funcionalidad para realizar video conferencias para la cual fueron diseñadas, muchas ofrecen la posibilidad de tomar fotografías digitales, e incluso otras permiten que sean desconectadas del computador, y el usuario pueda tomar fotografías donde quiera como si se tratara de una cámara digital. En la Figura 2.3, la figura izquierda muestra una simple webcam, mientras que la figura de la derecha se encuentra una webcam con funcionalidad de cámara digital. Figura 2.3 Modelos de webcams 2 Visión Por Computador 26 2.4 La Luz La naturaleza de la luz ha sido estudiada desde muchos años por muchos científicos tan notables como Newton y Max Plank. La naturaleza de la luz ha sido interpretada de diversas formas: • Está compuesta por corpúsculos que viajaban por el espacio en línea recta (corpuscular – Newton); • Como ondas similares a las del sonido que requerían un medio para transportarse (el Éter) (Ondulatoria – Huygens, Young, Fresnel); y • Finalmente Broglie en 1924 unifica la teoría electromagnética y la de los ‘cuantos’ (que provienen de la ondulatoria y crepuscular) demostrando la doble naturaleza de la luz. Si la luz es una forma de energía el cual puede ser transferido de un lugar a otro, es razonable describirlo análogamente como cualquier otro método para transportar energía. El movimiento de cuerpos involucra energía cinética. Esta energía acompaña el cuerpo en su movimiento y por ende transporta energía de un lugar a otro. Otra forma mecánica para transferir energía es por la propagación de ondas. Generalmente de esta forma no es acompañada por ningún movimiento de cuerpos en el medio. [9] Actualmente, la luz se describe en términos de partículas y ondas, que son dos enfoques ligeramente diferenciables. Si la luz se considera como partículas, su comportamiento se regirá por las leyes de energía cinética, como una bala de un rifle (Figura 2.4.a), que viaja de una región definida a otra, y no se propaga durante su desplazamiento. Sin embargo, si la luz se considera en términos de onda, la energía se propaga rápidamente hacia todas las direcciones (Figura 2.4.b). 2.4 La Luz 27 Figura 2.4 – Distintos enfoques de comportamiento físico de la luz Rayos de luz Para el siglo XVII, se estudiaba que la propagación de luz podía ser representada como grupos de rayos. Si una pequeña fuente de luz es interrumpida por un obstáculo opaco, se forma una sombra del objeto muy definida. En cambio, si la fuente de luz no es tan pequeña, la sombra formada va perdiendo definición. Se forma una sombra oscura conocido como la ‘umbra’ y otra sombra difusa denominado como la ‘penumbra’. Figura 2.5 - Sombras formadas por una fuente de luz puntual y una amplia 2 Visión Por Computador 28 Estas observaciones son ejemplos de una gran cantidad de experimentos los cuales describen y demuestran la premisa que la luz viaja de una fuente en forma de rayos en línea recta. En la vista (b) de la Figura 2.5, el cambio de iluminación el cual ocurre en la penumbra es debido al hecho que un punto en esta región recibe luz solo de una porción de la fuente. No hay evidencia de energía que se propague fuera de la región definida por los rayos. Un rayo puede estar definido como una trayectoria recta en la cual la energía luminosa viaja del emisor al receptor. El tráfico en este camino puede ser bloqueado si el rayo es interrumpido por un obstáculo opaco en cualquier punto del rayo. Si todos los rayos emitidos por una fuente de luz son interrumpidos por obstáculos opacos, ninguna luz puede alcanzar al receptor desde el emisor. Nótese que se están involucrando dos ideas: la primera, es la luz se propaga en rayos; y segundo, estos rayos viajan en línea recta. El movimiento de una pequeña partícula traza, inevitablemente, una línea recta. En la mayor parte de las longitudes de onda, sin embargo, la información transportada por la radiación electromagnética no es detectada por los sentidos humanos. Las fuentes naturales producen radiación electromagnética a través del espectro, y nuestra tecnología también puede detectar un amplio rango de longitudes de onda. Por la fibra óptica se transmite luz que, aunque no es adecuada para la visión directa, puede transportar datos que luego son traducidos en sonido o imagen. [10] 2.4.1 Propiedades A continuación se dará una explicación acerca de las propiedades físicas, o propiedades más resaltantes de la luz. Es importante tener presente estas propiedades al momento realizar un proyecto que involucra visión por computador, y entender el comportamiento de la luz en el mismo. 2.4 La Luz 29 2.4.1.1 Interferencia Es un fenómeno que ocurre cuando dos o más rayos de luz se solapan, y estos al mezclarse o forman un rayo de luz común más intenso (Interferencia constructiva), o cada rayo se interfiere el uno al otro, y en consecuencia la intensidad de cada rayo se atenúa (Interferencia destructiva). (Ver la Figura 2.6) Figura 2.6 – (a) Interferencia Constructiva, (b) Interferencia Destructiva 2.4.1.2 Absorción Cuando la luz entra en un material transparente, una porción de energía es disipada en energía calórica. Cuando esta absorción de energía ocurre de manera selectiva para diferentes longitudes de onda, la luz que a través del material, mostrará sólo aquellas longitudes de onda que no fueron absorbidas. [12] (Ver la Figura 2.7) Figura 2.7 – Fenómeno de la Absorción 2 Visión Por Computador 30 2.4.1.3 Refracción El concepto que las ondas de luz sean refractadas puede ser fácilmente demostrado colocando un simple lápiz en un vaso con agua por la mitad. Es posible ver el aparente cambio o ruptura del lápiz al entrar al agua. [11] Se ha determinado que la dirección de una onda electromagnética varía a medida que este cambia de medio en el que se encuentra. El ángulo de incidencia y el ángulo de refracción están vinculados con la Ley de Snell, que dicta la siguiente fórmula: �� ∗ ������� �� ∗ ����� � Donde n1 y n2 son los índices de refracción para cada medio, y los θ1 y θ2 son los ángulos de refracción para cada medio. En la Figura 2.6 muestra una representación grafica de luz refractada al cambiar del medio aire a agua. Figura 2.8 – Fenómeno de la Refracción 2.4 La Luz 31 2.4.1.4 Reflexión Esta propiedad es un fenómeno que puede observarse todos los días. Los espejos son dispositivos que reflejan en su totalidad todo rayo de luz que choque con su superficie. Cuando ocurre la reflexión, se puede observar que el ángulo de incidencia es igual al ángulo de reflexión para una superficie lisa y perfectamente pulida. Sin embargo, puede haber normalmente perdida de intensidad, ya sea por absorción, o que cierta porción de la señal viaje a través de la superficie. También pueden ocurrir otros fenómenos adicionales como la refracción, difracción, polarización, etc. [11] Figura 2.9 – Fenómeno de la Reflexión 2.4.2 Espectro Electromagnético Se conoce como el espectro electromagnético al rango de todas las radiaciones electromagnéticas conocidas. El espectro de un objeto es la distribución característica de la radiación electromagnética de ese objeto. El espectro electromagnético se extiende desde las bajas frecuencias usadas para la radio moderna (extremo de la longitud de onda larga) hasta los rayos gamma (extremo de la longitud de onda corta), que cubren longitudes de onda de entre 2 Visión Por Computador 32 miles de kilómetros y la fracción del tamaño de un átomo [13]. En la Figura 2.10 se muestra un diagrama del espectro con su frecuencia. Se piensa que el límite de la longitud de onda corta está en las cercanías de la longitud Planck, mientras que el límite de la longitud de onda larga es el tamaño del universo mismo, aunque en principio el espectro sea infinito y continuo. Figura 2.10 - Representación gráfica del espectro electromagnético 2.5 Luz Infrarroja La luz infrarroja (o radiación infrarroja), es un espectro de luz invisible al ojo humano, y se encuentra entre la luz visible y las microondas. Las ondas infrarrojas tienen longitudes de onda más largas que la luz visible, pero más cortas que las microondas, y tienen frecuencias más bajas que la luz visible, pero más altas que las microondas [14]. La radiación infrarroja puede ser utilizada para medir el calor irradiado por un objeto. Esta es la radiación producida por el movimiento de los átomos y moléculas en un objeto. A mayor temperatura, mayor será el movimiento de los átomos y 2.5 Luz Infrarroja 33 moléculas, y por ende, se produce mayor radiación infrarroja. Cualquier objeto el cual tenga una temperatura por encima del 0 absoluto, es decir, -273.15 grados celcius, irradia luz infrarroja. Cero absoluto es la temperatura a la cual todo movimiento atómico y molecular cesa. Incluso objetos que pueden parecer que son muy fríos, como un cubo de hielo, emite radiación infrarroja. Hay casos que aquellos objetos calientes pero no lo suficiente como para irradiar luz visible, emitirá radiación infrarroja. Por ejemplo, un carbón caliente puede que no esté al punto de encontrarse al rojo vivo, pero si emitirá luz infrarroja el cual percibimos como la energía calórica. 2.5.1 Longitudes de onda La parte infrarroja del espectro electromagnético cubre el rango desde aproximadamente los 300 GHz (1 nm) hasta los 400 THz (750 nm). Puede ser dividida en tres partes: 2.5.1.1 Infrarrojo cercano Desde 120 a 400 THz (2500 a 750 nm). Los procesos físicos que son relevantes para este rango son similares a los de la luz visible. 2.5.1.2 Infrarrojo medio Desde 30 a 120 THz (10 a 2.5 µm). Los objetos calientes (radiadores de cuerpo negro) pueden irradiar fuertemente en este rango. Se absorbe por vibraciones moleculares, es decir, cuando los diferentes átomos en una molécula vibran alrededor de sus posiciones de equilibrio. Este rango es llamado, a veces, región de huella digital, ya que el espectro de absorción del infrarrojo medio de cada compuesto es muy específico. 2.5.1.3 Infrarrojo lejano Desde 300 GHz (1 mm) hasta 30 THz (10 µm). La parte inferior de este rango también puede llamarse microondas. Esta radiación es absorbida por los llamados 2 Visión Por Computador 34 modos rotatorios en las moléculas en fase gaseosa, mediante movimientos moleculares en los líquidos, y mediante fotones en los sólidos. El agua en la atmósfera de la Tierra absorbe tan fuertemente esta radiación que confiere a la atmósfera efectividad opaca. Sin embargo, hay ciertos rangos de longitudes de onda ("ventanas") dentro del rango opacado que permiten la transmisión parcial, y pueden ser usados en astronomía. 2.5.2 Aplicaciones La gran ventaja de este espectro es su similitud a la luz visible, con la gran diferencia que no se puede percibir por el ojo humano. Esto conlleva a la invención de múltiples dispositivos que utilizan este espectro para diversas aplicaciones. A continuación se mencionan las más resaltantes. 2.5.2.1 Visión Nocturna El infrarrojo es utilizado para dispositivos de visión nocturna cuando hay luz visible insuficiente para ver. Estos dispositivos funcionan realizando un proceso de conversión de fotones de luz ambientales en electrones los cuales son amplificados por un proceso electroquímico y por ultimo convertirlos de nuevo en luz visible. Fuentes de luz infrarroja pueden ser utilizadas para aumentar la luz ambiental disponible para ser convertidos con los dispositivos de visión nocturna [15]. Figura 2.11 - Dispositivo de visión nocturna y una imagen de captura 2.5 Luz Infrarroja 35 2.5.2.2 Imágenes Termales Los dispositivos que despliegan imágenes termales tienen la capacidad de mostrar la magnitud de radiación infrarroja (el cual corresponde a la cantidad de calor) emitida del cuerpo de cualquier objeto. Estas aplicación se utilizan para diversas areas, desde la medicina, hasta jornadas de búsqueda y rescate, etc [14]. Figura 2.12 - Dispositivo de imágenes termales y una imagen de captura 2.5.2.3 Comunicación Antes de la aparición del Bluetooth, el infrarrojo era el medio inalámbrico predominante para transmitir datos entre dos dispositivos móviles o entre un dispositivo móvil con una computadora. Este método requiere que ambos dispositivos se encuentren a unos cuantos centímetros de distancia, una limitante muy grave que lo llevó al desuso [14]. Esto se puede observar en la Figura 2.13. 2 Visión Por Computador 36 2.5.2.4 Meteorología Ciertos Satélites climáticos capturan imágenes termales o infrarrojas que son procesadas para determinar la altura y comportamiento de las nubes, para calcular la temperatura tanto en la litosfera como la hidrosfera. Al analizar estas imágenes, se pueden calcular y hacer proyecciones del comportamiento meteorológico en una zona, para predecir desde ligeras precipitaciones, hasta grandes huracanes. En la Figura 2.14 se muestran unas capturas climáticas. Figura 2.14 - Imágenes termales satelitales para la meteorología. (a) (b) Figura 2.13 - (a) Un LED infrarrojo | (b) Conexión infrarroja entre dispositivos 2.5 Luz Infrarroja 37 2.5.2.5 Astronomía Los telescopios infrarrojos son muy similares a los telescopios comunes, solo que estos utilizan ciertos espejos, lentes y filtros especiales que permiten captar un mayor rango de longitudes de onda. Estos telescopios especiales son usados para detectar la radiación infrarroja emitida de cuerpos celestes, galaxias distantes, estrellas lejanas, entre otros; e investigar y desarrollar nuevos descubrimientos en este campo de la ciencia [14]. Figura 2.15 - Un telescopio infrarrojo y una imagen de captura de un cuerpo celeste Para efectos de la elaboración de mesas interactivas, se trabaja con este espectro por poseer una longitud de onda que lo hace invisible al ojo humano, por lo que no interfiere con los proyectores u otros dispositivos que emitan luz- En el capítulo siguiente se mencionan diversas técnicas existentes para la construcción de estos dispositivos usando visión por computador. 2 Visión Por Computador 3 Tecnologías Multitouch A continuación, este capítulo explica los antecedentes de la tecnología de dispositivos multitouch y los productos actuales en el mercado. Finalmente, se explican diversas técnicas que involucran captura de imágenes con dispositivos de captura, como una webcam, iluminación infrarroja, y procesamiento de imágenes. 3.1 Antecedentes El auge de las computadoras personales en la década de los 80 les proporcionó poder de cómputo a usuarios individuales en sus escritorios en lugar de un mainframe central. Los diseñadores de interfaces estructuraron y simplificaron la interacción de los usuarios con los datos e información almacenados en sus computadores escritorio. Ellos convirtieron el escritorio físico en una metáfora para las interfaces gráficas de usuario de despliegue en la pantalla del computador. De esta forma, el escritorio físico como tal fue adaptado en la manera que los computadores y tecnologías de información fueron integrados en la vida cotidiana de las personas de la actualidad. La idea que estos escritorios digitales juegan un papel central cuando se refiere a evaluar, organizar y crear información que no es basado en papel, data desde la década de los 40. Esto fue cuando Vannevar Bush visualizo Memex, un dispositivo electromecánico para almacenar y evaluar información (Véase la Figura 3.1). 39 Mientras que la tecnología cambia de forma drástica, su concepto fue retomado por Pierre Wellner cuando presentó Digital Desk (escritorio digital) en el año 1993. Con su trabajo, la interfaz de usuario del computador esencialmente reflejaba un escritorio, o como Wellner menciono: Una metáfora de escritorio es requerida porque es, literalmente, un escritorio. Figura 3.1 - Esquema de un escritorio Memex El término “tabletop” se encuentra entre los términos tradicionales de computadores como desktop y laptop, haciendo énfasis en la ubicación de la pantalla del computador. Los tabletops se distinguen por ser apropiados para trabajos grupales y reuniones, por el hecho que la pantalla horizontal es precisamente la interfaz donde los usuarios interactúan directamente con la información digital sin la manipulación de un teclado ni un ratón. 3.2 Dispositivos multitouch actuales En el transcurso de los años, con el avance de la tecnología, grandes compañías de informática han desarrollado sus propios productos comerciales. Se Mostrarán algunos a continuación: 3 Tecnología Multitouch 40 3.2.2 Microsoft Surface El Microsoft Surface (véase la Figura. 3.2) es una computadora multitouch de 30 pulgadas que responde ante gestos naturales de manipulación y objetos reales, contribuyendo a la manipulación de contenido digital de una manera muy simple e intuitiva. Con su amplia superficie horizontal, Surface ofrece un medio único donde personas se pueden reunir e intercambiar datos e información de una manera colaborativa y simultánea [17]. Figura 3.2 – El Surface de Microsoft Surface para Usuarios El Surface de Microsoft representa un cambio fundamental en la forma con que se maneja contenido digital. Dejando a un lado el mouse y teclado, Surface permite “tocar” contenido digital con las manos y manipular la información con diversos gestos y toques. Además puede detectar objetos colocados en su superficie, permitiendo al usuario tanto extraer como introducir archivos (documentos, archivos multimedia, etc.) a dispositivos como celulares o cámaras digitales. 3.2 Dispositivos Multitouch Actuales 41 Surface para Negocios Surface provee un potencial tremendo para mejorar la comunicación en reuniones de negocios, dando soporte en la manera que se divulga información y servicios a sus clientes. Su interfaz intuitiva y usable es fácil de usar de aprender y es totalmente compatible con plataformas de software más conocidos. Funciones principales de la Microsoft Surface [17] Las funcionalidades más resaltantes de la Surface son las siguientes: • Interacción directa. Los usuarios pueden tomar información digital con sus manos e interactuar con el contenido “en la pantalla” por toques y gestos, sin el uso del teclado ni mouse, como se aprecia en la Figura 3.3 Figura 3.3 – Interacción directa con la superficie de la mesa 3 Tecnología Multitouch 42 • Experiencia multi-usuario. La gran pantalla horizontal de 30 pulgadas da facilidad para que diversos usuarios puedan trabajar de manera colaborativa y simultánea en el mismo dispositivo, como se muestra en la Figura 3.4 Figura 3.4 – Soporte de interacción multi-usuario • Multi-touch. Surface responde a diversos puntos de contacto simultáneamente (Véase la Figura 3.5) – y no solo de un dedo, como en las típicas pantallas táctiles. Esto provee mayor usabilidad en las aplicaciones. Figura 3.5 – Reconocimiento de gestos multitouch 3.2 Dispositivos Multitouch Actuales 43 • Reconocimiento de objetos. Usuarios pueden colocar objetos físicos en la pantalla para disparar diferentes respuestas digitales de interacción – dando la posibilidad de intercambiar contenido de digital con un celular, cámara digital, etc. En la Figura 3.6 muestra esta novedosa funcionalidad que provee la Surface. Figura 3.6 – Interoperabilidad con dispositivos móviles Funcionamiento de la Microsoft Surface Surface utiliza cámaras e reconocimiento de imágenes en el espectro infrarrojo para reconocer diferentes tipos de objetos como dedos, objetos etiquetados y figuras. Esta entrada es procesada por la computadora y la respuesta de interacción es desplegada usando proyección trasera. El usuario puede manipular contenido e interactuar con la computadora entrando en contacto con la pantalla haciendo toques y realizando diferentes gestos con las manos, en vez de depender de un teclado y mouse. 3 Tecnología Multitouch 44 3.2.3 PQ Labs iTable El iTable, a diferencia de otros dispositivos con el prefijo ‘i’, no proviene de la Apple, sino de PQ Labs; es un fuerte competidor de la Microsoft Surface, el cual salió en el 2007, pero solo para uso comercial. Este dispositivo es una mesa multitouch, que posee una delgada capa de contacto encima de una pantalla LCD de 32 hasta 52 pulgadas. Al adquirir un iTable, se obtiene una lámina delgada enmarcada como una ventana, que esta va encima de la pantalla y que interactúa con la computadora a la cual este conectada. Esta valorizada para 2.500 dólares americanos, el cual es un precio un poco elevado para uso personal en casa, pero bastante accesible para negocios. Sin embargo, PQ Labs está planeando un dispositivo más económico para que esté al alcance de cualquier usuario. iTable es compatible con software tanto de Windows, como MacOS [18]. En la Figura 3.7 se muestra el dispositivo. Figura 3.7 – El iTable de la compañía PQ Labs 3.2 Dispositivos Multitouch Actuales 45 La interactividad del iTable es fluida, y podría atraer la atención de muchos usuarios de negocios. Siempre es una mejor opción demostrar ideas y planes de negocios en este dispositivo en reuniones, presentaciones y conferencias sin invertir mucho dinero en hardware muy costoso [19]. Especificaciones Técnicas • Tamaño de la pantalla: 32, 42, 46 y hasta 50 pulgadas • Resolución: 4096 x 4096 • Vida útil: más de 50.000 horas de uso • Tamaño de un objeto detectable: a partir de 3 mm x 3 mm • Material de contacto: vidrio temperado • Tiempo de respuesta: <10 ms (100 fps) • Temperatura del dispositivo: -15 hasta 60 grados celcius • Entornos de trabajo: exterior e interior 3.2.4 DOC-MTS Multitouch Technology Una compañía europea fundada en el año 1998, cuya función principal se centran sobre impresiones en cristal y cerámica, decidió crear su propio departamento sobre desarrollo de hardware y software en tecnología multitouch. Para el año 2005, salió la primera mesa interactiva, y para el año 2007 y 2008 lograron adquirir la patente de su tecnología para ser utilizada en diversas áreas. En la figura 3.8, muestra dos modelos de la mesa interactiva. Este dispositivo cuenta con una pantalla de 46 pulgadas, con una resolución de 1280x800, viene con sistema operativo Windows XP, Windows Vista o Windows 7. Posee una tarjeta de red inalámbrica. Cuenta con la facilidad de conectar un teclado y mouse inalámbrico, y la pantalla es capaz de detectar hasta 200 puntos de contacto simultáneamente [20]. 3 Tecnología Multitouch 46 Figura 3.8 – La mesa interactiva de la compañía DOC-MTS 3.2.5 SMART Table La compañía norteamericana SMART presenta una mesa interactiva al aula de clases. Ideal para trabajo colaborativos entre estudiantes para resolver diversas actividades como rompecabezas, operaciones aritméticas, etc. El funcionamiento de la mesa se asemeja a la Surface de la Microsoft, una computadora, proyector de corto alcance, y cámaras infrarrojas [21]. En la Figura 3.9 se muestra el dispositivo siendo utilizado por una maestra y dos alumnas simultáneamente. Figura 3.9 – La mesa interactiva de la compañía SMART 3.2 Dispositivos Multitouch Actuales 47 3.3 Técnicas empleadas para dispositivos multitouch A continuación, se mencionan las distintas técnicas empleadas en la realización de tabletops. Cada una posee sus ventajas y desventajas, ya sea a nivel de costo, tiempo de vida del dispositivo, la complejidad de elaboración, y sobre todo, el rendimiento y la usabilidad del dispositivo. 3.3.1 FTIR (Frustrated Total Internal Reflection) [23] Es el nombre utilizado por la comunidad multitouch para describir la metodología desarrollado por Jeff Han [22]. FTIR se refiere al fenómeno óptico el cual Han basó su trabajo. La reflexión total interna describe la condición presente en ciertos materiales cuando la luz viaja de un medio a otro con un índice de refracción mayor, donde el ángulo de incidencia es mayor que el ángulo específico. El ángulo específico al cual esto ocurre depende de los índices de refracción de ambos materiales, y esto se conoce como el rango crítico, el cual puede ser calculado matemáticamente usando la ley de Snell. Cuando esto sucede, no ocurre refracción en el material, y el rayo de luz es reflejada totalmente. El método de Han utiliza este efecto, inundando el medio interno de una lamina de acrílico con luz infrarroja, donde esta queda atrapada por el principio de la reflexión total interna. Cuando el usuario entra en contacto con la superficie del acrílico, los rayos de luz viajan fuera del acrílico hacia el material en contacto (piel usualmente), y la reflexión no es total a este punto. Esta luz “frustrada” se proyecta por la parte inferior de la lámina, y es capturada por una cámara infrarroja, capaz de captar estas “manchas”, para ser tratadas por un software de rastreo. En la Figura 3.10 se muestra un esquema de esta técnica. Este principio es muy útil para construir pantallas multitouch, ya que la luz que es “frustrada” por el usuario se escapa del acrílico en un área bien definida bajo el punto de contacto y es claramente visible para la cámara de captura. 3 Tecnología Multitouch 48 Figura 3.10 - Esquema del funcionamiento de un dispositivo FTIR Acrílico De acuerdo con la publicación científica “Low-Cost Multi-Touch Sensing through Frustrated Total Internal Reflection” de Jefferson Y. Han [31], es necesario usar acrílico para la pantalla. El grosor mínimo es de 6mm, sin embargo, para pantallas mas grandes se recomienda 1cm de grosor para evitar que la lámina se encorve. Antes de usar la lámina de acrílico para la construcción de la mesa multitouch, usualmente al cortar la lámina en las dimensiones deseadas, los bordes del mismo quedan opacas, dificultando el paso de luz dentro de la lámina. Por esto, es importante limar y por último, pulir todos los bordes de la lamina. Aislante Es requerido para ocultar toda luz infrarroja que se escape fuera de la lámina de acrílico. Se puede utilizar un marco de cualquier material (madera, metal, etc.) 3.3 Técnicas Empleadas para dispositivos Multitouch 49 Capa de Contacto En un montaje básico de un dispositivo FTIR, el desempeño depende gran parte en que tan humectados se encuentren los dedos del usuario. Dedos húmedos son ideales para el contacto con la superficie del acrílico. Para mejorar la superficie de contacto, se recomienda recubrir el acrílico con una capa de silicón o algún otro material que permita maximizar la proyección de la luz frustrada sobre la cámara. Esto también protegerá el acrílico de rayones y manchas. Superficie Adecuada Es una capa que recubre toda la superficie con el que el usuario interactúa en sistemas FTIR. Esta capa especial tiene que estar compuesta por un material cuyo índice de refracción es mayor a la del acrílico, y que además ambos materiales se acoplen cuando se les somete presión, y se desacoplen cuando la presión es liberada. Esta capa especial también se puede utilizar como pantalla de proyección. La finalidad de esta superficie es simplemente mejorar el contacto de la superficie con los dedos (particularmente mejora el deslizamiento de los dedos sobre el acrílico, para cuando se esté arrastrando objetos de un lugar a otro), y mejora la proyección de contacto para la cámara infrarroja. En la técnica FTIR, la luz infrarroja es emitida por los bordes de la lamina de acrílico, donde los rayos viajan en su interior (debido al fenómeno de reflexión interna total, que también ocurren en la fibra óptica); al momento que se toca la superficie del acrílico, los rayos que viajan en la lamina “chocan” con el objeto en contacto, iluminando todo la silueta del mismo. Actualmente, se sigue realizando experimentos para conseguir la superficie adecuada perfecta, donde se consiga una resolución de imagen clara y nítida, una superficie de contacto suave y lisa y genere puntos infrarrojos bien definidos para que sean captados con facilidad por parte de la cámara. 3 Tecnología Multitouch 50 3.3.2 DI (Diffused Illumination) Esta técnica se presenta de dos formas: iluminación difusa frontal e iluminación difusa trasera. Ambas técnicas se basan del mismo principio básico, el contraste en la imagen que se genera entre los dedos cuando entran en contacto con la superficie del dispositivo [23]. Iluminación Difusa Frontal La luz visible (usualmente la iluminación ambiental) es proyectado sobre la superficie superior del dispositivo. Un difusor es colocado por la parte superior o inferior de la superficie táctil. Cuando un objeto toca la superficie, una sombra es creada en la posición del objeto. La cámara capta e interpreta esta sombra generada. Iluminación Difusa Trasera Dependiendo del tamaño y configuración de la mesa, puede resultar un gran reto lograr una iluminación infrarroja distribuida de manera uniforme a lo largo de toda la superficie para este tipo de tabletop. Mientras ciertas áreas están bien iluminadas, y por ende, al tocar estas zonas, el sistema detecta fácilmente cuando el usuario interactúa con el dispositivo; hay zonas más oscuras, y el usuario debe realizar un esfuerzo adicional para interactuar con la mesa. Un primer intento para resolver estos problemas se sería mejorar el hardware, como localizar los iluminadores de la pantalla, modificar el material de la superficie con la que el usuario interactúa, la posición y la calidad de la cámara, etc. Sin embargo, si estos problemas van más allá a nivel hardware, se sugiere hacer uso de algún software adicional que pueda optimizar el procesamiento de captura de imágenes, etc. 3.3 Técnicas Empleadas para dispositivos Multitouch 51 Para este tipo de dispositivo, la luz infrarroja es proyectada por la parte posterior de la superficie táctil. Cuando un objeto entra en contacto con la superficie, este refleja más luz que el difusor u otros objetos en el fondo; haciendo que esta luz intensa sea captada por una cámara. Estos dispositivos de iluminación trasera, requieren de lámparas infrarrojas para su funcionamiento. Estas fuentes de luz se pueden comprar pre-fabricadas, o incluso construir manualmente usando LEDs individuales. Adicionalmente, se necesita de un material difusor para difundir la luz a lo largo de toda la superficie del dispositivo. En la Figura 3.11 se muestra la representación grafica de un sistema DI. El uso de focos de luz infrarroja tiende a ser un tanto complejo para procurar distribuir uniformemente la iluminación a lo largo de toda la superficie. Lugares sobre-iluminados son altamente sensibles al tacto del usuario, y en regiones sub- iluminados, la cámara presenta dificultades para detectar cuando el usuario está tocando el acrílico, generando problemas de usabilidad en el sistema [23]. Figura 3.11 - Esquema del funcionamiento de un dispositivo DI 3 Tecnología Multitouch 52 3.3.3 LLP (Laser Light Plane) Múltiples láseres infrarrojos iluminan justo encima de la superficie. El plano infrarrojo formado por los láseres es cerca 1mm de grosor, para cuando un dedo toque la superficie de la mesa, este se ilumine y el sistema capta la silueta infrarroja formada [22]. Láseres Infrarrojos son una manera fácil y económica para construir mesas multitouch usando el método LLP. La mayoría de estos dispositivos utilizan de 2 hasta 4 láseres, posicionados en las esquinas de la superficie táctil. El vatiaje de estos láseres está relacionado con la brillantez que estos emiten, por ende, a mayor el vatiaje, mayor será la potencia de brillo. Esta configuración se muestra gráficamente en la Figura 3.12. Para formar un plano uniforme de luz infrarroja, es necesario el uso de lentes lineales en los láseres. Lentes lineales de 120 grados son los más usados, ya que estos reducen el número de fuentes de luz para cubrir toda la superficie [23]. Fig. 3.12 - Esquema del funcionamiento de un dispositivo LLP 3.3 Técnicas Empleadas para dispositivos Multitouch 53 3.3.4 DSI (Diffused Surface Illumination) Esta técnica utiliza un acrílico especial para distribuir la luz infrarroja a lo largo de toda la superficie. Básicamente utiliza la misma configuración que la técnica FTIR con un marco de LEDs infrarrojo, solo que en este caso se reemplaza el acrílico por uno de características especiales. Este acrílico contiene pequeñas partículas dentro del material actuando como miles de espejos (esta característica se conoce como “luminosidad”). Al iluminar con luz infrarroja la lamina por los bordes, la luz es redirigida y se propaga a la superficie del acrílico. El efecto es similar que la técnica de DI, pero este posee una iluminación uniforme, sin focos de luz, y el proceso de configuración es el mismo que la técnica empleada para los sistemas FTIR. En la Figura 3.13 se muestra esta técnica para sistemas multitouch. Los fabricantes de este tipo de acrílico poseen diferentes tipos de “luminosidad”. Estos varían en grosor y cantidad de partículas reflectadas dentro del material. El grosor de la lamina va dentro del rango de los 6-10mm, seguido de “L”, “XL” y “XXL” para la cantidad de partículas. Figura 3.13 - Esquema del funcionamiento de un dispositivo DSI 3 Tecnología Multitouch 54 3.4 Desarrollo de software multitouch A continuación se muestra un conjunto de herramientas que se utilizan en la actualidad para el desarrollo de aplicaciones en dispositivos multitouch. Se hablará acerca del protocolo TUIO, que es utilizado ampliamente para la interoperabilidad entre diversas tecnologías, el kit de desarrollo multitouch conocido como Touchlib, ReacTIVision y otro proyecto nombrado “Comunity Core Vision” 3.4.1 Protocolo TUIO [24] La definición del protocolo es un intento a proveer una interfaz de comunicación general y versátil entre las interfaces de usuario orientado a mesas interactivas y los módulos de visión por computador. El coordinador del proyecto es un profesor de la universidad del Arte y Diseño en Austria Martin Kaltenbrunner. Fue diseñado para impulsar el desarrollo de interfaces para mesas interactivas, donde el usuario puede manipular un conjunto de objetos. Estos objetos son rastreados por un sensor del sistema, para ser identificados y localizados en posición y orientación en la superficie de la mesa. El diseño flexible del protocolo ofrece métodos para seleccionar cual información ha de ser enviado. Esta ventaja es proporcionada sin afectar las interfaces ya existentes, ni requerir una re-implementación para mantener compatibilidad. La inmensa ventaja de utilizar este protocolo es que permite al desarrollador crear su software multitouch en el lenguaje, plataforma tecnológica, framework de su preferencia, ya que este sólo deberá crear un cliente TUIO y recibir paquetes para analizarlos, y realizar diversas acciones de acuerdo a los diversos eventos que se vayan presentado durante la interacción del usuario con el software. Incluso se puede utilizar un computador dedicado para la captura y envío de paquetes de estado de la mesa interactiva, y otro computador que ejecute el software multitouch, recibiendo los mensajes enviados. 3.4 Desarrollo de Software Multitouch 55 Detalles de Implementación El protocolo TUIO define dos clases principales de mensajes: mensajes "set" y mensajes "alive". Los mensajes "set" son usados para comunicar información acerca del estado del objeto como posición, orientación, etc. Mensajes "alive" indican el conjunto actual de objetos en la superficie usando una lista de identificadores únicos. Para evitar posibles errores como perdidas de paquetes, no existen mensajes explícitos de "add" y "remove" en el protocolo TUIO. El receptor deduce la cantidad de objetos "vivos" examinando la diferencia entre los mensajes de tipo "alive" secuenciales. Eficiencia y Confiabilidad Con la finalidad de proveer una conexión de baja latencia, el protocolo TUIO utiliza UDP como capa de transporte. Cuando se utiliza UDP, existe la posibilidad que ciertos paquetes se pierdan. Por ende, la implementación de TUIO incluye redundancia de información para el caso que un paquete se pierda, manteniendo un canal de datos eficiente integral. Por razones de eficiencia, los mensajes "set" son agrupados en un paquete para usar completamente el espacio proporcionado por un paquete UDP. Cada paquete también puede incluir mensajes "alive" redundantes para tolerar cierta pérdida de paquetes. Para múltiples objetos se envían una serie de paquetes, cada uno incluyendo al menos un mensaje "alive". Cuando la superficie se mantiene inactiva, se envían mensajes a una tasa fija dependiendo de la calidad del canal, un mensaje por segundo por ejemplo, para asegurar que el receptor eventualmente adquiera una vista consistente del conjunto de elementos presentes. 3 Tecnología Multitouch 56 3.4.2 ReacTIVision [25] Es un framework de visión por computador de código abierto desarrollado Martin Kaltenbrunner y Ross Bencina; encargado para el rastreo rápido y robusto de "Etiquetas binarias" anexados en objetos físicos, al igual para el rastreo de dedos. Fue diseñado principalmente como un "toolkit" para el desarrollo rápido de interfaces de usuario orientadas a dispositivos multitouch. Se utilizó este framework para una mesa interactiva llamada “Reactable”, enfocada para un entorno musical por su software de composición, donde involucra una serie de diversos objetos que son utilizadas para crear alguna pieza musical.Reactivision es una aplicación "standalone", el cual envía mensajes TUIO vía un puerto UDP a cualquier aplicación que provea con un cliente del protocolo TUIO. Dicho protocolo fue inicialmente diseñado para este proyecto con la finalidad de codificar el estado de los objetos tangibles y eventos multitouch de un dispositivo multitouch como una mesa o pantalla interactiva. Este framework incluye un conjunto de ejemplos de clientes TUIO para varios lenguajes de programación, el cual se muestran las instrucciones básicas para el desarrollo de una aplicación multitouch. Este framework también tiene la capacidad de enviar mensajes MIDI para el uso directo de secuenciadores MIDI. La aplicación reacTIVision está disponible para los sistemas operativos: Windows, MacOS y Linux. Bajo la plataforma Windows, soporta cualquier dispositivo de captura con su driver de Windows asociado, ya sean webcams, cámaras firewire o DV. Para MacOS, toda cámara firewire o webcam que sea soportado por QuickTime podrá utilizar reacTIVision. Para Linux, se recomiendan utilizar cámaras firewire, ya que las webcams presentan problemas para ser instaladas en el sistema operativo. 3.4 Desarrollo de Software Multitouch 57 3.4.3 TouchLib [26] Touchlib es una librería para crear aplicaciones multitouch en dispositivos táctiles como mesas FTIR o DI. Este kit de desarrollo maneja el rastreo de puntos de luz infrarrojos, y envía a la aplicación que se está ejecutando estos eventos multitouch, como "punto presionado", "punto en movimiento" y "punto liberado". Incluye una aplicación de configuración para el manejo de parámetros de la webcam u otro dispositivo de captura, los filtros y operaciones para el procesamiento de las imágenes de captura, y la calibración de la superficie multitouch. En la Figura 3.14 se muestra la pantalla de configuración de la webcam infrarroja. Figura 3.14 – Configuración de la cámara usando Touchlib Actualmente, está disponible para la plataforma Windows y Linux. Al descargarla, incluye la aplicación de configuración, y un programa de demostración con su código fuente asociado, de modo que el usuario pueda familiarizarse cómo la aplicación interactúa con la librería. Esta librería contiene una aplicación OSC, el cual este envía eventos multitouch en el formato del protocolo TUIO, usado por la librería ReacTIVision, ya mencionado en la sección 3.4.2. 3 Tecnología Multitouch 58 3.4.4 Comunity Core Vision [27] También conocido como tbeta, es una solución de código abierto para visión por computador y sistemas multitouch. Este captura un canal de video y extrae datos de objetos rastreados (coordenadas y tamaño de puntos de contacto) y eventos táctiles que son utilizados para aplicaciones multitouch. Este proyecto puede manejar diversas webcams y dispositivos de video, y conectarse a múltiples aplicaciones con soporte TUIO/OSC. CCV es capaz de funcionar adecuadamente bajo diferentes técnicas de iluminación infrarroja de mesas interactivas como FTIR, DI, SDI y LLP. Figura 3.15 – Configuración de la cámara usando CCV En la Figura 3.15 se muestra el panel de configuración del CCV, donde provee diversas funcionalidades para la manipulación de parámetros de la cámara, las operaciones a realizar por cada captura para extraer los puntos de contacto, etc. Sus principales ventajas y funcionalidades que provee CCV son: 3.4 Desarrollo de Software Multitouch 59 • Múltiples Filtros Provee la posibilidad de ser manejar todas las técnicas ópticas de multitouch utilizadas (FTIR, DI, LLP, DSI). • Intercambio de cámaras En caso que hayan más de dos cámaras conectadas a un computador, en la interfaz de configuración posee la funcionalidad de activar la cámara que va dirigida a la mesa interactiva sin necesidad de desconectar ni detener la ejecución del framework CCV. Además se puede realizar una rotación horizontal y/o vertical en caso que la cámara este alineada de manera incorrecta. • Calibración dinámica de malla Para sistemas de mesas interactivas muy grandes o pequeñas, el software de configuración CCV da la posibilidad de aumentar o disminuir los puntos de control al momento de calibrar el sistema. • Warping Una funcionalidad para calibrar superficies interactivas que carecen de un proyector de despliegue. • Soporte del protocolo TUIO Capacidad de enviar mensajes TUIO a aquellas aplicaciones que trabajen con clientes de dicho protocolo para rastrear constantemente el estado de la mesa interactiva. • Multiplataforma Este framework es soportado para los sistemas operativos Windows, Mac OS y GNU Linux. 3 Tecnología Multitouch 60 En la actualidad, todavía se está investigando y desarrollando nuevos kits de herramientas y nuevas tecnologías para expandir e impulsar los avances acerca del desarrollo de aplicaciones orientadas a dispositivos táctiles como mesas, pantallas y paredes multitouch. En el siguiente capítulo se hablará acerca del diseño del sistema multitouch producto de este Trabajo Especial de Grado. Primero se explicará acerca de la construcción del hardware, seguido del software requerido para el funcionamiento del sistema. Por último se explican las aplicaciones multitouch desarrolladas. 3.4 Desarrollo de Software Multitouch 61 62 4 Diseño y desarrollo de la solución propuesta A continuación, se presentara el diseño y desarrollo referente tanto del hardware como del software de una mesa multitouch de bajo costo, mencionando la técnica óptica aplicada, las librerías utilizadas y el lenguaje de programación. Una vez construido la mesa interactiva con los elementos de hardware y software, se procede a desarrollar una aplicación que tome ventaja sobre la capacidad multitouch del sistema. 4.1 Plataforma de Hardware Después de un estudio realizado sobre la elaboración de mesas interactivas de bajo costo donde involucra visión por computador y luz infrarroja, se optó por elaborar una mesa multitouch empleando el método FTIR explicado en el capítulo 2, con una lámina de acrílico de 24 pulgadas aproximadamente, una webcam y un pico-proyector. A continuación se explica el diseño del dispositivo. 4.1.1 Diseño del prototipo Para la elaboración del dispositivo, el diseño se realizó tomando en cuenta un conjunto de ventajas como: • Robustez – que el dispositivo sea rígido y tolerante a movimientos bruscos sin perder calibración; 63 • Portabilidad – el sistema sea fácil de ensamblar para facilidad de transportarla de un lugar a otro sin descuidar precisión de los elementos primordiales como la cámara y el proyector; • Precisión – el dispositivo cuente con un diseño rápido y fácil de calibrar, ofreciendo la mayor precisión en la superficie de usuario. El diseño esquemático se muestra en la Figura 4.1: Figura 4.1 - Esquema del funcionamiento de un dispositivo DSI Para efectos de aumentar y revertir la imagen de proyección por parte del pico- proyector, fue necesario agregar un espejo para aumentar la distancia de proyección. Además fue necesario agregar un soporte donde la webcam y el espejo puedan ser apoyados firmemente, dándole estabilidad y precisión a la mesa. En la Figura 4.2 se muestra un esquema en 3D del dispositivo. 4 Diseño y desarrollo de la solución propuesta 64 Figura 4.2 - Esquema del funcionamiento de un dispositivo DSI También fue necesario cerrar todo el sistema interno de la caja, con el propósito de aislar lo más posible la cámara y el proyector de la luz ambiental presente en el ámbito donde se encuentre. Básicamente, el sistema se desensambla en 6 grandes partes: 4 tablas que conforman las paredes de la mesa, el tope de la mesa con la que el usuario interactúa (lamina de acrílico y el vidrio esmerilado como difusor), y el soporte en la parte inferior donde se encuentra la webcam realizando la captura de puntos de contacto por parte del usuario, y el espejo que realiza la reflexión de la imagen transmitida por el proyector. En cuanto a conexiones, el dispositivo cuenta con una conexión USB para la webcam, otra conexión VGA para desplegar la imagen de la computadora por el proyector, y dos conexiones eléctricas, para energizar el arreglo de LEDs infrarrojos y el proyector. 4.1 Plataforma de Hardware 65 4.1.2 Materiales Los materiales incorporados para la elaboración de este dispositivo son: Acrílico Se adquirió una lámina de acrílico de 40cmx50cm, con un grosor de 8mm. El canto de la lámina fue pulido con la finalidad que los rayos de luz infrarrojo puedan entrar fácilmente. Vidrio Esmerilado Un lamina de vidrio esmerilado de 40cmx50cm de 4mm de grosor es colocado en la parte inferior de la mesa, para ser utilizado como pantalla de proyección para el proyector. Marco y LEDs Infrarrojos Se utilizo un marco de madera con una serie de LEDs Infrarrojos incrustados en todo el perímetro del marco, a 2 cm de separación entre cada uno, dando un total de 86 LEDs infrarrojos. Madera Compuesta Una lamina de 2m x 3m, para hacer dos laminas de madera de 56 cm x 78 cm, dos laminas de 44 cm x 78 cm y una lamina (usada para la superficie de soporte de la cámara) de 56 cm x 44 cm. Webcam Infrarroja Se utilizo una Microsoft LiveCam VX6000, donde este tuvo que ser desensamblado para sustituir el filtro anti-infrarrojo por un filtro que permita que la cámara pueda captar solo rayos de luz infrarroja, y este no capte rayos de luz visible. Proyección Se utilizo un pico-proyector de tecnología LED fabricado por Samsung, modelo SP- HO3, con una resolución de 854x480, y una intensidad de luz de 30 Lumens. 4 Diseño y desarrollo de la solución propuesta 66 4.1.3 Proceso de Elaboración A continuación se explica la construcción del dispositivo. Superficie de Usuario Para efectos de hacer la superficie fácil de ensamblar, se elaboro un marco exterior de mayores dimensiones que el marco de LEDs infrarrojos, con la finalidad de enmarcar el acrílico con el marco infrarrojo, y el vidrio en una sola pieza que es colocada sobre el sistema de soporte de la mesa. Esta pieza se elaboro a partir de un liston 5 cm x 5cm, de 2.5 m de longitud. (Véase la Figura 4.3). Figura 4.3 – Marco externo que unifica el marco IR, el acrílico y el vidrio esmerilado Una vez terminada esta pieza, esta fue perforada por un lado del marco para hacer pasar el cable que energiza los LEDs incrustados en el marco interno. Finalmente se procedió a unir los elementos en el marco externo, realizando los ajustes necesarios, como el lijado de las piezas y la aplicación de sellador de madera, para darle un mejor acabado. En la Figura 4.4 se muestra una vista superior e inferior de la pieza final. 4.1 Plataforma de Hardware 67 Figura 4.4 – Vista superior e inferior de la superficie del usuario Soporte Las láminas de madera previamente cortadas, se les colocaron ganchos de cama para sujetarlas juntas firmemente, y sean fácilmente desarmables para mejor portabilidad (Véase la Figura 4.5). Figura 4.5 – Vista de las tablas ensamblables de soporte del tope de la mesa 4 Diseño y desarrollo de la solución propuesta 68 Para minimizar interferencia de luz ambiental con la imagen proyectada por el pico- proyector, la parte interior del soporte fue pintado de color negro mate. Y finalmente, por la parte externa se le aplico el sellador utilizado para la pieza superior de la mesa (Véase la Figura 4.6). Figura 4.6 – Vista del interior y exterior de las tablas de soporte de la mesa Plataforma Inferior e Instalación del Proyector Unos listones fueron colocados a los lados en la parte interior de la caja, a fin de colocar la lámina que hace de apoyo para ubicar una webcam en el centro, y su campo de visión sea hacia la parte inferior de la superficie de usuario, y un espejo con un pequeño ángulo de inclinación, donde este rebotará la proyección del proyector. Una de las láminas de soporte de la mesa fue perforada, con el propósito de atornillar el pico proyector, este apuntando hacia el espejo, a modo que rebote y se proyecte sobre la pantalla de proyección de la mesa. En la Figura 4.7 se muestra la plataforma de soporte donde va ubicada la webcam con el espejo; y el proyector fijado en una de las láminas de soporte. 4.1 Plataforma de Hardware 69 Figura 4.7 – Vista de la tabla de soporte de la webcam y el espejo Aparte de la webcam y el espejo, se puede observar una fuente de poder que alimenta los LEDs infrarrojos; y adaptador de energía del proyector conectado a una regleta. Una vez realizadas las conexiones y la configuración interna de la mesa interactiva, se, se perforó un pequeño agujero para la salida de la conexión USB de la webcam, el cable VGA del proyecto, y el enchufe de la regleta para energizar los LEDs y el proyector. 4 Diseño y desarrollo de la solución propuesta 70 4.2 Plataforma de Software El software utilizado para manejar este sistema fue el siguiente. 4.2.1 Librerías de desarrollo Para ejecutar, e incluso desarrollar aplicaciones multitouch enseguida, se puede utilizar algún kit de desarrollo, o frameworks de código abierto como Touchlib, Comunity Core Vision, ReacTIVision, etc; donde sólo basta importar alguna de estas librerías para desarrollar una aplicación, o se ejecuta un servidor TUIO, donde este procesa las imágenes de captura para formar mensajes de información de estado y las envía a alguna aplicación cliente que interprete estos mensajes para realizar alguna acción de acuerdo al comportamiento de la mesa interactiva. En la Figura 4.8 se ve la representación grafica de la ejecución de un programa multitouch usando un cliente y servidor con el protocolo TUIO. Figura 4.8 - Esquema del funcionamiento de un dispositivo DSI Nótese que en la Figura 4.8 muestra que el sistema utiliza dos computadoras. Sin embargo, es posible ejecutar el servidor y cliente dentro de una misma computadora. 4.2 Plataforma de Software 71 4.2.2 Lenguaje de programación Para desarrollar una aplicación multitouch, es importante saber en qué lenguaje se quiere trabajar. Si se desea unificar una aplicación que realice la captura, el procesado e interpretación de las imágenes de la webcam, para desenlazar los diversos eventos y acciones que conllevan al cambio de estado de la aplicación, el usuario puede desarrollar cada modulo desde el principio, o se pueden importar librerías ya existentes que pueden ayudar al desarrollador en el modulo de visión por computador, permitiéndole que solo se encargue de desarrollar el propósito de su aplicación. Sin embargo, puede resultar complejo conseguir la librería ideal que sea compatible con el entorno que se esté trabajando. Otro enfoque más amplio para el desarrollador es utilizar el protocolo TUIO. De esta forma, hay más libertad de realizar la aplicación en el lenguaje de preferencia, y con implementar un cliente que reciba mensajes TUIO para interpretar, y disparar eventos que invoquen métodos y acciones pertinentes a la aplicación. En la Figura 4.9 se muestra una representación grafica referente a este método Figura 4.9 - Esquema del funcionamiento para diversos lenguajes de programación 4 Diseño y desarrollo de la solución propuesta 72 Ya mencionado todos los elementos de tanto en hardware como en software requeridos para elaborar un dispositivo multitouch de bajo costo, se puede observar que existen diversas formas posibles de cómo elaborar una mesa multitouch de bajo costo, y diversos proyectos de código abierto a nivel de software para apoyar la interacción del usuario con la superficie. En el siguiente capítulo se explicará el desarrollo de una aplicación educativa que explote la capacidad multitouch de la mesa interactiva, a modo que múltiples usuarios puedan utilizar el software simultáneamente. 4.2 Plataforma de Software 74 5 Diseño del software de demostración A continuación se explicara el desarrollo de una aplicación educativa multitouch, a modo que pueda ser usado por varios estudiantes al mismo tiempo, con la finalidad de crear un ambiente colaborativo para resolver un problema. 5.1 Propósito de la aplicación El siguiente software cuenta con el propósito de ser interactivo para múltiples usuarios simultáneamente. Para este caso, el tema de la aplicación es orientado hacia la educación, abarcando tres actividades ilustrativas relacionadas con la astronomía. Para realizar estas aplicaciones, fue necesario utilizar dos módulos que manejan el protocolo TUIO. 5.2 Detalles de Implementación Para el desarrollo de estas aplicaciones, se trabajo con el entorno de desarrollo Microsoft Visual Studio 2010 en el lenguaje de programación C#, apoyado del framework grafico Microsoft XNA Game Studio 4.0 y Touchlib para el soporte multitouch de la mesa interactiva. La aplicación trabaja con dos módulos que ofrece Touchlib, que contiene un conjunto de clases que manejan el protocolo TUIO, y que este depende de OSC (Open Sound Control), utilizado para el manejo de paquetes del protocolo. 75 El esquema básico de las aplicaciones se muestra en la Figura 5.1. Figura 5.1 – Vista superior e inferior de la superficie del usuario Se puede observar que la clase Multitouch funciona de interfaz entre La clase principal “Main”, con todo el manejo de mensajes recibidos por el servidor Touchlib; y este encapsula cada método en tres eventos: • Cuando se encuentra un nuevo punto en la mesa. • Cuando un punto ya encontrado cambia de posición. • Cuando un punto detectado desaparece. Estos tres eventos pueden ocurrir simultáneamente por distintos puntos, y estos son guardados en una lista que guarda las coordenadas, y un identificador para cada punto encontrado, para mantener el control de todos los puntos. 5 Diseño del software de demostración 76 5.2.1 Agujero Negro Fue el primer software desarrollado con capacidad multitouch, con la finalidad de entender el funcionamiento del protocolo TUIO, y los eventos que se disparan dependiendo del cambio de estado de la mesa interactiva. En la interfaz se muestran elementos espaciales orbitando alrededor de un agujero negro. Para el momento que el usuario toque la mesa (ya sea con un dedo o varios), se genera un planeta en las coordenadas donde el usuario hizo contacto. Este mientras no levante su dedo, puede trasladar su planeta a lo largo de la superficie, y para el momento que el usuario deje de presionar la mesa, el planeta realiza una trayectoria en espiral hacia el agujero negro, emulando que está siendo atraído por la fuerza de atracción del agujero negro. En la Figura 5.2 muestra una captura del programa. Figura 5.2 – Vista del programa sin la interacción con el usuario En la Figura 5.3 se muestra el programa con planetas generados por el usuario. 5.2 Propósito de la aplicación 77 Figura 5.3 – Vista del programa con la interacción con el usuario 5 Diseño del software de demostración 78 5.2.2 Sistema Solar Realiza una representación animada del sistema solar interactivo para el usuario, con la idea que conozca las características más generales de cada planeta que lo conforma. Al momento que el usuario “toca” un planeta, una tarjeta informativa es desplegada mostrando un conjunto de características resaltantes como su diámetro, su distancia aproximada con el sol, duración de una rotación alrededor de su propio eje, etc. En la Figura 5.4 se muestra el modelo del sistema solar. Figura 5.4 – Vista superior e inferior de la superficie del usuario En la Figura 5.5 se muestra una imagen de la aplicación cuando el usuario selecciona un planeta para visualizar su tarjeta informativa. 5.2 Propósito de la aplicación 79 Figura 5.5 – Vista superior e inferior de la superficie del usuario 5 Diseño del software de demostración 80 5.2.3 Fases Lunares Una aplicación interactiva para conocer las fases lunares. Básicamente se muestra un escenario panorámico de una montaña, y emulando el pase de los días, se van mostrando las distintas fases de la luna, para darle a conocer al usuario el nombre apropiado de cada fase y su significado. Cuando el usuario toca la luna, este puede modificar la fase en el que se encuentra, y también desplegar una tarjeta que explica con más detalle acerca de la fase seleccionada. En la Figura 5.6 se muestra una imagen que representa la interfaz principal para conocer las distintas fases lunares. Figura 5.6 – Vista superior e inferior de la superficie del usuario En la Figura 5.7 se muestra una imagen de la aplicación cuando el usuario selecciona un planeta para visualizar su tarjeta informativa. 5.2 Propósito de la aplicación 81 Figura 5.7 – Vista superior e inferior de la superficie del usuario 5 Diseño del software de demostración 82 6 Pruebas y resultados Para la elaboración de la mesa interactiva, se encontraron diversas situaciones donde lo más adecuado para obtener los mejores resultados fue evaluando diversas opciones, y así conseguir la mejor configuración al menor costo. Se realizaron pruebas como la comparación de filtros infrarrojos, webcams que ofrezcan la mejor resolución y fotogramas por segundo, y pantallas de proyección. 6.1 Pruebas a nivel de hardware En la realización de la mesa interactiva a partir del diseño esquemático mostrado en el capítulo 4, se realizaron un conjunto de pruebas de diferentes elementos del dispositivo para obtener los mejores resultados en cuanto a una relación eficiencia-costo. 6.1.1 Pantallas de proyección En cuanto a una pantalla de proyección ideal para el sistema, se intento utilizar diversas láminas de papel de distintos niveles de transparencia, pero se presentaron problemas de mantener el papel templado para tener la mejor calidad de imagen proyectada. Se terminó utilizando un vidrio esmerilado, colocado en la parte inferior del acrílico. De esta forma, le da mayor robustez al tope de la mesa, y cumple con su función de pantalla de proyección. 83 6.1.2 Filtros infrarrojos Para encontrar el mejor filtro infrarrojo para la webcam, se hicieron pruebas con el negativo de una fotografía 8mm, el disco interno de un disquete, y un filtro especial marca kodak. Para el caso del negativo de fotografía, las imágenes de captura resultaban con cierto ruido, lo que dificulta la captura exacta de los puntos de contacto. Para el caso del filtro kodak, las imágenes de captura resultan un tanto sensibles a la iluminación ambiental, haciendo que el sistema detecte puntos infrarrojos falsos. En la Figura 6.1 se muestran los tres elementos de prueba de filtros. Finalmente, se opto por utilizar el disco interno de un diskette, por su coste, y por proveer las mejores imágenes de captura. Por su opacidad, ofrece una cierta tolerancia a la luz ambiental donde se encuentre la mesa interactiva.. Figura 6.1 – Elementos candidatos para filtros infrarrojos 6.1.3 Desempeño de webcams Se hizo una evaluación de sistema utilizando una webcam Genius iLook300 y una Microsoft LiveCam VX6000, que se muestran en la Figura 6.2, y se concluyó que las aplicaciones funcionan con mayor fluidez utilizando la cámara de Microsoft por tener un lente de rango amplio, mejor resolución de las imágenes de captura y más fotogramas por segundo. 6 Pruebas y resultados 84 Figura 6.2 – Webcams que fueron evaluadas para el rendimiento de la mesa 6.2 Pruebas a nivel de software Las pruebas realizadas a nivel de software fueron las siguientes. 6.2.1 Proyectos código abierto para desarrollo de aplicaciones multitouch Multitouch Como el software de demostración trabaja con un cliente del protocolo TUIO, fue posible realizar pruebas de distintos proyectos de rastreo multitouch para la captura, procesamiento y envío de mensajes a la aplicación usando TUIO. A pesar que el software de Comunity Core Vision provee más funcionalidades que el Touchlib, este ultimo presentó mejor desempeño en la mesa en cuando a precisión, rapidez y costo de procesamiento para el computador. 6.2.2 Elaboración de un software educativo que explote la capacidad multitouch. Con el apoyo de las librerías antes mencionadas, fue posible realizar un software multitouch orientado hacia la educación, orientados en el área de astronomía. 6.2 Pruebas a nivel de software 85 86 Conclusiones La visión por computador ha servido como base para el desarrollo de nuevas tecnologías, entre ellas se encuentran las mesas interactivas. Estas ofrecen grandes posibilidades que las han llevado a ser utilizadas en ambientes educativos. A pesar que existen mesas interactivas que poseen otras tecnologías para la captura de información cuando el usuario toca la superficie, como el uso de sensores de calor y proximidad, las técnicas que involucran visión por computador resultan una manera fácil y económica para elaborar estos dispositivos. Entre las diferentes técnicas, para este trabajo se elaboró una mesa interactiva usando la configuración FTIR, por resultar ser la más económica y fácil de ensamblar. En cuanto a las librerías de desarrollo de aplicaciones multitouch, Touchlib mostró ser la más eficiente por su precisión y rapidez para la captura de los puntos infrarrojos. La lámina de acrílico costó aproximadamente Bsf 285, el listón de madera para los marcos de tope de la mesa costó Bsf. 70, el costo de la lámina de vidrio esmerilado fue de Bsf. 60. Una lámina de madera compuesta de 1.80m x 3m fue suficiente para elaborar las tablas ensamblables y la superficie de apoyo de la mesa, costó alrededor de los Bsf. 200. La webcam Microsoft costó cerca de los Bsf. 160. El elemento más costoso fue el picoproyector, que su precio va alrededor de los Bsf 3000. 87 En conclusión, totalizando los costos de todos estos elementos esenciales de la mesa, con otros elementos secundarios como pintura, sellador, clavos, ganchos de cama y tornillos, un presupuesto a partir de Bsf. 4000 a 4500 es suficiente para elaborar un dispositivo multitouch Con el apoyo de la librería Touchlib y una librería dinámica para controlar el mouse del computador, se pudo realizar una aplicación que permite el usuario poder controlar el puntero del mouse cuando este toca en cualquier punto de la pantalla. Finalmente, conociendo cómo funciona el protocolo TUIO, se pudo elaborar un software educativo que explota la capacidad multitouch, bajo el entorno grafico XNA 4.0 de Microsoft. 88 Referencias 1. Gonzalez, R.C. and Woods, R.E. {2008}. Digital image processing. Pearson/Prentice Hall. 2. Bernd Jähne {2005}. Digital image processing, Volume 1. Springer 3. José Ramón Mejía Vilet {2005} Procesamiento Digital de Imágenes, UASLP 4. Captura de Imagenes: http://www.kodak.com/global/es/corp/historyOfKodak/capturingAnImage_es.jhtm l?pq-path=2696 5. How Digital Cameras work: http://www.hometechanswers.com/digital-photography/how-digital-cameras- work.html 6. Digital Cameras: http://www.webopedia.com/TERM/D/digital_camera.html 7. J. Beam {2011} What is a webcam? : http://www.wisegeek.com/what-is-a- webcam.htm 8. WebCams : http://www.webcamworld.com/setupawebcam/intro.html 9. R. W. Ditchburn {2001} Light, Courier Dover Publications 10. Robertson, William C. {2003}, Light, NSTA Press 11. Electromagnetic waves - reflection, refraction, diffraction: http://www.radio-electronics.com/info/propagation/em_waves/electromagnetic- reflection-refraction-diffraction.php 89 12. Stephen A. Nelson {2002} Properties of Light: http://www.tulane.edu/~sanelson/geol211/proplight.htm 13. El Espectro Electromagnético: http://www.espectrometria.com/espectro_electromagntico 14. John Carl Villanueva {2009}, Infrared Light: http://www.universetoday.com/34504/infrared-light/ 15. Jeff Tyson {2009} How Night Vision Works: http://electronics.howstuffworks.com/gadgets/other-gadgets/nightvision.htm 16. Christian Muller-Tomfelde {2010}. Tabletops – Horizontal Interactive Displays. Springer. 17. Microsoft Surface – Pagina Oficial: http://www.microsoft.com/surface/en/us/Default.aspx 18. PQ Labs iTable – Pagina Oficial: http://www.theitable.com/2009/07/itableimpressive/ 19. PQ Labs – Pagina Oficial: http://multi-touch-screen.com/ 20. DOS-MTS multitouch table: http://www.doc-mts.com/?page_id=223&lang=en 21. Smart Table interactive learning center: http://www.smarttech.com/us/Solutions/Education+Solutions/Products+for+educ ation/Complementary+hardware+products/SMART+Table 22. Jefferson Y. Han. {2005} Low-Cost Multi-Touch Sensing through Frustrated Total Internal Reflection. ACM 23. Alex Teiche {2009} Multitouch Technologies. Nui Group 24. TUIO.ORG – Pagina Oficial: http://www.tuio.org/ 25. ReacTIVision – Pagina Oficial: http://reactivision.sourceforge.net/ 26. TouchLib – Pagina Oficial: http://nuigroup.com/touchlib/ 27. Community Core Vision: http://ccv.nuigroup.com/[Jorge Ramirez] Tesis18x UNIVERSIDAD CENTRAL DE VENEZUELA CENTRO DE COMPUTACION GRÁFICA De una Mesa Interactiva de Bajo Costo Universidad Central de Venezuela UNIVERSIDAD CENTRAL DE VENEZUELA FACULTAD DE CIENCIAS ESCUELA DE COMPUTACIÓN CENTRO DE COMPUTACION GRÁFICA Desarrollo De una Mesa Interactiva de Bajo Costo Usando Webcams Trabajo Especial de Grado Presentado ante la Ilustre Universidad Central de Venezuela Por el Bachiller en Ciencias: Ramírez B. Jorge A. Para optar por el titulo Licenciado en Computación Tutor Prof. Robinson Rivas Caracas, Mayo 2011 UNIVERSIDAD CENTRAL DE VENEZUELA 2 3 Resumen En la actualidad están en crecimiento nuevas tecnologías de interacción humano computador, como son los dispositivos manejados por la tecnología multitouch, que en este caso particular se hace un enfoque sobre mesas multitouch para trabajos colaborativos. Sin embargo, estos dispositivos que salen al mercado como productos comerciales, son excesivamente costosos y difíciles de adquirir. En este trabajo especial de grado se presenta el diseño y elaboración de una mesa multitouch, a partir de un pequeño conjunto de elementos de fácil adquisición, como una webcam, LEDs infrarrojos, una lamina de acrílico, entre otros. Se pretende utilizar una de las técnicas mas conocidas en estos sistemas conocidos como FTIR (iniciales de Reflexión Total Interna Frustrada en inglés), haciendo alusión al fenómeno físico clave que ocurre en la mesa para su adecuado funcionamiento. Palabras Claves: Tecnología Multitouch, FTIR, procesamiento digital de imágenes, Interacción Humano Computador. 4 5 Agradecimientos Agradezco a mi familia, a mis amigos. El apoyo aportado por el Laboratorio Centro de Computación Paralela y Distribuida y al Centro de Computación Grafica. Agradecimientos especiales a Gino Lagiar y David Rodríguez. A mi tutor Robinson Rivas por toda la atención prestada en este trabajo. 6 7 Acta Quienes suscriben, Miembros del Jurado designado por el Consejo de la Escuela de Computación para examinar el Trabajo Especial de Grado, presentado por el Bachiller Jorge Ramírez C.I.: 19.200.457, con el título “Desarrollo de una mesa interactiva de bajo costo usando webcams”, a los fines de cumplir con el requisito legal para optar al título de Licenciado en Computación, dejan constancia de lo siguiente: Leído el trabajo por cada uno de los Miembros del Jurado, se fijó el día 29 de Mayo de 2010, a las 03:00pm, para que su autor lo defienda en forma pública, en la Escuela de Computación, Facultad de Ciencias de la Universidad Central de Venezuela, lo cual este realizó mediante una exposición oral de su contenido, y luego respondió satisfactoriamente a las preguntas que les fueron formuladas por el Jurado, todo ello conforme a lo dispuesto en la Ley de Universidades y demás normativas vigentes de la Universidad Central de Venezuela. Finalizada la defensa pública del Trabajo Especial de Grado, el jurado decidió aprobarlo. En fe de lo cual se levanta la presente acta, en Caracas el 29 de Mayo de 2011, dejándose también constancia de que actuó como Coordinador del Jurado el Profesor Tutor Robinson Rivas. ______________________ Prof. Robinson Rivas (Tutor) _____________________________ ______________________________ Prof. Rhadames Carmona Prof. Jorge Manrique (Jurado Principal) (Jurado Principal) 8 9 10 Índice General Capitulo 1 - Planteamiento del problema ........................................................... 18 1.1 Objetivo General ...........................................................................................................19 1.2 Objetivos Específicos .....................................................................................................19 1.3 Delimitación del problema ............................................................................................19 Capitulo 2 - Visión Por Computador .................................................................... 20 2.1 Imagen Digital ..............................................................................................................20 2.2 Procesamiento Digital de Imágenes .............................................................................22 2.2.1 Procesamiento de bajo nivel................................................................................................. 23 2.2.2 Procesamiento de nivel medio ............................................................................................. 23 2.2.3 Procesamiento de alto nivel ................................................................................................. 23 2.5 Dispositivos de Captura ................................................................................................24 2.5.1 Cámara Digital ...................................................................................................................... 24 2.5.2 Webcams ............................................................................................................................. 25 2.6 La Luz.............................................................................................................................26 2.6.1 Propiedades ......................................................................................................................... 28 2.6.1.1 Interferencia .................................................................................................................. 29 2.6.1.2 Absorción ...................................................................................................................... 29 2.6.1.3 Refracción ..................................................................................................................... 30 2.6.1.4 Reflexión ....................................................................................................................... 31 2.6.2 Espectro Electromagnético ................................................................................................... 31 2.7 Luz Infrarroja ................................................................................................................32 2.7.1 Longitudes de onda .............................................................................................................. 33 2.7.1.1 Infrarrojo cercano .......................................................................................................... 33 2.7.1.2 Infrarrojo medio ............................................................................................................ 33 11 2.7.1.3 Infrarrojo lejano ............................................................................................................ 33 2.8.2 Aplicaciones ......................................................................................................................... 34 2.8.2.1 Visión Nocturna ............................................................................................................. 34 2.8.2.2 Imágenes Termales ........................................................................................................ 35 2.8.2.3 Comunicación ................................................................................................................ 35 2.8.2.5 Astronomía .................................................................................................................... 37 Capitulo 3 - Tecnologías Multitouch .................................................................... 38 3.1 Antecedentes .................................................................................................................38 3.2 Dispositivos multitouch actuales ..................................................................................39 3.2.2 Microsoft Surface ................................................................................................................. 40 3.2.3 PQ Labs iTable ...................................................................................................................... 44 3.2.4 DOC-MTS multitouch technology ......................................................................................... 45 3.2.5 SMART Table ........................................................................................................................ 46 3.3 Técnicas empleadas para dispositivos multitouch .......................................................47 3.3.1 FTIR (Frustrated Total Internal Reflection) [22] ..................................................................... 47 3.3.2 DI (Diffused Illumination) ..................................................................................................... 50 3.3.3 LLP (Laser Light Plane) .......................................................................................................... 52 3.3.4 DSI (Diffused Surface Illumination) ....................................................................................... 53 3.4 Desarrollo de software multitouch ...............................................................................54 3.4.1 Protocolo TUIO ..................................................................................................................... 54 3.4.2 ReacTIVision ......................................................................................................................... 56 3.4.3 TouchLib .............................................................................................................................. 57 3.4.4 Comunity Core Vision ........................................................................................................... 58 Capitulo 4 - Diseño y desarrollo de la solución propuesta ............................. 62 4.1 Plataforma de Hardware ..............................................................................................62 4.1.1 Diseño del prototipo ............................................................................................................ 62 4.1.2 Materiales ............................................................................................................................ 65 4.1.3 Proceso de Elaboración ........................................................................................................ 66 4.2 Plataforma de Software ................................................................................................70 4.2.1 Librerías de desarrollo .......................................................................................................... 70 12 4.2.2 Lenguaje de programación ................................................................................................... 71 Capitulo 5 - Diseño del software de demostración ........................................... 74 5.1 Propósito de la aplicación ..............................................................................................74 5.2 Detalles de Implementación .........................................................................................74 5.1.1 Agujero Negro ...................................................................................................................... 76 4.1.2 Sistema Solar ........................................................................................................................ 78 4.1.3 Fases Lunares ....................................................................................................................... 80 Capitulo 6 - Pruebas y resultados ......................................................................... 82 6.1 Pruebas a nivel de hardware ........................................................................................82 6.1.1 Pantallas de proyección ........................................................................................................ 82 6.1.2 Filtros infrarrojos .................................................................................................................. 83 6.1.3 Desempeño de webcams ...................................................................................................... 83 6.2 Pruebas a nivel de software ..........................................................................................84 6.2.1 Proyectos código abierto para desarrollo de aplicaciones multitouch Multitouch ................. 84 Conclusiones ............................................................................................................. 86 Referencias ................................................................................................................ 88 13 Índice de Figuras Figura 2.1 - Convención de coordenadas para una imagen digital 21 Figura 2.2 - Un sensor de una cámara digital 24 Figura 2.3 - Modelos de webcams 25 Figura 2.4 - Distintos enfoques de comportamiento físico de la luz 27 Figura 2.5 - Sombras formadas por una fuente de luz puntual y una amplia 27 Figura 2.6 - (a) Interferencia Constructiva, (b) Interferencia Destructiva 29 Figura 2.7 - Fenómeno de la absorción 29 Figura 2.8 - Fenómeno de la Refracción 30 Figura 2.9 - Representación gráfica del espectro electromagnético 31 Figura 2.10 - Representación gráfica del espectro electromagnético 32 Figura 2.11 - Dispositivo de visión nocturna y una imagen de captura 34 Figura 2.12 - Dispositivo de visión nocturna y una imagen de captura 35 Figura 2.13 - (a) Un LED infrarrojo | (b) Conexión infrarroja entre dispositivos 36 Figura 2.14 - Imágenes termales satelitales para la meteorología. 36 Figura 2.15 - Un telescopio infrarrojo y una imagen de captura de un cuerpo celeste 37 Figura 3.1 - Esquema de un escritorio Memex 39 Figura 3.2 - El Surface de Microsoft 40 Figura 3.3 - Interacción directa con la superficie de la mesa 41 Figura 3.4 - Soporte de interacción multi-usuario 42 Figura 3.5 - Reconocimiento de gestos multitouch 42 Figura 3.6 - Interoperabilidad con dispositivos móviles 43 Figura 3.7 - El iTable de la compañía PQ Labs 44 Figura 3.8 - La mesa interactiva de la compañía DOC-MTS 46 Figura 3.9 - La mesa interactiva de la compañía SMART 46 Figura 3.10 - Esquema del funcionamiento de un dispositivo FTIR 48 Figura 3.11 - Esquema del funcionamiento de un dispositivo DI 51 Figura 3.12 - Esquema del funcionamiento de un dispositivo LLP 52 Figura 3.13 - Esquema del funcionamiento de un dispositivo DSI 53 Figura 3.14 - Configuración de la cámara usando Touchlib 57 Figura 3.15 - Configuración de la cámara usando CCV 58 Figura 4.1 - Esquema del funcionamiento de un dispositivo DSI 63 Figura 4.2 - Esquema del funcionamiento de un dispositivo DSI 64 Figura 4.3 - Marco externo que unifica el marco IR, el acrílico y el vidrio esmerilado 66 14 Figura 4.4 - Vista superior e inferior de la superficie del usuario 67 Figura 4.5 - Vista de las tablas ensamblables de soporte del tope de la mesa 67 Figura 4.6 - Vista del interior y exterior de las tablas de soporte de la mesa 68 Figura 4.7 - Vista de la tabla de soporte de la webcam y el espejo 69 Figura 4.8 - Esquema del funcionamiento de un dispositivo DSI 70 Figura 4.9 - Esquema del funcionamiento para diversos lenguajes de programación 71 Figura 5.1 - Vista superior e inferior de la superficie del usuario 74 Figura 5.2 - Vista del programa sin la interacción el usuario 75 Figura 5.3 - Vista del programa con la interacción con el usuario 76 Figura 5.4 - Vista del programa sin la interacción el usuario 77 Figura 5.5 - Vista del programa con la interacción con el usuario 78 Figura 5.6 - Vista del programa sin la interacción el usuario 79 Figura 5.7 - Vista del programa con la interacción con el usuario 80 Figura 6.1 - Elementos candidatos para filtros infrarrojos 83 Figura 6.2 - Webcams que fueron evaluadas para el rendimiento de la mesa 84 15 16 Introducción Mientras que los dispositivos mono-táctiles resultan comunes y conocidos en diversos países, todavía resulta complejo construir dispositivos que puedan registrar múltiples puntos de contacto simultáneamente. Tales dispositivos proveen la comodidad de la interacción de múltiples usuarios simultáneamente, lo que resulta especialmente útil para sistemas de grandes pantallas-compartidas como las paredes interactivas y mesas interactivas. Las primeras investigaciones, aún escasas debido al poco alcance de interactuar con estos dispositivos, revelan gran potencial para aplicaciones novedosas bajo este tipo de interacción. El principal problema de estos dispositivos multitouch es el alto costo asociado, que imposibilita la masificación de estos sistemas para cualquier usuario e institución. En este trabajo se explica el diseño y elaboración de un dispositivo multitouch de bajo costo, cubriendo la explicación tanto en aspectos de hardware como de software. En cada capítulo se explicará en detalle cada elemento que forma parte del sistema. En el primer capítulo se explica el planteamiento del problema, los objetivos generales y específicos que se pretenden alcanzar en este trabajo de investigación, y el alcance o limite que define hasta donde se pretende llegar con este trabajo. En el segundo capítulo se refiere a la visión por computador, donde se explican los fundamentos de una imagen digital, el procesamiento de imágenes digitales, y una breve sección acerca de la luz infrarroja, y sus aplicaciones. El tercer capítulo contiene información referente a los dispositivos multitouch, explicando sus antecedentes, productos comerciales en el mercado, y por último las diversas 17 técnicas empleadas para la elaboración de estos dispositivos. En cada técnica, se puede apreciar la relación de los capítulos anteriores, observando el papel que juega cada elemento en el sistema, como lo es la luz infrarroja, con los dispositivos de captura y el procesamiento digital de las imágenes capturadas. En el capítulo 4 se muestra el diseño y desarrollo de la solución propuesta, donde se explican las pautas realizadas para la elaboración de la mesa interactiva tanto a nivel de hardware como software. Para el capitulo 5 se explica la implementación del software multitouch, apoyado por una librería que maneja el procesamiento de imágenes capturadas por una webcam infrarroja. En el capítulo 5 se explican las pruebas realizadas para calibrar y mejorar el desempeño del dispositivo. Por último, la conclusiones, explicando los objetivos alcanzados, mencionados en el capitulo 1. 1 Planteamiento del problema En la última década, los dispositivos táctiles se han popularizado a nivel mundial, y se ha generado una gran competencia en el mercado de la masificación de tablas y teléfonos inteligentes que proveen este novedoso medio de interacción humano-maquina. Sin embargo, los grandes dispositivos táctiles, como las mesas interactivas aún resultan muy costosos para ser adquiridas por parte de cualquier usuario, limitando el alcance de adquisición de estos dispositivos a diversas instituciones que les interesa sacar provecho. A pesar que han surgido diversos proyectos e instituciones que presentan estos dispositivos más económicos, estos presentan ciertas desventajas, como la naturaleza del software que no es multiplataforma, la dependencia de instrumentos especiales como un lápiz infrarrojo, que en ocasiones resultan difíciles de conseguir. Por esta razón, se propone la construcción de una mesa interactiva al mínimo costo, con la finalidad de interactuar de primera mano con aplicaciones que hacen uso de estos dispositivos. Se presenta con la finalidad de proveer una herramienta para desarrollo de aplicaciones táctiles, e incluso como un instrumento de educación para todas las edades. 19 1.1 Objetivo General Diseñar una mesa interactiva con tecnología “multitouch” para el manejo del computador, usando dispositivos de bajo costo 1.2 Objetivos Específicos Los objetivos a alcanzar con esta propuesta son: • Evaluar las diferentes técnicas de elaboración de mesas interactivas que involucran visión por computador. • Revisar diversas librerías código abierto para el procesamiento de imágenes, orientadas al desarrollo de software multitouch. • Desarrollar un software dedicado al manejo del sistema operativo MS Windows usando las capacidades de la mesa interactiva. • Implementar un software interactivo que explote la capacidad multitouch que provee la mesa interactiva. • Elaborar un prototipo funcional que pueda ser utilizado en un ámbito educativo. 1.3 Delimitación del problema El alcance para este trabajo de tesis es el diseño y construcción de la mesa con los componentes necesario para su funcionamiento, y por último, desarrollar una aplicación que implante la tecnología multitouch para el uso de la mesa. 20 2 Visión Por Computador La visión por computador tiene como finalidad, extraer propiedades del mundo real a partir de un conjunto de imágenes. Esta ciencia tiene innumerables aplicaciones, como el desplazamiento de un vehículo autónomo, la evaluación de la calidad de una pieza de cerámica, entre muchos otros. Este capítulo explica los procesos que se involucran en la visión por computador, explicando a priori los conceptos básicos de una imagen digital, el concepto de un histograma, profundidad de bits, para luego adentrarse a definiciones mas técnicas referentes al procesamiento digital de imágenes, junto con un conjunto de operaciones puntuales que se realizan sobre las imágenes, como la inversión de colores, umbralización, etc.; y por último, la explicación acerca de operadores utilizados en la actualidad para la detección de bordes en una imagen digital. 2.1 Imagen Digital Una imagen digital es una función discreta f(x,y) en coordenadas espaciales y en brillo. Una imagen digital puede considerarse como una matriz cuyos elementos de las filas y columnas indican un punto de la imagen y el valor correspondiente del elemento de la matriz que identifica el nivel de intensidad de luz en ese punto. Los elementos de tal arreglo digital son llamados elementos de imagen, elementos de pintura, pixels o pels (estos dos últimos son abreviaturas del ingles picture elements). [1] 21 En la figura 2.1 se observa una imagen digital, junto con la convención de coordenadas; importante tener en cuenta esta convención al momento de realizar alguna operación sobre la imagen. Figura 2.1 - Convención de coordenadas para una imagen digital En la actualidad, se trabaja con imágenes digitales obtenidas de dispositivos de captura como fotografías a color de personas, paisajes, escaneos en escala de grises de documentos impresos, planos arquitectónicos, documentos de fax, imágenes médicas como rayos x o ultrasonidos, etc. [1] Independientemente de la naturaleza de donde proviene la imagen digital, todas, absolutamente todas las imágenes se representan como una matriz de pixels. Sin embargo, todas estas imágenes digitales se pueden presentar en distintos formatos que pueden ser interpretados por el computador. También cada imagen puede variar en cuanto a resolución, dimensiones de la misma, profundidad de color, espacio que ocupa en memoria, etc. 2 Visión Por Computador 22 2.2 Procesamiento Digital de Imágenes El procesamiento de una imagen digital se refiere al conjunto de técnicas que se aplican a las imágenes digitales con el objetivo de mejorar la calidad o facilitar la búsqueda de información. Cabe notar que una imagen digital está compuesta por un número finito de elementos, donde cada uno tiene una localidad y valor particular. Estos elementos son llamados "elementos de imagen", o "pixels". Pixel es el término más usado para denotar los elementos de una imagen digital. [2] La visión es el sentido más avanzado del ser humano, por ende, las imágenes juegan el papel más importante en la percepción humana. Sin embargo, a diferencia de los seres humanos, que están limitados por la banda visual del espectro electromagnético, dispositivos que capturan imágenes trabajan con casi todo el espectro, capturando desde rayos gamma a ondas de radio. Pueden operar con imágenes generadas por fuentes que humanos no están acostumbrados a asociar con imágenes. Estos incluyen ultrasonido, microscopio a nivel de electrones, e imágenes generadas por computadora. Por ende, el procesado de imágenes digitales engloba una amplia variedad de campos y aplicaciones. No existe ningún acuerdo entre diversos autores para definir los límites entre el procesamiento de imágenes y relación con otras aéreas, tales como el análisis de imágenes o la visión por computadora. Algunas veces surge la distinción definiendo el procesamiento de imágenes como una disciplina el cual tanto la entrada como la salida son imágenes. De igual modo, esto puede estar generando una barrera artificial a este campo. Por ejemplo, si se considera esa definición, hasta la tarea más trivial como calcular el nivel de gris promedio en una imagen, (el cual el resultado es un solo número) no podría ser considerado como una operación de procesamiento de imagen. Por otro lado, existen campos tales como la visión por computadora, que tienen como objetivo fundamental en usar la computadora para emular la visión humana, donde incluye aprendizaje y se tomen acciones basados en las imágenes de entrada. Esta área relacionada a la emulación de la inteligencia humana es conocida como Inteligencia Artificial [3]. 2.2 Procesamiento Digital de Imágenes 23 El procesamiento digital de imágenes considera tres distintos niveles de cómputo, ligados al costo y carga de trabajo que conlleva a operar sobre una imagen: 2.2.1 Procesamiento de bajo nivel Involucra operaciones primitivas como pre-procesamiento de una imagen para reducir ruido, mejora de contraste, brillo, etc. Está caracterizado por el hecho que tanto la entrada como la salida son imágenes. 2.2.2 Procesamiento de nivel medio Involucra tareas como la segmentación (subdividir una imagen en regiones u objetos), descripción de esos objetos para reducirlos a una forma adecuada para procesarlas en la computadora, y clasificación (reconocimiento) de objetos individuales. Es caracterizado por el hecho que la entrada son generalmente imágenes, pero la salida son atributos extraídos de las imágenes, como bordes, siluetas y la identidad de objetos individuales. 2.2.3 Procesamiento de alto nivel Involucra no solo reconocer objetos en imágenes, sino adicionalmente analizarlas, y realizar funciones cognitivas normalmente asociadas con la visión. Desde las últimas décadas, el procesamiento digital de imágenes y la computación grafica se han tratado como dos áreas distintas. El conocimiento en ambas áreas ha ido en incremento, con capacidad de resolver problemas más complejos, aunque diferentes. La computación grafica está orientada a obtener imágenes foto-realistas generadas a computadora, mientras que el procesamiento digital de imágenes se enfoca en reconstruir, reconfigurar o modificar una imagen obtenida por una cámara. Se podría decir que el procesamiento de imagen es el procedimiento inverso de la computación grafica. Sin embargo, para trabajar en estas dos áreas, básicamente se debe tener presente el mismo conocimiento, como la interacción de la iluminación con diversos objetos, como una escena de tres dimensiones puede ser proyectado sobre un plano, etc. 2 Visión Por Computador 24 2.3 Dispositivos de Captura Se llaman dispositivos de captura a todos aquellos que permiten de una u otra forma introducir información en la computadora. Este documento se centra en dispositivos de capturas de imágenes, los cuales están compuestos por sensores ópticos que captan la intensidad de luz que le llega y la convierten en números, y por ultimo generar un archivo de una imagen digital. 2.3.1 Cámara Digital Es un dispositivo de captura de imágenes digitales mediante un sensor electrónico en lugar de una película fotosensible. El sistema óptico funciona de la misma manera que las cámaras de película [4]. Los sensores de imagen en los dispositivos electrónicos están compuestos por una matriz de electrodos, donde estos tienen la capacidad de medir la intensidad de luz que le llega a cada celda, para luego ser cuantificados y procesados por la cámara, generando un mapa de bits de la imagen, donde finalmente, se genera la imagen digital, y se almacena en la memoria del dispositivo [5]. En la Figura 2.2 se muestra un sensor de una cámara digital. Figura 2.2 – Un sensor de imagen de una cámara digital 2.3 Dispositivos de Captura 25 El tipo de sensor de imagen utilizado en las cámaras digitales son los dispositivos de carga acoplada (mejor conocido como CCD), y los sensores basados en la tecnología de metal oxido semiconductor complementado (o CMOS) [6]. 2.3.2 Webcams Una cámara web, o mejor conocidas como webcams, es en esencia una cámara que se encuentra conectada a un computador, ya sea por conexión directa o inalámbrica, y esta captura una serie de imágenes para ser desplegarlas en la pantalla. Son muy utilizadas para generar imágenes en tiempo real, y para una gran cantidad de aplicaciones, generalmente para realizar video llamadas [7]. Entre los diversos modelos y marcas que existen en el mercado, se diferencian principalmente por la resolución de la imagen de captura, la calidad de imagen, y sobre todo por frecuencia de capturas. Para una buena transmisión de video, se necesitan al menos 15 capturas por segundo (FPS), aunque lo ideal es 30 [8]. Además de la funcionalidad para realizar video conferencias para la cual fueron diseñadas, muchas ofrecen la posibilidad de tomar fotografías digitales, e incluso otras permiten que sean desconectadas del computador, y el usuario pueda tomar fotografías donde quiera como si se tratara de una cámara digital. En la Figura 2.3, la figura izquierda muestra una simple webcam, mientras que la figura de la derecha se encuentra una webcam con funcionalidad de cámara digital. Figura 2.3 Modelos de webcams 2 Visión Por Computador 26 2.4 La Luz La naturaleza de la luz ha sido estudiada desde muchos años por muchos científicos tan notables como Newton y Max Plank. La naturaleza de la luz ha sido interpretada de diversas formas: • Está compuesta por corpúsculos que viajaban por el espacio en línea recta (corpuscular – Newton); • Como ondas similares a las del sonido que requerían un medio para transportarse (el Éter) (Ondulatoria – Huygens, Young, Fresnel); y • Finalmente Broglie en 1924 unifica la teoría electromagnética y la de los ‘cuantos’ (que provienen de la ondulatoria y crepuscular) demostrando la doble naturaleza de la luz. Si la luz es una forma de energía el cual puede ser transferido de un lugar a otro, es razonable describirlo análogamente como cualquier otro método para transportar energía. El movimiento de cuerpos involucra energía cinética. Esta energía acompaña el cuerpo en su movimiento y por ende transporta energía de un lugar a otro. Otra forma mecánica para transferir energía es por la propagación de ondas. Generalmente de esta forma no es acompañada por ningún movimiento de cuerpos en el medio. [9] Actualmente, la luz se describe en términos de partículas y ondas, que son dos enfoques ligeramente diferenciables. Si la luz se considera como partículas, su comportamiento se regirá por las leyes de energía cinética, como una bala de un rifle (Figura 2.4.a), que viaja de una región definida a otra, y no se propaga durante su desplazamiento. Sin embargo, si la luz se considera en términos de onda, la energía se propaga rápidamente hacia todas las direcciones (Figura 2.4.b). 2.4 La Luz 27 Figura 2.4 – Distintos enfoques de comportamiento físico de la luz Rayos de luz Para el siglo XVII, se estudiaba que la propagación de luz podía ser representada como grupos de rayos. Si una pequeña fuente de luz es interrumpida por un obstáculo opaco, se forma una sombra del objeto muy definida. En cambio, si la fuente de luz no es tan pequeña, la sombra formada va perdiendo definición. Se forma una sombra oscura conocido como la ‘umbra’ y otra sombra difusa denominado como la ‘penumbra’. Figura 2.5 - Sombras formadas por una fuente de luz puntual y una amplia 2 Visión Por Computador 28 Estas observaciones son ejemplos de una gran cantidad de experimentos los cuales describen y demuestran la premisa que la luz viaja de una fuente en forma de rayos en línea recta. En la vista (b) de la Figura 2.5, el cambio de iluminación el cual ocurre en la penumbra es debido al hecho que un punto en esta región recibe luz solo de una porción de la fuente. No hay evidencia de energía que se propague fuera de la región definida por los rayos. Un rayo puede estar definido como una trayectoria recta en la cual la energía luminosa viaja del emisor al receptor. El tráfico en este camino puede ser bloqueado si el rayo es interrumpido por un obstáculo opaco en cualquier punto del rayo. Si todos los rayos emitidos por una fuente de luz son interrumpidos por obstáculos opacos, ninguna luz puede alcanzar al receptor desde el emisor. Nótese que se están involucrando dos ideas: la primera, es la luz se propaga en rayos; y segundo, estos rayos viajan en línea recta. El movimiento de una pequeña partícula traza, inevitablemente, una línea recta. En la mayor parte de las longitudes de onda, sin embargo, la información transportada por la radiación electromagnética no es detectada por los sentidos humanos. Las fuentes naturales producen radiación electromagnética a través del espectro, y nuestra tecnología también puede detectar un amplio rango de longitudes de onda. Por la fibra óptica se transmite luz que, aunque no es adecuada para la visión directa, puede transportar datos que luego son traducidos en sonido o imagen. [10] 2.4.1 Propiedades A continuación se dará una explicación acerca de las propiedades físicas, o propiedades más resaltantes de la luz. Es importante tener presente estas propiedades al momento realizar un proyecto que involucra visión por computador, y entender el comportamiento de la luz en el mismo. 2.4 La Luz 29 2.4.1.1 Interferencia Es un fenómeno que ocurre cuando dos o más rayos de luz se solapan, y estos al mezclarse o forman un rayo de luz común más intenso (Interferencia constructiva), o cada rayo se interfiere el uno al otro, y en consecuencia la intensidad de cada rayo se atenúa (Interferencia destructiva). (Ver la Figura 2.6) Figura 2.6 – (a) Interferencia Constructiva, (b) Interferencia Destructiva 2.4.1.2 Absorción Cuando la luz entra en un material transparente, una porción de energía es disipada en energía calórica. Cuando esta absorción de energía ocurre de manera selectiva para diferentes longitudes de onda, la luz que a través del material, mostrará sólo aquellas longitudes de onda que no fueron absorbidas. [12] (Ver la Figura 2.7) Figura 2.7 – Fenómeno de la Absorción 2 Visión Por Computador 30 2.4.1.3 Refracción El concepto que las ondas de luz sean refractadas puede ser fácilmente demostrado colocando un simple lápiz en un vaso con agua por la mitad. Es posible ver el aparente cambio o ruptura del lápiz al entrar al agua. [11] Se ha determinado que la dirección de una onda electromagnética varía a medida que este cambia de medio en el que se encuentra. El ángulo de incidencia y el ángulo de refracción están vinculados con la Ley de Snell, que dicta la siguiente fórmula: �� ∗ ������� �� ∗ ����� � Donde n1 y n2 son los índices de refracción para cada medio, y los θ1 y θ2 son los ángulos de refracción para cada medio. En la Figura 2.6 muestra una representación grafica de luz refractada al cambiar del medio aire a agua. Figura 2.8 – Fenómeno de la Refracción 2.4 La Luz 31 2.4.1.4 Reflexión Esta propiedad es un fenómeno que puede observarse todos los días. Los espejos son dispositivos que reflejan en su totalidad todo rayo de luz que choque con su superficie. Cuando ocurre la reflexión, se puede observar que el ángulo de incidencia es igual al ángulo de reflexión para una superficie lisa y perfectamente pulida. Sin embargo, puede haber normalmente perdida de intensidad, ya sea por absorción, o que cierta porción de la señal viaje a través de la superficie. También pueden ocurrir otros fenómenos adicionales como la refracción, difracción, polarización, etc. [11] Figura 2.9 – Fenómeno de la Reflexión 2.4.2 Espectro Electromagnético Se conoce como el espectro electromagnético al rango de todas las radiaciones electromagnéticas conocidas. El espectro de un objeto es la distribución característica de la radiación electromagnética de ese objeto. El espectro electromagnético se extiende desde las bajas frecuencias usadas para la radio moderna (extremo de la longitud de onda larga) hasta los rayos gamma (extremo de la longitud de onda corta), que cubren longitudes de onda de entre 2 Visión Por Computador 32 miles de kilómetros y la fracción del tamaño de un átomo [13]. En la Figura 2.10 se muestra un diagrama del espectro con su frecuencia. Se piensa que el límite de la longitud de onda corta está en las cercanías de la longitud Planck, mientras que el límite de la longitud de onda larga es el tamaño del universo mismo, aunque en principio el espectro sea infinito y continuo. Figura 2.10 - Representación gráfica del espectro electromagnético 2.5 Luz Infrarroja La luz infrarroja (o radiación infrarroja), es un espectro de luz invisible al ojo humano, y se encuentra entre la luz visible y las microondas. Las ondas infrarrojas tienen longitudes de onda más largas que la luz visible, pero más cortas que las microondas, y tienen frecuencias más bajas que la luz visible, pero más altas que las microondas [14]. La radiación infrarroja puede ser utilizada para medir el calor irradiado por un objeto. Esta es la radiación producida por el movimiento de los átomos y moléculas en un objeto. A mayor temperatura, mayor será el movimiento de los átomos y 2.5 Luz Infrarroja 33 moléculas, y por ende, se produce mayor radiación infrarroja. Cualquier objeto el cual tenga una temperatura por encima del 0 absoluto, es decir, -273.15 grados celcius, irradia luz infrarroja. Cero absoluto es la temperatura a la cual todo movimiento atómico y molecular cesa. Incluso objetos que pueden parecer que son muy fríos, como un cubo de hielo, emite radiación infrarroja. Hay casos que aquellos objetos calientes pero no lo suficiente como para irradiar luz visible, emitirá radiación infrarroja. Por ejemplo, un carbón caliente puede que no esté al punto de encontrarse al rojo vivo, pero si emitirá luz infrarroja el cual percibimos como la energía calórica. 2.5.1 Longitudes de onda La parte infrarroja del espectro electromagnético cubre el rango desde aproximadamente los 300 GHz (1 nm) hasta los 400 THz (750 nm). Puede ser dividida en tres partes: 2.5.1.1 Infrarrojo cercano Desde 120 a 400 THz (2500 a 750 nm). Los procesos físicos que son relevantes para este rango son similares a los de la luz visible. 2.5.1.2 Infrarrojo medio Desde 30 a 120 THz (10 a 2.5 µm). Los objetos calientes (radiadores de cuerpo negro) pueden irradiar fuertemente en este rango. Se absorbe por vibraciones moleculares, es decir, cuando los diferentes átomos en una molécula vibran alrededor de sus posiciones de equilibrio. Este rango es llamado, a veces, región de huella digital, ya que el espectro de absorción del infrarrojo medio de cada compuesto es muy específico. 2.5.1.3 Infrarrojo lejano Desde 300 GHz (1 mm) hasta 30 THz (10 µm). La parte inferior de este rango también puede llamarse microondas. Esta radiación es absorbida por los llamados 2 Visión Por Computador 34 modos rotatorios en las moléculas en fase gaseosa, mediante movimientos moleculares en los líquidos, y mediante fotones en los sólidos. El agua en la atmósfera de la Tierra absorbe tan fuertemente esta radiación que confiere a la atmósfera efectividad opaca. Sin embargo, hay ciertos rangos de longitudes de onda ("ventanas") dentro del rango opacado que permiten la transmisión parcial, y pueden ser usados en astronomía. 2.5.2 Aplicaciones La gran ventaja de este espectro es su similitud a la luz visible, con la gran diferencia que no se puede percibir por el ojo humano. Esto conlleva a la invención de múltiples dispositivos que utilizan este espectro para diversas aplicaciones. A continuación se mencionan las más resaltantes. 2.5.2.1 Visión Nocturna El infrarrojo es utilizado para dispositivos de visión nocturna cuando hay luz visible insuficiente para ver. Estos dispositivos funcionan realizando un proceso de conversión de fotones de luz ambientales en electrones los cuales son amplificados por un proceso electroquímico y por ultimo convertirlos de nuevo en luz visible. Fuentes de luz infrarroja pueden ser utilizadas para aumentar la luz ambiental disponible para ser convertidos con los dispositivos de visión nocturna [15]. Figura 2.11 - Dispositivo de visión nocturna y una imagen de captura 2.5 Luz Infrarroja 35 2.5.2.2 Imágenes Termales Los dispositivos que despliegan imágenes termales tienen la capacidad de mostrar la magnitud de radiación infrarroja (el cual corresponde a la cantidad de calor) emitida del cuerpo de cualquier objeto. Estas aplicación se utilizan para diversas areas, desde la medicina, hasta jornadas de búsqueda y rescate, etc [14]. Figura 2.12 - Dispositivo de imágenes termales y una imagen de captura 2.5.2.3 Comunicación Antes de la aparición del Bluetooth, el infrarrojo era el medio inalámbrico predominante para transmitir datos entre dos dispositivos móviles o entre un dispositivo móvil con una computadora. Este método requiere que ambos dispositivos se encuentren a unos cuantos centímetros de distancia, una limitante muy grave que lo llevó al desuso [14]. Esto se puede observar en la Figura 2.13. 2 Visión Por Computador 36 2.5.2.4 Meteorología Ciertos Satélites climáticos capturan imágenes termales o infrarrojas que son procesadas para determinar la altura y comportamiento de las nubes, para calcular la temperatura tanto en la litosfera como la hidrosfera. Al analizar estas imágenes, se pueden calcular y hacer proyecciones del comportamiento meteorológico en una zona, para predecir desde ligeras precipitaciones, hasta grandes huracanes. En la Figura 2.14 se muestran unas capturas climáticas. Figura 2.14 - Imágenes termales satelitales para la meteorología. (a) (b) Figura 2.13 - (a) Un LED infrarrojo | (b) Conexión infrarroja entre dispositivos 2.5 Luz Infrarroja 37 2.5.2.5 Astronomía Los telescopios infrarrojos son muy similares a los telescopios comunes, solo que estos utilizan ciertos espejos, lentes y filtros especiales que permiten captar un mayor rango de longitudes de onda. Estos telescopios especiales son usados para detectar la radiación infrarroja emitida de cuerpos celestes, galaxias distantes, estrellas lejanas, entre otros; e investigar y desarrollar nuevos descubrimientos en este campo de la ciencia [14]. Figura 2.15 - Un telescopio infrarrojo y una imagen de captura de un cuerpo celeste Para efectos de la elaboración de mesas interactivas, se trabaja con este espectro por poseer una longitud de onda que lo hace invisible al ojo humano, por lo que no interfiere con los proyectores u otros dispositivos que emitan luz- En el capítulo siguiente se mencionan diversas técnicas existentes para la construcción de estos dispositivos usando visión por computador. 2 Visión Por Computador 3 Tecnologías Multitouch A continuación, este capítulo explica los antecedentes de la tecnología de dispositivos multitouch y los productos actuales en el mercado. Finalmente, se explican diversas técnicas que involucran captura de imágenes con dispositivos de captura, como una webcam, iluminación infrarroja, y procesamiento de imágenes. 3.1 Antecedentes El auge de las computadoras personales en la década de los 80 les proporcionó poder de cómputo a usuarios individuales en sus escritorios en lugar de un mainframe central. Los diseñadores de interfaces estructuraron y simplificaron la interacción de los usuarios con los datos e información almacenados en sus computadores escritorio. Ellos convirtieron el escritorio físico en una metáfora para las interfaces gráficas de usuario de despliegue en la pantalla del computador. De esta forma, el escritorio físico como tal fue adaptado en la manera que los computadores y tecnologías de información fueron integrados en la vida cotidiana de las personas de la actualidad. La idea que estos escritorios digitales juegan un papel central cuando se refiere a evaluar, organizar y crear información que no es basado en papel, data desde la década de los 40. Esto fue cuando Vannevar Bush visualizo Memex, un dispositivo electromecánico para almacenar y evaluar información (Véase la Figura 3.1). 39 Mientras que la tecnología cambia de forma drástica, su concepto fue retomado por Pierre Wellner cuando presentó Digital Desk (escritorio digital) en el año 1993. Con su trabajo, la interfaz de usuario del computador esencialmente reflejaba un escritorio, o como Wellner menciono: Una metáfora de escritorio es requerida porque es, literalmente, un escritorio. Figura 3.1 - Esquema de un escritorio Memex El término “tabletop” se encuentra entre los términos tradicionales de computadores como desktop y laptop, haciendo énfasis en la ubicación de la pantalla del computador. Los tabletops se distinguen por ser apropiados para trabajos grupales y reuniones, por el hecho que la pantalla horizontal es precisamente la interfaz donde los usuarios interactúan directamente con la información digital sin la manipulación de un teclado ni un ratón. 3.2 Dispositivos multitouch actuales En el transcurso de los años, con el avance de la tecnología, grandes compañías de informática han desarrollado sus propios productos comerciales. Se Mostrarán algunos a continuación: 3 Tecnología Multitouch 40 3.2.2 Microsoft Surface El Microsoft Surface (véase la Figura. 3.2) es una computadora multitouch de 30 pulgadas que responde ante gestos naturales de manipulación y objetos reales, contribuyendo a la manipulación de contenido digital de una manera muy simple e intuitiva. Con su amplia superficie horizontal, Surface ofrece un medio único donde personas se pueden reunir e intercambiar datos e información de una manera colaborativa y simultánea [17]. Figura 3.2 – El Surface de Microsoft Surface para Usuarios El Surface de Microsoft representa un cambio fundamental en la forma con que se maneja contenido digital. Dejando a un lado el mouse y teclado, Surface permite “tocar” contenido digital con las manos y manipular la información con diversos gestos y toques. Además puede detectar objetos colocados en su superficie, permitiendo al usuario tanto extraer como introducir archivos (documentos, archivos multimedia, etc.) a dispositivos como celulares o cámaras digitales. 3.2 Dispositivos Multitouch Actuales 41 Surface para Negocios Surface provee un potencial tremendo para mejorar la comunicación en reuniones de negocios, dando soporte en la manera que se divulga información y servicios a sus clientes. Su interfaz intuitiva y usable es fácil de usar de aprender y es totalmente compatible con plataformas de software más conocidos. Funciones principales de la Microsoft Surface [17] Las funcionalidades más resaltantes de la Surface son las siguientes: • Interacción directa. Los usuarios pueden tomar información digital con sus manos e interactuar con el contenido “en la pantalla” por toques y gestos, sin el uso del teclado ni mouse, como se aprecia en la Figura 3.3 Figura 3.3 – Interacción directa con la superficie de la mesa 3 Tecnología Multitouch 42 • Experiencia multi-usuario. La gran pantalla horizontal de 30 pulgadas da facilidad para que diversos usuarios puedan trabajar de manera colaborativa y simultánea en el mismo dispositivo, como se muestra en la Figura 3.4 Figura 3.4 – Soporte de interacción multi-usuario • Multi-touch. Surface responde a diversos puntos de contacto simultáneamente (Véase la Figura 3.5) – y no solo de un dedo, como en las típicas pantallas táctiles. Esto provee mayor usabilidad en las aplicaciones. Figura 3.5 – Reconocimiento de gestos multitouch 3.2 Dispositivos Multitouch Actuales 43 • Reconocimiento de objetos. Usuarios pueden colocar objetos físicos en la pantalla para disparar diferentes respuestas digitales de interacción – dando la posibilidad de intercambiar contenido de digital con un celular, cámara digital, etc. En la Figura 3.6 muestra esta novedosa funcionalidad que provee la Surface. Figura 3.6 – Interoperabilidad con dispositivos móviles Funcionamiento de la Microsoft Surface Surface utiliza cámaras e reconocimiento de imágenes en el espectro infrarrojo para reconocer diferentes tipos de objetos como dedos, objetos etiquetados y figuras. Esta entrada es procesada por la computadora y la respuesta de interacción es desplegada usando proyección trasera. El usuario puede manipular contenido e interactuar con la computadora entrando en contacto con la pantalla haciendo toques y realizando diferentes gestos con las manos, en vez de depender de un teclado y mouse. 3 Tecnología Multitouch 44 3.2.3 PQ Labs iTable El iTable, a diferencia de otros dispositivos con el prefijo ‘i’, no proviene de la Apple, sino de PQ Labs; es un fuerte competidor de la Microsoft Surface, el cual salió en el 2007, pero solo para uso comercial. Este dispositivo es una mesa multitouch, que posee una delgada capa de contacto encima de una pantalla LCD de 32 hasta 52 pulgadas. Al adquirir un iTable, se obtiene una lámina delgada enmarcada como una ventana, que esta va encima de la pantalla y que interactúa con la computadora a la cual este conectada. Esta valorizada para 2.500 dólares americanos, el cual es un precio un poco elevado para uso personal en casa, pero bastante accesible para negocios. Sin embargo, PQ Labs está planeando un dispositivo más económico para que esté al alcance de cualquier usuario. iTable es compatible con software tanto de Windows, como MacOS [18]. En la Figura 3.7 se muestra el dispositivo. Figura 3.7 – El iTable de la compañía PQ Labs 3.2 Dispositivos Multitouch Actuales 45 La interactividad del iTable es fluida, y podría atraer la atención de muchos usuarios de negocios. Siempre es una mejor opción demostrar ideas y planes de negocios en este dispositivo en reuniones, presentaciones y conferencias sin invertir mucho dinero en hardware muy costoso [19]. Especificaciones Técnicas • Tamaño de la pantalla: 32, 42, 46 y hasta 50 pulgadas • Resolución: 4096 x 4096 • Vida útil: más de 50.000 horas de uso • Tamaño de un objeto detectable: a partir de 3 mm x 3 mm • Material de contacto: vidrio temperado • Tiempo de respuesta: <10 ms (100 fps) • Temperatura del dispositivo: -15 hasta 60 grados celcius • Entornos de trabajo: exterior e interior 3.2.4 DOC-MTS Multitouch Technology Una compañía europea fundada en el año 1998, cuya función principal se centran sobre impresiones en cristal y cerámica, decidió crear su propio departamento sobre desarrollo de hardware y software en tecnología multitouch. Para el año 2005, salió la primera mesa interactiva, y para el año 2007 y 2008 lograron adquirir la patente de su tecnología para ser utilizada en diversas áreas. En la figura 3.8, muestra dos modelos de la mesa interactiva. Este dispositivo cuenta con una pantalla de 46 pulgadas, con una resolución de 1280x800, viene con sistema operativo Windows XP, Windows Vista o Windows 7. Posee una tarjeta de red inalámbrica. Cuenta con la facilidad de conectar un teclado y mouse inalámbrico, y la pantalla es capaz de detectar hasta 200 puntos de contacto simultáneamente [20]. 3 Tecnología Multitouch 46 Figura 3.8 – La mesa interactiva de la compañía DOC-MTS 3.2.5 SMART Table La compañía norteamericana SMART presenta una mesa interactiva al aula de clases. Ideal para trabajo colaborativos entre estudiantes para resolver diversas actividades como rompecabezas, operaciones aritméticas, etc. El funcionamiento de la mesa se asemeja a la Surface de la Microsoft, una computadora, proyector de corto alcance, y cámaras infrarrojas [21]. En la Figura 3.9 se muestra el dispositivo siendo utilizado por una maestra y dos alumnas simultáneamente. Figura 3.9 – La mesa interactiva de la compañía SMART 3.2 Dispositivos Multitouch Actuales 47 3.3 Técnicas empleadas para dispositivos multitouch A continuación, se mencionan las distintas técnicas empleadas en la realización de tabletops. Cada una posee sus ventajas y desventajas, ya sea a nivel de costo, tiempo de vida del dispositivo, la complejidad de elaboración, y sobre todo, el rendimiento y la usabilidad del dispositivo. 3.3.1 FTIR (Frustrated Total Internal Reflection) [23] Es el nombre utilizado por la comunidad multitouch para describir la metodología desarrollado por Jeff Han [22]. FTIR se refiere al fenómeno óptico el cual Han basó su trabajo. La reflexión total interna describe la condición presente en ciertos materiales cuando la luz viaja de un medio a otro con un índice de refracción mayor, donde el ángulo de incidencia es mayor que el ángulo específico. El ángulo específico al cual esto ocurre depende de los índices de refracción de ambos materiales, y esto se conoce como el rango crítico, el cual puede ser calculado matemáticamente usando la ley de Snell. Cuando esto sucede, no ocurre refracción en el material, y el rayo de luz es reflejada totalmente. El método de Han utiliza este efecto, inundando el medio interno de una lamina de acrílico con luz infrarroja, donde esta queda atrapada por el principio de la reflexión total interna. Cuando el usuario entra en contacto con la superficie del acrílico, los rayos de luz viajan fuera del acrílico hacia el material en contacto (piel usualmente), y la reflexión no es total a este punto. Esta luz “frustrada” se proyecta por la parte inferior de la lámina, y es capturada por una cámara infrarroja, capaz de captar estas “manchas”, para ser tratadas por un software de rastreo. En la Figura 3.10 se muestra un esquema de esta técnica. Este principio es muy útil para construir pantallas multitouch, ya que la luz que es “frustrada” por el usuario se escapa del acrílico en un área bien definida bajo el punto de contacto y es claramente visible para la cámara de captura. 3 Tecnología Multitouch 48 Figura 3.10 - Esquema del funcionamiento de un dispositivo FTIR Acrílico De acuerdo con la publicación científica “Low-Cost Multi-Touch Sensing through Frustrated Total Internal Reflection” de Jefferson Y. Han [31], es necesario usar acrílico para la pantalla. El grosor mínimo es de 6mm, sin embargo, para pantallas mas grandes se recomienda 1cm de grosor para evitar que la lámina se encorve. Antes de usar la lámina de acrílico para la construcción de la mesa multitouch, usualmente al cortar la lámina en las dimensiones deseadas, los bordes del mismo quedan opacas, dificultando el paso de luz dentro de la lámina. Por esto, es importante limar y por último, pulir todos los bordes de la lamina. Aislante Es requerido para ocultar toda luz infrarroja que se escape fuera de la lámina de acrílico. Se puede utilizar un marco de cualquier material (madera, metal, etc.) 3.3 Técnicas Empleadas para dispositivos Multitouch 49 Capa de Contacto En un montaje básico de un dispositivo FTIR, el desempeño depende gran parte en que tan humectados se encuentren los dedos del usuario. Dedos húmedos son ideales para el contacto con la superficie del acrílico. Para mejorar la superficie de contacto, se recomienda recubrir el acrílico con una capa de silicón o algún otro material que permita maximizar la proyección de la luz frustrada sobre la cámara. Esto también protegerá el acrílico de rayones y manchas. Superficie Adecuada Es una capa que recubre toda la superficie con el que el usuario interactúa en sistemas FTIR. Esta capa especial tiene que estar compuesta por un material cuyo índice de refracción es mayor a la del acrílico, y que además ambos materiales se acoplen cuando se les somete presión, y se desacoplen cuando la presión es liberada. Esta capa especial también se puede utilizar como pantalla de proyección. La finalidad de esta superficie es simplemente mejorar el contacto de la superficie con los dedos (particularmente mejora el deslizamiento de los dedos sobre el acrílico, para cuando se esté arrastrando objetos de un lugar a otro), y mejora la proyección de contacto para la cámara infrarroja. En la técnica FTIR, la luz infrarroja es emitida por los bordes de la lamina de acrílico, donde los rayos viajan en su interior (debido al fenómeno de reflexión interna total, que también ocurren en la fibra óptica); al momento que se toca la superficie del acrílico, los rayos que viajan en la lamina “chocan” con el objeto en contacto, iluminando todo la silueta del mismo. Actualmente, se sigue realizando experimentos para conseguir la superficie adecuada perfecta, donde se consiga una resolución de imagen clara y nítida, una superficie de contacto suave y lisa y genere puntos infrarrojos bien definidos para que sean captados con facilidad por parte de la cámara. 3 Tecnología Multitouch 50 3.3.2 DI (Diffused Illumination) Esta técnica se presenta de dos formas: iluminación difusa frontal e iluminación difusa trasera. Ambas técnicas se basan del mismo principio básico, el contraste en la imagen que se genera entre los dedos cuando entran en contacto con la superficie del dispositivo [23]. Iluminación Difusa Frontal La luz visible (usualmente la iluminación ambiental) es proyectado sobre la superficie superior del dispositivo. Un difusor es colocado por la parte superior o inferior de la superficie táctil. Cuando un objeto toca la superficie, una sombra es creada en la posición del objeto. La cámara capta e interpreta esta sombra generada. Iluminación Difusa Trasera Dependiendo del tamaño y configuración de la mesa, puede resultar un gran reto lograr una iluminación infrarroja distribuida de manera uniforme a lo largo de toda la superficie para este tipo de tabletop. Mientras ciertas áreas están bien iluminadas, y por ende, al tocar estas zonas, el sistema detecta fácilmente cuando el usuario interactúa con el dispositivo; hay zonas más oscuras, y el usuario debe realizar un esfuerzo adicional para interactuar con la mesa. Un primer intento para resolver estos problemas se sería mejorar el hardware, como localizar los iluminadores de la pantalla, modificar el material de la superficie con la que el usuario interactúa, la posición y la calidad de la cámara, etc. Sin embargo, si estos problemas van más allá a nivel hardware, se sugiere hacer uso de algún software adicional que pueda optimizar el procesamiento de captura de imágenes, etc. 3.3 Técnicas Empleadas para dispositivos Multitouch 51 Para este tipo de dispositivo, la luz infrarroja es proyectada por la parte posterior de la superficie táctil. Cuando un objeto entra en contacto con la superficie, este refleja más luz que el difusor u otros objetos en el fondo; haciendo que esta luz intensa sea captada por una cámara. Estos dispositivos de iluminación trasera, requieren de lámparas infrarrojas para su funcionamiento. Estas fuentes de luz se pueden comprar pre-fabricadas, o incluso construir manualmente usando LEDs individuales. Adicionalmente, se necesita de un material difusor para difundir la luz a lo largo de toda la superficie del dispositivo. En la Figura 3.11 se muestra la representación grafica de un sistema DI. El uso de focos de luz infrarroja tiende a ser un tanto complejo para procurar distribuir uniformemente la iluminación a lo largo de toda la superficie. Lugares sobre-iluminados son altamente sensibles al tacto del usuario, y en regiones sub- iluminados, la cámara presenta dificultades para detectar cuando el usuario está tocando el acrílico, generando problemas de usabilidad en el sistema [23]. Figura 3.11 - Esquema del funcionamiento de un dispositivo DI 3 Tecnología Multitouch 52 3.3.3 LLP (Laser Light Plane) Múltiples láseres infrarrojos iluminan justo encima de la superficie. El plano infrarrojo formado por los láseres es cerca 1mm de grosor, para cuando un dedo toque la superficie de la mesa, este se ilumine y el sistema capta la silueta infrarroja formada [22]. Láseres Infrarrojos son una manera fácil y económica para construir mesas multitouch usando el método LLP. La mayoría de estos dispositivos utilizan de 2 hasta 4 láseres, posicionados en las esquinas de la superficie táctil. El vatiaje de estos láseres está relacionado con la brillantez que estos emiten, por ende, a mayor el vatiaje, mayor será la potencia de brillo. Esta configuración se muestra gráficamente en la Figura 3.12. Para formar un plano uniforme de luz infrarroja, es necesario el uso de lentes lineales en los láseres. Lentes lineales de 120 grados son los más usados, ya que estos reducen el número de fuentes de luz para cubrir toda la superficie [23]. Fig. 3.12 - Esquema del funcionamiento de un dispositivo LLP 3.3 Técnicas Empleadas para dispositivos Multitouch 53 3.3.4 DSI (Diffused Surface Illumination) Esta técnica utiliza un acrílico especial para distribuir la luz infrarroja a lo largo de toda la superficie. Básicamente utiliza la misma configuración que la técnica FTIR con un marco de LEDs infrarrojo, solo que en este caso se reemplaza el acrílico por uno de características especiales. Este acrílico contiene pequeñas partículas dentro del material actuando como miles de espejos (esta característica se conoce como “luminosidad”). Al iluminar con luz infrarroja la lamina por los bordes, la luz es redirigida y se propaga a la superficie del acrílico. El efecto es similar que la técnica de DI, pero este posee una iluminación uniforme, sin focos de luz, y el proceso de configuración es el mismo que la técnica empleada para los sistemas FTIR. En la Figura 3.13 se muestra esta técnica para sistemas multitouch. Los fabricantes de este tipo de acrílico poseen diferentes tipos de “luminosidad”. Estos varían en grosor y cantidad de partículas reflectadas dentro del material. El grosor de la lamina va dentro del rango de los 6-10mm, seguido de “L”, “XL” y “XXL” para la cantidad de partículas. Figura 3.13 - Esquema del funcionamiento de un dispositivo DSI 3 Tecnología Multitouch 54 3.4 Desarrollo de software multitouch A continuación se muestra un conjunto de herramientas que se utilizan en la actualidad para el desarrollo de aplicaciones en dispositivos multitouch. Se hablará acerca del protocolo TUIO, que es utilizado ampliamente para la interoperabilidad entre diversas tecnologías, el kit de desarrollo multitouch conocido como Touchlib, ReacTIVision y otro proyecto nombrado “Comunity Core Vision” 3.4.1 Protocolo TUIO [24] La definición del protocolo es un intento a proveer una interfaz de comunicación general y versátil entre las interfaces de usuario orientado a mesas interactivas y los módulos de visión por computador. El coordinador del proyecto es un profesor de la universidad del Arte y Diseño en Austria Martin Kaltenbrunner. Fue diseñado para impulsar el desarrollo de interfaces para mesas interactivas, donde el usuario puede manipular un conjunto de objetos. Estos objetos son rastreados por un sensor del sistema, para ser identificados y localizados en posición y orientación en la superficie de la mesa. El diseño flexible del protocolo ofrece métodos para seleccionar cual información ha de ser enviado. Esta ventaja es proporcionada sin afectar las interfaces ya existentes, ni requerir una re-implementación para mantener compatibilidad. La inmensa ventaja de utilizar este protocolo es que permite al desarrollador crear su software multitouch en el lenguaje, plataforma tecnológica, framework de su preferencia, ya que este sólo deberá crear un cliente TUIO y recibir paquetes para analizarlos, y realizar diversas acciones de acuerdo a los diversos eventos que se vayan presentado durante la interacción del usuario con el software. Incluso se puede utilizar un computador dedicado para la captura y envío de paquetes de estado de la mesa interactiva, y otro computador que ejecute el software multitouch, recibiendo los mensajes enviados. 3.4 Desarrollo de Software Multitouch 55 Detalles de Implementación El protocolo TUIO define dos clases principales de mensajes: mensajes "set" y mensajes "alive". Los mensajes "set" son usados para comunicar información acerca del estado del objeto como posición, orientación, etc. Mensajes "alive" indican el conjunto actual de objetos en la superficie usando una lista de identificadores únicos. Para evitar posibles errores como perdidas de paquetes, no existen mensajes explícitos de "add" y "remove" en el protocolo TUIO. El receptor deduce la cantidad de objetos "vivos" examinando la diferencia entre los mensajes de tipo "alive" secuenciales. Eficiencia y Confiabilidad Con la finalidad de proveer una conexión de baja latencia, el protocolo TUIO utiliza UDP como capa de transporte. Cuando se utiliza UDP, existe la posibilidad que ciertos paquetes se pierdan. Por ende, la implementación de TUIO incluye redundancia de información para el caso que un paquete se pierda, manteniendo un canal de datos eficiente integral. Por razones de eficiencia, los mensajes "set" son agrupados en un paquete para usar completamente el espacio proporcionado por un paquete UDP. Cada paquete también puede incluir mensajes "alive" redundantes para tolerar cierta pérdida de paquetes. Para múltiples objetos se envían una serie de paquetes, cada uno incluyendo al menos un mensaje "alive". Cuando la superficie se mantiene inactiva, se envían mensajes a una tasa fija dependiendo de la calidad del canal, un mensaje por segundo por ejemplo, para asegurar que el receptor eventualmente adquiera una vista consistente del conjunto de elementos presentes. 3 Tecnología Multitouch 56 3.4.2 ReacTIVision [25] Es un framework de visión por computador de código abierto desarrollado Martin Kaltenbrunner y Ross Bencina; encargado para el rastreo rápido y robusto de "Etiquetas binarias" anexados en objetos físicos, al igual para el rastreo de dedos. Fue diseñado principalmente como un "toolkit" para el desarrollo rápido de interfaces de usuario orientadas a dispositivos multitouch. Se utilizó este framework para una mesa interactiva llamada “Reactable”, enfocada para un entorno musical por su software de composición, donde involucra una serie de diversos objetos que son utilizadas para crear alguna pieza musical.Reactivision es una aplicación "standalone", el cual envía mensajes TUIO vía un puerto UDP a cualquier aplicación que provea con un cliente del protocolo TUIO. Dicho protocolo fue inicialmente diseñado para este proyecto con la finalidad de codificar el estado de los objetos tangibles y eventos multitouch de un dispositivo multitouch como una mesa o pantalla interactiva. Este framework incluye un conjunto de ejemplos de clientes TUIO para varios lenguajes de programación, el cual se muestran las instrucciones básicas para el desarrollo de una aplicación multitouch. Este framework también tiene la capacidad de enviar mensajes MIDI para el uso directo de secuenciadores MIDI. La aplicación reacTIVision está disponible para los sistemas operativos: Windows, MacOS y Linux. Bajo la plataforma Windows, soporta cualquier dispositivo de captura con su driver de Windows asociado, ya sean webcams, cámaras firewire o DV. Para MacOS, toda cámara firewire o webcam que sea soportado por QuickTime podrá utilizar reacTIVision. Para Linux, se recomiendan utilizar cámaras firewire, ya que las webcams presentan problemas para ser instaladas en el sistema operativo. 3.4 Desarrollo de Software Multitouch 57 3.4.3 TouchLib [26] Touchlib es una librería para crear aplicaciones multitouch en dispositivos táctiles como mesas FTIR o DI. Este kit de desarrollo maneja el rastreo de puntos de luz infrarrojos, y envía a la aplicación que se está ejecutando estos eventos multitouch, como "punto presionado", "punto en movimiento" y "punto liberado". Incluye una aplicación de configuración para el manejo de parámetros de la webcam u otro dispositivo de captura, los filtros y operaciones para el procesamiento de las imágenes de captura, y la calibración de la superficie multitouch. En la Figura 3.14 se muestra la pantalla de configuración de la webcam infrarroja. Figura 3.14 – Configuración de la cámara usando Touchlib Actualmente, está disponible para la plataforma Windows y Linux. Al descargarla, incluye la aplicación de configuración, y un programa de demostración con su código fuente asociado, de modo que el usuario pueda familiarizarse cómo la aplicación interactúa con la librería. Esta librería contiene una aplicación OSC, el cual este envía eventos multitouch en el formato del protocolo TUIO, usado por la librería ReacTIVision, ya mencionado en la sección 3.4.2. 3 Tecnología Multitouch 58 3.4.4 Comunity Core Vision [27] También conocido como tbeta, es una solución de código abierto para visión por computador y sistemas multitouch. Este captura un canal de video y extrae datos de objetos rastreados (coordenadas y tamaño de puntos de contacto) y eventos táctiles que son utilizados para aplicaciones multitouch. Este proyecto puede manejar diversas webcams y dispositivos de video, y conectarse a múltiples aplicaciones con soporte TUIO/OSC. CCV es capaz de funcionar adecuadamente bajo diferentes técnicas de iluminación infrarroja de mesas interactivas como FTIR, DI, SDI y LLP. Figura 3.15 – Configuración de la cámara usando CCV En la Figura 3.15 se muestra el panel de configuración del CCV, donde provee diversas funcionalidades para la manipulación de parámetros de la cámara, las operaciones a realizar por cada captura para extraer los puntos de contacto, etc. Sus principales ventajas y funcionalidades que provee CCV son: 3.4 Desarrollo de Software Multitouch 59 • Múltiples Filtros Provee la posibilidad de ser manejar todas las técnicas ópticas de multitouch utilizadas (FTIR, DI, LLP, DSI). • Intercambio de cámaras En caso que hayan más de dos cámaras conectadas a un computador, en la interfaz de configuración posee la funcionalidad de activar la cámara que va dirigida a la mesa interactiva sin necesidad de desconectar ni detener la ejecución del framework CCV. Además se puede realizar una rotación horizontal y/o vertical en caso que la cámara este alineada de manera incorrecta. • Calibración dinámica de malla Para sistemas de mesas interactivas muy grandes o pequeñas, el software de configuración CCV da la posibilidad de aumentar o disminuir los puntos de control al momento de calibrar el sistema. • Warping Una funcionalidad para calibrar superficies interactivas que carecen de un proyector de despliegue. • Soporte del protocolo TUIO Capacidad de enviar mensajes TUIO a aquellas aplicaciones que trabajen con clientes de dicho protocolo para rastrear constantemente el estado de la mesa interactiva. • Multiplataforma Este framework es soportado para los sistemas operativos Windows, Mac OS y GNU Linux. 3 Tecnología Multitouch 60 En la actualidad, todavía se está investigando y desarrollando nuevos kits de herramientas y nuevas tecnologías para expandir e impulsar los avances acerca del desarrollo de aplicaciones orientadas a dispositivos táctiles como mesas, pantallas y paredes multitouch. En el siguiente capítulo se hablará acerca del diseño del sistema multitouch producto de este Trabajo Especial de Grado. Primero se explicará acerca de la construcción del hardware, seguido del software requerido para el funcionamiento del sistema. Por último se explican las aplicaciones multitouch desarrolladas. 3.4 Desarrollo de Software Multitouch 61 62 4 Diseño y desarrollo de la solución propuesta A continuación, se presentara el diseño y desarrollo referente tanto del hardware como del software de una mesa multitouch de bajo costo, mencionando la técnica óptica aplicada, las librerías utilizadas y el lenguaje de programación. Una vez construido la mesa interactiva con los elementos de hardware y software, se procede a desarrollar una aplicación que tome ventaja sobre la capacidad multitouch del sistema. 4.1 Plataforma de Hardware Después de un estudio realizado sobre la elaboración de mesas interactivas de bajo costo donde involucra visión por computador y luz infrarroja, se optó por elaborar una mesa multitouch empleando el método FTIR explicado en el capítulo 2, con una lámina de acrílico de 24 pulgadas aproximadamente, una webcam y un pico-proyector. A continuación se explica el diseño del dispositivo. 4.1.1 Diseño del prototipo Para la elaboración del dispositivo, el diseño se realizó tomando en cuenta un conjunto de ventajas como: • Robustez – que el dispositivo sea rígido y tolerante a movimientos bruscos sin perder calibración; 63 • Portabilidad – el sistema sea fácil de ensamblar para facilidad de transportarla de un lugar a otro sin descuidar precisión de los elementos primordiales como la cámara y el proyector; • Precisión – el dispositivo cuente con un diseño rápido y fácil de calibrar, ofreciendo la mayor precisión en la superficie de usuario. El diseño esquemático se muestra en la Figura 4.1: Figura 4.1 - Esquema del funcionamiento de un dispositivo DSI Para efectos de aumentar y revertir la imagen de proyección por parte del pico- proyector, fue necesario agregar un espejo para aumentar la distancia de proyección. Además fue necesario agregar un soporte donde la webcam y el espejo puedan ser apoyados firmemente, dándole estabilidad y precisión a la mesa. En la Figura 4.2 se muestra un esquema en 3D del dispositivo. 4 Diseño y desarrollo de la solución propuesta 64 Figura 4.2 - Esquema del funcionamiento de un dispositivo DSI También fue necesario cerrar todo el sistema interno de la caja, con el propósito de aislar lo más posible la cámara y el proyector de la luz ambiental presente en el ámbito donde se encuentre. Básicamente, el sistema se desensambla en 6 grandes partes: 4 tablas que conforman las paredes de la mesa, el tope de la mesa con la que el usuario interactúa (lamina de acrílico y el vidrio esmerilado como difusor), y el soporte en la parte inferior donde se encuentra la webcam realizando la captura de puntos de contacto por parte del usuario, y el espejo que realiza la reflexión de la imagen transmitida por el proyector. En cuanto a conexiones, el dispositivo cuenta con una conexión USB para la webcam, otra conexión VGA para desplegar la imagen de la computadora por el proyector, y dos conexiones eléctricas, para energizar el arreglo de LEDs infrarrojos y el proyector. 4.1 Plataforma de Hardware 65 4.1.2 Materiales Los materiales incorporados para la elaboración de este dispositivo son: Acrílico Se adquirió una lámina de acrílico de 40cmx50cm, con un grosor de 8mm. El canto de la lámina fue pulido con la finalidad que los rayos de luz infrarrojo puedan entrar fácilmente. Vidrio Esmerilado Un lamina de vidrio esmerilado de 40cmx50cm de 4mm de grosor es colocado en la parte inferior de la mesa, para ser utilizado como pantalla de proyección para el proyector. Marco y LEDs Infrarrojos Se utilizo un marco de madera con una serie de LEDs Infrarrojos incrustados en todo el perímetro del marco, a 2 cm de separación entre cada uno, dando un total de 86 LEDs infrarrojos. Madera Compuesta Una lamina de 2m x 3m, para hacer dos laminas de madera de 56 cm x 78 cm, dos laminas de 44 cm x 78 cm y una lamina (usada para la superficie de soporte de la cámara) de 56 cm x 44 cm. Webcam Infrarroja Se utilizo una Microsoft LiveCam VX6000, donde este tuvo que ser desensamblado para sustituir el filtro anti-infrarrojo por un filtro que permita que la cámara pueda captar solo rayos de luz infrarroja, y este no capte rayos de luz visible. Proyección Se utilizo un pico-proyector de tecnología LED fabricado por Samsung, modelo SP- HO3, con una resolución de 854x480, y una intensidad de luz de 30 Lumens. 4 Diseño y desarrollo de la solución propuesta 66 4.1.3 Proceso de Elaboración A continuación se explica la construcción del dispositivo. Superficie de Usuario Para efectos de hacer la superficie fácil de ensamblar, se elaboro un marco exterior de mayores dimensiones que el marco de LEDs infrarrojos, con la finalidad de enmarcar el acrílico con el marco infrarrojo, y el vidrio en una sola pieza que es colocada sobre el sistema de soporte de la mesa. Esta pieza se elaboro a partir de un liston 5 cm x 5cm, de 2.5 m de longitud. (Véase la Figura 4.3). Figura 4.3 – Marco externo que unifica el marco IR, el acrílico y el vidrio esmerilado Una vez terminada esta pieza, esta fue perforada por un lado del marco para hacer pasar el cable que energiza los LEDs incrustados en el marco interno. Finalmente se procedió a unir los elementos en el marco externo, realizando los ajustes necesarios, como el lijado de las piezas y la aplicación de sellador de madera, para darle un mejor acabado. En la Figura 4.4 se muestra una vista superior e inferior de la pieza final. 4.1 Plataforma de Hardware 67 Figura 4.4 – Vista superior e inferior de la superficie del usuario Soporte Las láminas de madera previamente cortadas, se les colocaron ganchos de cama para sujetarlas juntas firmemente, y sean fácilmente desarmables para mejor portabilidad (Véase la Figura 4.5). Figura 4.5 – Vista de las tablas ensamblables de soporte del tope de la mesa 4 Diseño y desarrollo de la solución propuesta 68 Para minimizar interferencia de luz ambiental con la imagen proyectada por el pico- proyector, la parte interior del soporte fue pintado de color negro mate. Y finalmente, por la parte externa se le aplico el sellador utilizado para la pieza superior de la mesa (Véase la Figura 4.6). Figura 4.6 – Vista del interior y exterior de las tablas de soporte de la mesa Plataforma Inferior e Instalación del Proyector Unos listones fueron colocados a los lados en la parte interior de la caja, a fin de colocar la lámina que hace de apoyo para ubicar una webcam en el centro, y su campo de visión sea hacia la parte inferior de la superficie de usuario, y un espejo con un pequeño ángulo de inclinación, donde este rebotará la proyección del proyector. Una de las láminas de soporte de la mesa fue perforada, con el propósito de atornillar el pico proyector, este apuntando hacia el espejo, a modo que rebote y se proyecte sobre la pantalla de proyección de la mesa. En la Figura 4.7 se muestra la plataforma de soporte donde va ubicada la webcam con el espejo; y el proyector fijado en una de las láminas de soporte. 4.1 Plataforma de Hardware 69 Figura 4.7 – Vista de la tabla de soporte de la webcam y el espejo Aparte de la webcam y el espejo, se puede observar una fuente de poder que alimenta los LEDs infrarrojos; y adaptador de energía del proyector conectado a una regleta. Una vez realizadas las conexiones y la configuración interna de la mesa interactiva, se, se perforó un pequeño agujero para la salida de la conexión USB de la webcam, el cable VGA del proyecto, y el enchufe de la regleta para energizar los LEDs y el proyector. 4 Diseño y desarrollo de la solución propuesta 70 4.2 Plataforma de Software El software utilizado para manejar este sistema fue el siguiente. 4.2.1 Librerías de desarrollo Para ejecutar, e incluso desarrollar aplicaciones multitouch enseguida, se puede utilizar algún kit de desarrollo, o frameworks de código abierto como Touchlib, Comunity Core Vision, ReacTIVision, etc; donde sólo basta importar alguna de estas librerías para desarrollar una aplicación, o se ejecuta un servidor TUIO, donde este procesa las imágenes de captura para formar mensajes de información de estado y las envía a alguna aplicación cliente que interprete estos mensajes para realizar alguna acción de acuerdo al comportamiento de la mesa interactiva. En la Figura 4.8 se ve la representación grafica de la ejecución de un programa multitouch usando un cliente y servidor con el protocolo TUIO. Figura 4.8 - Esquema del funcionamiento de un dispositivo DSI Nótese que en la Figura 4.8 muestra que el sistema utiliza dos computadoras. Sin embargo, es posible ejecutar el servidor y cliente dentro de una misma computadora. 4.2 Plataforma de Software 71 4.2.2 Lenguaje de programación Para desarrollar una aplicación multitouch, es importante saber en qué lenguaje se quiere trabajar. Si se desea unificar una aplicación que realice la captura, el procesado e interpretación de las imágenes de la webcam, para desenlazar los diversos eventos y acciones que conllevan al cambio de estado de la aplicación, el usuario puede desarrollar cada modulo desde el principio, o se pueden importar librerías ya existentes que pueden ayudar al desarrollador en el modulo de visión por computador, permitiéndole que solo se encargue de desarrollar el propósito de su aplicación. Sin embargo, puede resultar complejo conseguir la librería ideal que sea compatible con el entorno que se esté trabajando. Otro enfoque más amplio para el desarrollador es utilizar el protocolo TUIO. De esta forma, hay más libertad de realizar la aplicación en el lenguaje de preferencia, y con implementar un cliente que reciba mensajes TUIO para interpretar, y disparar eventos que invoquen métodos y acciones pertinentes a la aplicación. En la Figura 4.9 se muestra una representación grafica referente a este método Figura 4.9 - Esquema del funcionamiento para diversos lenguajes de programación 4 Diseño y desarrollo de la solución propuesta 72 Ya mencionado todos los elementos de tanto en hardware como en software requeridos para elaborar un dispositivo multitouch de bajo costo, se puede observar que existen diversas formas posibles de cómo elaborar una mesa multitouch de bajo costo, y diversos proyectos de código abierto a nivel de software para apoyar la interacción del usuario con la superficie. En el siguiente capítulo se explicará el desarrollo de una aplicación educativa que explote la capacidad multitouch de la mesa interactiva, a modo que múltiples usuarios puedan utilizar el software simultáneamente. 4.2 Plataforma de Software 74 5 Diseño del software de demostración A continuación se explicara el desarrollo de una aplicación educativa multitouch, a modo que pueda ser usado por varios estudiantes al mismo tiempo, con la finalidad de crear un ambiente colaborativo para resolver un problema. 5.1 Propósito de la aplicación El siguiente software cuenta con el propósito de ser interactivo para múltiples usuarios simultáneamente. Para este caso, el tema de la aplicación es orientado hacia la educación, abarcando tres actividades ilustrativas relacionadas con la astronomía. Para realizar estas aplicaciones, fue necesario utilizar dos módulos que manejan el protocolo TUIO. 5.2 Detalles de Implementación Para el desarrollo de estas aplicaciones, se trabajo con el entorno de desarrollo Microsoft Visual Studio 2010 en el lenguaje de programación C#, apoyado del framework grafico Microsoft XNA Game Studio 4.0 y Touchlib para el soporte multitouch de la mesa interactiva. La aplicación trabaja con dos módulos que ofrece Touchlib, que contiene un conjunto de clases que manejan el protocolo TUIO, y que este depende de OSC (Open Sound Control), utilizado para el manejo de paquetes del protocolo. 75 El esquema básico de las aplicaciones se muestra en la Figura 5.1. Figura 5.1 – Vista superior e inferior de la superficie del usuario Se puede observar que la clase Multitouch funciona de interfaz entre La clase principal “Main”, con todo el manejo de mensajes recibidos por el servidor Touchlib; y este encapsula cada método en tres eventos: • Cuando se encuentra un nuevo punto en la mesa. • Cuando un punto ya encontrado cambia de posición. • Cuando un punto detectado desaparece. Estos tres eventos pueden ocurrir simultáneamente por distintos puntos, y estos son guardados en una lista que guarda las coordenadas, y un identificador para cada punto encontrado, para mantener el control de todos los puntos. 5 Diseño del software de demostración 76 5.2.1 Agujero Negro Fue el primer software desarrollado con capacidad multitouch, con la finalidad de entender el funcionamiento del protocolo TUIO, y los eventos que se disparan dependiendo del cambio de estado de la mesa interactiva. En la interfaz se muestran elementos espaciales orbitando alrededor de un agujero negro. Para el momento que el usuario toque la mesa (ya sea con un dedo o varios), se genera un planeta en las coordenadas donde el usuario hizo contacto. Este mientras no levante su dedo, puede trasladar su planeta a lo largo de la superficie, y para el momento que el usuario deje de presionar la mesa, el planeta realiza una trayectoria en espiral hacia el agujero negro, emulando que está siendo atraído por la fuerza de atracción del agujero negro. En la Figura 5.2 muestra una captura del programa. Figura 5.2 – Vista del programa sin la interacción con el usuario En la Figura 5.3 se muestra el programa con planetas generados por el usuario. 5.2 Propósito de la aplicación 77 Figura 5.3 – Vista del programa con la interacción con el usuario 5 Diseño del software de demostración 78 5.2.2 Sistema Solar Realiza una representación animada del sistema solar interactivo para el usuario, con la idea que conozca las características más generales de cada planeta que lo conforma. Al momento que el usuario “toca” un planeta, una tarjeta informativa es desplegada mostrando un conjunto de características resaltantes como su diámetro, su distancia aproximada con el sol, duración de una rotación alrededor de su propio eje, etc. En la Figura 5.4 se muestra el modelo del sistema solar. Figura 5.4 – Vista superior e inferior de la superficie del usuario En la Figura 5.5 se muestra una imagen de la aplicación cuando el usuario selecciona un planeta para visualizar su tarjeta informativa. 5.2 Propósito de la aplicación 79 Figura 5.5 – Vista superior e inferior de la superficie del usuario 5 Diseño del software de demostración 80 5.2.3 Fases Lunares Una aplicación interactiva para conocer las fases lunares. Básicamente se muestra un escenario panorámico de una montaña, y emulando el pase de los días, se van mostrando las distintas fases de la luna, para darle a conocer al usuario el nombre apropiado de cada fase y su significado. Cuando el usuario toca la luna, este puede modificar la fase en el que se encuentra, y también desplegar una tarjeta que explica con más detalle acerca de la fase seleccionada. En la Figura 5.6 se muestra una imagen que representa la interfaz principal para conocer las distintas fases lunares. Figura 5.6 – Vista superior e inferior de la superficie del usuario En la Figura 5.7 se muestra una imagen de la aplicación cuando el usuario selecciona un planeta para visualizar su tarjeta informativa. 5.2 Propósito de la aplicación 81 Figura 5.7 – Vista superior e inferior de la superficie del usuario 5 Diseño del software de demostración 82 6 Pruebas y resultados Para la elaboración de la mesa interactiva, se encontraron diversas situaciones donde lo más adecuado para obtener los mejores resultados fue evaluando diversas opciones, y así conseguir la mejor configuración al menor costo. Se realizaron pruebas como la comparación de filtros infrarrojos, webcams que ofrezcan la mejor resolución y fotogramas por segundo, y pantallas de proyección. 6.1 Pruebas a nivel de hardware En la realización de la mesa interactiva a partir del diseño esquemático mostrado en el capítulo 4, se realizaron un conjunto de pruebas de diferentes elementos del dispositivo para obtener los mejores resultados en cuanto a una relación eficiencia-costo. 6.1.1 Pantallas de proyección En cuanto a una pantalla de proyección ideal para el sistema, se intento utilizar diversas láminas de papel de distintos niveles de transparencia, pero se presentaron problemas de mantener el papel templado para tener la mejor calidad de imagen proyectada. Se terminó utilizando un vidrio esmerilado, colocado en la parte inferior del acrílico. De esta forma, le da mayor robustez al tope de la mesa, y cumple con su función de pantalla de proyección. 83 6.1.2 Filtros infrarrojos Para encontrar el mejor filtro infrarrojo para la webcam, se hicieron pruebas con el negativo de una fotografía 8mm, el disco interno de un disquete, y un filtro especial marca kodak. Para el caso del negativo de fotografía, las imágenes de captura resultaban con cierto ruido, lo que dificulta la captura exacta de los puntos de contacto. Para el caso del filtro kodak, las imágenes de captura resultan un tanto sensibles a la iluminación ambiental, haciendo que el sistema detecte puntos infrarrojos falsos. En la Figura 6.1 se muestran los tres elementos de prueba de filtros. Finalmente, se opto por utilizar el disco interno de un diskette, por su coste, y por proveer las mejores imágenes de captura. Por su opacidad, ofrece una cierta tolerancia a la luz ambiental donde se encuentre la mesa interactiva.. Figura 6.1 – Elementos candidatos para filtros infrarrojos 6.1.3 Desempeño de webcams Se hizo una evaluación de sistema utilizando una webcam Genius iLook300 y una Microsoft LiveCam VX6000, que se muestran en la Figura 6.2, y se concluyó que las aplicaciones funcionan con mayor fluidez utilizando la cámara de Microsoft por tener un lente de rango amplio, mejor resolución de las imágenes de captura y más fotogramas por segundo. 6 Pruebas y resultados 84 Figura 6.2 – Webcams que fueron evaluadas para el rendimiento de la mesa 6.2 Pruebas a nivel de software Las pruebas realizadas a nivel de software fueron las siguientes. 6.2.1 Proyectos código abierto para desarrollo de aplicaciones multitouch Multitouch Como el software de demostración trabaja con un cliente del protocolo TUIO, fue posible realizar pruebas de distintos proyectos de rastreo multitouch para la captura, procesamiento y envío de mensajes a la aplicación usando TUIO. A pesar que el software de Comunity Core Vision provee más funcionalidades que el Touchlib, este ultimo presentó mejor desempeño en la mesa en cuando a precisión, rapidez y costo de procesamiento para el computador. 6.2.2 Elaboración de un software educativo que explote la capacidad multitouch. Con el apoyo de las librerías antes mencionadas, fue posible realizar un software multitouch orientado hacia la educación, orientados en el área de astronomía. 6.2 Pruebas a nivel de software 85 86 Conclusiones La visión por computador ha servido como base para el desarrollo de nuevas tecnologías, entre ellas se encuentran las mesas interactivas. Estas ofrecen grandes posibilidades que las han llevado a ser utilizadas en ambientes educativos. A pesar que existen mesas interactivas que poseen otras tecnologías para la captura de información cuando el usuario toca la superficie, como el uso de sensores de calor y proximidad, las técnicas que involucran visión por computador resultan una manera fácil y económica para elaborar estos dispositivos. Entre las diferentes técnicas, para este trabajo se elaboró una mesa interactiva usando la configuración FTIR, por resultar ser la más económica y fácil de ensamblar. En cuanto a las librerías de desarrollo de aplicaciones multitouch, Touchlib mostró ser la más eficiente por su precisión y rapidez para la captura de los puntos infrarrojos. La lámina de acrílico costó aproximadamente Bsf 285, el listón de madera para los marcos de tope de la mesa costó Bsf. 70, el costo de la lámina de vidrio esmerilado fue de Bsf. 60. Una lámina de madera compuesta de 1.80m x 3m fue suficiente para elaborar las tablas ensamblables y la superficie de apoyo de la mesa, costó alrededor de los Bsf. 200. La webcam Microsoft costó cerca de los Bsf. 160. El elemento más costoso fue el picoproyector, que su precio va alrededor de los Bsf 3000. 87 En conclusión, totalizando los costos de todos estos elementos esenciales de la mesa, con otros elementos secundarios como pintura, sellador, clavos, ganchos de cama y tornillos, un presupuesto a partir de Bsf. 4000 a 4500 es suficiente para elaborar un dispositivo multitouch Con el apoyo de la librería Touchlib y una librería dinámica para controlar el mouse del computador, se pudo realizar una aplicación que permite el usuario poder controlar el puntero del mouse cuando este toca en cualquier punto de la pantalla. Finalmente, conociendo cómo funciona el protocolo TUIO, se pudo elaborar un software educativo que explota la capacidad multitouch, bajo el entorno grafico XNA 4.0 de Microsoft. 88 Referencias 1. Gonzalez, R.C. and Woods, R.E. {2008}. Digital image processing. Pearson/Prentice Hall. 2. Bernd Jähne {2005}. Digital image processing, Volume 1. Springer 3. José Ramón Mejía Vilet {2005} Procesamiento Digital de Imágenes, UASLP 4. Captura de Imagenes: http://www.kodak.com/global/es/corp/historyOfKodak/capturingAnImage_es.jhtm l?pq-path=2696 5. How Digital Cameras work: http://www.hometechanswers.com/digital-photography/how-digital-cameras- work.html 6. Digital Cameras: http://www.webopedia.com/TERM/D/digital_camera.html 7. J. Beam {2011} What is a webcam? : http://www.wisegeek.com/what-is-a- webcam.htm 8. WebCams : http://www.webcamworld.com/setupawebcam/intro.html 9. R. W. Ditchburn {2001} Light, Courier Dover Publications 10. Robertson, William C. {2003}, Light, NSTA Press 11. Electromagnetic waves - reflection, refraction, diffraction: http://www.radio-electronics.com/info/propagation/em_waves/electromagnetic- reflection-refraction-diffraction.php 89 12. Stephen A. Nelson {2002} Properties of Light: http://www.tulane.edu/~sanelson/geol211/proplight.htm 13. El Espectro Electromagnético: http://www.espectrometria.com/espectro_electromagntico 14. John Carl Villanueva {2009}, Infrared Light: http://www.universetoday.com/34504/infrared-light/ 15. Jeff Tyson {2009} How Night Vision Works: http://electronics.howstuffworks.com/gadgets/other-gadgets/nightvision.htm 16. Christian Muller-Tomfelde {2010}. Tabletops – Horizontal Interactive Displays. Springer. 17. Microsoft Surface – Pagina Oficial: http://www.microsoft.com/surface/en/us/Default.aspx 18. PQ Labs iTable – Pagina Oficial: http://www.theitable.com/2009/07/itableimpressive/ 19. PQ Labs – Pagina Oficial: http://multi-touch-screen.com/ 20. DOS-MTS multitouch table: http://www.doc-mts.com/?page_id=223&lang=en 21. Smart Table interactive learning center: http://www.smarttech.com/us/Solutions/Education+Solutions/Products+for+educ ation/Complementary+hardware+products/SMART+Table 22. Jefferson Y. Han. {2005} Low-Cost Multi-Touch Sensing through Frustrated Total Internal Reflection. ACM 23. Alex Teiche {2009} Multitouch Technologies. Nui Group 24. TUIO.ORG – Pagina Oficial: http://www.tuio.org/ 25. ReacTIVision – Pagina Oficial: http://reactivision.sourceforge.net/ 26. TouchLib – Pagina Oficial: http://nuigroup.com/touchlib/ 27. Community Core Vision: http://ccv.nuigroup.com/