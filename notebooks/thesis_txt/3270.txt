Universidad Central de Venezuela Facultad de Ciencias Escuela de Computación Centro de Computación Gráfica Una solución para la rehabilitación física de pacientes con discapacidades en los miembros superiores empleando realidad virtual Trabajo Especial de Grado presentado ante la Ilustre Universidad Central de Venezuela Por los Bachilleres Moreno Alvarez, Francisco José Ojeda Redondo, Jordan Benjamin para optar al título de Licenciado en Computación Tutor: Prof. Ramírez Jacobo, Esmitt Caracas, 29 / Abril / 2013 1 Agradecimientos  Al Servicio de Medicina Física y Rehabilitación del Hospital J.M. de los Ríos en Caracas, por haber permitido la realización de este proyecto en sus instalaciones.  Al Doctor Silvio Alvarez y a la Licenciada Jeanlight Rangel, por haber brindado su apoyo y colaboración en este trabajo.  Al Laboratorio de Computación Gráfica y a su cuerpo docente, por orientarnos, apoyarnos y compartir su profesionalismo y colaboración en el desarrollo de esta investigación.  Al Profesor Esmitt Ramírez, por facilitarnos su conocimiento y guía durante el desarrollo de la investigación.  A los profesores Alecia Acosta, Rhadamés Carmona, Walter Hernández y Omaira Rodríguez, por su valioso aporte.  A nuestros Padres y familiares, por impulsarnos a ser mejores cada día y por ofrecernos su apoyo en el cumplimiento de nuestros sueños.  A todas aquellas personas que hicieron posible la culminación de este proyecto. 2 Resumen La rehabilitación física corresponde a una herramienta médica empleada para el re-entrenamiento motor de personas afectadas a partir de lesiones adquiridas o congénitas de procedencias neurológicas o funcionales. En la actualidad, ha surgido una vertiente con gran impacto en términos de rehabilitación definida por la realización de actividades bajo realidad virtual. La realidad virtual consiste en generar un espacio irreal con el cual se intente reproducir de la manera más fiel posible el mundo real. En referencia a las técnicas de rehabilitación, recientemente se han producido distintos estudios donde se afirma que la introducción de la realidad virtual repercute significativamente de manera positiva en los mecanismos de rehabilitación, generando resultados que en muchas ocasiones superan a los obtenidos mediante metodologías tradicionales. En el presente trabajo se implementa una solución basada en un sistema de realidad virtual orientado a la rehabilitación de pacientes infantes, en concreto de los miembros superiores. La solución se fundamenta en un conjunto de videojuegos virtuales que inducen una ejercitación específica, considerando al mismo tiempo la provisión de cambios neuronales mediante el empleo de feedback de acción/observación y de sonido, además de procurar la captura de atención mediante el contenido dinámico y entretenido. Palabras claves: Terapias de rehabilitación, plasticidad, motricidad, realidad virtual, Kinect TM , videojuegos. 3 Índice de Figuras Figura 1: Representación de un ACV isquémico. .................................................................................. 15 Figura 2: Representación de un ACV hemorrágico. ............................................................................... 15 Figura 3: Ubicación del plexo braquial.................................................................................................. 16 Figura 4: Activación de la corteza primaria cerebral. ............................................................................. 19 Figura 5: The Cave, sistema de realidad virtual inmersivo desarrollado en 1993. ................................... 27 Figura 6: Representaciones de la mano, desde alta a baja calidad y activaciones cerebrales. .................. 33 Figura 7: MRI durante movimientos de mano discapacitada antes y después de la terapia. .................... 34 Figura 8: Sistema BioTrak (1) Pantalla multitáctil. (2) Plataforma de presión. (3) Tracker magnético. ... 35 Figura 9: Muestra del juego virtual Spheroids. ...................................................................................... 37 Figura 10: Video inmersivo de IREX. ................................................................................................... 37 Figura 11: Escena virtual creada para el test ARAT bajo realidad virtual ............................................... 39 Figura 12: Calibrador del sistema de Hayes et al. [80]. .......................................................................... 40 Figura 13: Escena de parte del Jewel Mini Game. ................................................................................. 41 Figura 14: Componentes de la arquitectura ........................................................................................... 45 Figura 15: Diagrama general de la arquitectura. .................................................................................... 46 Figura 16: Diagrama de caso de uso (nivel 0) de módulo de interfaz. .................................................... 49 Figura 17: Diagrama de caso de uso (nivel 1) del módulo de interfaz. .................................................. 50 Figura 18: Vista general de la interfaz. .................................................................................................. 51 Figura 19: Módulo del guante. .............................................................................................................. 51 Figura 20: Ejemplo de la implementación de un gesto para el guante. .................................................... 53 Figura 21: Flujo de deteccion de gesto .................................................................................................. 54 Figura 22: Esquema general de la estructura del módulo del Kinect TM . .................................................. 55 Figura 23: Esquema de la sección de controladores del módulo del Kinect TM . ....................................... 56 Figura 24: Esquema de la sección de Gestos del Kinect TM . .................................................................... 58 Figura 26: Proceso de evaluación de un gesto. ...................................................................................... 59 Figura 27: Estructura de la sección de despliegue del módulo del Kinect TM . .......................................... 60 Figura 28: Silueta de usuario capturada por el Kinect TM y procesada. .................................................... 62 Figura 29: Estructuras de almacenamiento para la configuración de la escena. ...................................... 63 Figura 30: Esquema general de las secciones que componen el engine. ................................................. 64 Figura 31: Estructura de la sección del cargador de escenarios. ............................................................. 65 Figura 32: Estructura de la sección del cargador de MD5 para el engine. ............................................... 66 Figura 33: Esquema general de sistemas de iluminación........................................................................ 67 Figura 34: Implementación de iluminación direccional bajo modelo Phong shading. ............................. 68 Figura 35: Implementación de iluminación puntual. .............................................................................. 68 Figura 36: implementación de iluminación Spot.................................................................................... 69 Figura 37: Resumen de gestor de iluminación. ...................................................................................... 69 Figura 38: Parámetros de efecto de pasada previa. ................................................................................ 70 Figura 39: Parámetros de efecto de la luz puntual deferred. ................................................................... 72 Figura 40: Mapa de iluminación. .......................................................................................................... 73 Figura 41: Parámetros de efecto de composición. .................................................................................. 73 Figura 42: Composición final de la escena. ........................................................................................... 74 4 Figura 43: Bandas transportadoras, tiras de plástico y simulación de succión. ....................................... 76 Figura 44: 1) Burbujas, 2) Succión de máquina, 3) Fuego y, 4) Humo y tuercas. ................................... 77 Figura 45: Interfaz del juego de los meteoritos y de la calibración del Kinect TM . ................................... 79 Figura 46: Esquema de la sección de cámara del engine. ....................................................................... 80 Figura 47: Muestra de efectos como shatter y reflexión sobre el agua. ................................................... 81 Figura 48: Estructura general de gráficos estadísticos. ........................................................................... 82 Figura 49: Estructura general de módulo de manejo de base de datos. ................................................... 83 Figura 50: Métodos en el sub-módulo manejador de SQLite. ............................................................... 84 Figura 51: Implementación general del módulo de modelos. ................................................................. 85 Figura 52: Ejemplo del escenario de la fábrica siendo construido en el constructor de escena. ............... 87 Figura 53: Interfaz de juego La Fábrica................................................................................................. 90 Figura 54: Interfaz de juego G.A.L.A.X.Y ............................................................................................ 95 Figura 55: Interfaz de juego ACIS ........................................................................................................ 99 Figura 56: Interfaz de calibrador de Kinect TM . ..................................................................................... 103 Figura 57: Interfaz de calibrador de guante ......................................................................................... 106 file:///C:/Users/jborquattro/Documents/University/TESIS/DocumentoTesis/Tesis_Ultima_Revision_Bibliografia_Cambiada.docx%23_Toc354833662 5 Índice Introducción ............................................................................................................................................ 8 Capítulo 1. Enfermedades causantes de déficit motor y métodos para rehabilitación ............................... 10 1.1. Conceptos básicos ....................................................................................................................... 10 1.1.1. Rehabilitación ...................................................................................................................... 11 1.1.2. Motricidad gruesa y fina ....................................................................................................... 12 1.2. Daños de la motricidad ............................................................................................................... 13 1.2.1. Enfermedades y lesiones cerebrales ...................................................................................... 13 1.3. Terapias de rehabilitación ........................................................................................................... 16 1.3.1. Tipos de terapias de rehabilitación ........................................................................................ 17 1.4. Reactivación cerebral .................................................................................................................. 18 1.5. Medidas de la motricidad ............................................................................................................ 21 1.5.1. Métodos de evaluación según zonas afectadas ...................................................................... 22 1.5.2. Action Research Arm Test .................................................................................................... 22 1.5.3. Ejercitación en función de la enfermedad ............................................................................. 23 Capítulo 2. Realidad virtual y terapia de rehabilitación .......................................................................... 25 2.1. realidad virtual ............................................................................................................................ 25 2.1.1. Hardware ............................................................................................................................. 26 2.2. Realidad virtual como terapia de rehabilitación ........................................................................... 27 2.3. Realidad virtual vs terapia tradicional.......................................................................................... 29 2.4. Reorganización cerebral mediante realidad virtual ....................................................................... 31 2.5. Sistemas de realidad virtual enfocados en terapias de rehabilitación ............................................ 35 2.5.1. BioTrak ................................................................................................................................ 35 2.5.2. Rehabilitation Game System (RGS) ..................................................................................... 36 2.5.3. Interactive Rehabilitation and Exercise System (IREX) ........................................................ 37 Capítulo 3. Desarrollo e implementación de la solución orientada a la rehabilitación .............................. 43 3.1. Problemática y motivación .......................................................................................................... 43 3.2. Solución propuesta ...................................................................................................................... 44 3.2.1. Componente de hardware .................................................................................................... 45 3.2.2. Componente de software ...................................................................................................... 45 3.2.3. Características de la arquitectura .......................................................................................... 46 3.2.4. Software de diseño ............................................................................................................... 47 6 3.2.5. Librerías............................................................................................................................... 48 3.2.7. Guante virtual ...................................................................................................................... 51 3.2.8. Kinect TM ............................................................................................................................... 54 3.2.9. Motor de juego ..................................................................................................................... 62 3.2.10. Gráficos estadísticos ........................................................................................................... 81 3.2.11. Manejador de base de datos ................................................................................................ 82 3.2.12. Constructor de escena ......................................................................................................... 86 Capítulo 4. Análisis y evaluaciones médicas .......................................................................................... 88 4.1. Juego A: La Fábrica .................................................................................................................... 88 4.1.1. Objetivos terapéuticos .......................................................................................................... 89 4.1.2. Interacción ........................................................................................................................... 89 4.1.3. Parámetros ........................................................................................................................... 90 4.1.4. Eventos ................................................................................................................................ 90 4.1.5. Interfaz ................................................................................................................................ 90 4.1.6. Registro y estadísticas .......................................................................................................... 91 4.1.7. Logros terapéuticos alcanzados ............................................................................................ 92 4.2. Juego B: G.A.L.A.X.Y ................................................................................................................ 92 4.2.1. Objetivos terapéuticos .......................................................................................................... 92 4.2.2. Interacción ........................................................................................................................... 93 4.2.3. Parámetros del juego ............................................................................................................ 93 4.2.4. Eventos ................................................................................................................................ 94 4.2.5. Interfaz ................................................................................................................................ 94 4.2.6. Registro y estadísticas .......................................................................................................... 95 4.2.7. Logros terapéuticos alcanzados ............................................................................................ 96 4.3. Juego C: ACIS. ........................................................................................................................... 96 4.3.1. Objetivos terapéuticos .......................................................................................................... 97 4.3.2. Interacción ........................................................................................................................... 98 4.3.3. Parámetros de juego ............................................................................................................. 98 4.3.4. Eventos ................................................................................................................................ 98 4.3.5. Interfaz ................................................................................................................................ 99 4.3.6. Registro y estadísticas ........................................................................................................ 100 4.3.7. Logros terapéuticos alcanzados .......................................................................................... 100 4.4. Calibrador del Kinect TM ............................................................................................................ 100 7 4.4.1. Objetivos terapéuticos ........................................................................................................ 100 4.4.2. Interacción ......................................................................................................................... 101 4.4.3. Parámetros de calibración ................................................................................................... 102 4.4.4. Eventos .............................................................................................................................. 102 4.4.5. Interfaz .............................................................................................................................. 102 4.4.6. Registros y estadísticas ................................................................................................. 103 4.4.7. Logros terapéuticos alcanzados ..................................................................................... 104 4.5. Calibrador de guante ................................................................................................................. 104 4.5.1. Objetivos terapéuticos ........................................................................................................ 104 4.5.2. Interacción ......................................................................................................................... 105 4.5.3. Parámetros ......................................................................................................................... 105 4.5.4. Eventos .............................................................................................................................. 105 4.5.5. Interfaz .............................................................................................................................. 105 4.5.6. Registro y estadísticas. ....................................................................................................... 106 Capítulo 5. Conclusiones y recomendaciones ....................................................................................... 107 5.1. Trabajos futuros y recomendaciones ..................................................................................... 108 Bibliografía ......................................................................................................................................... 109 Referencias Bibliográficas ............................................................................................................... 109 Referencias Web.............................................................................................................................. 112 Anexos ................................................................................................................................................ 115 8 Introducción Las estadísticas presentadas en el año 2011 por la Organización Mundial de la Salud (OMS) y el Banco Mundial, muestran en la actualidad nuevas estimaciones según las cuales más de 1.000 millones de personas en el mundo experimentan alguna forma de discapacidad[77]. Casi una quinta parte del total mundial estimado de personas que viven con discapacidades, es decir, entre 110 y 190 millones de personas deben afrontar dificultades importantes [77]. Son muchas las formas de expresión, alcances y consecuencias que traen consigo las discapacidades. Así, una importante parte de la población mundial evidencia distintos tipos de déficits sensitivos, cognitivos y motores. Dirigido a los déficits motores, existen diversos tipos de discapacidad física que afectan a distintas partes del cuerpo, en mayor o menor medida. Algunas de éstas son la debilidad en algunas zonas, las limitaciones del control muscular, que causan movimientos involuntarios, falta de coordinación o parálisis, limitación de las sensaciones, problemas de articulaciones y falta de miembros o extremidades. La rehabilitación física es el conjunto de procedimientos dirigidos a ayudar a una persona a alcanzar el más completo potencial físico, psicológico, social, vocacional y educacional compatible con su deficiencia fisiológica o anatómica y limitaciones medioambientales. La meta de los programas de rehabilitación es obtener el máximo nivel de independencia de sus pacientes, tomando en cuenta sus capacidades y aspiraciones de vida. El avance de la tecnología ha permitido el desarrollo de procedimientos que ayudan a explorar la actividad cerebral durante las terapias de rehabilitación. A partir de éstas, se ha advertido que la actividad cerebral en sí constituye un factor de vital importancia en la rehabilitación motora. Así, a nivel de investigaciones, una vertiente de estudios se ha orientado a tratar distintas metodologías de reentrenamiento tomando en cuenta este aspecto, con el fin de determinar y/o hallar la técnica más efectiva y eficiente. Actualmente el uso de los juegos de video y de la realidad virtual se ha expandido rápidamente en el campo de la medicina, generando investigaciones que procuran verificar su utilidad dentro del campo de la rehabilitación. La realidad virtual provee un medio adecuado para la consecución de una serie de requisitos de gran importancia durante la intervención de rehabilitación. Específicamente, la terapia basada en realidad virtual puede contar con un contexto funcional, concreto y motivante para los pacientes. Los sistemas de realidad virtual pueden ofrecerle al usuario la posibilidad de participar en experiencias atractivas y gratificantes. Además, tanto el paciente como el terapista son beneficiados por la adaptabilidad que podrían tener estos sistemas, así como también por las mediciones y documentos que éstos podrían aportar a fin de permitir la verificación del impacto del proceso de rehabilitación. En la actualidad tecnologías de punta son empleadas para la producción de ambientes simulados interactivos y multidimensionales. Para ello se introducen dispositivos visuales (e.g. monitores, lentes con pantallas integradas, dispositivos para brindar estímulos del tacto, hardware para el seguimiento corporal, etc.) con lo que se busca sumergir al paciente en un entorno virtual y dotarlo de la capacidad de modificarlo en función de las tareas que requiera realizar. 9 Ante la búsqueda de la mejor alternativa para la aplicación de la realidad virtual y con el fin de procurar mayores beneficios posibles a los pacientes tratados con estas tecnologías, se incorporan dispositivos que inicialmente se han sido diseñados con otros fines pero que han mostrado ser funcionales en esta área, generando la adopción de los mismos en estas terapias (e.g. Xbox 360™ Kinect TM , Wii™, etc.). Aunque esta tecnología parece exponer un gran potencial en cuanto a los procedimientos de rehabilitación motora, aún resulta relativamente nueva en el mercado, siendo un campo de estudio en progreso. Debido a la creciente problemática de salud específicamente en el ámbito de discapacidad motora, el presente Trabajo de Grado propone y desarrolla una arquitectura dedicada a la rehabilitación de pacientes con discapacidad motora en los miembros superiores a través de realidad virtual, cuyo eje central lo constituye el diseño y desarrollo de video-juegos con fines terapéuticos, dirigidos a pacientes infantes en edades comprendidas entre los 6 y 12 años. Esta propuesta se encuentra inscrita dentro del Proyecto Nacional Simón Bolívar, sección Suprema Felicidad Social, cuyo objetivo primordial es brindar atención integral a la población con discapacidades. En el presente trabajo se considera como objetivo principal desarrollar una arquitectura de bajo costo, que sirva como una herramienta alternativa a la terapia tradicional, en cuanto al proceso de rehabilitación de los miembros superiores del cuerpo. Para ello se debe satisfacer que la solución esté desarrollada para un hardware especializado de bajo costo, brindar mecanismos de control con los que se pueda monitorear el progreso del paciente a lo largo del tiempo, así como distintos mecanismos que permitan al terapeuta realizar dicha evaluación, definir actividades terapéuticas que exploten elementos asociados al proceso de re-entrenamiento de un miembro afectado como lo son la motivación, repetición y retroalimentación, evaluar las actividades terapéuticas con personal médico calificado para verificar la efectividad de las mismas como medio de terapia alternativa, generar mecanismos de calibración del hardware utilizado, que permitan la adaptación de la actividad terapéutica al rango de movilidad reducido que presente el paciente, e idear mecanismos que faciliten la inclusión de nuevas actividades terapéuticas al sistema planteado. El Capítulo 1 presenta el marco teórico acerca de las enfermedades causantes de déficit motor así como de los métodos convencionales para la rehabilitación. En el Capítulo 2, se muestran los conceptos asociados a la realidad virtual y su influencia en la rehabilitación motora, además de los diversos trabajos encontrados en la literatura realizados en esta área. Luego, en el Capítulo 3 se presenta el desarrollo práctico realizado para el presente trabajo, especificando las distintas funcionalidades implementadas y las estrategias llevadas a cabo. Finalmente, el Capítulo 4 expone las especificaciones de cada juego incluyendo la evaluación de cada uno desde el punto de vista terapéutico. 10 Capítulo 1. Enfermedades causantes de déficit motor y métodos para rehabilitación Este capítulo tiene sustento en las bases teóricas médicas referidas a los déficits de movilidad, a las enfermedades causantes de tales discapacidades y al conjunto de tratamientos conocidos e históricamente aplicados ante la expresión de estos cuadros de incapacidad. Para el desarrollo de este capítulo se abordará inicialmente un conjunto de conceptos básicos referidos al ámbito de rehabilitación, seguido de la exposición de las afecciones más comunes de la movilidad corporal (en concreto de las extremidades). También se estudiarán los distintos métodos que se han establecido para el ejercicio de la rehabilitación de pacientes con problemas motores, tomando en cuenta para ello las técnicas terapéuticas cuyo fundamento radica en la reactivación cerebral, debido a la importancia que representa el complejo cerebral en este tema. Seguido, se describen generalidades de las estrategias de rehabilitación luego de ciertas afecciones específicas, que debido a su alta tasa de ocurrencia resultan ampliamente estudiadas. Finalmente se hace mención de algunas medidas empleadas para la clasificación del grado de afección que conlleve una enfermedad sobre un paciente, y además se muestra de manera general, las características más resaltantes de los planes de ejercitación llevados a cabo ante el tratamiento de las afecciones más comunes que incurren daños a nivel motor. A continuación un conjunto de conceptos básicos que facilitarán la comprensión del contenido expuesto en este trabajo. 1.1. Conceptos básicos En la actualidad uno de los principales problemas de salud que afectan a las sociedades de los distintos países del mundo, corresponde a las afecciones relacionadas a las discapacidades funcionales que reducen en gran medida la calidad de vida de quienes la portan e inclusive de los más allegados a ellos. De acuerdo con la Ley para las personas con discapacidad de la República Bolivariana de Venezuela, aprobada el 29 de diciembre del 2006 y publicada en la Gaceta Oficial N° 38.598 del 5 de enero de 2007, las personas con discapacidad “son todas aquellas personas que por causas congénitas o adquiridas presenten alguna disfunción o ausencia de sus capacidades de orden físico, mental, intelectual, sensorial o combinaciones de ellas” [29]. Son muchos los factores que inducen a la concepción de discapacidades, de hecho éstos pueden ocurrir antes del nacimiento, durante el parto, por accidentes o enfermedades. De algunas enfermedades que generan una discapacidad se desconoce el origen, pero muchas de ellas se deben a múltiples factores como problemas genéticos, congénitos, accidentes, enfermedades, insumo de medicamentos o drogas por parte de la madre durante el embarazo, complicaciones durante el parto e incluso por un parto mal atendido. Además, factores que afecten directamente al complejo neurológico, como accidentes cuyos efectos hayan lesionado el cerebro, la columna vertebral o los nervios de alguna parte del cuerpo, el uso y 11 consumo de algunas drogas que afectan al sistema nervioso central, o daños en alguno de los órganos de los sentidos como la visión, audición, entre otros. Una de las causas más comunes la constituye los problemas asociados a ataques cerebro-vasculares (ACV)[87]. La fibrilación auricular (una anomalía en el ritmo cardíaco que provoca un pulso irregular y más rápido al normal) es responsable de gran parte de los accidentes cerebro-vasculares. Según Casorla [16], en todo el mundo, alrededor de 15 millones de personas sufren un accidente cerebro-vascular anualmente, de ellos aproximadamente 5 millones mueren en menos de un año y 5 millones quedan discapacitados de por vida. En Venezuela, se estima que hay 230.000 pacientes de Fibrilación Auricular y se proyecta que esta cifra aumente a un millón para el año 2050 [4]. En Venezuela, el 8.79% de las muertes se deben al ictus cerebral[41]. La incidencia en diferentes estudios publicados en el año 2003 por la Gaceta Médica de Caracas [10] indica que se producen entre 150 y 300 casos nuevos por cada 100.000 habitantes al año. 1.1.1. Rehabilitación La rehabilitación es el conjunto de procedimientos dirigidos a ayudar a una persona a alcanzar el más completo potencial físico, psicológico, social, vocacional y educacional compatible con su deficiencia fisiológica o anatómica y limitaciones medioambientales. La rehabilitación interviene directamente en la causa y los efectos secundarios del daño y la enfermedad. Durante el proceso de recuperación del paciente que padece la afección, se evidencian tres aspectos: 1. Patológico, referido a las secuelas a nivel de un órgano, como la presencia de cierto déficit sensorial. 2. Funcional, en el que se distingue la restricción o ausencia de la habilidad de una persona para realizar una tarea o actividad dentro de un rango considerado humanamente normal. 3. Social, relativo a la pérdida de roles en relación a la discapacidad (e.g el rol laboral). El objetivo de la rehabilitación consiste básicamente en obtener el máximo nivel de independencia de sus pacientes, tomando en cuenta sus capacidades y aspiraciones de vida. Por otra parte, la fisiatría es la especialidad médica que se ocupa fundamentalmente de la rehabilitación de personas con patologías motoras. Ésta trabaja básicamente en tres grandes áreas: la medicina física, la medicina de rehabilitación y los estudios electrofisiológicos. El fisiatra coordina entonces el equipo de rehabilitación, el cual está constituido por múltiples profesionales que desde cada una de sus especialidades ayuda al paciente a una capacitación integral. Los desórdenes específicos más comunes en rehabilitación son las afecciones cerebro-vasculares, esclerosis múltiple, lesión medular, pacientes oncológicos, problemas cardiovasculares, dolor crónico, amputados, parálisis cerebral, dolor lumbar, osteoporosis, artritis, enfermedad vascular periférica, quemados, lesiones del arte y del deporte, desórdenes de trauma acumulativo, entre otros. En tal sentido, entre los mayores problemas en rehabilitación se destacan los cuidados primarios del paciente discapacitado, la rehabilitación del paciente pediátrico, los adultos y niños con discapacidades congénitas, la rehabilitación geriátrica, la espasticidad o constricción muscular y otros. 12 Uno de los objetivos principales de la fisiatría es la rehabilitación de los movimientos corporales en pacientes con discapacidades motoras. Teniendo en cuenta esta meta, se realizan sesiones de reentrenamiento muscular que traen consigo la ejecución de una extensa gama de ejercicios, los cuales están basados en movimientos que pueden ser de motricidad gruesa o fina. A continuación, una breve explicación sobre estos tipos de motricidad. 1.1.2. Motricidad gruesa y fina La motricidad es la capacidad del hombre y de los animales de generar movimiento por sí mismos. Para ello debe existir una adecuada coordinación y sincronización entre todas las estructuras que intervienen en el movimiento (sistema nervioso, órganos de los sentidos, sistema musculo-esquelético). Según lo descrito en [71], la motricidad se puede clasificar según sus características de trabajo muscular en motricidad gruesa y motricidad fina. La motricidad gruesa corresponde al conjunto de movimientos que implican un cambio drástico de posición. Es aquella habilidad de generar movimientos grandes tales como agitar un brazo o levantar una pierna. El desarrollo motor grueso involucra a los más grandes y fuertes músculos del cuerpo, los cuales comienzan a desarrollarse desde la niñez temprana, época en la que sostienen la cavidad craneal, y conforme pasa el tiempo permiten sentarse, gatear, y luego caminar, correr y saltar. Por su parte, la motricidad fina comprende todas aquellas actividades que necesitan de precisión y un elevado nivel de coordinación. Esta última motricidad se refiere a los movimientos realizados por una o varias partes del cuerpo, que no tienen una amplitud sino que son movimientos de mayor precisión. Como menciona Cano [14], se cree que la motricidad fina se inicia hacia el año y medio de edad, cuando el niño, sin ningún aprendizaje, empieza a realizar movimientos imprecisos, colocar cualquier objeto pequeño en algún vaso, botella o agujero, entre otras actividades. La motricidad fina implica un nivel elevado de maduración y un aprendizaje largo para la adquisición plena de cada uno de sus aspectos, ya que hay diferentes niveles de dificultad y precisión. Para conseguirlo se ha de seguir un proceso cíclico: iniciar el trabajo desde que el niño es capaz, partiendo de un nivel muy simple y continuar a lo largo de los años con metas más complejas y bien delimitadas en las que se exigirán diferentes objetivos según las edades. Los aspectos de la motricidad fina que se deben trabajar más a nivel escolar en general son: coordinación viso-manual, motricidad facial, motricidad fonética, motricidad gestual [14]. Tanto las habilidades de motricidad gruesa como las de motricidad fina son vulnerables ante daños que pueden o no tener relación directa con el área afectada. Así no solo accidentes, sino además enfermedades cerebrales, cromosómicas y demás, pueden significar agravios a las cualidades motrices de un individuo. Se sigue con una visión más profundizada a cerca de las causas más generales de los daños referidos a las características motrices finas y gruesas. 13 1.2. Daños de la motricidad Los nervios periféricos son aquellos que se encuentran fuera del cerebro y de la médula espinal. Los trastornos de los nervios periféricos distorsionan o interrumpen los mensajes entre el cerebro y el resto del cuerpo. Existen aproximadamente más de 100 tipos de trastornos de los nervios periféricos[5]. Éstos pueden afectar a uno o a muchos nervios. Algunos surgen como resultado de otras enfermedades, como los problemas neurológicos de los diabéticos. Otros, como el síndrome de Guillain-Barre [38], pueden ocurrir después de una infección viral, u otros a consecuencia de la compresión de un nervio, como el síndrome del túnel del carpo o el síndrome de la salida torácica. Algunas personas nacen con trastornos en los nervios periféricos. En otros casos, como el síndrome de dolor regional complejo, el problema se inicia a partir de una lesión. Según Sevlever [76] los accidentes vehiculares son una de las principales causas de muerte en la población general y dan cuenta de gran parte de todos los traumatismos del sistema nervioso central (SNC). Las caídas constituyen otra causa de traumatismos del SNC, alcanzando picos de incidencia entre los ancianos y los muy jóvenes. Las lesiones por armas de fuego son una tercera causa de daños en el SNC, siendo éstas de gran impacto entre las personas de 25 a 35 años de edad. Debido a que el cerebro es el órgano que gestiona las distintas órdenes por medio de las cuales cada parte del cuerpo ejecutará una acción, una afección en el mismo, como una lesión o enfermedad cerebral, en lo general se evidenciará como alguna discapacidad a nivel motor. 1.2.1. Enfermedades y lesiones cerebrales Se entiende por daño cerebral a cualquier lesión que se produce en las estructuras cerebrales de una persona como consecuencia de un accidente o una enfermedad. Una de las lesiones cerebrales más frecuentes es el traumatismo craneoencefálico (TCE) producido por accidentes de tráfico, laborales, deportivos, caídas o agresiones. Aun así, existen otras muchas causas, como tumores cerebrales, anoxias cerebrales por sufrimiento fetal, tóxicos, enfermedades metabólicas o ictus cerebrales. Parálisis cerebral La parálisis cerebral es un grupo de trastornos que pueden comprometer las funciones del cerebro y del sistema nervioso como el movimiento, el aprendizaje, la audición, la visión y el pensamiento, y es causada por lesiones o anomalías a nivel cerebral. En el caso de anomalías, la mayoría de estos problemas ocurre a medida que el bebé crece en el útero, pero se pueden presentar en cualquier momento durante los primeros dos años de vida, mientras el cerebro del bebé aún se está desarrollando. La parálisis cerebral obedece a la lesión o funcionamiento anómalo del sistema nervioso central, se caracteriza por posturas y movimientos anormales del paciente, también por alteraciones del tono postural del mismo. Se define como un trastorno predominantemente motor del movimiento y de la postura, que ocurre como secuela de una agresión al SNC. Dicha agresión puede venir dada debido a condiciones que se presentan antes del nacimiento, en el período perinatal o primeros años de vida y que se pueden acompañar de trastorno del desarrollo intelectual, retardo del lenguaje, trastornos sensoriales, de la conducta y la afectividad. 14 Según Romero et al. [71], la parálisis cerebral se clasifica con base en las extremidades a las que afecta y el tipo de problema del movimiento que origina en: Monoplejia, cuando se afecta un brazo o una pierna. Hemiplejia, si se afecta el brazo y la pierna del mismo lado. Paraplejia, si se afectan las dos piernas. Diplejia, si existe mayor afectación de las piernas y poca de los brazos. Triplejia, si se afecta un brazo y las dos piernas. Cuadriplejia, cuando la afectación es de brazos y piernas por igual. Los tipos de trastornos musculares y del movimiento son: la espasticidad, que produce un aumento del tono muscular [26], por lo que los músculos se encuentran rígidos y duros; la atetosis, que se caracteriza por movimientos musculares irregulares e incontrolados y las reacciones musculares mixtas, en las cuales se pueden dar situaciones de los dos casos anteriores (espasticidad y atetosis). A partir de las clasificaciones previas, combinando la localización y el tipo de afección muscular, obtendremos la clasificación de la parálisis, así, si afecta a medio cuerpo y presenta espasticidad tendremos una hemiplejia espástica. Al mismo tiempo es posible que estas afecciones se den en distintos grados. Será monoplejia el trastorno que afecta de manera completa a la extremidad (anulando por completo su movilidad). Por otra parte, si la extremidad presenta disminución de fuerza o parálisis parcial, se hablará de monoparesia. Como lo muestra Castellanos [70], se presenta de forma semejante la hemiparesia, paraparesia, diparesia, triparesia, cuadriparesia. Accidente cerebro-vascular (ACV) Como se específica en[18], un ataque cerebral es una afección que ocurre básicamente cuando el flujo sanguino cerebral se detiene. La distribución e irrigación de la sangre se altera causando daños cerebrales, y con ello pérdida de capacidades por parte del cerebro, dada como consecuencia del ataque a las células cerebrales, las cuales en ausencia de sangre (y oxígeno) comienzan a morir. Esta pérdida de capacidades cerebrales se traduce muchas veces en agravaciones sensoriales, intelectuales y comúnmente en motoras. Así según cuál sea la porción del cerebro afectada se podrán reflejar discapacidades como perdida en habilidades del lenguaje, del movimiento y de la memoria. Existen distintos tipos de ACV acorde a su forma y disposición de ocurrencia. De esta forma se tienen: ACV isquémico y ACV hemorrágico. Un ACV isquémico ocurre cuando se forman coágulos de sangre que obstruyen arterias cerebrales y en consecuencia cortan el flujo de sangre hacia alguna región de éste, como se observa en la Figura 1. 15 Figura 1: Representación de un ACV isquémico. Como se muestra en la Figura 2, un ACV hemorrágico es causado por la ruptura de un vaso sanguíneo en el cerebro,que a su vez pueden desencadenarse como producto de desórdenes que afecten a los vasos sanguíneos, como la hipertensión y presencia de aneurismas (consultar [58] para mayor detalle). Figura 2: Representación de un ACV hemorrágico. Esclerosis múltiple La esclerosis múltiple es un trastorno neurológico crónico que afecta al sistema nervioso central (cerebro y médula espinal). El proceso de la enfermedad ocasiona inflamación y daño a la mielina (aislamiento de las fibras nerviosas) y otras células dentro del sistema nervioso. Debido a que la mielina ayuda a conducir las señales nerviosas, el daño a la mielina ocasiona un deterioro en la señalización entre los nervios y puede afectar la sensación, el movimiento y el pensamiento normal. Entre sus síntomas musculares se encuentra pérdida del equilibrio, espasmos musculares, entumecimiento o sensación anormal en cualquier área, problemas para mover los brazos y las piernas, problemas para caminar, problemas con la coordinación y para hacer movimientos pequeños, temblor y/o debilidad en uno o ambos brazos o piernas. Lesiones del Plexo braquial El plexo braquial es un conjunto de ramas nerviosas ubicadas entre la base del cuello y el hueco axilar (nervios cervicales anteriores ventrales de C5 - C6 - C7 - C8 y T1 como se observa en la Figura 3) (ver [73] para mayor detalle) que permiten la movilidad de estructuras como el brazo, antebrazo y mano, además de la recepción de sensaciones por medio de éstos. Por ello, las lesiones del plexo braquial ocasionan pérdida de fuerza con afectación de la sensibilidad en miembros superiores. 16 Las lesiones referidas al plexo braquial pueden venir dadas por accidentes automovilísticos, en motocicletas, deportes, mordidas de animales, heridas de balas o de objetos cortantes, e inclusive pueden venir asociadas con el nacimiento. Storment[80] estima que este último caso ocurre de 2 a 5 veces por cada 1000 nacimientos, dentro de los cuales del 80% al 90% tiende a solventarse con el tiempo y no traen males mayores. Figura 3: Ubicación del plexo braquial. Otras Lesiones Enfermedades, o problemas durante o antes del nacimiento no son las únicas causas de los daños de las habilidades motoras. Por lo contrario, accidentes, caídas, heridas de animales, entre otros, también pueden producir lesiones que inhabiliten o disminuyan la funcionalidad de ciertas partes de cuerpo, siendo incluso muchas veces responsables de amputaciones. Una lesión traumática no siempre está relacionada con extremidades (como en el caso de fracturas de brazos y piernas), sino además puede estar relacionada con el cerebro, comprometiendo distintas capacidades del resto del cuerpo. Precisamente esto ocurre cuando la lesión afecta al SNC. Una lesión traumática del SNC es el resultado de fuerzas mecánicas externas aplicadas al cráneo y el contenido intracraneal que conduce a disfunciones temporales o permanentes, incapacidad funcional y/o alteraciones psicosociales. Pueden ser lesiones primarias (como las fracturas de cráneo, hematomas intracraneales, laceraciones, contusiones, heridas penetrantes) o secundarias. Las fracturas de cráneo indican que la fuerza del impacto ha sido considerable. De acuerdo a las estadísticas presentadas por Sevlever [76], si existe fractura de cráneo con algún grado de alteración de la conciencia uno de cada cuatro pacientes desarrollará un hematoma cerebral, mientras que en una fractura de cráneo en un paciente sin alteraciones de la conciencia esta cifra decrece considerablemente. 1.3. Terapias de rehabilitación Como se mencionó anteriormente, la rehabilitación constituye una forma eficaz de tratamiento ante accidentes y otros tipos de afecciones, entre las cuales destacan las que provienen de la vida intrauterina. En particular, la existencia o la posibilidad de afecciones cerebrales y/o musculares a nivel de formación del niño hacen necesario el establecimiento de mecanismos que permitan el diagnóstico y con ello el desarrollo de un plan dirigido a la futura rehabilitación del lactante, dado el caso en que la necesite. Durante los últimos meses de la vida fetal y durante la primera etapa de la infancia, la intervención motora forma parte esencial de la atención temprana. A partir del momento en que la segmentación y los 17 comportamientos analíticos se van sedimentando en situaciones específicas, normales o patológicas, sin perder el concepto de globalidad, hay que acudir a terapias específicas en áreas específicas[23]. Antes de cualquier rehabilitación se requiere un diagnóstico. En función a éste, se asignará la terapia que más se ajuste a las discapacidades de los pacientes. 1.3.1. Tipos de terapias de rehabilitación Flórez [27] clasifica las terapias de rehabilitación en tres (3) grandes grupos: técnicas de compensación, técnicas de facilitación y enfoques modernos. A continuación se explica cada uno de estos tipos de terapia, especificando el objetivo que persiguen y las características y/o técnicas más resaltantes según la literatura consultada. Técnicas de compensación Las técnicas de compensación consisten en incrementar el potencial productivo referido a tareas de actividades diarias por parte de los pacientes. El tratamiento se fundamenta en el reentrenamiento de las capacidades residuales a expensas (en su mayor parte) de miembros no afectados. Técnicas de facilitación Las técnicas de facilitación se centran en mejorar y facilitar la calidad de movimiento referida al área motora afectada. Comienzan a surgir en la década de los 40, cuando sus autores en función a sus experiencias y sus observaciones comienzan a proponer estos métodos de rehabilitación. Entre los métodos tradicionales de facilitación se pueden destacar: Método de Rood [27], Método Bobath [9], Método Brunnstrom [27], Método de Kabat o Facilitación Neuromuscular Propioceptiva (FNP) [20], Método de Perfetti o Ejercicio Terapéutico Cognoscitivo, Método de Vojta, entre otras. Técnicas modernas A partir del año 1980 comienza a surgir nuevos conceptos y descubrimientos referidos al mundo de las terapias, que implican la aparición de nuevas técnicas. Uno de los descubrimientos más importantes a partir de entonces es que un cerebro adulto posee una plasticidad mucho mayor de lo que anteriormente se creía. Como consecuencia de tal avance, los estudios referidos a rehabilitación se han volcado hacia este aspecto, produciendo nuevas técnicas que en la actualidad han sido puestas a pruebas y han mostrado grandes beneficios. Entre las más comunes se destacan: Marcha sobre cinta rodante con suspensión parcial del peso corporal Tiene como objetivo la reeducación de la marcha. Consiste básicamente en una caminadora especial, en la cual el paciente se encuentra atado a un juego de arnés que reducen el peso corporal, haciendo que los miembros inferiores deban lidiar solo con una porción (ajustable) de peso corporal. 18 Constraint-Induced Movement Therapy (CI therapy) Constraint-Induced Movement Therapy o terapia de restricción de movimiento del miembro sano, consiste en procurar restablecer la movilidad funcional de un miembro a partir de la ejercitación forzada del mismo. Corresponde a un conjunto de técnicas que han sido objetos de múltiples estudios controlados, bajo un consenso aleatorio de población, y cuyos resultados han verificado una reducción sustancial del déficit motor en las extremidades afectadas de los pacientes que han padecido de afecciones como ACVs, parálisis cerebral, y semejantes. Este método terapéutico se deriva de estudios aplicados a animales, en los que se verifica la reorganización cerebral que causa. En concreto, Taub et al. [85] e investigadores como C. Lashley, S. Tower, S. Franz, W. Chambers, H. Knapp, E. Taub, A. Berman, entre otros han realizado estudios sobre primates, en los cuales restringe el movimiento de miembros no afectados por cierto período de tiempo, teniendo como resultados que los mismos regeneran el movimiento de la zona dañada, obteniendo una extremidad altamente funcional a partir de una con discapacidad. Programas de fortalecimiento muscular y reacondicionamiento físico En múltiples ensayos clínicos se demuestra que es posible aumentar la fuerza y la capacidad funcional del hemipléjico con ejercicios de musculación y contra-resistencia sin provocar efectos adversos [27]. Esta metodología de rehabilitación se fundamenta entonces, en protocolos de ejercicios isotónicos e isocinéticos que han sido propuestos a partir de los resultados positivos, descritos mediante el empleo de este tipo de ejercitación (musculación y contra-resistencia). Estimulación sensitivo-motora asistida con robots Es una tendencia actual de la rehabilitación, con la que se incluye hardware robótico al cual se añade algún tipo de feedback como la resistencia ante ciertos eventos, o como la detención o inhibición de ciertos actos motores. Sistemas de realidad virtual Los sistemas de realidad virtual son técnicas que emplean tecnología computarizada a fin de recrear una realidad alterna controlada y enfocada a la recuperación de distintas capacidades. Un proceso de rehabilitación física trae consigo un proceso de reorganización cerebral, de hecho ante el avance de la tecnología, hoy día se sabe que los resultados de rehabilitación dependen mucho más de esta reorganización que de la ejercitación a nivel muscular. A continuación una visión general del suceso de reorganización o reactivación cerebral. 1.4. Reactivación cerebral A partir de la década de los 90, se da uno de los avances más importantes en término del conocimiento de la relación entre la rehabilitación física y la actividad cerebral, los estudios dirigidos a la rehabilitación 19 motora luego de accidentes, ACVs, parálisis, etc., vuelcan sus objetivos básicamente a la cualidad cerebral conocida como plasticidad. Como lo describe Castroviejo [17], la plasticidad cerebral corresponde a la adaptación funcional del SNC para minimizar los efectos de las alteraciones estructurales o fisiológicas sin importar su causa. Anteriormente se concebía al cerebro adulto como un órgano relativamente “estático” en el cual los cambios presentados eran menores, hoy en día se sabe que, no solo el cerebro realiza grandes procesos re- organizativos, sino que además está constantemente cambiando. De hecho, siendo la plasticidad responsable de cambios, el aprendizaje probablemente se le atribuya, pues este proceso resulta intrínseco a un cambio. El mecanismo celular que probablemente es responsable de la plasticidad en los humanos aún sigue siendo un tema de investigación. Los conocimientos referidos a esto no están completamente claros [34]. Sin embargo, se estipulan paradigmas según los cuales se genera este mecanismo celular. Hallet [34] define cuatro (4) procesos: cambio en el balance de excitación e inhibición, fortalecimiento o debilitamiento de la actividad de la sinapsis, cambios en la excitabilidad de la membrana neuronal y cambios anatómicos. Los daños cerebrales en personas que sufren de ataques cerebro-vasculares, parálisis y afecciones semejantes han sido asociados con posteriores ocurrencias de procesos re-organizativos en tanto de la parte ipsilateral como la contralateral de la corteza sensorial-motora. Así la incapacidad motora puede generarse como consecuencia de daños a la corteza cerebral o inclusive de tractos fibrosos, los cuales, a su vez pueden ser afectados por daños a nivel axonal neuronal, que según estudios podrían estar relacionados al déficit motor del lado corporal contrario. En [13] se muestra que la actividad en la corteza primaria cerebral en personas con discapacidad motora (que se puede observar en la Figura 4), a partir de ejercitación de las áreas con movilidad mermada resulta semejante a la activación que tiene personas sin afección durante el aprendizaje de ejercicios más complejos y no sabidos, lo que induce a la ejercitación como medio de rehabilitación. Figura 4: Activación de la corteza primaria cerebral. Existe evidencia[35] [21] que la superposición de tejidos (característica de la organización somatotópica de la corteza motora primaria) puede contribuir a la recuperación luego de un daño parcial. También se cree que la regeneración de capacidades motoras puede estar auxiliada por neuronas propias de la corteza pre-motora y suplementaria motora. Por otra parte, investigaciones han aportados resultados referidos a la 20 variabilidad de recuperación en función a la forma de afección. Se ha destacado que la capacidad de rehabilitación se ve influenciada por la zona o los tractos fibrosos a los cuales afecta una lesión. Diversos estudios en animales [35] señalan que un entrenamiento apropiado causa una redistribución a nivel cerebral que implica la adaptación neuronal dirigida a reabastecer las capacidades mermadas, lo cual es altamente probable que ocurra en el ser humano. También, evidencia electrofisiológica expone que puede ocurrir una reorganización cerebral, con la cual se dé la adaptación de grandes redes neuronales relativas a lado afectado o al lado contrario. Prueba de esto es que luego de afecciones como hemiparesia, la reorganización involucra a caminos descendentes motores propios del lado contrario a la lesión. Se cree que esto ocurre con el objeto de generar medios de comunicación alternativos a partir de la proliferación de fibras nerviosas por medio de neuronas sobrevivientes, o por la generación de nuevas sinapsis, redundancia del sistema nervioso o por un grupo selecto de neuronas [35]. El potencial de rehabilitación está influido por distintos factores, como la edad y la angiopatía microvascular, que afectan a la masa cerebral por completo. Con respecto al factor de la edad en la recuperación clínica, el potencial de rehabilitación resulta mucho mayor en lesiones adquiridas durante la niñez, incluso métodos tan invasivos como la hemisferectomía son frecuentemente seguidos por buena recuperación. Estudios basados en imágenes cerebrales[21], muestran que un recobro metabólico y el proceso de plasticidad en las restantes estructuras del hemisferio operativo pueden tener un papel de vital importancia en esta recuperación. Estudios médicos han mostrado que la rehabilitación no solo puede proveer actividad funcional a personas de mayor edad o a personas con enfermedades médicas, sino también a pacientes de afecciones cerebrales causadas por ataques cerebro-vasculares, parálisis cerebral y semejantes. Incluso, con respecto al tratamiento de los ACV, existe evidencia de que el ejercicio de terapias tempranas luego del ataque logra un beneficio acelerado en comparación a si se realiza de forma tardía (además de ser así, durante el transcurso en el que no se atiende la enfermedad podrían resultar mayormente lesionadas la extremidades vinculadas [22]). En términos de intensidad, existen dos paradigmas para establecer las dinámicas de rehabilitación: método tradicional y método intensivo[74]. El primero incluye técnicas de neuro-facilitación (promoviendo movimientos normales e inhibiendo movimientos que no lo son), entrenamiento basado en tareas específicas y entrenamiento enfocado en el reaprendizaje de tareas que implican la interacción de distintos sistemas como el musculo-esquelético, perceptual, neural y cognitivo. Según Schaechter [74], luego de culminar el programa de rehabilitación un 50% de los pacientes aún muestran una parcial dependencia en tareas de la vida diaria. Una segunda alternativa para el establecimiento de la rehabilitación concuerda con la rehabilitación intensiva, la cual según muchos estudios confiere grandes beneficios a la movilidad luego de un ACV. Muchos autores han aplicado distintas técnicas terapéuticas basándose en el principio de rehabilitación intensiva y han obtenido resultados gratos, variables en función a las técnicas aplicadas. Dromerick et al. [24] desarrollan una investigación en la cual intentan distinguir la diferencia en resultados entre una rehabilitación basada en la restricción de movimiento del lado sano (CI therapy) y http://es.wikipedia.org/wiki/Angiopat%C3%ADa 21 una basada en métodos tradicionales de facilitación, ambos bajo el enfoque de rehabilitación intensiva. Para dicho estudio, 23 personas fueron seleccionadas, teniendo en consideración un criterio de aceptación con el cual se asegura cierto grado de movilidad en cada paciente y distribuidas de forma aleatoria en dos grupos (a uno le correspondería el métodos terapéutico de movilidad inducida y al otro, métodos tradicionales). Luego de los 14 días de duración del estudio, ambos grupos mejoran en la realización de movimientos de motricidad fina y gruesa. Kwakkel et al. [46] realizan un estudio enfocado en los efectos de la rehabilitación intensiva. El mismo consiste en una investigación basada en referencias de estudios experimentales, con las cuales intenta dar una generalización. Según sus conclusiones, una pequeña pero estadísticamente significante relación intensidad - efecto se presenta en la rehabilitación. En relación a la parálisis cerebral, las terapias de rehabilitación física son ampliamente usadas. Experiencias clínicas indican que el ejercicio de este tipo de terapias puede producir cambios muy importantes en el funcionamiento del sistema nervioso central en pro de las capacidades mermadas, como se muestra en [55]. Igualmente, en [84] se realiza un estudio en el cual se aplica la técnica terapeuta basada en la restricción de movimientos del miembro sano, a un conjunto de pacientes (niños) diagnosticados con hemiparesia, teniendo como objetivo determinar el grado del beneficio que aporta esta particular técnica a niños con parálisis cerebral. La investigación de Taub et al. [84] considera a 18 niños en un rango de edad de entre 7 a 96 meses de edad, diagnosticados con parálisis cerebral. De éstos se extrajo dos grupos, un primer grupo como conjunto de control, al cual se le aplicarían técnicas tradicionales, y un segundo grupo de prueba al cual se le trataría con la terapia de restricción de movimiento. Se estableció un período de 6 horas por día durante 21 días consecutivos, luego de los cuales se obtiene que a pesar de que ambos grupos mejoran, el de experimentación logra resultados notoriamente mejores que el de control. Similarmente en [42] se muestran pruebas del beneficio de la terapia física en el tratamiento de niños con parálisis cerebral. En particular, en esta ocasión se comparan distintos enfoques de la terapia física, llegando a la conclusión de que ambos resultan altamente favorables. 1.5. Medidas de la motricidad Uno de los problemas con que se enfrenta no solo el establecimiento de una terapia adecuada a una enfermedad, sino las investigaciones que tiene por objeto ofrecer las mejores opciones de rehabilitación ante tales discapacidades contribuyendo de esta forma con el bienestar de los afectados, lo constituye la dificultad de clasificar una enfermedad dada su afección. Mecanismos internacionalmente aceptados han sido desarrollados en afán de establecer estándares que faciliten la clasificación de una enfermedad dada las características del cuadro presentado por el paciente, facilitando de esta manera el diagnóstico terapéutico. Además provee de medios para medir la evolución de las metodologías de recuperación propuestas, y a nivel investigativo, sirviendo como medidas ante la verificación de un resultado exitosos o no, e incluso para contrastar la funcionalidad entre técnicas. 22 1.5.1. Métodos de evaluación según zonas afectadas Puesto a la complejidad en cuanto a la tarea de clasificación de enfermedades se trata, muchas de las medidas establecidas parten de afecciones fácilmente observables como una movilidad restringida o un desuso, que pueden ser discriminadas en función a la zona de afección. Según [20], de esta manera en función a la extremidad o parte del cuerpo que afecten resulta posible destacar distintas medidas de los grados de afección de alguna enfermedad con repercusiones en la motricidad. A continuación una tabla donde se resume las distintas medidas. Evaluación Descripción De miembros superiores Ejemplos de los test empleados para la clasificación de afecciones referidas a los bazos son Frenchay Arm Test, el Action Research Arm Test y el Nine-Hole Peg Test[89]. Del tronco Uno de los test empleados para la clasificación de las afecciones del tronco es el test de Control del Tronco, que explora la capacidad de realizar transferencias cama-silla-de pie. De la marcha La deambulación se puede analizar con el Índice Barthel o, más específicamente, con las Categorías de Marcha Funcional (FAC), velocidad de marcha (en cm/s) o las Categorías de Marcha Funcional del Hospital de Sagunto (FACHS). De la comunicación Su valoración es trabajosa y de aplicación lenta, por lo que se deben aplicar fragmentos de cada prueba en sucesivas visitas. Entre las pruebas se destacan: Test de Boston, el Test de despistaje de afasias de Friedrich, el Token Test o la Batería Western. Cognitiva Se destacan Hodkinson, el WAIS, el Minimental Test. Emocional La escala de depresión geriátrica (GDS) es breve y fácil de aplicar, pero tiene alta tasa de falsos negativos. Existen además instrumentos genéricos que no son específicos de ninguna patología en exclusiva. Se consideran como tales a las escalas de Actividades de la Vida Diaria (AVD) y las escalas de calidad de vida. Dada la importancia de los ejercicios dirigidos a la motricidad de los miembros superiores[81], resulta significativo especificar uno de los métodos más usados para ello, el Action Research Arm Test. 1.5.2. Action Research Arm Test El Action Research Arm Test (ARAT) es un método que permite evaluar el funcionamiento de miembros superiores a partir de observación. Fue desarrollado por Lyle[49] en la década de los 80. La prueba cuenta de 19 interrogantes establecidas en 4 secciones según cierta clasificación de los movimientos cuestionados (asir, control, pellizcar, movimientos amplios). 23 Cada pregunta interpela al paciente acerca de su capacidad de realizar cierto movimiento o acción. La respuesta será evaluada siguiendo un paradigma de clasificación basado en cuatro calificaciones: Calificación Habilidad alcanzada 3 La tarea es realizada con normalidad. 2 Se completa la tarea, sin embargo se toma para ello mucho tiempo o resulta tener mucha dificultad. 1 Realiza la tarea de forma parcial. 0 No se pudo realizar. Se cuenta además, con reglas especiales que podrían afectar los resultados de la prueba. Así, dada una sección, si el paciente obtiene una calificación de 3 en la 1ra tarea (mayor dificultad), las tareas siguientes de la misma sección serán calificadas con este mismo puntaje (más alto). Por el contrario, si en la 2da tarea (menor dificultad) el paciente obtiene una calificación de 0 (mínimo puntaje) en las siguientes tareas de la sección también obtendrá dicha puntuación. El puntaje obtenido está en el rango [0,57]. El test es específico para el uso bajo casos de accidentes cerebro-vasculares, esclerosis múltiple y lesiones traumáticas en pacientes con más de 13 años de edad. Además, no requiere entrenamiento previo. 1.5.3. Ejercitación en función de la enfermedad Debido a las distintas causas con las que se generan las enfermedades que afectan a la motricidad, además de los diversos pero particulares trastornos que ocasionan, las sesiones de ejercitación se orientan a lesiones o afecciones en específico[48]. A continuación se destacan un conjunto de rutinas de ejercitación en función a algunas enfermedades con repercusión en la capacidad motora. Accidente Cerebro Vascular A pesar de que el daño causado por un ACV no es irreversible, si resulta posible disminuir las secuelas a partir de ejercicios de rehabilitación. En general se tratan cuatro tipos de ejercicios. En principio, si el paciente presenta inmovilidad total de la extremidad afectada, se deben realizar un conjunto de ejercicios pasivos con ayuda de un terapeuta, enfermera o asistente, que procure que la extremidad del afectado realice ciertos movimientos sin necesidad de que este último intervenga. Si el paciente presenta cierto grado de movilidad, se refiere a ejercicios de actividad voluntaria. Estos ejercicios ayudaran a fortalecer los músculos implicados en la parálisis procurando la mejora de esta zona. Un tercer conjunto de ejercicios corresponde a ejercicios de equilibrio y de coordinación. Luego de alcanzar los objetivos de las tres fases de ejercicios previos, siguen ejercicios de deambulación, con los que se espera proveer la independencia en el traslado. Parálisis cerebral Dado que la parálisis cerebral afecta al individuo que la padece de por vida, los ejercicios a realizar se adaptan a las actividades que, de acuerdo a la edad del paciente, deba cumplir en su día a día. 24 Particularmente niños pequeños son altamente beneficiados por los aportes de estiramientos de yoga. Estudios reportan que el yoga puede ayudar a relajar la rigidez muscular, permitiendo una mayor movilidad por parte de los miembros afectados. Para niños de un poco más edad resultan beneficiosos los juegos en zonas recreativas, música y bailes. Así mismo, para los grupos de mayor edad se recomienda la natación, ejercicios aeróbicos en el agua, estiramientos, yoga, etc. Esclerosis múltiple La ejercitación causa el fortalecimiento muscular e incremento en las capacidades de movilidad y por tanto bienestar para los pacientes de esclerosis múltiple. Aun así esta deficiencia presenta como uno de los principales síntomas la fatiga, con lo que la motivación por la ejercitación se ve reducida, requiriéndose metodologías que tomen en cuenta el grado de fatiga a fin de evitar que ésta llegue a expresiones elevadas en el paciente. Tres puntos clave a atacar a través de ejercicios en pacientes de esclerosis múltiple los constituyen el cuello, la columna y los hombros. Lesiones de plexo braquial Para este tipo de lesiones se emplea ejercicios de deslizamiento de los nervios, que son similares a ejercicios de estiramiento, sin embargo éstos buscan recuperar la movilidad a lo largo del nervio afectado en lugar de lograr el estiramiento muscular. Por lo general cada ejercicio parte de un punto o postura inicial y termina en un punto final definido, proponiendo para ello una dinámica basada en movimientos suaves con el objeto de evitar lesiones adicionales. A pesar de esta generalización, se debe recordar que, la ejercitación dirigida a disipar la inmovilidad de extremidades se aplica no solo en función de la enfermedad sino también al grado de la misma. De esta forma resulta indispensable la evaluación médica antes de fijar la rutina de ejercitación. 25 Capítulo 2. Realidad virtual y terapia de rehabilitación En este capítulo se explica cómo a partir del empleo de la realidad virtual, las metodologías de rehabilitación pueden resultar más atractivas para el paciente y con ello provocar la aceleración del proceso de recuperación. Para esto, primero se presenta en qué consiste la realidad virtual, luego se realiza una comparación entre la terapia convencional y la terapia con realidad virtual. Finalmente se detalla cómo la terapia con realidad virtual estimula la corteza cerebral facilitando la reorganización de la misma y provocando de esta manera la recuperación e incluso aprendizaje de funciones motoras. 2.1. realidad virtual El término realidad virtual, fue usado por primera vez en el año 1986 por Jaron Lanier, desde entonces, ha sufrido numerosas transformaciones, debido al constante avance de la tecnología[4]. Actualmente resulta posible definir la realidad virtual, como una simulación del mundo real, que es generada por software de computadora y experimentada mediante una interfaz humano-computador[4]. La realidad virtual se puede clasificar mediante el grado de inmersión que genera en el usuario. Según se define en [19], el término inmersión se refiere al acto voluntario de obviar los distintos estímulos que hace percibir la experiencia presentada como no real, permitiendo de esta manera, captar toda la atención y concentración del usuario involucrado. Así, resulta posible clasificar la realidad virtual en dos vertientes, inmersiva y no inmersiva. La realidad virtual del tipo no inmersiva es la más común, ampliamente popularizada por los videojuegos. No requiere de hardware especializado, resultando suficiente un simple monitor y un computador o consola, razón por la que ha sido ampliamente aceptada además de por su bajo costo. El tipo inmersivo es aquel que procura acaparar la mayor cantidad de sentidos posibles del usuario, esto trae como consecuencia la necesidad del empleo de hardware especializado, como dispositivos de despliegue con capacidades estereoscópicas y dispositivos de entrada que puedan realizar captura de movimientos. Por tanto este tipo de realidad virtual es más costoso a nivel de cómputo y monetario, limitando el número de usuarios que la experimentan. Sin embargo, este tipo de realidad virtual es extensamente usado para la realización de proyectos de mayor envergadura como simulaciones con las cuales se entrena personal (e.g. simuladores de vuelo, guerra, etc.). En la realidad virtual inmersiva, ocurre un fenómeno que en ocasiones experimentan sus usuarios durante e incluso luego de su uso. Este fenómeno es denominando cybersickness o mal cibernético, y consiste en la presencia de síntomas como náuseas y mareo como producto de la estimulación que se le dan a los sentidos de manera artificial. Básicamente ocurre por el hecho de inducir estímulos que le indican al usuario que se encuentra en movimiento, cuando físicamente se encuentra en el mismo lugar. La ocurrencia de este trastorno aún se encuentra en investigación y se considera un gran problema para el campo de la realidad virtual ya que el 80% de las personas que se encuentran inmersos en un ambiente de 26 realidad virtual padece de este mal [37]. Se estima que con el avance de la tecnología, dicho problema será cada vez menos frecuente. El ser humano percibe el mundo mediante los sentidos: vista, olfato, tacto, oído y gusto. De la misma forma, en la realidad virtual se utilizan tales sentidos con el objeto de percibir el mundo virtual, por lo que se requiere que la interfaz humano-computador sea lo suficientemente compleja como para poder estimular algún sentido o varios a la vez. Por estas razones es necesario que el software sea combinado con hardware especializado, que sea capaz de poder estimular los sentidos humanos. A continuación se hace una recopilación del hardware comúnmente utilizado en los sistemas de realidad virtual así como de los tipos de realidad virtual existentes. 2.1.1. Hardware En cuanto a los dispositivos de despliegue visual, el dispositivo más simple es el monitor convencional de un computador, capaz de desplegar imágenes en dos dimensiones en representación del ambiente virtual. También se suelen usar grandes pantallas conformadas por una tela o pared y uno o más proyectores. Para incrementar el grado de inmersión del usuario en un ambiente virtual, se debe usar dispositivos de despliegue tridimensional. Estos dispositivos pueden ser monitores especializados con la capacidad de desplegar imágenes en tres dimensiones. De la misma forma, resulta factible emplear monitores convencionales en combinación con lentes especiales, que trabajan bajo sincronía con respecto a las imágenes que se proyectan en la pantalla. Estos lentes están compuestos normalmente por pantallas LCD, que se cierran dependiendo de la imagen que se proyecte en pantalla. Este proceso se alterna entre ambos ojos, dándole al usuario la sensación de 3D. También son destacables los cascos que, dispuestos sobre la cabeza del paciente, generan un ambiente 3D. Dentro de estos cascos, existen pantallas LCD posicionadas frente a cada ojo del usuario, que despliegan porciones de la escena. Los cascos poseen sensores que hacen un seguimiento de los movimientos de la cabeza del paciente, cambiando la imagen a proyectar en las pantallas en función a los movimientos detectados, dándole al usuario la sensación según la cual está dentro del ambiente generado. Existen dispositivos muchos más complejos, como es el caso del sistema CAVE mostrado en la Figura 5, desarrollado en la Universidad Illinois en Chicago[19]. El sistema CAVE puede desplegar un ambiente virtual del tamaño de una habitación, para múltiples personas, en alta resolución y con empleo de imágenes en tres dimensiones y audio. 27 Figura 5: The Cave, sistema de realidad virtual inmersivo desarrollado en 1993. Los dispositivos de entrada difieren en complejidad y formas dependiendo de sus capacidades. Es común que éstos, además de proveer datos de entrada al sistema, normalmente suministren algún tipo de retroalimentación al usuario, estimulando algún sentido. Se utilizan diversos dispositivos capaces de capturar los movimientos del usuario, empleando para ello sensores electromagnéticos que se ubican en la cabeza, tronco y extremidades del usuario. Estos sensores son de bajo costo y no presentan problemas ante la oclusión visual de los mismos, aunque son susceptibles a interferencias generadas por campos magnéticos [51]. Para lograr una captura con mayor precisión en miembros como las manos, se suelen utilizar guantes, que a su vez pueden incorporar pequeños motores que emiten vibración. Con la activación de estos motores, se puede dotar al usuario de estimulación sensitiva en respuesta a la interacción que éste tenga con los elementos que observa en el ambiente virtual. Además de utilizar los pequeños motores para simular el tacto, se emplean distintos dispositivos para simular resistencia. Estos dispositivos se acoplan al guante, y dependiendo de la situación impiden o dificultan la flexión de algunas partes del mismo, para de esta manera provocar que el usuario tenga que incrementar la presión para realizar el movimiento. Algunos productos comerciales con estas características son el CyberGrasp, el cual ofrece resistencia en la mano y el CyberForce que extiende dicha resistencia a todo el brazo. 2.2. Realidad virtual como terapia de rehabilitación La realidad virtual ha sido empleada en el área de la medicina y psicología desde sus inicios, debido a la posibilidad de poder presentar situaciones desafiantes dentro de un ambiente seguro, en el cual se mantiene un control experimental sobre la medición y presentación de los estímulos [83]. Las primeras aplicaciones de realidad virtual dieron lugar a una serie de intervenciones psicosociales, mediante el tratamiento de fobias[63][15]. Luego el uso de la realidad virtual se expandió a otras aéreas 28 como la medicina, en cirugías digestivas [50], entrenamiento para la cirugía laparoscópica [92] y en la investigación del control motor [25][4], y otras. La realidad virtual además de ser empleada como una herramienta para el entrenamiento médico, también ha sido utilizada como una herramienta de rehabilitación o de evaluación, como es el caso de la rehabilitación motora tanto en programas de entrenamiento del equilibrio y la postura[43], entrenamiento de la marcha[28], rehabilitación de funciones del miembro superior [67], terapias de tolerancia al ejercicio y al dolor[78], evaluación de actividades de la vida diaria [96] o la evaluación de negligencias visuales tras un ACV [11][4]. Desde el punto de vista del proceso de rehabilitación motora, se debe puntualizar tres (3) conceptos clave para obtener un proceso exitoso de rehabilitación: la repetición, motivación y retroalimentación [51].Para poder aprender a realizar un movimiento, se debe realizar el mismo repetidamente. La repetición es de suma importancia para la memorización y el aprendizaje motor, ya que estimula la reorganización neuronal [51]. La práctica repetitiva del movimiento debe tener además, asociado el estímulo de cumplir un objetivo o meta. Esto es alcanzado en la naturaleza a través de ensayo y error, recibiendo retroalimentación acerca del desempeño a través de estímulos enviados por los sentidos. Por otro lado, la motivación es un aspecto donde la terapia a través de realidad virtual suele destacarse, debido a que la forma como se puede presentar el ejercicio, resulta agradable para el usuario. A su vez en el juego se plantean distintos objetivos o metas a cumplir, los cuales darán la retroalimentación al usuario de estar realizando bien o no el movimiento. Si tales objetivos son planteados de una manera correcta, pueden llegar a representar un reto al usuario, lo que genera una motivación por alcanzar el objetivo, esto permite que el usuario realice las repeticiones necesarias para poder estimular la reorganización cerebral y de esta manera, memorizar el movimiento. Otro motivo que indica la importancia de la realidad virtual dirigida a la terapia es el hecho de que se puede colocar a un entrenador virtual que haga el movimiento a aprender todas las veces que se desee. En el paciente, esto activa neuronas conocidas como espejo, lo cual incrementa la retroalimentación obtenida por el movimiento. Cabe destacar que las neuronas espejo son un tipo especial de células cerebrales que se activan cuando un individuo realiza un movimiento en función a la observación de otro individuo que también lo realiza. También es importante destacar que los ejercicios propuestos por la terapia a través de realidad virtual, suelen ser totalmente personalizables y en los ambientes virtuales generados se da especial atención a los puntos clave del ejercicio, eliminando todos los posibles agentes distractores que puedan degradar la calidad de la terapia. En la siguiente sección se analizan las posibles ventajas que podría tener la terapia a través de la realidad virtual sobre la terapia tradicional. 29 2.3. Realidad virtual vs terapia tradicional Si bien algunos de los hechos científicos anteriormente citados son aplicados en animales, también existen algunos estudios realizados en humanos, con los cuales se puede comparar la efectividad de la terapia con realidad virtual contra la terapia tradicional. A continuación se realiza un pequeño resumen de cinco estudios en los cuales se hace énfasis entre los resultados obtenidos mediante el empleo de la terapia convencional con respecto a la basada en realidad virtual. En el primer trabajo conducido por Todorov et al.[88], no se experimenta con pacientes que sufran de algún tipo de discapacidad motora. Se recurre a un conjunto de individuos totalmente sanos, a los cuales se les entrena para jugar tenis de mesa, a través de un ambiente virtual, en el que se experimenta con el aumento de la retroalimentación, mediante un entrenador virtual. Este grupo fue comparado contra un grupo que fue entrenado en un ambiente real con retroalimentación proporcionada por un entrenador profesional o simplemente practicando por su cuenta, como resultado de esta comparación se pudo obtener que el grupo que fue entrenado en un ambiente virtual obtuvo un mejor desempeño sobre el grupo entrenado en el ambiente real. Vale acotar que la prueba de comparación fue realizada en un ambiente real[51]. En el segundo estudio conducido por Rose et al.[72], nuevamente se experimenta con pacientes que no poseen ningún tipo de impedimento físico. Esta vez el experimento consiste en pasar un aro metálico por un alambre con curvas, evitando el contacto entre el aro y el alambre. Para esta prueba de pulso se tomaron tres grupos de pacientes para comparar efectividad, el primer grupo fue entrenado para realizar la prueba de pulso en un ambiente real, el segundo grupo fue entrenado para realizar la prueba en un ambiente virtual, el tercer y último grupo no recibió entrenamiento alguno para realizar la prueba[51]. Los tres grupos fueron evaluados en la prueba de pulso antes y después del proceso de entrenamiento. En estas evaluaciones se pudo observar que tanto el grupo que fue entrenado mediante realidad virtual, como el grupo que fue entrenado en un ambiente real incrementaron su rendimiento, el grupo que no recibió ningún tipo de entrenamiento no expuso incremento alguno de su rendimiento, como era de esperarse. La medida empleada para evaluar el rendimiento de los pacientes fue el total de errores realizados durante la prueba. En el tercer estudio Brooks et al.[12] asisten a un paciente que sufre de amnesia. El experimento consiste en enseñar a este paciente determinadas rutas dentro de la unidad de rehabilitación de la institución médica en la que residen. El proceso de enseñanza se implementa mediante la simulación de la unidad de la rehabilitación a través de realidad virtual. El proceso de entrenamiento contaba con 1 sesión diaria de 15 minutos durante 3 semanas, régimen con el cual, el paciente sería capaz de aprender dos nuevas rutas a través de realidad virtual. A fines de comparar el rendimiento del entrenamiento en el ambiente real contra el entrenamiento en un ambiente virtual, se realizó otro proceso donde se le enseñaba al paciente dos nuevas rutas. Para esto, se sigue el mismo 30 régimen de una sesión diaria de 15 minutos, la diferencia con respecto a la primera prueba reside en el entrenamiento. En esta ocasión, una ruta es enseñada en el ambiente real y la otra ruta es enseñada en un ambiente generado por realidad virtual. Al cabo de 2 semanas, el paciente había aprendido la ruta que se le enseño por realidad virtual, pero la ruta enseñada mediante el ambiente real no fue aprendida. Con los resultados de este experimento se vuelve a sugerir que el entrenamiento proporcionado mediante el uso de realidad virtual, es superior al entrenamiento proporcionado a través del medio ambiente real. También se reafirma que el conocimiento adquirido a través de la realidad virtual es directamente transferible al ambiente real, debido a que el entrenamiento por realidad virtual consiste en desplazar un joystick para desplazarse por la ruta. En el cuarto estudio, Webster et al.[91] asistieron a pacientes afectados por ACV, y dependientes de sillas de ruedas para su traslado. Adicionalmente, los pacientes presentan a su vez una enfermedad conocida como el síndrome de negligencia o descuido unilateral. Dicho síndrome provoca que el paciente no reconozca la existencia de elementos o personas, en un área espacial determinada, puede también ser interpretada como déficit de atención del paciente, sobre un área espacial relativa al mismo. El estudio consiste en experimentar mediante realidad virtual, como se puede mejorar el entrenamiento para el uso de las sillas de ruedas que reciben los pacientes que cumplen las condiciones definidas anteriormente, creando dos grupos. Ambos grupos recibirían el entrenamiento convencional para el uso de la silla de ruedas, en tanto al otro grupo se le aplicaría en adicional el entrenamiento usando realidad virtual. Como resultado se observó que el grupo que recibió el entrenamiento con realidad virtual, cometió menos errores, golpeó menos obstáculos y contabilizó menos caídas de la silla de ruedas durante la prueba en un ambiente real que el grupo que recibió únicamente el entrenamiento convencional[51]. El quinto y último estudio presentado por Jaffe et al.[39], compara la efectividad del entrenamiento a través de realidad virtual contra el entrenamiento tradicional para evitar obstáculos mientras se camina. La investigación considerara a pacientes que sufrieron de ACV, con quienes se forman dos grupos. A un primer grupo se le aplica el entrenamiento tradicional y al otro el entrenamiento mediante realidad virtual. Como resultado a las pruebas se observó que ambos grupos presentaron un incremento de sus rendimientos en las pruebas post entrenamiento, sin embargo el grupo entrenado por realidad virtual sobresalió en las pruebas realizadas a un ritmo de caminata más elevado[51]. Nótese que por los resultados de los estudios expuestos, el proceso de rehabilitación y entrenamiento es altamente factible mediante el uso de realidad virtual y que incluso se podría llegar a sugerir que puede ser superior al entrenamiento tradicional. 31 2.4. Reorganización cerebral mediante realidad virtual Durante los últimos años, los ambientes virtuales han sido utilizados ampliamente como estudios experimentales, aportando generalmente buenos resultados [40][32]. Es posible que los efectos de la plasticidad estimulados con terapias basadas en realidad virtual conlleven a estos resultados[52]. La comprensión del potencial de la realidad virtual como técnica de rehabilitación radica en el entendimiento de los procesos neuronales que traen como consecuencia su realización, y la influencia de éstos en la regeneración de habilidades perdidas por enfermedades o lesiones cerebrales. Merians et al. [52] sugieren que el paradigma de rehabilitación debe basarse en la comprensión de la potencialidad del sistema nervioso de generar una modificación en la disposición neuronal y que la atención, repetición, intensidad de práctica, recompensa, complejidad adaptativa y adquisición de nuevas habilidades son condiciones básicas de la práctica para permitir el cambio en las estructuras neuronales. Estudios realizados por Sung et al.[94], mencionan que la terapia con realidad virtual produce cambios en la corteza sensorial-motora del cerebro, los cuales se han visto relacionados con la mejora de las habilidades motrices de las extremidades afectadas por enfermedades causantes de discapacidad. Así, éstos sugieren que este tipo de terapia mejora la neuroplasticidad, facilitando la formación de nuevas vías cerebrales para la conducción de mensajes motores dirigidos a distintas partes del cuerpo. Diversas investigaciones a partir de tecnologías de neuro-imágenes enfatizan los procesos cambiantes que ocurren en el cerebro ante la rehabilitación. Stepniewska et al.[79] dejan en evidencia la existencia de múltiples conexiones que enlazan distintas regiones corticales que forman una red distribuida e interconectada y que luego del empleo de terapias de realidad virtual ha mostrado actividad re- organizativa, logrando su expansión. La realidad virtual vincula distintos factores que resultan en impacto re-organizativo a nivel cerebral. Además de la intensidad del entrenamiento para el desarrollo de habilidades, la calidad y cantidad de retroalimentación proporcionada y la especificación del entrenamiento, son variables importantes a las cuales el sistema motor responde [52]. Otro de los factores que deben tener en cuenta las terapias de rehabilitación basadas en el uso de la realidad virtual es el aprovechamiento del estímulo visual como medio para estimular la actividad cerebral y con ello su re-organización. Graziano[33] muestra que el estímulo visual puede proveer señales re-organizativas sobre zonas sensoriales-motoras, involucrando números sustanciales de neuronas motoras, pre-motoras y parietales. En[1] se comprueba que la visualización y realización de movimientos motores erróneos pueden influir en el comportamiento motor-cortical durante el aprendizaje o entrenamiento, planteando la práctica de ejercitación basada en actividad-recompensa como posible medio de prevención. Una importante consideración en el uso de la realidad virtual, teniendo en cuenta a la visión como herramienta para el entrenamiento sensorial-motor es la calidad o la fidelidad que tengan los ambientes virtuales recreados en comparación a la realidad. Existen investigaciones que señalan que los resultados 32 de estrategias de rehabilitación basadas en la observación de movimientos en ambientes virtuales, son relativos a la calidad de la escena. Uno de ello es el estudio realizado por Perani et al.[64] donde investigan si la observación de acciones reproducidas en un ambiente virtual de tres dimensiones logra diferencias re-organizativas a nivel cerebral, en comparación a la observación de acciones reales. En particular, para estas pruebas se toma un grupo de 8 personas con un rango de edad de 24-28 años para un primer experimento, y para un segundo experimento se toma en cuenta un grupo aparte de 8 personas con un rango de edad de 22-26 años. Cada persona fue analizada por medio de tomografías de emisión de positrones (PET por sus siglas en inglés). Para el primer experimento, se realizaba el PET mientras los pacientes observaban la toma de objetos por parte de una mano real y luego por parte de dos representaciones virtuales (una representación cercana a la real y una totalmente diferenciable), en ambos casos se plantea un esquema inmersivo en el que se emplean lentes estéreos (de marca Crystal Eyes). Para el segundo, la aplicación del PET tiene lugar durante la visualización de la misma secuencia de movimientos realizada por la mano real, esta vez en una pantalla de televisor 2D. Como resultado se observa que en solo en las acciones reales la asociación visual-espacial incluye la actividad re-organizativa en la corteza parietal posterior derecha como lo muestra la Figura 6. Así, según los autores, la representación irreal no tuvo el mayor adentramiento en el aprendizaje del SNC. Como se ha estudiado anteriormente, tres componentes significativos en la práctica de rehabilitación lo constituyen la repetición, motivación y retroalimentación. La verdadera importancia en estos aspectos radica en gran parte en el impacto neural que promueven durante la rehabilitación. Así, con respecto a la repetición, existe evidencia que demuestra no solo que la intensidad sino también que la práctica repetitiva pueden ser necesarias para causar cambios en la organización cerebral[1]. Estudios sobre animales muestran la importancia de la repetición como medio de reorganización sináptica en las terapias de rehabilitación [52]. Merians et al.[52] muestran que la especificidad, y con ello la repetición del entrenamiento es un componente importante en el régimen terapéutico, y que además, ha sido estudiado que induce la reorganización en la representación neuronal de las áreas anatómicas vinculadas a las partes del cuerpo puestas en ejercitación durante la práctica. La repetición también constituye una de los componentes necesarios para la rehabilitación motora mediante realidad virtual. 33 Figura 6: Representaciones de la mano, desde alta a baja calidad y activaciones cerebrales. En relación a la retroalimentación, existe evidencia que indica que la retroalimentación proprioceptiva y exteroceptiva asociada con la ejecución de un movimiento, genera cambios profundos en la actividad cerebral que se presenta a nivel de la corteza, subcortical y a nivel sináptico. En [51] se presentan estudios con primates, en donde se observan nuevos patrones de actividad cerebral durante el proceso de aprendizaje motriz, incluso evidenciando que se involucran nuevas zonas del cerebro durante el aprendizaje, además de la zona directamente afectada por el mismo. Así mismo, se observó en un conjunto de ratas entrenadas para cumplir tareas que implican movimientos motores complejos, la adquisición de campos dentífricos de gran tamaño y un aumento significativo de la actividad sináptica en el hemisferio opuesto al del miembro afectado por los ejercicios. Entonces, según Maureen y Holden [51], esto evidencia claramente que la retroalimentación es de vital importancia para el proceso de aprendizaje motor, debido a que genera una reorganización a nivel cerebral significativa, la cual no es lograda exclusivamente con la repetición del movimiento. Esto genera que la realidad virtual pueda cobrar una alta importancia, ya que, la retroalimentación puede ser aumentada en la misma. Uno de los beneficios de los ambientes virtuales es que permiten programar herramientas de ayuda que muestren el proceso que describe la tarea a realizar en un momento dado de forma repetitiva. Para el paciente esta información visual puede provocar el funcionamiento de la plasticidad sobre la corteza primaria-motora por medio de las neuronas espejo, y generar posibles mejoras en su movilidad [36]. La atención (y con ella la motivación) es otro componente significativo relacionado a la adquisición de habilidades motoras. La atención a los requerimientos cognitivos, perceptuales y motores de una habilidad puedan jugar un rol importante en la plasticidad. Según[52] los movimientos de ejercitación llevados a cabo en su investigación pudieron mostrar mayor cambio de plasticidad de haberse comparado con los mismos ejercicios bajo un ambiente que exigiese una menor demanda de atención. 34 Golomb et al. [32] realizan un estudio dirigido a verificar si con la aplicación de un sistema de realidad virtual monitorizado vía remota se generan alteraciones en la parte motora cerebral. Implementan un sistema de tele-rehabilitación basado en videojuegos, instaurado en los hogares de 3 adolescentes con parálisis cerebral. El sistema consiste en un guante 5DT 5 Ultra Glove y una consola de juego PlayStation 3 conectado a una red segura establecida con el objeto de permitir la observación y control médico. Además, para la evaluación de la evolución lograda por los pacientes se extraen imágenes de resonancia magnética (MRI por sus siglas en inglés). Luego de aproximadamente dos (2) meses se obtuvieron resultados satisfactorios por parte de los pacientes. Posteriormente a la intervención y en relación al estado cerebral inicial de los pacientes, se observó que los tres participantes mostraron una actividad cortical expandida al realizar movimiento con la extremidad discapacitada, como se aprecia en la Figura 7 (mano derecha en los 3 casos). Particularmente la actividad se observó expandida en partes cerebrales importantes para las funciones motoras como la corteza primaria motora y el cerebelo. Figura 7: MRI durante movimientos de mano discapacitada antes y después de la terapia. Los primeros sistemas de realidad virtual fueron desarrollados con fines de entrenamiento, para después pasar al mundo militar y de la aeronáutica. Finalmente a partir de la década de los 90, esta tecnología ha abarcado el campo de la práctica médica ya sea como herramienta para los tratantes (como simuladores de cirugía endoscópica) o como herramienta terapéutica (como terapias de rehabilitación) [59]. Un sistema de realidad virtual requiere generar un ambiente virtual donde al usuario se le permita realizar la tarea asignada. El usuario debe estar presente en el ambiente simulado para que la experiencia lograda en este entorno sea lo más cercana posible a la realidad. A este principio se le conoce como validez ecológica. Navarrete [59] menciona que es posible inferir que la capacidad de sentirse presente en el mundo generado dependerá de las características propias del usuario, del sistema de realidad virtual, del programa computacional, ambiente generado y de las tareas para interactuar con el sistema. 35 A continuación se expondrán algunos de los sistemas de realidad virtual que se han desarrollado con fines terapéuticos y que han sido empleados en diversos estudios experimentales a fin de evaluar la eficacia y eficiencia de esta tecnología sobre este ámbito médico. 2.5. Sistemas de realidad virtual enfocados en terapias de rehabilitación En la actualidad, la realidad virtual ha generado un gran interés en la necesidad de conocer si la inclusión de este tipo de tecnologías resultan útiles durante la aplicación de terapias de re-entrenamiento motor, y de ser así, en qué grado resultan favorables o cuáles ganancias logran sobre las técnicas físicas. De esta forma, explicar el grado de beneficio que ofrecen estas técnicas ha sido motivo para una creciente aparición de sistemas de realidad virtual que han sido diseñados exclusivamente para su uso en terapias de rehabilitación, y con ello para la ejecución de múltiples estudios orientados a mediar la funcionalidad de estos sistemas. A continuación se muestran algunos de estos sistemas e investigaciones. 2.5.1. BioTrak BioTrak [7] consiste en una herramienta basada en tecnología de realidad virtual que integra, en una misma plataforma, ejercicios para el entrenamiento y la rehabilitación de determinadas funciones que se han visto reducidas o bien se han perdido a causa de diversas patologías. Los ejercicios incluidos han estado avalados por especialistas clínicos, permitiendo que el sistema se sustente a partir de la ejercitación medica correcta. Fue desarrollado por la empresa Bienetec [6], cuyo objetivo es aportar soluciones innovadoras en áreas como educación, mercadeo, salud y bienestar, industria, robótica o arquitectura entre otros. El sistema incluye una serie de dispositivos con los cuales intenta maximizar los beneficios que proveen los ejercicios. Así, incorpora un tracker magnético, una plataforma de presión y una pantalla multi-táctil, como se observa en la Figura 8, entre sus elementos funcionales. Figura 8: Sistema BioTrak (1) Pantalla multitáctil. (2) Plataforma de presión. (3) Tracker magnético. 36 El tracker magnético consiste en un rastreador inalámbrico de alta precisión que ofrece 6 grados de libertad, proporcionando medidas de la movilidad en tiempo real. La plataforma de presión se caracteriza por una base sobre la cual el paciente se coloca en posición bípeda permitiendo la rehabilitación del equilibrio a partir de ejercicios que reten la estabilidad. En cuanto a la pantalla multi-táctil, el sistema incluye tableros con despliegue de ambientes virtuales que permiten que varios usuarios puedan interactuar y jugar al mismo tiempo en la misma superficie, y un software específico para evaluar el estado del paciente y su evolución durante la rehabilitación. Entre sus ventajas destaca que facilita la rehabilitación del equilibrio y tiene como uno de sus objetivos, acelerar el proceso de recuperación de la estabilidad en la postura. Ayuda a controlar cada detalle del proceso de rehabilitación, es adaptable a las discapacidades de cada paciente, toma en cuenta la motivación y adherencia al tratamiento, procura optimizar el tiempo dedicado a la rehabilitación. Además, el sistema implementa un módulo de medición, con el cual el equipo médico puede evaluar la respuesta del paciente, de forma más objetiva a una evaluación bajo percepción, lo que facilita una terapia más específica y, por lo tanto, una recuperación más rápida. Según el neurólogo Enrique Noé [60], “los beneficios derivados de la utilización de este sistema son de dos tipos. Desde la perspectiva de un médico, BioTrak facilita la rehabilitación del equilibrio de acuerdo a los principios del aprendizaje motor y acelera el proceso de recuperación de la estabilidad en la postura. Esto tiene obvias implicaciones funcionales dado que el equilibrio se considera un requisito previo esencial para el funcionamiento exitoso y seguro en muchas de las actividades cotidianas. Desde la perspectiva del paciente, el proceso de rehabilitación se vuelve más agradable, divertido y desafiante, sin perder eficacia”. 2.5.2. Rehabilitation Game System (RGS) La solución RGS [72] es un sistema que emplea la realidad virtual como herramienta para la rehabilitación del déficit de los miembros motores superiores luego de una lesión cerebral. Fue desarrollado por el grupo de investigación SPECS [56] de la Universidad Pompeu Fabra de Barcelona [90]. El sistema desarrolla un entrenamiento individualizado basado en un juego que exige, la combinación de la ejecución de movimientos de brazos, con la observación de una acción relativa al movimiento ejercido mediante extremidades virtuales representadas en primera persona, las cuales emulan dicho movimiento. El sistema se basa en una consideración neurológica según la cual, la plasticidad cerebral permanece durante toda la vida y por tanto, puede ser utilizada para promover la reorganización funcional de las áreas afectadas a partir de la activación de las neuronas espejo. Como una herramienta adaptativa, el RGS provee un entrenamiento basado en tareas con grados individualizados de complejidad. Adicionalmente, extrae información cualitativa y cuantitativa del desempeño del paciente durante la ejecución de una tarea, procurando una evaluación detallada del déficit del paciente y permitiendo de esta manera generar una dinámica apropiada para su recuperación. 37 El sistema emplea un computador común, una cámara web y opcionalmente guantes de datos. Uno de los ambientes virtuales que incluye el sistema es el juego llamado Spheroids que se muestra en la Figura 9. Este juego consiste en la aparición de diversas esferas que avanzan desde el horizonte de un paisaje natural con fondo montañoso hacia el usuario, el cual deberá hacer interceptar las extremidades virtuales con cada una de estas esferas. La dificultad de la tarea está definida por varios parámetros de juego, tales como la velocidad de las esferas, su rango de dispersión o la frecuencia con la que aparecen en pantalla. En un primer nivel, las esferas deben ser interceptadas. En esta fase, el paciente practica ejercicios de movimiento proximales. En niveles de más alta dificultad, los usuarios no sólo deberán interceptar las esferas, sino también recogerlas flexionando para ello los dedos de las manos para luego colocarlas en su lugar correspondiente (una especie de canales o soportes que esperan esferas del respectivo color) extendiendo las articulaciones de los dedos. Estos niveles de entrenamiento combinan secuencias de movimientos proximales y distales. Actualmente sus creadores desarrollan escenarios de juegos adicionales, tales como puzzles, tetris y simuladores de conducción Figura 9: Muestra del juego virtual Spheroids. 2.5.3. Interactive Rehabilitation and Exercise System (IREX) Es un sistema donde el paciente es colocado ante una computadora que genera un mundo virtual y que capta los movimientos de articulaciones específicas, o incluso de movimientos del cuerpo en su totalidad, aportando mediciones tanto de extremidades superiores como inferiores. Este sistema fue creado por la compañía canadiense GestureTek Inc. constituyendo uno de los sistemas de rehabilitación que esta empresa ofrece. Según la empresa [30], IREX es una tecnología de video inmersivo, con la cual sumerge al paciente en un entorno virtual, donde es guiado a través de programas de ejercicios terapéuticos. Además, el sistema puede ser ajustado según necesidades clínicas específicas. La Figura 10 muestra a un paciente empleando el sistema. Figura 10: Video inmersivo de IREX. 38 El movimiento del paciente puede ser controlado y reportado para describir la mejoría funcional en el rango y control del movimiento, y del equilibrio durante el curso de su tratamiento. Es completamente controlable a través de los gestos y no requiere que el paciente mantenga o use algún dispositivo periférico especial. Distintas investigaciones médicas [93][83] [45] confirman que estas terapias virtuales son beneficiosas para pacientes con discapacidades físicas y cognitivas, incluyendo parálisis cerebral, autismo, alzhéimer y demencia, como también aquellas producidas por ataques y traumatismos cerebrales. Un total de más de 20 entornos virtuales son expuestos por el sistema, con los cuales, los pacientes pueden interactuar y participar en diversas actividades físicas, tales como fútbol, básquet, voleibol, juegos de malabares, de música y snowboard, al tiempo que procuran mejoras en su movilidad. Estos y otros sistemas han traído consigo distintas investigaciones que intentan indagar sobre el uso de la realidad virtual en las terapias de rehabilitación. De esta forma, estas tecnologías han estado sujetas a distintas investigaciones, en las cuales la adaptabilidad del sistema hacia el tema de investigación ha tenido un papel muy importante. Entre algunas de esta investigaciones se pueden destacar la de Chris Norman, Barnaby Cotter y Dominic Clark, tres (3) estudiantes de Ingeniería Mecánica de la Universidad de Leeds quienes desarrollan un proyecto llamado Kinestesia [62], que basado en la realidad virtual, se enfoca entre otras cosas a la rehabilitación motora. El proyecto persigue el desarrollo de una interfaz de fácil uso entre el hardware Kinect TM y la herramienta de software LabVIEW desarrollado por la National Instruments [57], además de proveer aplicaciones para el uso en el campo de la rehabilitación luego de ataques cerebrales. En este trabajo, el desarrollo de las aplicaciones se orienta a 3 temas: a) Referente a la recuperación luego de ataques cerebrales, la necesidad de una herramienta que provea estimulación mental al paciente, al mismo tiempo que almacene de forma precisa la posición del cuerpo y los movimientos realizados, con el objeto procurar la motivación del paciente hacia la aplicación y ofrecer información detallada al fisioterapeuta en referencia a los movimientos. b) La cirugía laparoscópica, para lo cual es esencial información precisa de las áreas que no son visibles por parte del cirujano. Durante la práctica de esta cirugía generalmente se ensancha el abdomen con el objeto de permitir una mayor área de trabajo al cirujano. Sin embargo resulta difícil medir el nivel de inflamación y entonces el espacio de trabajo, por lo que una aplicación que lo facilitara sería de gran utilidad. c) Análisis de la marcha, que podría significar un patrón único en cada persona, y que puede aportar abundante información médica a cerca de problemas cuya afección puede tomar más tiempo en expresarse de otras formas. Tomando en cuenta el aspecto de rehabilitación, se desarrolla un sistema que permite grabar imágenes del paciente en directo, mostrando una representación 3D del esqueleto del mismo, permitiendo al médico, explorar los movimientos que el paciente haya realizado. Adicionalmente se crea un entorno virtual de rehabilitación para desórdenes motores basado en la ejercitación tomada en consideración por el ARAT, mostrado en la Figura 11. Por otra parte, para la laparoscopia se extrae información de profundidad de la cavidad abdominal a partir del Kinect TM , y se procesa mediante el software LabVIEW, en el que se compara con aproximaciones de la geometría del abdomen. Esto se realiza con el fin de determinar el 39 volumen inflado, y proporcionar a los cirujanos imágenes más exactas de la cavidad intra-abdominal. El análisis del paso puede extraerse mediante la información capturada por el Kinect TM más el análisis ante LabVIEW. Figura 11: Escena virtual creada para el test ARAT bajo realidad virtual En cuanto las herramientas empleadas, además del Kinect TM y el software LabVIEW, se incluyen otros dispositivos a fin de evaluar los datos aportados y las mediciones generadas por los primeros. Así hardware adicionales como el OptoTrak Certus Infrared tracking system [77] y escáneres 3D son empleados durante el desarrollo de la investigación. La inclusión de este hardware permitió verificar los resultados ligados al empleo del Kinect TM en cuanto a la exactitud de rastreo. En concreto, el tracking del esqueleto generado con el Kinect TM fue medido mediante el empleo del Optotrak. Este sistema es recientemente usado para el seguimiento de miembros superiores en pacientes luego de ataques cerebrales, al igual que para el monitoreo de la velocidad, precisión y fluidez en sus movimientos. Es capaz de realizar un muy preciso rastreo de marcadores obedeciendo a errores por debajo de los milímetros. La gran precisión del Optotrak lo cataloga como una buena herramienta para la obtención de medidas de referencia por lo cual se usa para validar la precisión del Kinect TM . Otra investigación corresponde a la realizada por Hayes et al. [3], quienes exponen una vista previa del trabajo experimental que han estado llevando a cabo, que tiene como objetivo el desarrollo de un sistema basado en juegos virtuales que provea extensa ejercitación, feedback de acción-observación y motivación, todo en un paquete que pueda ser usado como medio de tele-rehabilitación. El sistema consiste en un juego 3D desplegado en una pantalla posicionada de 1.5 a 1.8 metros frente al paciente, y un dispositivo Kinect TM posicionado sobre la pantalla a fin de permitir el seguimiento del esqueleto con el cual queda definido el usuario. El juego es diseñado para ser empleado por pacientes hemiparésicos con afección en la extremidad motora superior izquierda. Con el objeto de lograr el efecto de acción-observación en el ambiente virtual se necesitó establecer el rango del movimiento propio de cada paciente, con lo cual se haría corresponder sus movimientos máximos con los movimientos máximos esperados por el entorno virtual. La necesidad de medir cuan alcance podría tener el paciente condujo al desarrollo de un calibrador virtual. Este calibrador consistiría en una tabla virtual sobre la cual reposarían un conjunto ordenado de esferas en representación de pelotas de golf, que el paciente debería golpear con la mano como se puede apreciar en la Figura 12. Durante la 40 ejecución de esta tarea se registrarían los movimientos máximos que se almacenarían como los limitantes del rango del movimiento. Figura 12: Calibrador del sistema de Hayes et al. [3]. Actualmente sus desarrolladores trabajan en la implementación de un juego prototipo bajo una temática de “caza de patos”, con el que se pretende incorporar un entrenamiento progresivo y un feedback visual y de audio dirigido al cultivo de la motivación. En los primeros niveles, el juego ofrecerá un rango de movimiento ajustado a los máximos y mínimos del usuario, y a medida que éste avance, el rango irá aumentando a fin de procurar mayor exigencia en la motricidad del paciente. Lange et al. [47] han desarrollado un sistema de video juego de bajo costo dirigido a la evaluación y rehabilitación motora. El objetivo de esta investigación dispone de 3 aspectos. a) Evaluar la usabilidad del empleo de juegos de videos y consolas en personas con lesiones traumáticas cerebrales, lesiones de médula espinal y amputaciones. b) Emplear en las técnicas de rehabilitación dispositivos de bajo costo, con lo que puedan significar fácil acceso. c) Diseñar, desarrollar y probar juegos específicamente enfocados en tareas de rehabilitación. La principal característica, y a su vez la principal ventaja que ofrece el diseño del sistema es la de proveer la posibilidad de alterar las características de los juegos con el objeto de adaptar las tareas requeridas en función a las discapacidades presentadas. La capacidad de almacenar datos y proveer información relativa al rendimiento es otra de las características que permite el desarrollo de estos juegos. Adicionalmente a la plataforma de juegos, se desarrolla un framework que permite la integración de sensores de profundidad, a partir de tecnologías como el PrimeSense o el Kinect TM y drivers asociados a éstas, con los cuales se otorgaría al usuario el control del sistema a partir de sus movimientos y sin la inclusión de ningún tipo de marcador. Recientemente el equipo de trabajo ha desarrollado una herramienta prototipo de software con la que el usuario interactúa con el sistema manteniéndose sentado o parado. El prototipo es llamado Jewel Mine Game y fue desarrollado inicialmente para la rehabilitación motora de adultos mayores con riegos de caídas. 41 El juego recrea como ambiente virtual una mina en la que el jugador asume el rol de minero, quien dispuesto sobre un pequeño carro que sigue un riel, debe alcanzar las joyas posicionadas en las paredes del túnel que describe la representación de la mina como lo muestra la Figura 13. Este túnel es uniformemente cilíndrico y dispone de una serie de secciones en las cuales se encuentran las joyas posicionadas en grupos de 8, a manera de anillo. Además, con el fin de proveer feedback en cuanto a los movimientos que realice el paciente, un avatar tiene lugar en el centro de la pantalla (sobre el transporte minero). El paciente deberá posicionar sus brazos de tal forma de procurar la intersección de las extremidades del avatar con las gemas, requiriendo no solo mover sus brazos sino además realizar posturas que impliquen equilibrio. Figura 13: Escena de parte del Jewel Mini Game. El juego también cuenta con una fase de calibración, fundamental para adaptar el juego teniendo en cuenta el nivel de habilidad del paciente. Esta fase es guiada por un médico, para fijar los ejercicios que son apropiados para el paciente y con ello fijar los objetivos específicos de la terapia. En resumen, es posible apuntar que la introducción de hardware como el Kinect TM dentro del mundo de la rehabilitación, sigue siendo un tema abierto a la investigación. Aún la tecnología resulta lo suficientemente reciente como que para incluso hoy día, sea muy difícil llegar a conclusiones con respecto a su funcionamiento sobre estos procesos terapéuticos [69]. De hecho los trabajos realizados hasta la fecha en los que se expongan resultados experimentales escasean, por lo que constituye un tema altamente atractivo bajo perspectivas investigativas. En particular se busca la formalidad teórica a partir de la cual sea preciso establecer la realidad virtual como una herramienta capaz de proveer reorganización cerebral y con ello recuperación de patrones de movilidad, además de verificar la capacidad recuperativa de la misma ante las metodologías convencionales de rehabilitación. Otro aspecto de gran importancia que se enfatiza corresponde al basamento teórico-práctico a partir del cual sea posible determinar la forma correcta con respecto al establecimiento de la realidad virtual, a fin de evitar males asociados a los pacientes y con ello lograr la recuperación que se ansia proveerles. Al mismo tiempo, se busca estudiar las características de distintos sistemas que han sido verificados como herramientas de rehabilitación empleando realidad virtual, para extraer alternativas de implementación que puedan ser requeridas durante el desarrollo del proyecto de nuestro Trabajo Especial de Grado. Además, se procura sacar provecho de la experiencia que han ganado distintos autores con respecto a la realización de este tipo de sistemas, teniendo en cuenta posibles similitudes que algunos de estos podrían guardar con al menos partes de desarrollo que se llevará a cabo. 42 Finalmente se indaga a cerca del funcionamiento del Kinect TM en términos de rehabilitación motora, con el fin de obtener soporte experimental dirigido a constatar que la inclusión de tal dispositivo en las terapias resulta factible en términos de recuperación. 43 Capítulo 3. Desarrollo e implementación de la solución orientada a la rehabilitación En este capítulo se explica en detalle el plan de desarrollo, implementación y el conjunto de consideraciones tomadas en cuenta durante la fase de elaboración del sistema desarrollado. En principio se describen los aspectos de influencia y motivación ante el desarrollo del sistema, destacando experiencias previas que promovieron el desenvolvimiento de éste. Posteriormente, se procede a explicar en detalle las especificaciones del trabajo, considerando para ello la definición en concreto del sistema, alcance, a quién se dirige específicamente y una descripción detallada de cada uno de los módulos que fueron programados para la composición del trabajo. Finalmente se expone la metodología empleada para la ejecución, haciendo mención de la organización para el desarrollo. 3.1. Problemática y motivación Una de las primeras motivaciones de esta investigación, ha sido la experiencia ganada en un trabajo previo referido al tratamiento de rehabilitación sobre pacientes infantes del centro hospitalario Hospital de Niños JM de Los Ríos en Caracas. En este centro se observó las distintas limitaciones que los niños presentaban, así como los procedimientos de ejercitación a los que eran sometidos, y con ello el aburrimiento que muchas veces mostraban. Esta experiencia previa advertía que la realidad virtual como herramienta de tratamiento de desórdenes motores podría generar muy buenos resultados en la movilidad de los pacientes, superando incluso (al menos en rapidez de aprendizaje) a las técnicas de rehabilitación tradicionales. De esta forma, el empleo de este tipo de tecnología en este ámbito gana el suficiente interés para la producción del presente trabajo. Hoy en día los avances tecnológicos han permitido la salida al mercado de distintos dispositivos que pueden ser adaptados al entorno médico, cuyos precios resultan relativamente bajos. Así, incluyendo la funcionalidad de estos dispositivos, el alza del costo de las terapias de rehabilitación no sería extensamente notable, sino por el contrario, al acelerar el proceso de recuperación las terapias tendrían un menor período de tiempo y como consecuencia el costo de la rehabilitación se vería reducido. Además, la aplicación de la tecnología computarizada en la actualidad permite la extensión de sistemas virtuales para proveer medios de comunicación que hagan posible la tele-rehabilitación, reduciendo los costos aún más y, al mismo tiempo la disposición del sistema dejaría de constituir un posible problema. Adicionalmente, otro de los hechos que impulsa la realización del sistema es la flexibilidad de la que se hace partícipe en relación al estatuto terapéutico. Como se ha mencionado en los capítulos anteriores, a partir del empleo de la realidad virtual resulta factible promover una ejercitación especificada, repetitiva y motivante que pueda acelerar el proceso de recuperación de las personas que sufren algún tipo de discapacidad motora. Además, posibilita el entrenamiento bajo el esquema observación-repetición, que según la investigación realizada induce al trabajo por parte de las neuronas espejo, que contribuyen a la formación de vías cerebrales funcionales que se reflejan como recuperación en el aspecto motor del afectado. A esto, se le suma la capacidad de la realidad virtual para el incremento del feedback, el cual resulta altamente favorable para el proceso de rehabilitación. 44 Como otra motivación, corresponde a la posibilidad de proveer una herramienta que ayude a maximizar el desempeño del fisioterapeuta en su labor, mediante el apoyo que podría significar ésta en las terapias de rehabilitación. Se busca que no sea estrictamente requerido (al menos no en todos los casos) que el fisioterapeuta intervenga durante toda la terapia, permitiendo que el mismo pueda asistir a más pacientes durante su labor. Esto no solo puede abaratar más los procesos terapéuticos, sino además incrementar la cantidad de pacientes tratados por parte del centro médico. Al mismo tiempo, resulta atractiva la idea de disponer de algún medio que permita evaluar de forma más objetiva el trabajo en términos de ejercitación, realizado por cada paciente, teniendo al mismo tiempo la posibilidad de visualizar la evolución de cada uno, a fin de ajustar el proceso de rehabilitación procurando que sea lo más efectivo posible. Por último, también tendría lugar explorar el grado de funcionamiento impuesto por el hardware Kinect TM de Microsoft sobre los procesos terapéuticos de rehabilitación motora, lo cual en la actualidad constituye un tema inexplorado. 3.2. Solución propuesta El presente trabajo de investigación, forma parte de la solución al Proyecto N° 2012000979 cuyo objetivo primordial se encuentra fundamentado en brindar atención integral a la población con discapacidades y el cual se encuentra inscrito en el Ministerio del Poder Popular para Ciencia, Tecnología e Innovación, financiado por el Fondo Nacional de Ciencia, Tecnología e Innovación (FONACIT), enmarcándose este dentro del Proyecto Nacional Simón Bolívar, sección Suprema Felicidad Social, el cual hace énfasis en la construcción de una estructura social incluyente, por lo cual a través de esta investigación y el apoyo del Centro de Computación Gráfica de la Facultad de Ciencias de la Universidad Central de Venezuela, se desarrolló una arquitectura dirigida a la rehabilitación física de pacientes, que presentan discapacidad en los miembros superiores mediante el empleo de realidad virtual, desarrollando así un sistema de rehabilitación motora de bajo costo para el Hospital de Niños JM de los Ríos de Caracas, el cual se encuentra dirigido a niños con edades comprendidas entre los 6 a 12 años de edad, orientado en la activación y reentrenamiento de los miembros motores superiores, con el objetivo primordial de plantear una alternativa a la terapia tradicional que sirva de apoyo al personal médico, para mejorar la calidad del servicio prestado a los pacientes tratados en dicho centro, procurando también incrementar la productividad del mismo. La arquitectura propuesta contempla dos componentes que se pueden observar en la Figura 14. El primero se encuentra dirigido al personal médico, el cual permite la gestión del sistema, así como distintas funciones administrativas y de evaluación del progreso del paciente. El segundo componente despliega las distintas actividades terapéuticas, además de contenido extra requerido por el usuario. La metodología abordada para el desarrollo de la arquitectura corresponde a Scrum. Con ella, durante el desarrollo se establece un control de las distintas actividades llevadas a cabo haciendo énfasis en fechas de elaboración y consideraciones de esfuerzo, permitiendo la evaluación del flujo de trabajo y con estimaciones para la finalización del desarrollo. En la sección de anexos se exponen los documentos (Sprints) característicos de tal metodología. 45 Figura 14: Componentes de la arquitectura 3.2.1. Componente de hardware La arquitectura del sistema de rehabilitación cuenta con componentes de hardware como el Microsoft Kinect TM y un guante virtual desarrollado por Temoche[86], generando la interacción del paciente con las actividades terapéuticas, así como, dispositivos de despliegue que permiten la visualización de las actividades terapéuticas y las herramientas administrativas que le permiten al personal médico llevar un registro de la evolución de los pacientes, y finalmente un computador que sirve como medio de ejecución del sistema. Se usa el hardware Kinect TM para dotar al sistema de la capacidad de reconocimiento y reacción en función a la movilidad y gestos ejecutados por parte de usuario. Por sus características se emplea básicamente como medio de captura de movimientos de gran extensión, con lo que se procura la ejercitación de la motricidad gruesa. Además, se incluye un guante virtual con el cual se permite la ejercitación de los dedos de la mano y con ello de la motricidad fina. 3.2.2. Componente de software La Figura 15 presenta la arquitectura del sistema propuesto. Los módulos representados mediante color naranja son aquellos que interactúan directamente con los componentes de hardware. En tanto los módulos azules, no presentan una interacción directa con el hardware. Los módulos color verde implican el acceso tanto a los componentes de hardware como a los componentes de software. 46 Figura 15: Diagrama general de la arquitectura. La solución se divide en 7 partes, destacando:  Un gestor del hardware Kinect TM , que permite el empleo del dispositivo por parte de los módulos o secciones que lo requieran.  Un gestor del guante virtual, con el cual se automatiza la captura e interpretación de gestos de la mano.  Un manejador de base de datos, que permite realizar las operaciones relativas al almacén de datos del sistema (registrar, actualizar, eliminar, iniciar sesión, entre otras).  Un gestor de gráficos estadísticos, dedicado a la generación de gráficos que permitirán la evaluación de la evolución del paciente.  Un engine gráfico implementado para suplir todas las necesidades a nivel de técnicas para el despliegue de efectos y comportamientos especiales sobre escenas caracterizadas por definirse en un ámbito tanto 2D como 3D.  Un constructor de escenarios con el cual se establece la configuración espacial de las escenas que serán mostradas por los juegos.  La sección principal del proyecto, en la que se encuentra la definición de los distintos juegos de la aplicación. 3.2.3. Características de la arquitectura La arquitectura planteada presenta un conjunto de características o ventajas entre las cuales podemos definir: Feedback acción-observación y sonido: La solución busca aprovechar la versatilidad de la realidad virtual en cuanto a la capacidad de incrementar el feedback de acción-observación y con ello promover la activación cerebral a partir de las neuronas espejo. Al mismo tiempo se incluye material auditivo con el que se procura incrementar aún más la atención del usuario. 47 Juegos especializados: Se dispone de un conjunto de juegos desarrollados exclusivamente para el ejercicio de terapias de rehabilitación, garantizando la especificidad de la ejercitación y con ello la repetición, aspectos que resultan fundamentales en métodos de reentrenamiento. Ajustes de dificultad: La solución cuenta con distintas configuraciones de dificultad con las cuales se pretende dar la posibilidad de realizar la ejercitación de forma gradual. El objetivo de esto radica en evitar posibles agravamientos, y por el contrario proveer ejercitación que pueda resultar altamente funcional durante el principio de las sesiones terapéuticas cuando posiblemente sean necesarios ejercicios previos de calentamiento. Calibración de hardware: Se implementan metodologías de calibración de hardware a fin de ajustar el funcionamiento de los juegos del sistema a las capacidades concretas y específicas de cada paciente, permitiendo que la dinámica de la rehabilitación se ajuste a los rangos alcanzables de movilidad de cada uno. Seguimiento histórico y en tiempo real: El sistema despliega gráficas analíticas con las cuales resulta posible establecer un seguimiento relativo a la evolución del paciente con respecto a la terapia. Además durante la ejecución de cada juego, se muestran gráficos que permiten evaluar el comportamiento del paciente cuando el mismo esté jugando. Motricidad fina y gruesa: El sistema no solo se enfoca en la ejercitación de movilidad gruesa sino también de la fina. Dispone de hardware con el que es posible inducir a la ejercitación de incluso los dedos de la mano. Diversión: Parte esencial de la lógica de desarrollo se fundamenta en la inclusión de contenido en el que se logre crear un ambiente entretenido con el cual, el paciente logre sumergirse en el ambiente virtual a fin de maximizar el entusiasmo y motivación del mismo ante el reto asignado por el juego. Para el desarrollo del sistema se empleo como plataforma el sistema operativo Windows 7, empleando el lenguaje de programación C#, el lenguaje de shaders HLSL (High-Level Shader Language) y el IDE para desarrollo Visual Studio 2010. Además se emplea el framework XNA en su versión 4.0 con el framework .Net en su versión 4.0. Adicionalmente al framework XNA, se emplea un conjunto de herramientas de software que agilizan el proceso de desarrollo, las cuales se mencionan a continuación. 3.2.4. Software de diseño Empleados para crear y diseñar las características visuales de las distintas escenas gráficas incluidas en los juegos, como también para la realización de la interfaz gráfica de la aplicación. Se emplea:  Blender [8], Zbrush[68]: Como herramientas para la construcción de los componentes 3D que se integran en las escenas.  Photoshop[2], Gimp [31]: Como herramienta de diseño 2D. 48  Xact Auditioning Utility (incluido en framework XNA): Como ambiente de enmarque y diseño de los efectos de sonido empleados por el juego.  Visual Studio 2010: Como IDE de desarrollo.  Microsoft Expression Blend 4[54]: Para la construcción de la interfaz gráfica. 3.2.5. Librerías Corresponden a librerías que fueron empleadas como capa de abstracción ante distintas tareas durante el desarrollo, se utiliza:  Xui: Para interfaz en juegos.  Xact: Para reproducir los efectos exportados desde Xact Auditioning Utility.  BEPUPhisic: Como motor de física de los juegos.  SQLite: Con lo que se permite las operaciones con base de datos.  ZedGraph: Para la generación de los gráficos de análisis.  Aforge: Por medio de la cual se obtiene acceso a las imágenes capturadas por la cámara web (para el guante virtual). WPF: Como sistemas para despliegue de la interfaz para la aplicación. Se sigue con una explicación más detallada de la interfaz de usuario y cada uno de los módulos del sistema. 3.2.6. Interfaz de usuario El sistema cuenta con una interfaz de usuario que se procura sea simple, intuitiva y fácil de usar, que permite navegar e iniciar cada una de las opciones que el sistema maneja. Para ello, este módulo se divide en cuatro secciones claves, que corresponden a:  Base de datos: En esta sección se encuentra el conjunto de opciones asociadas a la gestión de pacientes en la base de datos del sistema, desde agregar un nuevo paciente, eliminar e incluso actualizar los datos de un registro.  Calibración: Con esta sección se incluyen las opciones relativas a la activación de los métodos de calibración tanto para el hardware del guante como para el Kinect TM .  Sesión: Esta opción permite tanto iniciar la sesión de un paciente como visualizar las estadísticas asociadas a las historia del mismo, con respecto a la rehabilitación mediante el sistema a lo largo del tiempo.  Juegos: Esta opción permite la selección de juegos e incluso fijación de las dificultades con la que debe iniciarse cada uno. El diagrama expuesto por la Figura 16, representa la generalidad del módulo: El personal médico podrá controlar todos los aspectos de la aplicación desde la ventana que el sistema expone en la interfaz correspondiente. En tal sentido, el paciente jugará bajo las especificaciones que el terapeuta plantee. En la Figura 17: Diagrama de caso de uso (nivel 1) del módulo de interfaz se muestra de manera más específica las funcionalidades características del módulo. 49 Figura 16: Diagrama de caso de uso (nivel 0) de módulo de interfaz. En el registro de pacientes, uno de los requisitos que resulta indispensable es la extracción de un campo de identificación del usuario. En este módulo se implementa una metodología para la captura de una foto del paciente que será usada como identificador único para permitir diferenciar un paciente de otro en caso de que sea necesario. Se toma en cuenta esta política de registro en consideración a la sociedad a la que va dirigida la aplicación (niños), en la cual resulta altamente probable la carencia de documentos de identificación (e.g. cédula de identidad). Una de las características principales de la interfaz confiere al conjunto de notificaciones que genera cuando se realizan ciertas operaciones como el registro, eliminación y actualización. Incluso mediante la misma estrategia se reportan operaciones erróneas por parte del usuario. En tal sentido se limita:  El registro de pacientes siempre y cuando los campos de datos no sean llenados y la foto del paciente no capturada.  El acceso a la sección de visualización de estadísticas sin inicialización de alguna sesión.  El inicio de algún juego o calibrador sin sesión establecida. Espacialmente, la interfaz presentada al usuario puede dividirse en tres partes como se observa en la Figura 18:  Muestra y/o explicación de contenido, ubicada en la parte superior, expone información relativa a la opción que actualmente se ha seleccionado.  Opciones, en los menús permite la selección entre las distintas opciones ofrecidas.  Barra de acceso rápido que consiste en una barra de operaciones especiales como lo son: o Atrás: Opción que permite regresar a la vista anterior de la interfaz. o Login: Opción para establecer sesión de forma directa. Esta barra se dispone en la parte inferior de la ventana en la que se presenta la aplicación. 50 Figura 17: Diagrama de caso de uso (nivel 1) del módulo de interfaz. 51 Figura 18: Vista general de la interfaz. 3.2.7. Guante virtual Este módulo se encarga de gestionar las operaciones y algoritmos que resultan necesarios para la inclusión funcional del prototipo del guante virtual en la aplicación. Contiene el conjunto de metodologías asociadas al manejo de la cámara web que incluye el hardware. El prototipo del guante virtual, corresponde al hardware desarrollado en la investigación de Temoche et al.[86]. Figura 19: Módulo del guante. Como se muestra en la Figura 19, el módulo de gestión del guante virtual está conformado por 3 partes claves: 52 Controladores de Guante Este sub-módulo se fundamenta en el conjunto de operaciones y procedimientos que permiten la captura y tratamiento de imágenes desde la cámara web, a fin de detectar los datos necesarios para la interpretación de la movilidad de la mano. Este sub-módulo emplea el framework Aforge[44] como interfaz ante la captura de imágenes desde la cámara web presente en el hardware del guante. El funcionamiento del controlador consiste en extraer en tiempo de ejecución, imágenes desde la cámara web a fin de procesarlas mediante algoritmos de búsqueda de patrones cromáticos, y con ello obtener la osicion de los patrones en cada imagen. Para ello se establecen de forma previa valores determinantes para esta operación, como las dimensiones de la imagen a capturar, el color a rastrear dentro de cada imagen y el tamaño mínimo con que deben cumplir las aéreas para ser consideradas como patrón. Una vez determinado los patrones cromáticos se extrae el valor de posición relativa de cada patrón en función a las dimensiones de la imagen, con lo que se determina el grado de flexión/extensión de cada dedo. Posteriormente.se hace correspondencia con cada uno de los dedos de la mano ejercitada (de izquierda a derecha en caso de emplearse la mano derecha, de derecha a izquierda en caso contrario) Finalmente el controlador reporta los valores actuales de flexión/extensión detectados. Además de la detección del grado de flexión y extensión de los dedos, el controlador desarrolla políticas para el tratamiento de errores que puedan ser producidos por la cámara web. En concreto gestiona las posibles excepciones que puedan ocurrir por el mal funcionamiento de la cámara o incluso los casos en que la misma pueda desconectarse del computador. De esta manera se implementan métodos dirigidos a recuperar el ciclo de captura de imágenes una vez se haya producido el error y se haya solventado. Postura de Guante El módulo de guante define a una postura, como un conjunto de valores asociados a los grados de flexión/extensión de cada dedo en un momento dado. Esto valores corresponden a un rango normalizado, con el objeto de facilitar la generación de reglas de reconocimiento de ocurrencia, teniendo en cuenta los valores mínimos y máximo posibles. Gestos de Guante Un gesto es una secuencia de posturas de mano cuya ocurrencia (en el orden establecido) podrá ser detectada y reportada por la aplicación. 53 Figura 20: Ejemplo de la implementación de un gesto para el guante. En la Figura 20 se expone, en términos de software, un gesto que consiste en flexionar el dedo índice, luego el medio y finalmente el anular, manteniendo en cada cambio de postura los dedos restantes flexionados (para este ejemplo solo un dedo deberá estar flexionado en cada instante de tiempo). Se muestra como se establece un arreglo de posturas que se inicializan en función a las etapas del gesto que se desee detectar. Finalmente se agrega al manejador de gestos, que permitirá su constante evaluación a fin de prever su ocurrencia. Intérprete de posturas El proceso de interpretación de una postura inicia con la captura de los datos generados por el controlador de la cámara web. El conjunto de valores que son detectados en la última imagen resultan promediados con los obtenidos mediante el procesamiento de las últimas 4 capturas, con el objeto de evitar el ruido que se genera a causa de la no uniformidad de la imagen capturada. Para la verificación de la ocurrencia de una postura, se cuenta con estructuras auxiliares que establecen un conjunto de rangos, con lo cuales se evaluará pertenencia por parte de los valores de flexión/extensión que sean expuestos por los dedos de la extremidad empleada en un momento dado. Intérprete de gesto Como muestra la Figura 21, la interpretación de gestos considera 3 estados que pueden adoptar en ejecución. Estos 3 estados corresponden a fallido, pausado y producido. El reconocimiento de un gesto comienza por detectar si su primera postura se cumple. Esto se realiza mediante el análisis y comparación de la postura actual con la primera postura que define al gesto. 54 Figura 21: Flujo de deteccion de gesto Dada la verificación de la postura, el gesto pasa a estado de pausado. En este estado, se espera la ocurrencia próxima de la siguiente postura, por lo que si en un determinado tiempo la detección de la ocurrencia no se da, el gesto pasa a estado de fallido, y su detección en las próximas iteraciones iniciará nuevamente por el gesto inicial. Si se aprueba la ocurrencia de todas las posturas que conforman a un gesto, el mismo pasará a estado producido, y se reportará su producción mediante la invocación de un evento de notificación. 3.2.8. Kinect TM El sistema posee un módulo especializado para el manejo del Kinect TM , el cual suministra funciones como las siguientes:  Manejo de conexión del Microsoft Kinect TM con la aplicación.  Monitoreo del estado del hardware y manejo de errores asociados.  Aislamiento del usuario con respecto al entorno.  Despliegue de la información provista por la cámara RGB y de profundidad del Kinect TM .  Reconocimiento de gestos.  Provee una interfaz simple para el acceso a los datos de los puntos del esqueleto del usuario.  Despliegue de silueta del usuario en pantalla, con retroalimentación correspondiente a la distancia que separa al mismo del Kinect TM . Para realizar todas estas funciones, el módulo resulta dividido en las siguientes secciones.  Controladores: Encargados de la generación de eventos debido a cambios de estados del hardware y de la captura de los datos provistos por el mismo.  Gestos: Monitorea el comportamiento del usuario y verifica si coincide con un gesto preestablecido. 55  Despliegue: Despliega de manera gráfica y comprensible los datos provistos por el Kinect TM al usuario. En la Figura 22 se presenta un esquema básico del módulo de control del Kinect TM Figura 22: Esquema general de la estructura del módulo del Kinect TM . A continuación se procede a explicar con mayor detalle cada una de las funcionalidades de las secciones anteriormente mencionadas. Controladores del Kinect TM La principal función del controlador es verificar la existencia de un Microsoft Kinect TM conectado al computador y el estado del mismo. Esta función reside a cargo de la clase "KinectSelector" véase Figura 23. La clase verifica si el Kinect TM está conectado al computador, en caso de ser así procede a realizar las configuraciones necesarias al sensor en base a parámetros predefinidos. Una vez realizada la configuración, se intenta el encendido del Kinect TM a través del método "Iniciar_Kinect". En caso de poder inicializar el Kinect TM correctamente, el método almacena la configuración del sensor en la variable "KinectSensor", para que pueda ser utilizada a futuro por el resto de la aplicación a través del método "Get_Sensor". El módulo continuará monitoreando el estado del Kinect TM durante el transcurso de la aplicación a través del método "Draw". Si el sensor tiene algún problema durante el proceso de inicialización que impida la misma, se despliega en pantalla un mensaje de error con la información del mismo, con la intención de que el usuario sea capaz del solventar el problema. Además notifica a todas las instancias que estén consumiendo el recurso del Kinect TM mediante la generación de un evento. Los mensajes de error desplegados y su correspondiente significado son los siguientes:  "El dispositivo no es un Kinect": El dispositivo que se conecto es una imitación de un Microsoft Kinect TM .  "Dispositivo no soportado": El dispositivo conectado, no es un Kinect TM o un dispositivo no soportado por la aplicación. 56  "Conecte su Kinect": No existe ningún Kinect TM conectado al computador.  "Error": Error en el hardware del Kinect TM .  "Inicializando": El Kinect TM está en proceso de inicialización.  "Conecte a USB exclusivo 2.0": El Kinect TM no se encuentra conectado a un puerto USB 2.0 o el mismo es parte de un bus compartido que está siendo consumido por otro dispositivo.  "Conecte el Kinect a una fuente de poder": No se conectó el Kinect TM a ninguna fuente de poder.  "Kinect no listo": Ocurrió un error durante la inicialización del mismo o el Kinect TM conectado ya se encuentra en uso por otra aplicación.  "Indefinido": Se generó un error no manejado por la aplicación. Siempre que el Kinect TM se encuentre en un estado distinto a inicializado, el método "Draw" se encargará de invocar al método "Iniciar_Kinect", procurando así inicializar el mismo y adquirir una nueva instancia en un estado correcto. Figura 23: Esquema de la sección de controladores del módulo del Kinect TM . 57 Estos mecanismos permiten que la aplicación sea lo suficientemente robusta para poder detectar errores provenientes del hardware del Kinect TM y proveer de feedback al usuario, para que en la medida de lo posible, este solucione el problema sin necesidad de tener que cerrar o reiniciar el sistema. La clase "Controlador_Esqueleto" tiene como función principal proporcionar una interfaz para acceder al esqueleto del usuario, el cual es proporcionado por el Kinect TM . Mediante el método "Update" el controlador estará permanentemente monitoreando si se ha detectado algún usuario dentro del rango de visión del Kinect TM . Cuando se localice un esqueleto válido se almacena en "esqueletoUsuario" y se almacena el ID que le asigna el software del Kinect TM en "esqueletoID". Este ID corresponderá únicamente a un usuario en específico, el cual se considera como el usuario activo (paciente / jugador). Cada vez que el sistema registre un esqueleto se procede a verificar el ID del mismo, en caso de que el ID corresponda con el almacenado, se almacena la información del esqueleto para su uso futuro. Si entre los esqueletos que se detectan no se encuentra ninguno con el ID del usuario actual, significa que dicho usuario se ha retirado del rango visual del Kinect TM y el sistema procede a seleccionar un nuevo jugador. En caso de no detectar ningún esqueleto el controlador realizará la notificación pertinente al juego activo, lo cual normalmente se traduce como una pausa del mismo hasta que se pueda seleccionar un nuevo jugador. Estos mecanismos de selección permiten aislar al paciente del entorno, lo cual da espacio a que el mismo pueda ser observado por varias personas mientras realiza la terapia e incluso que el terapeuta pueda auxiliarlo durante el transcurso de la misma, causando la mínima interferencia al registro de los datos que requiere la actividad de terapia activa. La función del controlador de gestos "Controlador_Gesto" es monitorear el comportamiento del usuario para verificar si realiza algún gesto preestablecido en el sistema. En caso de que cumpla con alguno de los gestos procederá a notificar la ocurrencia del mismo a través de la generación de un evento. Para poder comprender mejor el funcionamiento del sub-módulo, resulta necesario comprender como está compuesto un gesto y como funciona, por ello este punto será tratado a continuación con mayor detalle. Gestos Como se puede observar en la Figura 24 un "Gesto" está compuesto por un número de poses. Una "Pose" se puede definir como un conjunto de condiciones referentes a la posición de las uniones del esqueleto del usuario. Tales condiciones son definidas dentro del método "VerificarPose", método que en función a la verificación por parte de las mismas asignarán un estado para la pose. Existen tres estados: pausa, fallo y éxito. 58 Figura 24: Esquema de la sección de Gestos del Kinect TM . Para poder entender el proceso de verificación de un gesto, a continuación se expone como ejemplo el simple gesto de saludar Figura 25: Pose 1 y 2 del gesto de saludar [53]. Como se puede observar en la Figura 25, el gesto de saludar está compuesto por dos poses. Al momento de definir las condiciones que conforman las poses, se debe tomar en cuenta las mínimas que el usuario debe cumplir para poder estar realizando la misma, dichas condiciones normalmente son compartidas por las poses circundantes que a partir de este punto serán referidas como condiciones bases. En este caso de estudio, la condición base es que la mano esté por encima del codo, condición que se debe cumplir en ambas poses. Si el usuario no cumple con esta condición la pose y en consecuencia el gesto falla, ya que se considera que el usuario no tenía la intención de realizar dicho gesto. Si se cumple la condición base se procede a verificar las condiciones específicas que son las que entre sí diferencian dos 59 poses similares. En el caso de estudio planteado, la condición específica es si la mano está a la derecha del codo o a la izquierda. Si la condición se cumple, entonces la pose es exitosa y el gesto procederá a verificar la siguiente. En caso de que esta condición no se cumpla, se duda de si el usuario tiene o no la intención de completar la pose, por tanto, la pose se pausa. Mientras el gesto este en pausa, se seguirá verificando la pose actual por un número de iteraciones predefinidas. Si el gesto nunca cambia de estado durante el transcurso de las verificaciones subsecuentes, entonces éste automáticamente falla, véase la Figura 26. Pose 1 Gesto Pose 2 Gesto Pose 3 Gesto Falla Pausa Éxito Éxito Figura 26: Proceso de evaluación de un gesto. Por lo tanto para que un gesto sea completado, todas las poses que componen el mismo, deben alcanzar el estado de Éxito, de lo contrario fallará automáticamente. Este proceso de verificación se lleva a cabo por el método "UpdateGesto" de la clase "Gesto", la clase "Controlador_Gesto" se encargará entonces, de verificar cada gesto registrado individualmente, en fin de conocer si fue completado o no por el usuario. 60 Despliegue La Figura 27 explica la estructura del módulo de despliegue, cuya función principal es permitir al usuario visualizar los datos provenientes del Kinect TM de una manera simple y comprensible. Los datos que se pueden desplegar del Kinect TM son los siguientes: Figura 27: Estructura de la sección de despliegue del módulo del Kinect TM . Color (Cámara RGB "Dibujar_CamaraRGB") Para desplegar la información proveniente de la cámara RGB, el sistema es capaz de adquirir el stream de color proveniente de la cámara a través del método "Update", luego de obtener la imagen se le aplica una transformación porque originalmente se encuentra en formato BGR. Esta imagen es escalada a una resolución deseada para poderse desplegar en pantalla mediante el método "Draw". Profundidad (Cámara de Profundidad "Dibujar_CamaraDepth") El sistema al igual que con la cámara RGB es capaz de adquirir el stream de profundidad provisto por la cámara de profundidad del Kinect TM mediante el método "Update". Este stream contiene información sobre la distancia relativa al Kinect TM de los objetos dentro de su rango de visión. Se aplica una normalización teniendo como referencia la máxima distancia posible registrada por el Kinect TM en base a su configuración. El resultado normalizado se transforma en una imagen a escala de grises la cual es perfectamente entendible por el usuario y es desplegada a través del método "Draw". 61 Silueta Jugador ("Dibujar_Silueta") Para aumentar el feedback que la aplicación da al usuario se implementó una forma de desplegar la silueta del usuario. Primero se obtiene la imagen de profundidad del stream de profundidad provisto por el Kinect TM mediante el método "Update". Luego para generar la silueta se emplea el siguiente algoritmo en el método "Draw": Entero profundidad = Color.w * 4096 + Color.x *256 Color.y * 16 + Color.z; Entero jugador id = profundidad mod 8; Flotante gris = (profundidad - mínima profundidad) / (máxima profundidad - mínima profundidad); Color color final = paleta colores[ gris * 10.0f] * paleta jugadores[jugador id / jugador actual]; Primero se descomprime la información proveniente del píxel actual de la imagen de profundidad provista por el Kinect TM ("Color"), a este píxel ya se le aplicaron previas transformaciones. Con la información desempaquetada se obtiene la información proveniente de los primeros 3 bits del píxel, dichos bits indican si el píxel pertenece a una porción de algún usuario detectado por el Microsoft Kinect TM . Luego se normaliza la información de profundidad para obtener un valor entre 0-1 que será la escala de grises. Para obtener el color final se mapea la escala de grises a una paleta de 10 colores predefinidos, esto dará como resultado que la imagen resultante tendrá variaciones de colores dependiendo de la profundidad. Después se efectúa la operación "jugador id / jugador actual", lo cual da como resultado 0 en caso de que el usuario detectado, en el mismo fragmento de la imagen de profundidad, sea distinto al usuario que la aplicación ha definido como jugador, en caso contrario el resultado será 1. Este valor se mapea a una paleta de dos colores (transparente y blanco), y el color obtenido se multiplica al calculado en la escala de grises. Así, se obtiene en pantalla el usuario que la aplicación seleccionó como jugador, aislándolo del ambiente y el resto de las personas circundantes. Dado que la Imagen final obtenida posee ruido debido a problemas de precisión por parte de la detección del Kinect TM , para suavizar el mismo, se le aplica a toda la imagen un filtro Gaussiano y se obtiene como resultado la imagen final que compone la silueta del usuario como se puede observar en Figura 28. 62 Figura 28: Silueta de usuario capturada por el Kinect TM y procesada. Esqueleto ("Dibujar_Esqueleto") Este módulo se encarga de desplegar gráficamente la ubicación de los puntos del esqueleto registrados por el Kinect TM . Fue diseñado y utilizado para propósitos de implementación y depuración. Permite mapear una imagen 2D del esqueleto del usuario sobre la imagen de color o profundidad desplegada por las clases anteriormente mencionadas. Despliega con punto las uniones o articulaciones provistas por el Kinect TM y traza una línea entre las articulaciones adyacentes para simular los huesos, posee la capacidad de dibujar las uniones y huesos con distintos colores para representar los estados de seguimiento que tiene el Kinect TM sobre los mismos. 3.2.9. Motor de juego El motor de juego o engine fue desarrollado con la intensión de agilizar y facilitar la creación de los juegos o actividades terapéuticas. Para ello, en él se agruparon funciones como:  Carga de Modelos 3D.  Carga de Escena Compleja.  Animaciones (MD5).  Iluminación.  Efectos con Transparencia.  Sombras.  Física.  Partículas.  Efectos Especiales.  Simulación de Agua.  Distintas Cámaras. 63 Entre otras funcionalidades, por ello cada juego incluye al engine y hace uso de él para realizar todo lo referente al despliegue visual, entre otras cosas, permitiendo así, que el diseñador de un nuevo juego o actividad terapéutica, se concentre en programar y diseñar las particularidades del juego, dejando que el engine se encargue de los elementos comunes. En la Figura 30 se presenta un esquema general del engine, a continuación se explicará con más detalle cada uno de los elementos que lo componen. Configuración Escena Figura 29: Estructuras de almacenamiento para la configuración de la escena. La sección de configuración de escena comprende un conjunto de estructuras de datos, las cuales están descritas en la Figura 29, estas estructuras de datos son utilizadas por el módulo de carga de escena para cargar una escena preestablecida en archivos XML. "Modelo_Estatico" contiene la información correspondiente a una estructura lógica que relaciona un modelo 3D para despliegue y un modelo 3D para el manejo de colisiones, a su vez posee información como la posición, rotación y escala del objeto en el espacio y toda la información correspondiente para configurar sus propiedades físicas ante el motor de física. "Modelo" especifica todas los archivos extras que contiene un modelo 3D de despliegue para efectuar efectos como Deferred lighting. "Luz" contiene la información necesaria para añadir una fuente de luz al sistema de iluminación de la escena y sus propiedades, como la posición y color de la luz. 64 "Bounding_Box_Luz" describe el rango en el que será efectiva la iluminación provista por el sistema de iluminación sobre la escena cargada. Figura 30: Esquema general de las secciones que componen el engine. 65 Cargador Escena La sección del cargador de escena contiene los elementos necesarios para cargar una escena preestablecida en archivos XML y a su vez, presenta estructuras de almacenamiento para facilitar el acceso a objetos individuales de la escena cargada. En la Figura 31 se presenta un esquema de los elementos que componen esta sección. Figura 31: Estructura de la sección del cargador de escenarios. "Loader_Escena" Clase encargada de la carga de un escenario completo a partir de archivos XML de configuración. El método "Cargar_Escenario", verifica que las rutas de los XML proporcionadas por el usuario sean correctas, en caso de ser así, procede a leer el archivo de contenido, el cual mantiene los nombres de todos los archivos pre compilados de los objetos 3D y texturas a utilizar en el escenario, así como su configuración para el despliegue. Luego de leer el archivo procede a copiarlos al directorio actual del Content de XNA y cargarlos en el mismo. Se asume que dichos archivos se encuentran en una carpeta llamada Content en la misma ruta que el XML. Completada esta fase, todo el material gráfico del escenario se encuentra cargado, luego se procede a leer el archivo de configuración, el cual determina la configuración de todos los "Modelo_Estatico" del escenario. Al completarse este procedimiento se obtiene como resultado la distribución de todos los objetos en la escena, así como la relación entre el objeto que se despliega y el que se utiliza para detectar las colisiones, con sus propiedades físicas correspondientes El método "Cargar_Iluminacion" al igual que el método anteriormente descrito, se encarga de leer el archivo que contiene el rango efectivo de la iluminación en la escena, así como la configuración de las fuentes de luz sobre la misma. 66 Luego de ejecutar ambos métodos se tiene como resultado un escenario 3D configurado, con distribución, configuración de objetos 3D para el despliegue, propiedades físicas para el motor de colisiones y la fijación del sistema de iluminación para el escenario actual. "SceneManager" Esta clase proporciona una estructura de almacenamiento para todos los "Modelo_Estatico" presentes en el escenario y suministra una interfaz para acceder fácilmente a un "Modelo_Estatico" en específico si se conoce el nombre del mismo mediante el método "getStaticModel". MD5 Figura 32: Estructura de la sección del cargador de MD5 para el engine. La sección de MD5 fue desarrollada para poder agregar a la escena objetos que posean animaciones, con el fin de incrementar el dinamismo de las mismas. Aunque XNA provee librerías que permiten cargar y reproducir modelos animados en formato FBX, estos presentan ciertas limitantes, como, el hecho de no poder aplicarles Shaders para mejorar su calidad visual o el difícil acceso a su estructura interna debido a su encapsulamiento y poca documentación. Por dichas razones se implementó un cargador del popular formato de Quake [95]MD5. En la Figura 32 se puede apreciar la estructura de esta sección. Las clases "Mesh", "Anim", "Triangulo", "Vertice", "Frame", "Weight", "Joint" y "Joint_Info", son estructuras de almacenamiento para los datos del modelo a cargar y sus animaciones. 67 La clase "Cargador_Md5" provee funciones como:  Cargar una Malla ("Carga_ Modelo")  Cargar múltiples animaciones para una malla ("Cargar_Animacion")  Desplegar el modelo y reproducir una animación("Desplegar" y "Animar")  Cambiar la animación actual del modelo ("Set_Animacion")  Cambiar el frame o posición de reproducción de la animación actual ("Set_Frame") Iluminación Otro de los sub-módulos que compone el engine es el gestor del efecto de iluminación de escenas. Este módulo implementa distintos tipos de iluminación, basándose para ello en diferentes técnicas como, iluminación direccional, puntual, spot y un tipo de iluminación especial con bases en la técnica Deferred lighting. De esta forma el sistema cuenta con distintas opciones por medio de las cuales resulta posible agregar efectos de iluminación. Como lo muestra la Figura 33, el módulo dispone de un conjunto de shaders con los que logra los efectos requeridos, además se implementa un gestor que permite la abstracción de gran parte de las configuraciones necesarias para el empleo de la iluminación. Figura 33: Esquema general de sistemas de iluminación. A continuación se procede a la explicación de cada uno de los tipos de iluminación implementados. Iluminación direccional bajo modelo Phong shading Phong shading [66] es una técnica empírica de iluminación donde los objetos reflejan la luz de otros objetos o de fuentes de luz. La luz reflejada por un objeto corresponde a la influencia de la luz ambiental, difusa y especular, por tanto la iluminación de un punto de la escena se calcula como la suma de estas 3 influencias. 68 La Figura 34 muestra un resumen el efecto “LuzDireccional”, que implementa este tipo de iluminación. Figura 34: Implementación de iluminación direccional bajo modelo Phong shading. Iluminación puntual Este tipo de iluminación consiste en un punto que irradia luz en todas las direcciones. Esta particularidad conlleva a la necesidad de calcular la dirección de luz por cada punto 3D que se evalúe. La Figura 35 muestra en resumen el efecto “LuzPuntual”, que implementa el subsistema. Figura 35: Implementación de iluminación puntual. Iluminación tipo Spot Este tipo de iluminación consiste en una luz en la que los rayos son despedidos de forma cónica. Básicamente resulta de reducir el ángulo en el que una luz puntual despide los rayos de luz, de tal forma que los mismos formen un semi-cono. En la Figura 36 se expone en términos generales el algoritmo empleado para este tipo de iluminación en el efecto “LuzSpot”. 69 Figura 36: implementación de iluminación Spot. Iluminación Basada en Deferred lighting El cuarto tipo de sistema de iluminación implementado se fundamenta en la técnica de iluminación conocida como Deferred lighting. Esta es una técnica de iluminación cuyo nombre confiere al hecho de que el cálculo necesario para la afección lumínica sobre una escena es realizado mediante una primera pasada, mientras que la aplicación de la misma se ejecuta en una segunda pasada. Básicamente la técnica consiste en realizar una primera pasada para calcular datos como información de posición, normales, e incluso relativa a materiales de escena, que se almacenan en el Geometry Buffer como una serie de texturas. Posteriormente, usando la información del buffer se procede al cómputo de la forma en que cada píxel (en espacio de pantalla) resulta afectado por la luz directa e incluso indirecta. Este tipo de iluminación incluye diferentes efectos o shaders y con ello diferentes etapas. A continuación se estudiará cada uno de estos efectos por separado, finalmente se hará mención del funcionamiento en conjunto de estos efectos, además del gestor que automatiza su manejo. El resumen de este gestor puede apreciarse en la Figura 37. Figura 37: Resumen de gestor de iluminación. Efecto Pasada Previa (“effcPrepass”) Este efecto es el responsable de construir el conjunto de texturas que posteriormente serán usadas para la extracción de datos de la escena por otros shaders. 70 Figura 38: Parámetros de efecto de pasada previa. Como se observa en la Figura 38 este método espera la configuración de parámetros como:  “bbMaxMinPointX”, “bbMaxMinPointY”, “bbMaxMinPointZ”: Vectores de dos dimensiones que permiten identificar los puntos máximo y mínimos de la escena en su totalidad. Estos puntos deben contener el volumen total de la escena en el que se requiere la afección de la iluminación.  IdMaterial: Entero que identifica el material del segmento u objeto de la escena a desplegar.  MaterialSize: Dimensión en función a ejes de ordenadas de la textura de materiales.  AlbedoTexture: Textura del objeto que se despliega. Este efecto genera 4 texturas con distinta información de la escena. Específicamente se extrae una primera textura con los vectores normales de todo el espacio visibles de la escena, una textura de posición, con la que se almacena la posición mundo, del espacio visible de la escena. Una tercera textura para almacenar el colorido natural de la escena con el que quedaría luego de ser desplegada (en concreto se almacena los valores cromáticos de las texturas correspondientes en las coordenadas correspondientes). Finalmente una cuarta textura que almacena información dirigida a permitir la representación de objetos con efecto de transparencia, e incluso aquellos que se desee no presente afección lumínica. En la siguiente tabla se muestran las diferentes configuraciones de las texturas extraídas. Captura Especificación Textura Albedo: Para la obtención de esta textura se accede a la posición de la textura propia del objeto que se esté pintando con la coordenada UV correspondiente a cada fragmento. Esta información se almacena en la textura. output.Albedo=tex2D(albedoSampler, coord); 71 Textura Normal: En esta textura RGBA se almacena la información de los vectores normales de la escena, como la información relativa al material de los componentes de la escena. En los primeros tres canales de la textura se almacenan los componentes X, Y y Z de las normales. En el canal A se almacena la coordenada de la textura de materiales correspondiente. output.Normal.xyz=input.Normal.xyz; output.Normal.a=IdMaterial/tableMaterialSiz ; Textura posición: En esta captura se almacena información correspondiente al espacio mundo de cada punto de la escena. Para ello se considera un espacio definido por 3 puntos con el cual se recalcula el posicionamiento de los objetos de la escena. float aux= bbMaxMinPoint-bbMaxMinPoint; output.Position=(input.ReservePosition- bbMaxMinPoint)/aux; Reserva de Albedo: Textura en la que se almacena los objetos cuya representación requiera la activación del efecto de blending, e incluso aquellos objetos en los que su despliegue amerite ser sin afección del sistema de iluminación. La pintura de esta textura sería realizada mediante el pipeline propio del framework XNA. Efecto Luz Puntual Deferred (“effcDeferredPointLight”) Este efecto recibe las distintas texturas construidas por el efecto “pasada previa” y genera la textura correspondiente a la iluminación de la escena considerando las distintas luces que deban ser colocadas. En la Figura 39 se muestran los valores con los cuales el efecto se aplicará para la construcción de la imagen de iluminación. 72 Figura 39: Parámetros de efecto de la luz puntual deferred.  “PositionTexture”: Textura de posición mundo generada por efecto de pasada previa.  “NormalTexture": Textura de almacén de vectores normales generada por efecto de pasada previa.  “MaterialsTexture”: Textura de materiales que será accedida para determinar el material correspondiente a los distintos objetos.  “AlbedoAlphaTexture”: Textura de posición mundo generada por efecto de pasada previa.  “bbMaxMinPointX”, “bbMaxMinPointY”, “bbMaxMinPointZ”: Vectores de dos dimensiones que permite identificar los puntos máximo y mínimos de la escena en su totalidad. En este efecto estos puntos permitirán interpretar de manera correcta la información de posición generada por el efecto de pasada previa en la textura de posición.  “LightPosition”: Posición 3D de la luz que será pintada. Resulta posible pintar múltiples luces, por tanto en cada render de luz deberá especificarse la posición de la luz puntual actual.  “LightAttenuation”: Valor relativo a la característica de atenuación de la luz.  “LightColor”: Color difuso de la luz.  “LightSpecular”: Componente especular de la luz. En términos generales este shader es empleado para el render de un modelo 3D que será apreciado como espacio de luz. En tal sentido, se trataran los píxeles en los que el render se disponga, considerando cada uno de los valores puestos a disposición mediante las texturas anteriormente extraídas. La atenuación del sistema de iluminación en este caso estará asociada a la lejanía del punto 3D con respecto a la posición (centro) de la luz. Cabe destacar que la configuración de normales y posiciones extraídas de las texturas generarán un efecto con el cual el objeto desplegado como luz se proyecte sobre la superficie de la malla propuesta por la escena, con lo que se compone el efecto lumínico. En la Figura 40 se muestra la textura de iluminación obtenida al tratar los datos de las texturas capturadas previamente. 73 Figura 40: Mapa de iluminación. Efecto Composición Corresponde al efecto final de la metodología para la aplicación del modelo de iluminación, y consiste en integrar la imagen de color (Albedo) con la imagen de iluminación construida. Este efecto extrae el promedio de las imágenes de Albedo y de iluminación colocándolos en una nueva imagen que será la composición final. Sus variables relevantes pueden ser observadas en la Figura 41. Figura 41: Parámetros de efecto de composición.  “AlbedoSampler”: Textura en la que se almacena la información de las texturas originales de cada objeto en escena.  “LightSampler”: Textura de iluminación construida por efecto Luz Puntual Deferred.  “ReserveAlbedoSampler": Textura especial de reserva de albedo construida durante la ejecución del efecto Pasada Previa.  “ShadowMap”: Textura de sombras. A través de esta textura se permite la inclusión de sombras en la escena. En la Figura 42, se muestra el resultado de combinar las distintas imágenes recibidas en esta etapa. 74 Figura 42: Composición final de la escena. Además de los efectos implementados para la iluminación, también se implementa un gestor que automatiza en gran parte los pasos y configuraciones necesarias para el empleo de este sistema de iluminación. El gestor de iluminación cuenta con un conjunto de métodos que requieren ser llamadas en un orden específico para el correcto funcionamiento de la iluminación. De esta forma el empleo de este efecto conlleva a la necesidad de adoptar cierta metodología al momento del render de la escena. Este paradigma de despliegue establece un conjunto de pasos que son:  Preparación de la textura de sombras: En este paso se genera el mapa de sombras que deberá ser referido al sistema de luces. Si no se requiere la inclusión de sombras, la imagen establecida para este fin funcionará como una máscara sobre el total de la imagen representada. De esta forma si esta máscara se almacena como una textura color blanco, la misma no tendrá afección alguna en el render final.  Activación de luces: En este paso se requiere la activación del sistema de iluminación. Para ello es necesaria la invocación del método propio del gestor dedicado a esta actividad: active(View: Matrix, Projection: Matrix, CamPos: Vector3, Min: Vector3, Max: Vector3, Mat: Texture2D) Donde “View” es la matriz de visión de la cámara 3D usada, “Projection” la matriz de proyección de la misma, “CamPos”, posición espacial de la cámara; “Min” y “Max”, puntos 3D que determinan el volumen de la escena que se desea iluminado, y finalmente “Mat”, la textura de materiales.  Pintura de objetos de escena Esta sección está dedicada a la pintura de los distintos objetos de la escena. En específico, tiene lugar la invocación del método de pintura de los objetos que si se quiere que muestren la influencia lumínica deberá adoptar el efecto de pasada previa. 75  Construcción de mapa de luz En este paso se requiere la invocación del método del gestor, dedicado a la generación del mapa de iluminación a partir de las imágenes previamente generadas. posRender(View: Matrix, Projection: Matrix, CamPos: Vector3, Min: Vector3, Max: Vector3, Mat: Texture2Dl , Size: Texture2D) Donde “Size” corresponde a las dimensiones del mapa de luz.  Generación de la composición final Por último se requiere la invocación al método con el cual el gestor de iluminación procederá a juntar el efecto de luz con la imagen de la escena, el target especial de reserva de Albedo e incluso, con el mapa de sombras. Simulaciones física Con el fin de incrementar el dinamismo y realismo de la escena, se incluye la gestión de simulaciones físicas en los ambientes recreados con los que se buscan proveer las actividades terapéuticas. Para ello se empleó como motor de física a BEPUphysics[61]. Se utilizó este engine sobre otros principalmente debido a que está desarrollado sobre C# y XNA 4.0, además de ser el único engine de entre otros considerados, que se encuentra en un proceso de desarrollo más estable. Este engine provee de distintas características que fueron claves para el desarrollo de la aplicación. Entre ellas:  Fácil integración con XNA.  Código abierto.  Física realista a bajo costo computacional.  Permite la creación de ConvexHull para las colisiones.  Provee estructuras para permitir detectar colisiones de objetos no convexos.  Facilidad para programar reglas de colisión personalizadas.  Permite la creación de articulaciones con distintos grados de libertad y motores.  Permite configurar propiedades de los elementos como masa, fricción, elasticidad, entre otros. Todas estas funciones, entre otras, fueron ampliamente usadas a lo largo del desarrollo de las actividades terapéuticas, por ejemplo:  Las bandas transportadoras en el juego de la fábrica están compuestas de motores conectados con uniones de dos grados de libertad.  Las tiras plásticas colocadas en el juego de la fábrica fueron diseñadas con planos conectados entre sí por articulaciones con un grado de libertad y baja resistencia.  En el juego de la fábrica se emplearon fuerzas que alteran la gravedad del ambiente para simular la succión por parte de la máquina con la que se atrapan los objetos.  En el juego de la nave espacial se emplea la capacidad de alterar velocidades de los objetos en tiempo real, simulación de gravedad cero y lanzamiento de proyectiles.  Se utilizaron reglas de colisiones personalizadas para evitar que los meteoritos chocaran entre sí, mejorando considerablemente la interacción del usuario con el juego. 76  Se emplearon estructuras de ConvexHull personalizadas para todos los elementos presentes en la escena y a su vez se utilizaron estructuras no convexas cuando fueron requeridas. En la Figura 43 se presentan capturas de pantallas de alguna de las características usadas en las actividades terapéuticas. Figura 43: Bandas transportadoras, tiras de plástico y simulación de succión. 77 Partículas Se integró partículas para incrementar la calidad visual de los juegos y proveer distintas formas de retroalimentación para el usuario. Para ello se utilizó el motor de partículas DPFS[75]. Este motor está desarrollado para XNA y es Open Source, proveyendo de características como:  Fácil integración.  Buena documentación.  Partículas con características como posición, velocidad, aceleración, rotación, color, entre otras.  Plantillas predefinidas para crear sistemas de partículas.  Partículas animadas.  Posibilidad de modificar los shaders con los que se despliegan las partículas.  Posibilidad de modificar sistemas de partículas existentes o crear sistemas completamente nuevos. Estas características fueron extensamente usadas durante la implementación de las actividades terapéuticas, por ejemplo:  Se generaron nuevos sistemas de partículas en todos los juegos.  Sistema de partículas personalizadas para simular los eventos de succión en el juego de la fábrica.  Sistema de partículas personalizado para simular explosiones y fuego en el juego de los meteoros.  Sistema de partículas con animaciones para simular las burbujas de aire provenientes de los peces y las tuercas provenientes de la máquina en el calibrador del guante.  Sistema de partículas con detección de colisiones para simular las tuercas provenientes de la máquina en el calibrador del guante. En la Figura 44 se puede observar algunos de los efectos de partículas empleados en los juegos. Figura 44: 1) Burbujas, 2) Succión de máquina, 3) Fuego y, 4) Humo y tuercas. 78 Interfaz La interfaz presentada al terapeuta fue diseñada y programada en WPF ya que se realiza en una ventana aparte la cual no requiere de XNA, debido a que los mismos presentan problemas de compatibilidad, surge la necesidad de utilizar otro mecanismo para la interfaz interna de los videojuegos. La solución para este problema fue XUI[65]. Esta es una librería que permite realizar interfaces de usuario en XNA de una manera rápida y sencilla, y dispone de características como:  Elementos de interfaz predefinidos.  Sistema de texto enriquecido, con soporte para múltiples texturas y animaciones por carácter.  Soporta múltiples renders.  Control para múltiples interfaces o pantallas.  Animaciones.  Permite la fácil adaptación y modificación (Open Source). XUI fue empleado en la implementación de todos los elementos de interfaz de usuario presentes en todas las actividades terapéuticas desarrolladas como se puede apreciar en la Figura 45. Cámara La sección de cámara contiene numerosas implementaciones de cámaras como se puede observar en el esquema presentado en la Figura 46. A continuación se da una pequeña explicación de en qué consiste cada tipo de cámara. "FreeCamera" Implementación de una cámara libre, la cual puede ser desplazada en cualquiera de los tres ejes cardinales, el punto de vista de la misma puede ser alterado a voluntad. Esta cámara es la que se conoce en los juegos como "First Person" o primera persona, ya que es comúnmente usada para simular como el personaje que se controla, observa el mundo por el que navega. "ChaseCamera" Esta cámara es la definida en los juegos como "Third Person" o tercera persona, esta cámara persigue a un objetivo predefinido a una distancia fijada del mismo, el punto de vista de la cámara rota alrededor del objetivo que comúnmente es el personaje con el que el usuario juega. Esta cámara también presenta mecanismos de aceleración para simular reacciones físicas. "PathFollower" Esta clase implementa una metodología para la generación de una animación simple. A pesar de no mantener una estructura característica de una cámara de navegación en escenas 3D, el paradigma que esta clase plantea permite vincular a una cámara el dinamismo de un movimiento automático pre configurado, con soporte de interpolaciones, a nivel de cambio de posición como también de dirección (rotaciones). 79 Figura 45: Interfaz del juego de los meteoritos y de la calibración del Kinect TM . "ArcBallCamera" Cámara utilizada comúnmente en los editores gráficos 3D. Esta cámara rota sobre el eje de un objeto o punto seleccionado. "TargetCamera" Simula una cámara ubicada en un punto fijo, observando un lugar en específico, es una implementación sencilla en donde, tanto la ubicación como punto de foco de la cámara deben ser cambiados manualmente por el usuario. 80 Figura 46: Esquema de la sección de cámara del engine. Efectos Especiales La sección de efectos especiales contiene distintos efectos visuales desarrollados para mejorar la calidad visual del juego, así como el feedback e incluso en algunos casos incrementar el nivel de diversión que experimenta el usuario durante la ejecución de la actividad terapéutica. En esta sección se implementaron efectos como:  Blending, para simular superficies de cristal o plástico.  Glow, para capturar la atención del usuario a ciertos elementos del entorno.  Shatter, efecto que simula la destrucción de un material similar al cristal.  ParallaxMapping, efecto para simular relieve en superficies planas.  Agua, simulación de agua con reflexión y refracción. En la Figura 47 se pueden apreciar alguno de los efectos mencionados anteriormente. 81 Figura 47: Muestra de efectos como shatter y reflexión sobre el agua. 3.2.10. Gráficos estadísticos La solución cuenta con un conjunto de metodologías que permite la generación automática de gráficos estadísticos que podrán ser usados para la evaluación del estado e incluso de la evolución del paciente en el transcurso del tiempo. De esta forma, como lo muestra la Figura 48 el sistema incluye tres tipos de gráficos estadísticos: Gráficos generales, en tiempo real, e históricos. 82 Figura 48: Estructura general de gráficos estadísticos. Gráficos generales: Los gráficos generales constituyen estadísticas acumulativas con las que son posibles evaluar el estado actual del paciente. Son estadísticas que se calculan tomando en cuenta la actuación del paciente en el sistema, hasta el momento de la última actividad. Gráficos en tiempo real: Los gráficos en tiempo real resultan de evaluaciones de la movilidad del paciente, cuando el mismo realiza una sesión de rehabilitación empleando algunos de los juegos propuestos por el sistema. Este tipo de gráficos podrán visualizarse únicamente cuando algún juego se esté ejecutando. Gráficos históricos: Este tipo de gráficos muestra información acerca de la actuación del paciente en cada sesión, permitiendo la evaluación de la evolución del paciente. Permiten realizar trazas históricas de cada paciente y en función a estas realizar diagnósticos de mejoras. Para el despliegue de las estadísticas se emplea una librería especializada en la generación de gráficos. Esta librería Open source responde al nombre de ZedGraph[82]. 3.2.11. Manejador de base de datos El módulo manejador de base de datos es el encargado de gestionar todas las operaciones que requieran el acceso a la base de datos del sistema. Permite el registro, inicio de sesión y obtención de datos de un paciente previamente registrado, actualización y eliminación de un paciente. Este módulo se desarrolla usando SQLite, una librería que alberga un sistema manejador de base de datos y que permite la creación e interacción de base de datos locales. Como lo muestra la Figura 49 el manejador de base de datos está constituido por 3 sub-módulos. 83 Figura 49: Estructura general de módulo de manejo de base de datos. Estructuras Las estructuras conciernen al conjunto de definiciones a través de las cuales la aplicación enviará o reservará datos hacia o desde la base de datos. Entre las definiciones más generales se pueden destacar: Paciente Define a un paciente en el sistema. A continuación se exponen los campos de la estructura.  Nombre: Nombre del paciente. Este dato será mostrado como indicador cuando la sesión de un paciente esté activa.  Apellido: Apellidos del paciente.  Edad: Edad del paciente  Sexo: Sexo del paciente.  Historia: historia médica asociada al paciente.  ID: Identificador único que el sistema maneja internamente para diferenciar un paciente en específico.  Foto: Imagen asociada al paciente. Esta tiene lugar con el objeto de resolver posibles conflictos entre pacientes de nombres iguales y la necesidad por parte del personal médico de seleccionar a un paciente en específico. Resumen de paciente Ésta es otra de las estructuras generales que son empleadas por el sistema. Básicamente mantiene los valores de calibración de los pacientes, permitiendo la obtención del rango de movilidad de cada uno al momento de iniciar una sesión de rehabilitación. Los datos almacenados por esta estructura son:  Mínima y máxima flexión por cada dedo en mano derecha e izquierda.  Mínimo y máximo alcance de mano derecha e izquierda.  Identificación del paciente. 84 Interfaz de SQLite Se implementa una interfaz a fin de generar una capa de abstracción con respecto al empleo de la librería SQlite y las distintas operaciones que resultan necesarias por el sistema. Figura 50: Métodos en el sub-módulo manejador de SQLite. Como se muestra en la Figura 50, se implementan distintos métodos para la interacción con la base de datos: ExecuteDataQuery(string strgSqlQuery): DataTable Este método permite ejecutar un query con el que se espera el retorno de una tabla. Mediante éste resulta posible obtener la información de un paciente, sus datos de calibración y sus registros estadísticos. ExecuteNonQuery(string strgSqlQuery): int Con este método se permite ejecutar un query sin valor de retorno salvo por una notificación de la finalización de la operación. Este método es ideal para operaciones como inserciones, eliminaciones y actualizaciones. ExecuteNonQuery(string strgSqlQuery, out int iId, bool getLastId = false): int Con este método se permite ejecutar un query sin valor de retorno más que una notificación acerca del estado de culminación de la operación. Además mediante este método resulta posible obtener el ID del último registro insertado. Gestor de tablas Consiste en un conjunto de clases que se implementan con el objeto de automatizar el registro, actualización y eliminación de los distintos elementos que la aplicación pueda requerir. Para ello cada clase implementada en este conjunto obedecerá al tratamiento de alguna estructura en particular. 85 Objetos En este módulo se establecen las estructuras mediante las cuales un objeto puede ser representado en la escena con la aplicación de los distintos efectos y dinamismos ofrecidos por el motor gráfico que se desarrolla para la aplicación. Las estructuras establecidas definen la forma de un objeto en el sistema, previendo soporte de física, iluminación y demás efectos propios de engine. El módulo gestiona desde la carga de los objetos hasta incluso su despliegue. Además dispone de metodologías para la carga de escenas pre-configuradas desde el constructor de escenarios (módulo encargado de la construcción offline de escenas 3D). En este módulo se implementa 2 clase vitales dentro del render de un objeto 3D. Estas 2 clases corresponden a “Modelo_Estático” y a “MetaObject”. La clase “Modelo_ Estático” es una clase determinante en la integración del dinamismo de física en el sistema, y funciona como una estructura intermedia que puede relacionar a un único modelo gráfico con uno o más modelos de colisión. Cabe destacar que, como indica la Figura 51, a su vez un modelo gráfico puede estar asociado con múltiples modelos estáticos. Figura 51: Implementación general del módulo de modelos. Nótese que para la gestión de física mediante la librería empleada (BEPUphysic) se hace necesaria la consideración de una jerarquía de modelos que incluye: Modelo Gráfico: Modelo que se empleara para el despliegue del objeto. Estos modelos se podrán cargar al sistema de forma única. Modelo Colisión: Modelo que emplea internamente la librería para gestionar el dinamismo de física que según la configuración de espacio (variable requerida). Por otra parte, la clase “MetaObject” modifica la estructura general de un modelo a fin de darle soporte con respecto a la iluminación del sistema como también de efectos especiales propios del engine. Esta clase define las diferentes alternativas en cuanto a la forma de despliegue, considerando para ello a la gestión de la física, con lo que una instancia de “MetaObject” puede constituir un modelo gráfico. 86 3.2.12. Constructor de escena El constructor de la escena es un módulo aparte desarrollado con propósitos de agilizar el proceso de implementación de las actividades terapéuticas. Este módulo incorpora el engine descrito anteriormente y funciona como un editor de escena. Este editor posee las siguientes características:  Permite cargar todos los elementos gráficos a utilizar en el escenario (Modelos y Texturas).  Agrega y elimina objetos a demanda del usuario en el escenario.  Establece la relación entre un objeto para despliegue con un objeto para detección de colisiones, descrito anteriormente en "Modelo_Estatico".  Permite rotar, desplazar y escalar cada objeto individualmente.  Permite asociar texturas y efectos visuales a los objetos individualmente.  Puede alterar las propiedades para el motor de física de cada objeto presente en la escena.  Genera la configuración del bounding box de iluminación para la escena.  Agrega y elimina fuentes de luz al sistema de iluminación de la escena.  Permite configurar las propiedades de cada una de las fuentes de iluminación de la escena.  Navegación a través de la escena.  Guarda la configuración de la escena.  Puede cargar la configuración de una escena preestablecida para continuar editándola. Es importante desatacar que debido a la imposibilidad de XNA para cargar objetos en tiempo real si no están previamente compilados, se debió implementar en el editor, mecanismos para pre compilar los elementos a usar en el escenario, permitiendo de esta manera, poder editar escenas existentes en el juego sin necesidad de recompilar el juego. Además de editar la escena, el editor funciona como un mecanismo, para evaluar cómo influye la iluminación en una escena existente y como la física afecta a los elementos existentes en el escenario. En la Figura 52 se puede apreciar como se construye la escena de la fábrica utilizando el editor de escenarios implementado. 87 Figura 52: Ejemplo del escenario de la fábrica siendo construido en el constructor de escena. 88 Capítulo 4. Análisis y evaluaciones médicas En este capítulo se describe en detalle los distintos juegos implementados, considerando sus basamentos a nivel gráficos, como también a nivel médico. Serán expuestas las temáticas que abordan cada juego, en qué consiste cada uno, el tipo de ejercitación que implican e incluso lo que se busca inducir con ellos. Al mismo tiempo se presenta información relativa a la lógica de interacción que caracteriza a cada juego. Así, se especifican los gestos que deben ser ejecutados ante cada juego y los eventos particulares que generalmente mediante una actuación resaltante, entran en escena. Adicionalmente se explicará la interfaz gráfica interna de cada actividad de integración y el conjunto de datos que son considerados para el almacén en el repertorio de datos de pacientes. Incluso se especificará el significado de los gráficos estadísticos asociados a cada juego. Finalmente se expondrá un conjunto de observaciones establecidas por personal médico dirigidas a la evaluación de cada juego con respecto al ámbito de la rehabilitación. A continuación se presenta cada una de las actividades de integración desarrolladas en el presente trabajo. 4.1. Juego A: La Fábrica Corresponde a uno de los juegos desarrollados para la aplicación. Como su nombre lo hace inferir, el juego se desarrolla en una fábrica, en la que se disponen 3 bandas transportadoras. Cada banda está constituida por un conjunto de cilindros cuyas rotaciones genera una dinámica de transporte para los objetos que subyazcan sobre ésta. Eventualmente se colocarán objetos en las bandas transportadoras, inicialmente situados en el extremo opuesto al que se encuentra el usuario con respecto a las bandas. Cada uno de estos objetos está asociado con uno de los 6 modelos gráficos disponibles. Estos últimos responden a la representación virtual de un sombrero, un dado, una dona, una lata de alimento, una estrella y una casa. En el extremo cercano al usuario se disponen un conjunto de cajas que cumplen el papel de contenedores. El usuario tiene como objetivo recoger los objetos que se encuentren en las bandas transportadoras y ubicarlos en los contenedores. Cada uno de éstos, está identificado con el tipo de objetos que deben ser almacenados en este, elemento que debe tomar en cuenta el usuario antes de ubicar un objeto en los mismos. Para el feedback correcto entre el dinamismo del juego y la acción que ejecute el jugador, se ubica sobre las cintas un modelo en representación a una máquina, con la capacidad de extraer los objetos que éstas trasladan, para luego permitir soltarlos sobre alguno de los contenedores. Al mismo tiempo, esta máquina responderá a los cambios de posición en el eje de las abscisas que realice el usuario con la mano a utilizar durante el juego, tomando en cuenta ante estos movimientos el rango máximo de movilidad definido para el usuario durante el proceso de calibración. 89 Adicionalmente se incluyen elementos ambientales con lo que se procura hacer la escena lo más entretenida posible, con el objeto de capturar la atención del jugador. Como ejemplo de esto, se puede resaltar una máquina (modelo MD5) que se dispone de forma relativamente discreta y que en la lógica del juego cumple el papel de colocar los objetos sobre las cintas. 4.1.1. Objetivos terapéuticos Con este juego se espera incrementar la capacidad de movimiento a lo largo y ancho del plano transversal, rompiendo de este modo un posible patrón de rigidez (o falta de fuerza) generado por el tono muscular. 4.1.2. Interacción Este juego requiere del ejercicio de 4 pasos para el cumplimiento de los objetivos generados. Específicamente la acción de recoger un objeto y colocarlo en el contenedor esperado es generada mediante 4 movimientos claves. Asumiendo que el brazo seleccionado (antes del inicio de la actividad) ha sido el brazo derecho, el jugador deberá:  Colocar la máquina de extracción sobre algún objeto de alguna cinta: El usuario deberá mover el brazo derecho de forma paralela al plano transversal a fin de colocar la máquina de extracción (cuya posición responderá a la posición de su brazo) sobre las cintas, procurando que en el rango de extracción (que es especificado gráficamente mediante un sistema de partículas) existan objetos para ser extraídos. Con este movimiento el paciente, a nivel físico ejercitará el hombro realizando movimientos de aducción y abducción horizontal.  Extraer el objeto de la cinta: El jugador deberá levantar el brazo izquierdo con la finalidad de activar la absorción de la máquina. El usuario deberá mantener el brazo izquierdo en esta postura hasta que el objeto sea absorbido (tal evento será destacado por la aplicación a partir del despliegue de sistemas de partículas que evidencien la recepción del objeto). Una vez el objeto sea atraído, el jugador puede proceder a relajar el brazo. Con este paso, el paciente deberá ejercer extensión de hombros.  Colocar la máquina de extracción sobre el contenedor correspondiente: Una vez extraído el objeto, el usuario deberá colocar la máquina sobre el contenedor que presente la imagen del objeto que se tiene absorbido. Con esto, nuevamente se ejercita el hombro a partir de movimientos de aducción y abducción horizontal.  Finalmente, el usuario deberá dejar caer el objeto sobre el contenedor: Estando la máquina colocada sobre el contenedor correspondiente al objeto absorbido, el usuario deberá mantener el brazo extendido con una flexión de hombro de 0 grados (nótese que para entonces, ya el jugador podría estar ejecutando esta posición). Luego ejercer un movimiento de flexión de codo y posterior a este regresar al estado inicial. 90 4.1.3. Parámetros El juego permite la configuración de ciertos parámetros que influyen en la forma de jugar. Los cuales son:  Tiempo: Tiempo en minutos que durará el juego en actividad, despreciando las etapas de introducción y despliegue de los puntos totales obtenidos.  Dificultad: Se presentan 4 niveles de dificultad: Fácil, medio, difícil, extremo. Cada uno de estos niveles resulta relativo a la cantidad de tipos de objetos que puedan disponerse sobre las bandas, y por tanto a la cantidad de contenedores presentados. 4.1.4. Eventos El juego incluye cierto contenido que se reproduce solo en ciertas ocasiones, y en función a la forma de juego que se realice. Específicamente, se premia al jugador que coloque objetos en cestas correctas de forma consecutiva sin dejar que algún objeto impacte con el suelo y se rompa (dinámica con la cual se resuelve tal evento). 4.1.5. Interfaz Con la interfaz que muestra el juego se expone la información del estado actual del jugador con respecto a la lógica particular que implementa. Figura 53: Interfaz de juego La Fábrica 91 Como se aprecia en la Figura 53, la interfaz del juego dispone de distintos componentes: 1. Un icono que advierte del tipo del próximo objeto que será colocado en alguna de las cintas. Éste se encuentra en la parte superior izquierda de la pantalla. 2. Un icono dispuesto en la parte derecha superior de la pantalla que muestra la cantidad total de objetos correctos que hasta ese momento ha logrado el jugador. 3. Un contador regresivo, acorde al tiempo restante del juego, colocado en la parte superior central de la pantalla. 4.1.6. Registro y estadísticas Luego de la culminación del juego tiene lugar el almacén de datos con los que se construirán las gráficas de análisis cuando sean requeridas. De esta forma, se requiere la obtención de ciertos datos que a lo largo de la ejecución del juego se habrían podido calcular. Los valores almacenados son: Estadía promedio del posicionamiento del brazo: Durante la ejecución del juego se calcula en cada cierto instante, la región en el espacio sobre el eje de abscisas en la que se encuentre la mano del brazo empleado para jugar. Para ello el espacio alcanzable por el paciente (determinado mediante calibración) se divide en 4 regiones de la misma longitud (sobre el eje evaluado), cada una de las cuales es considerada como un posible ámbito de estadía de la mano en algún momento dado. Cantidad de objetos correctos, absorbidos y presentados: Internamente se contabilizan los objetos presentados o colocados en las cintas durante cada sesión de juego, así como también los objetos que fueron absorbidos, además de los posicionados en contenedores correctos. Cantidad de ejecuciones y tiempo total jugado: Luego de cada ejecución los valores correspondientes a la cantidad de ejecuciones realizadas como también al tiempo invertido en ello, se actualiza a fin de poder medir la diferencia en tiempo de ejercitación en cada brazo, en caso de ser necesario. Con estos datos se generan gráficos que resumen el comportamiento de cada paciente ante la aplicación, dando a conocer estimaciones a cerca del estado actual de cada uno, además de una vista histórica resumida de la actuación de estos en las últimas sesiones de terapia. Por otra parte, durante la ejecución del juego se genera una gráfica en tiempo real (apreciable en la ventana dirigida al terapeuta), con la cual se puede estimar el tiempo de estadía de la mano cuyo brazo ha sido seleccionado como principal (en configuración de juego) en alguna de las regiones en las que se divide el espacio. Este último dato puede ayudar a apreciar la dificultad por parte del paciente en cuanto al ejercicio de cierta posición, pues, esta representación resume la disposición de la mano durante la ejecución actual del juego. Otra de las ventajas asociadas a esta gráfica es que permite que el terapeuta pueda atender otras necesidades, en caso de que fuese preciso, sin perder en términos relativos este seguimiento. 92 4.1.7. Logros terapéuticos alcanzados Según observaciones del personal médico, este juego puede ser usado para pacientes que presenten déficit de atención, hiperactividad, e incluso pacientes que presenten problemas de adormecimiento en alguno de sus brazos. Sin embargo destacó, que difícilmente podría ser aplicado a pacientes con daños notables a nivel neurológico, pues el mismo demanda cierta capacidad cognitiva al requerir coordinación de ambos brazos. Se menciona que un paciente con una discapacidad cerebral avanzada le sería imposible cumplir con los movimientos y la coordinación exigida por el juego, con lo que sería frustrante para el paciente. Aun así, se menciona que el grado de habilidad cognitiva exigida seria acorde al tratamiento de pacientes hiperactivos, en los cuales probablemente se generaría la actividad cerebral correcta como para apaciguar el estado de inquietud. 4.2. Juego B: G.A.L.A.X.Y La temática del juego G.A.L.A.X.Y se sitúa en el espacio exterior, con la que el jugador se encontrará en una nave espacial que está siendo atacada por un conjunto de asteroides. La nave ha perdido una de sus partes debido al impacto de los asteroides. De esta forma, los mismos pueden entrar a la nave y destruir partes internas de la misma, por lo que el jugador tiene la misión de evitar que esto suceda. Para ello debe re direccionar los asteroides que entren en la nave hacia afuera de la misma. A medida que los asteroides impacten contra la nave, trozos de éstos entrarán, y el usuario deberá usar sus manos, para golpearlos y tratar de esta manera de re direccionarlos hacia afuera de la misma. Además de cumplir con la ardua tarea de detener los asteroides, distintos objetivos en forma de dianas aparecerán periódicamente en escena, si el usuario es lo suficientemente habilidoso podrá dirigir a los asteroides hacia los mismos, provocando que se destruyan y obtenga una bonificación en su puntuación total. 4.2.1. Objetivos terapéuticos En esta actividad terapéutica se trabajan ambos brazos al mismo tiempo, ejercitando la motricidad gruesa, así como la coordinación al lograr alcanzar el asteroide y redirigirlo en la dirección deseada. El paciente deberá extender ambos brazos en paralelo a los planos transversales y frontales, en su máxima capacidad posible, para poder abarcar todas las aéreas en las que los asteroides pueden aparecer. Con esto se pretende entonces que efectué ejercicios de extensión y de coordinación motora visual. Debido a que el paciente tendrá la necesidad de ser veloz para alcanzar a golpear todos los asteroides en pantalla, se pretende que el mismo realice ejercicios de fuerza durante el transcurso de la actividad. 93 En este juego se hace especial énfasis en ejercitar el movimiento del brazo a lo largo del plazo sagital (flexión y elongación del codo), debido a que el usuario será premiado dependiendo de la fuerza con la que golpee el asteroide, la cual es determinada por la velocidad con la que el usuario pueda extender el brazo en el eje Z hasta la máxima extensión registrada en el calibrador. 4.2.2. Interacción Para este caso no existen gestos predefinidos para jugar, el usuario puede mover sus manos libremente para alcanzar los objetivos. En caso de que el usuario quiera proporcionarle una dirección en específico a un asteroide, debe procurar luego de impactarlo, dirigir la mano en el sentido en el que desea que se proyecte el asteroide. Por defecto el asteroide siempre se dirigirá hacia adelante, por tanto la dirección corresponde solo a los ejes X y Y. Para proporcionarle fuerza al impacto, el usuario debe procurar, luego de impactar el objeto, desplazar su mano lo más rápido posible hacia adelante. Todas estas consideraciones serán tomadas en cuenta fácilmente, si el usuario realiza la acción completa de golpear una pelota con las manos de manera natural. 4.2.3. Parámetros del juego Se determinan dos parámetros que puede controlar el terapeuta, los cuales son tiempo de juego y fuerza. El tiempo de juego viene dado en minutos y corresponde a cuánto tiempo la actividad durará, sin tomar en cuenta el ciclo de inicio del mismo, ni el ciclo de despliegue de puntuación. La fuerza se expresa por porcentajes y corresponde al nivel de esfuerzo que debe realizar el usuario para lograr propulsar los asteroides a su máxima velocidad. Este valor de fuerza es calculado como la distancia que logra recorrer la mano del usuario desde un punto a otro en el eje Z durante un tiempo T, esta distancia es correlacionada con la máxima distancia que el usuario registró en el eje Z durante la calibración, mientras menos sea la diferencia entre ambas distancias se considera que el usuario se movió a mayor velocidad y por tanto se esforzó más. Por esto dicho parámetro de fuerza establece qué tan grande puede ser la diferencia entre las distancias para determinar qué tan fuerte golpeo el asteroide, un 10% de esfuerzo significa que la distancia registrada debe ser como mínimo un 10% de la distancia que se registró durante la calibración, para considerar que el usuario se esforzó al máximo. 94 4.2.4. Eventos En el juego ocurren una sucesión de eventos, los cuales se inician a partir de que el usuario golpee una roca. Cuando el usuario realiza un golpe efectivo se despliega una estrella en el lugar de la colisión y un conjunto de sonidos, para indicar que ocurrió un golpe, a su vez se realizan los cálculos de dirección y fuerza con la que se golpeó la roca. La fuerza se despliega en una barra que se llena a medida que más fuerza se aplique, a su vez si ésta alcanzo el máximo, la roca golpeada se enciende, dejando una estela de fuego. Cuando el usuario lleva una sucesión de más de 3 rocas golpeadas sin fallar ninguna, se activan multiplicadores, los cuales incrementan el puntaje que el jugador obtiene siempre y cuando el mismo no falle ninguna roca. A su vez, siempre que el jugador alcance un múltiplo de 5 en el número de rocas consecutivas sin fallar se despliega un texto para alentarlo a que trate de continuar con la racha. El evento del fuego se despliega para causar un incentivo en el usuario a golpear lo más fuerte que pueda las rocas debido al atractivo visual, además de obtener una mayor puntuación. Los multiplicadores de puntuación se despliegan para incentivar al usuario a esforzarse a no fallar ninguna roca, lo que genera que el mismo deba mantenerse siempre en movimiento optimizando de esta manera el tiempo que se ejercita. De manera que el juego no solo premia a que trate de cumplir con los objetivos (golpear las rocas), sino que motiva al jugador a auto superarse tratando de alcanzar mejores puntajes a través del esfuerzo de golpear las rocas con fuerza y sin fallar ninguna. 4.2.5. Interfaz En la interfaz gráfica del juego se despliegan distintos elementos, véase Figura 54. A continuación se explica cada elemento según la numeración provista en la imagen 1. Cantidad de Objetivos que ha destruido el objetivo. 2. Tiempo restante de juego. 3. Puntaje actual. 4. Indicador de mano del usuario. 5. Barra de fuerza con la que se golpeó la roca. 6. Multiplicadores de puntaje. 7. Número de rocas que ha golpeado el usuario consecutivamente. 8. Mensaje de aliento que indica cuantas rocas lleva el usuario sin fallar. 95 Figura 54: Interfaz de juego G.A.L.A.X.Y 4.2.6. Registro y estadísticas Este juego almacena distintos datos en la base de datos para monitorear el progreso del paciente durante el transcurso de la terapia, se almacenan datos como:  Número de meteoros totales.  Número de meteoros golpeados con fuerza mínima diferenciando ambas manos.  Número de meteoros golpeados con fuerza media diferenciando ambas manos.  Número de meteoros golpeados con fuerza máxima diferenciando ambas manos.  Número de objetivos totales.  Número de objetivos destruidos.  Área de permanencia promedio de la mano izquierda.  Área de permanencia promedio de la mano derecha. Con respecto a las estadísticas en tiempo real, se presenta un gráfico con el cual es posible visualizar el posicionamiento relativo, en términos del eje de profundidad, de cada una de las manos del jugador a lo largo del tiempo de juego. La profundidad de cada mano es representada mediante un conjunto de barras que expresan el posicionamiento promedio de cada mano sobre las regiones en las cuales el eje de profundidad resulta dividido (semejante al juego A). 96 4.2.7. Logros terapéuticos alcanzados El personal médico expreso que este juego, funciona para ejercitar extensión y elongación del codo mediante el movimiento que debe realizar el paciente para poder aplicar fuerza a los asteroides, los movimientos que implican alcanzar los asteroides para impactarlos ejercitan la amplitud articular del brazo. Al ser un juego que no posee ningún tipo de limitante en los movimientos que puede realizar el paciente y que permite que el mismos se pueda desplazar con libertad, el personal médico indicó que sería utilizado para pacientes con cualquier tipo de patología que involucre problemas motores. Como el paciente debe tener la capacidad de coordinar sus movimientos con las acciones que ocurren en pantalla y requiere de un cierto grado de concentración, el juego sirve a su vez como un instrumento para tratar a pacientes con desordenes de atención y autismo. 4.3. Juego C: ACIS. Este juego presenta una temática caracterizada por un ambiente acuático ambientada por elementos propios de tal tipo de ambientes. Consiste en atrapar peces que viajan de un lado a otro, y extraerlos a manera de pesca. Para este juego, la cámara de visualización 3D se dispone en una posición tal que en compañía a los elementos de escena simula estar bajo el agua. Los peces son representados a partir de modelos gráficos que corresponden a distintos tipos. Específicamente, en este sentido un pez podrá hacer correspondencia con 5 tipos de peces, con lo cual no solo poseerá características visuales particulares sino además de comportamiento. El jugador dispone del control de un elemento particular que es el responsable de atrapar a los peces y cuya forma (modelo gráfico) responde a un anzuelo. El anzuelo solo puede ser desplazado en término del eje de ordenadas, por lo que el mismo, considerando exclusivamente al eje de abscisas, se mantendrá fijo en el centro del espacio visualizado. En términos de lógica, cada pez define 5 posibles estados que son: Generación: Es la etapa inicial de cada pez que aparece en pantalla. Este estado solo reporta que la posición inicial de un pez ha sido establecida, y por tanto puede pasar al siguiente estado. Para la tarea de asignar una posición inicial, que tiene lugar en este estado, resulta estrictamente necesario determinar el rango de visión por parte de la cámara 3D. Esto, con la finalidad de posicionar un pez de manera correcta para generar la sensación de que éste entra a escena mediante su nado desde partes no visibles por las limitaciones del rango de visión. 97 La disposición de los peces, además se podrá dar tanto en un extremo de la pantalla como en el otro. Para ello se configura, en función al extremo (aleatorio) del cual debe partir el pez, el conjunto de parámetros que implican un nado correcto hacia el lado contrario. Nado: Es la etapa en la que el pez se aprecia en escena. Esta etapa comienza inmediatamente luego de la fase de generación, y consiste en asignarle una aceleración inicial aleatoria (aunque controlada) al pez. Esta aceleración producirá una velocidad en el pez que lo hará navegar a lo largo de la pantalla. En adición a la velocidad se incluye un componente de desgaste de la misma (semejante a fricción), con la cual se espera generar un dinamismo que simule de mejor forma al comportamiento de los peces. Al mismo tiempo se incluye un valor de movilidad, esta vez sobre eje de ordenadas, al cual confiere la animación producida en el desplazamiento en sí mismo. Este valor obedece a un comportamiento sinusoidal. Fin: Esta etapa se produce cuando el pez ha llegado (de cualquier forma) al fin del espacio de visualización. Cuando esto ocurre, se coloca el pez en estado de fin y se espera a que en un fututo sea seleccionado para pasar al estado de generación y con ello comenzar un nuevo nado. Capturado: Esta es la etapa en la que un pez ha sido atrapado (al menos de forma momentánea), y en la que el jugador debe procurar sacar del agua al pez. Cuando el estado de un pez hace correspondencia con el estado de capturado su movilidad en el eje de las abscisas se inhabilita, en tanto su posición con respecto al eje de ordenadas estará determinada por la posición del anzuelo. Este estado tiene un tiempo de duración definido en función al tipo de pez, a partir del cual el pez escapará. De esta forma, el usuario debe responder lo más rápido posible a producir esta acción (de sacar el pez del agua). Al mismo tiempo, para incluir mayor realismo al juego e incluso hacerlo más divertido, a cada tipo de pez se le asigna (de forma lógica) una características de peso, con la cual la dificultad de pescar un pez de mayor dimensión será más compleja. El objetivo del juego consiste entonces, en pescar la mayor cantidad de peces posibles en el tiempo disponible, pudiéndose incluso considerar el plan más efectivo considerando el hecho de que un pez de mayor peso, en lo general, implica un mayor puntaje al momento de contabilización de puntos obtenidos. 4.3.1. Objetivos terapéuticos Con este juego se busca la ejercitación del hombro a partir de la flexión y extensión del mismo. Mediante el reto, se espera motivar al paciente a fin de que el mismo realice tal movimiento en su máxima extensión, alentándolo incluso a que supere sus límites de movilidad. Se incluyen movimiento específicos, bajo una lógica de interacción sencilla, con el objeto de no vincular necesariamente (al menos no en gran medida) la parte cognitiva del paciente. 98 4.3.2. Interacción El juego amerita básicamente 2 tipos de movimientos para una completa interacción. El movimiento sobre el eje de ordenadas obedecerá a si el paciente dispone la mano (con la que el juego ha sido previamente configurado para jugar) en su máximo o mínimo con respecto al mismo eje, considerando un margen de error. Para trasladar de forma ascendente el anzuelo, el paciente deberá ejercer una flexión de hombro a fin de alcanzar su máximo (registrado mediante calibración). De manera semejante para hacer descender al anzuelo, deberá ejercer una flexión de 0 grados (con respecto al plano sagital). 4.3.3. Parámetros de juego El juego es configurable a partir de parámetros que son posibles ajustar antes de iniciarlo. El mismo presenta dos parámetros, uno relativo al tiempo, que determina la cantidad de minutos que transcurrirá el juego en fase de acción (despreciando etapa de inicio y finalización), y un segundo relativo a la dificultad. El parámetro de dificultad muestra 5 niveles. Cada nivel se caracteriza por incluir mayor o menor dificultad (donde 1 representa la menor dificultad), en término de la velocidad con que se presenta cada pez. En un mínimo nivel, los peces ejecutaran el estado de nado bajo parámetros que impliquen un traslado lento, en tanto en un nivel mayor el movimiento será ejecutado con mayor rapidez. 4.3.4. Eventos El juego intenta motivar al jugador a que realice siempre una mejor tarea mediante bonificaciones que recompensan su esfuerzo. Cuando el jugador recolecta un pez, se inicia un temporizador con el cual se contabiliza el tiempo en el que el jugador tarda en recoger un segundo pez. Si el segundo pez no es atrapado en el tiempo regresivo asociado a este evento, se reinicia un contador de “peces consecutivos” que maneja la lógica del juego. Por el contrario, si el jugador logra extraer un segundo pez antes de la culminación del tiempo regresivo, se incrementará el contador de “peces consecutivos”. Si este contador supera a la cifra de 3, se acumulará un puntaje especial que finalmente será reflejado durante la etapa de contabilización de puntaje. 99 4.3.5. Interfaz Como se observa en la Figura 55, la interfaz mantiene 4 elementos particulares. A continuación se explica cada uno haciendo referencia a la imagen señalada mediante la numeración. Figura 55: Interfaz de juego ACIS 1. Tiempo de juego: Específica cuanto tiempo resta para la finalización de la actividad. El mismo presenta una coloración inicialmente blanca y cundo se considera que está finalizando el tiempo (en falta de 30 segundos), la misma cambia a rojiza en representación de tal evento. 2. Temporizador de combo: Consiste en un temporizador que inicia cuando el jugador extrae del agua a un pez. Si un próximo pez es extraído antes de finalizar este contador regresivo, de forma interna, se incrementa un contador y con ello el icono dispuesto para mostrar este temporizador, cambia de estado, indicando que se está más próximo a ejecutar un “combo”. 3. Combos: Este indicador muestra la cantidad de combos conseguidos de forma consecutiva. Este se mostrará en tanto la posibilidad de incrementar un combo este presente, y se reiniciará una vez desaparezca (cuando culmine el temporizador sin la extracción de un pez). 4. Barra de escape: Esta barra se llena de forma relativa al tiempo en el que el pez escapará. Funciona como un indicador al usuario acerca del tiempo que le resta para, una vez capturado el pez, recogerlo. 5. Mensaje: Muestra mensajes de felicitaciones al jugador ante alguna extracción. 100 4.3.6. Registro y estadísticas Una vez culmine el juego se extraerán los valores necesarios para el registro de datos y posteriormente la construcción de estadísticas que permita el análisis de la actuación de cada paciente con respecto a este juego. Los valores almacenados son: Estadía promedio del posicionamiento del brazo: Durante la ejecución del juego, se calcula la región en el espacio sobre eje de ordenadas en la que se encuentre la mano del brazo empleado para jugar. Para ello, al igual que en el juego A, el espacio alcanzable por el paciente (determinado mediante calibración) resulta dividido en 4 regiones de la misma longitud sobre el eje evaluado (esta vez el eje de ordenadas). Cantidad de peces extraídos, retenidos y presentados: Se contabilizan los peces presentados, así como también los que fueron extraídos, e incluso los retenidos. Cantidad de ejecuciones y tiempo total jugado: Se actualiza la cantidad de ejecuciones realizadas como también el tiempo total invertido en ellas. Con respecto a las estadísticas en tiempo real, en esta ocasión se evalúa el comportamiento de la movilidad del paciente con respecto al eje vertical. Se representa la estadía promedio de la mano del brazo empleado para jugar, con lo que resulta posible visualizar dificultades ante la flexión y extensión del hombro. 4.3.7. Logros terapéuticos alcanzados El personal médico menciona que efectivamente el juego puede ser usado para rehabilitación de pacientes con incluso daños neurológicos. Menciona que los niveles de dificultad permitirán adaptar el juego al jugador, con lo que el mismo podría ser aplicado a distintas patologías. Se aclaró, que los movimientos ejercidos durante el juego implicarían trabajo de fuerza y musculatura a nivel del hombro. 4.4. Calibrador del Kinect TM El calibrador para el Kinect TM sitúa al paciente en una estación de metro, en la cual se encuentra un tren con problemas para abrir y cerrar sus puertas. El objetivo del usuario es retirar los obstáculos que evitan el buen funcionamiento de las puertas y abrir las mismas manualmente. 4.4.1. Objetivos terapéuticos El objetivo de la actividad es capturar el rango de movilidad del paciente en los tres ejes cartesianos. 101 Para ello se le pide al paciente que realice una serie de movimientos con los que deberá repetidamente estirar los brazos a su máxima extensión posible en cada uno de los ejes. Este proceso se repetirá con cada brazo y como resultado se obtendrá el rango de movilidad del usuario, lo que permitirá calibrar los juegos desarrollados para que tanto un paciente con movilidad reducida como un paciente con movilidad normal puedan alcanzar todos los objetivos propuestos en el mismo. 4.4.2. Interacción Durante el transcurso de la calibración al paciente se le solicitará que realice distintas acciones con sus brazos, las cuales son:  Halar (Eje Z): El paciente deberá estirar su brazo hacia adelante y luego llevarlo hacia atrás lo más que pueda, simulando de esta forma la acción de halar algo.  Empujar (Eje Z): Al contrario de halar el paciente deberá llevar su mano hasta su cuerpo y acto seguido llevarlo lo más adelante que pueda, simulando la acción de empujar algo.  Desplazar hacia la izquierda (Eje X): El usuario deberá mover su mano de derecha a izquierda, llevando la misma lo más a la izquierda que se le sea posible, simulando la acción de empujar algo hacia la izquierda.  Desplazar hacia la derecha (Eje X): El usuario deberá mover su mano de izquierda a derecha, llevando la misma los más a la derecha que se le sea posible, simulando la acción de empujar algo hacia la derecha.  Desplazar hacia arriba (Eje Y): El usuario deberá mover su mano de abajo hacia arriba, llevando la misma lo más que pueda hacia arriba, simulando la acción de empujar algo sobre la cabeza.  Desplazar hacia abajo (Eje Y): El usuario debe desplazar su mano de arriba hacia abajo, llevado la misma los más que pueda hacia abajo, simulando la acción de empujar hacia el suelo. Es importante destacar que acciones como que el usuario se desplace hacia la derecha o izquierda durante la calibración del eje X no afectarán la misma. A su vez desplazarse hacia adelante o atrás durante la calibración del eje Z o realizar acciones como saltar o agacharse durante la calibración del eje Y tampoco afectarán el proceso de calibración. El único punto a tomar en cuenta es que durante el proceso de extensión de la extremidad, la misma debe encontrarse dentro del rango de visión del Kinect TM , lo cual se puede verificar observando que la extremidad se despliegue en completitud en la silueta del jugador. En el caso de que la extremidad evaluada sobrepase los límites de la pantalla, dichos datos no serán tomados en cuenta durante la calibración, estos problemas pueden ser corregidos ajustando la distancia a la que se encuentra el paciente del Kinect TM . 102 4.4.3. Parámetros de calibración El terapeuta podrá elegir entre:  Calibrar brazo izquierdo.  Calibrar brazo derecho.  Calibrar ambos brazos. Es recomendado para el buen funcionamiento de los juegos, que en la primera sesión del paciente se calibren ambos brazos. También se recomienda que se realicen calibraciones periódicas, para que el sistema pueda ajustarse a cualquier progreso que tenga el paciente. 4.4.4. Eventos Inicialmente se le pide al usuario que realice alguna acción con un texto indicativo. A medida que el usuario realice la acción de manera correcta una barra se irá llenando en la parte derecha de la pantalla, la cual indica por cuanto más tiempo debe continuar realizando la acción, la que deberá ejecutar de forma repetitiva hasta llenar la barra por completo. A su vez se ejecutaran sonidos para indicar que está realizando la acción correctamente y los objetos de la escena reaccionaran de igual manera. Cuando la acción sea correctamente completada se despliega un texto indicando la siguiente acción a realizar y se llevan a cabo ciertos movimientos de cámara hacia la siguiente parte del tren con la que el usuario interactuará. 4.4.5. Interfaz En la Figura 56 se puede observar los elementos de interfaz presentes en la calibración del Kinect TM . 1. Flecha que indica la dirección del movimiento a realizar. 2. Texto que indica el movimiento a realizar y posee una animación para ilustrar la dirección del mismo. 3. Imagen que indica la mano que se está calibrando actualmente. 4. Barra que indica el proceso de calibración del movimiento actual. 103 Es importante resaltar que todos los indicadores que aparecen en pantalla son de color azul cuando se calibra la mano derecha y de color verde cuando se calibra la mano izquierda. A su vez la mano a calibrar del usuario deja una estela del color correspondiente. 4.4.6. Registros y estadísticas Durante el proceso de calibración se están registrando las distancias máximas y mínimas alcanzadas por el usuario en todos los ejes. Esta distancia se calcula como la distancia que existe desde el centro del cuerpo del usuario hasta la mano que se esté calibrando. Se registran distancias y no posiciones, debido a que la distancia actúa como mecanismo para discriminar la posición en la que se encuentre el paciente de los datos a registrar. Al mismo tiempo, se toma como punto de referencia el centro del cuerpo, debido a que es un punto equidistante de ambas extremidades y poco propenso a ser bloqueado por el paciente u otros elementos durante la realización de los ejercicios. Es importante también destacar que las distancias se calculan en todos los ejes durante todo el proceso de calibración, sin importar que el ejercicio que esté realizando en ese momento el usuario no involucre dicho eje. Esta medida es tomada, con el fin de asegurar que en caso de que el usuario efectué una mejor distancia en un eje que no corresponda con el movimiento actual a realizar, la misma sea registrada. Figura 56: Interfaz de calibrador de Kinect TM . 104 4.4.7. Logros terapéuticos alcanzados El personal médico aclaro que aunque los ejercicios realizados durante el proceso de calibración son dedicados por la aplicación para dicho fin. Los mismos pueden ser utilizados como un ejercicio terapéutico para el paciente, ya que involucran flexión y elongación a nivel de codo, ejercicios de aducción y abducción y ejercicios de amplitud a nivel de hombro. 4.5. Calibrador de guante La temática empleada en el juego dedicado a la calibración del guante, asienta sus bases en la necesidad de proveerle agua a una planta que lo requiere para su crecimiento. Se sumerge al jugador en un ambiente en el que se requiere purificar el agua que pasa por un sistema de alcantarillado, antes de suplírsela a la planta. Se dispone de un conjunto de modelos gráficos que representan un panel de tuberías, cuya actividad responde a la movilidad de los dedos de la mano del paciente. El objetivo del juego radica en extraer agua mediante el poder de succión del panel de tuberías de las que se dispone. Posteriormente se requiere que esta agua sea purificada mediante una máquina que se encuentra en un segundo piso. La activación de esta máquina dependerá de ciertos movimientos de los dedos de la mano del jugador. La planta presenta tres niveles de crecimiento, con lo que serán necesarias dos repeticiones de cada movimiento. 4.5.1. Objetivos terapéuticos Esta actividad tiene como objetivo medir el rango de movilidad del paciente con respecto a la flexión y extensión de los dedos. Durante la actividad se requiere que el paciente ejerza de forma repetida la flexión máxima posible, así como también la extensión máxima posible, con lo que se extrae las capacidades máximas del paciente con respecto a este movimiento de dedos. 105 4.5.2. Interacción Durante el desarrollo de la actividad, se le solicita al paciente que adopte con su mano dos tipos de posturas:  Mano cerrada (puño): Con lo que se captura el máximo grado de flexión por dedo.  Mano Abierta: Con lo que se obtiene el máximo grado de extensión por dedo. Cada requerimiento se presenta por un instante de tiempo, para capturar múltiples detecciones, eliminar un porcentaje de los valores que presentan mayor anomalías, y promediar los mismos. Además, estos requerimientos se presentan de manera repetida a fin de, una vez más, promediar los valores obtenidos. 4.5.3. Parámetros La calibración del guante podrá iniciar bajo la calibración de la mano izquierda, como también de la derecha. 4.5.4. Eventos En principio, al paciente se le mostrarán mensajes relativos a cómo debe interactuar. Cuando el usuario adopta la postura ideal, luego de un tiempo, se genera un mensaje de felicitaciones que es acompañado por un movimiento automático de cámara, que dispondrá al jugador en el espacio correspondiente para el próximo paso. Además por cada etapa se especificará el movimiento a realizar mediante mensajes que entraran en pantalla. 4.5.5. Interfaz Como se muestra en la Figura 57, la interfaz desarrollada para esta actividad dispone de 3 componentes claves, que son: 1. Barra de flexión/extensión: Esta barra mantiene correspondencia con el promedio del grado de flexión entre cada dedo. Mientras los dedos presenten mayor grado de flexión, la barra mostrará un valor mayor. 2. Indicador de planta: Índica el estado en que la planta está actualmente. Esta podrá presentar 3 estado diferentes en funciona a la etapa del juego. 3. Mensajes: la interfaz presenta dos tipos de mensajes. Un tipo de mensaje dirigido a felicitar al jugador, que se presenta luego de culminar cada etapa, y un segundo tipo de mensajes, que constituyen instrucciones a cerca de los que se debe hacer en la próxima etapa. 106 Figura 57: Interfaz de calibrador de guante 4.5.6. Registro y estadísticas. Finalizado el proceso de calibración, tiene lugar el registro de los datos obtenidos. En concreto los datos almacenados son el conjunto de valores que han sido extraídos para la medida promedio de la flexión y extensión máxima por dedo. Este conjunto de datos se almacenarán en base de datos considerando la mano que ha sido empleada para la calibración. 107 Capítulo 5. Conclusiones y recomendaciones En el presente Trabajo Especial de Grado se desarrolló una arquitectura orientada a la rehabilitación de pacientes infantes con discapacidades en miembros superiores, mediante el empleo de realidad virtual, incluyendo hardware de bajo costo como el Microsoft Kinect™ y un guante virtual [86], con lo que se logra la inclusión de dispositivos que podrían redundar en una mayor facilidad de acceso a esta metodología de rehabilitación. Con el objeto de brindar mecanismos de control dirigidos al monitoreo de los pacientes por parte del personal médico, se generó un componente orientado al mismo con el cual, además de permitir el control total de la aplicación, se almacena información relativa a la actividad de cada paciente, a fin de asistir en el análisis del progreso de los mismos durante el transcurso del tratamiento terapéutico. Adicionalmente se desarrolló un segundo componente, que se despliega en una interfaz paralela, en la cual, se muestra un contenido dinámico, animado y enfocado en la motivación del paciente, garantizando la ejercitación repetitiva que requiere la terapia. Al mismo tiempo y con el objetivo de proveer una correcta retroalimentación, se desarrollaron metodologías de calibración de hardware, a fin de que la funcionalidad de los dispositivos incluidos responda al rango de movilidad característico de cada paciente. Obedeciendo a la necesidad de validación desde la perspectiva médica, se realizaron sesiones de prueba con personal médico calificado. Dando como resultado que, las distintas actividades terapéuticas desarrolladas cumplen el objetivo propuesto, previéndose un impacto positivo en la rehabilitación. El software fue desarrollado de forma modular, permitiendo la generación e inclusión de nuevas actividades terapéuticas. Bajo este principio, se incluyeron módulos orientados a facilitar el desarrollo de las mismas, tales como un motor de juego y un constructor de escenarios. A la luz de los resultados expuestos, podemos concluir que los objetivos inicialmente propuestos para este proyecto, fueron alcanzados. En el desarrollo del trabajo se presentaron un conjunto de dificultades, siendo las más resaltantes las que se mencionan a continuación. La integración entre distintas herramientas como "Windows Presentation Foundation" (WPF), empleado para la construcción de la interfaz dirigida al terapeuta, y el framework XNA, utilizado para la representación visual expuesta por las actividades terapéuticas. Uno de los puntos que condujo a esta dificultad tuvo correspondencia con las notables diferencias en cuanto a la estructura del ciclo de ejecución de XNA y WPF, además de la carencia de una metodología estandarizada para la integración entre estas herramientas. La solución propuesta para llevar adelante la integración se obtuvo separando ambas interfaces, la dirigida al terapeuta se desarrolló por completo en WPF y la del usuario en XNA y se desarrolló un mecanismo de comunicación entre ambas. 108 Otro de los grandes impedimentos superados tuvo lugar durante el desarrollo del módulo del constructor de escenarios. Con el objeto de permitir la carga de nuevos modelos en tiempo de ejecución y ante la limitante por parte del framework XNA para la carga de objetos no pre compilados, fue indispensable el desarrollo de una metodología con la cual, al momento de requerir la carga de un objeto en el sistema, se crearía el mismo de forma compilada, permitiéndose referenciarlo como un objeto que se puede cargar. La incorporación de objetos con trasparencia y efectos de partículas sobre el funcionamiento del sistema de iluminación, basado en la técnica Deferred lighting e incluido para la provisión de contenido visualmente más agradable, trajo consigo una nueva problemática, referida a la incapacidad por parte de los basamentos de la técnica para la representación de objetos con tales efectos. Se aplicaron múltiples metodologías enfocadas a obtener una solución, sin embargo la inclusión de éstas traerían consigo nuevos inconvenientes como la necesidad de gestionar el dinamismo de las partículas vía efectos a nivel de hardware de video, problemas de sobre escritura de información de normales y posición, entre otros. La solución adoptada fue la inclusión de una textura de transparencias, en la que serían representados estos objetos, y que posteriormente sería considerada en la composición final. 5.1. Trabajos futuros y recomendaciones Como trabajos a futuro se presenta la posibilidad de expandir el área de acción, es decir, no solo los miembros superiores sino también a las extremidades inferiores, e incluso otras partes del cuerpo, para poder abarcar de esta manera un repertorio mayor de afecciones. Se plantea que las nuevas actividades terapéuticas a realizar estén enfocadas en la rehabilitación de pacientes con patologías específicas con el objeto de aprovechar al máximo el potencial de la herramienta. Se pretende incluir temáticas orientadas a todo tipo de pacientes, sin especificación de edades, con lo que se requerirá la inclusión de nuevas composiciones 3D. Se alienta además a la generación de actividades especiales dirigidas a este extracto social a fin de generalizar (en términos de población) la usabilidad de la herramienta. De la misma manera podrán ser incluidas nuevas métricas para la evaluación de los movimientos a fin de intentar precisar de manera más certera el estado actual y evolución del paciente. A su vez se considera necesario probar el sistema con una población numerosa de pacientes con distintas patologías, durante una cantidad de tiempo considerable, para demostrar la efectividad del sistema como herramienta de rehabilitación y en consecuencia de la realidad virtual como terapia alternativa. 109 Bibliografía Referencias Bibliográficas [3] Austen, Hayes, Dukes Patrick, y Larry Hodges, "A Virtual Environment for Post-Stroke Motor Rehabilitation," Clemson, Carolina del Sur,. [4] Bergantiños, Yoanna Corral, "Revisión sistemática sobre la aplicación de la Realidad Virtual en enfermedades neurológicas con afectación motora," Universidad Da Coruña, La Coruña, Trabajo fin de Grado 2011. [9] Bobath, Berta, Adult Hemiplegia: Evaluation and Treatment. Bodmin, Gran Bretaña: Butterworth Heinemann, 1990. [10] Brito, María Isabel G., Maria Elena Gollo R., y Marcos Luis Troccoli H., "Prevención de la enfermedad cerebrovascular o ictus isquémico.," Gaceta Médica de Caracas. [online], vol. 111, no. 1, pp. 1-10, Jan. 2003. [11] Broeren, J., H. Samuelsson, K. Stibrant-Sunnerhagen, C. Blomstrand, y M. Rydmark, "Neglect assessment as an application of virtual reality," Acta Neurologica Scandinavica, vol. 116, no. 3, pp. 157-163, 2007. [12] Brooks, B., J.E. McNeil, F.D. Rose, et al., "Route learning in a case of amnesia: a preliminary investigation into the efficacy of training in a virtual environment," Neuropsychological Rehabilitation, vol. 9, no. 1, pp. 63-76, 1999. [13] Calautti, Cinzia y Jean-Claude Baron, "Functional Neuroimaging Studies of Motor Recovery After Stroke in Adults," Journal of the American Heart Asosiation, vol. 34, no. 6, pp. 1553-1566, 2003. [15] Carlin, A. S., H. G. Hoffman, y S. Weghorst, "Virtual reality and tactile augmentation in the treatment of spider phobia: a case report," Behaviour Research and Therapy, vol. 35, no. 2, pp. 157- 163, 1997. [17] Castroviejo, Pascual, "Plasticidad Cerebral," REVNEUROL, vol. 24, no. 135, pp. 1361-1366, 1996. [19] Cruz-Neira, C, D.J Sandin, y T.A DeFanti, "Surround screen projection–based virtual reality: The design and implementation of the CAVE," Computer Graphics: Proceedings of SIGGRAPH, pp. 135–142, 1993. [20] Cuadrado, Arias, "Rehabilitación del ACV: evaluación, pronóstico y tratamiento," Galicia Clínica, vol. 70, no. 3, pp. 25-40, 2009. [21] Cuadrado, M., J. Arias, M. Palomar, y R. Linares, "La vía piramidal: nuevas trayectorias," Revista de Neurología, vol. 32, no. 12, pp. 1151-1158, 2001. [22] Daviet, J. C. et al., "Rééducation des accidentés vasculaires cérébraux," Encyclopédie Médico- Chirurgicale, 2002. [23] Doménech, J., V. García-Aymerich, J. Juste, y A. Ortiz, "Rehabilitación motora," Revista de Neurología, vol. 34, pp. 148-150, Feb. 2002. 110 [24] Dromerick, Alexander, Dorothy Edwards, y Michele Hahn, "Does the Application of Constraint- Induced Movement Therapy During Acute Rehabilitation Reduce Arm Impairment After Ischemic Stroke?," Stroke, vol. 31, no. 12, pp. 2984-2988, 2000. [25] Fasse, E. D., N. Hogan, B. A. Kay, y F. A Mussa-Ivaldi, "Haptic interaction with virtual objects. Spatial perception and motor control," Biological Cybernetics, vol. 82, no. 1, pp. 69-83, 2000. [27] Flórez, M. García, "Intervenciones para mejorar la función motora en el paciente con ictus," Rehabilitación, vol. 34, no. 6, pp. 423-437, 2000. [28] Fung, J. et al., "Locomotor rehabilitation in a complex virtual environment," Conference Proceedings - IEEE Engineering in Medicine and Biology Society, vol. 7, pp. 4859-4861, 2004. [29] Gaceta Oficia 38.598, "Ley de las personas con discapacidad," in La Asamblea Nacional de la República Bolivariana de Venezuela, Caracas, 2007. [32] Golomb, Meredith R. et al., "In Home Virtual Reality Videogame Telerehabilitation in Adolescents With Hemiplegic Cerebral Palsy," Archives of Physical Medicine and Rehabilitation, vol. 91, no. 1, pp. 1-8, 2010. [34] Hallett, Mark, "Plasticity of the human motor cortex and recovery from stroke," Brain Research Reviews, vol. 36, no. 2-3, pp. 169–174, 2001. [35] Herholz, Karl y Wolf-Dieter Heiss, "Functional Imaging Correlates of Recovery After Stroke," Journal of Cerebral Blood Flolw and Metabolism, vol. 20, no. 12, pp. 1619-1631, 2000. [36] Holden, Maureen y Thomas Dyar, "Virtual Environment Training: A New Tool for Neurorehabilitation," Journal of Neurologic Physical Therapy, vol. 26, no. 2, pp. 62-71, 2002. [39] Jaffe, D.L., D.A. Brown, C.D. Pierson-Carey, et al, "Stepping over obstacles to improve walking in individuals with post-stroke hemiplegia," Journal of Rehabilitation Research and Development, vol. 41, no. 3A, pp. 283-292, 2004. [40] Jang, SH et al., "Cortical Reorganization and Associated Functional Motor Recovery After Virtual Reality in Patients With Chronic Stroke: An Experimenter-Blind Preliminary Study," Archives of Physical Medicine and Rehabilitation, vol. 86, no. 11, pp. 2218-2223, 2005. [42] Ketelaar, Marjolijn, Adri Vermeer, Harm't Hart, Els van Petegem-van Beek, y Paul JM Helders, "Effects of a Functional Therapy Program on Motor Abilities of Children With Cerebral Palsy," Journal of the American Physical Teraphy Association, vol. 81, no. 9, pp. 1534-1545, 2001. [43] Kim, N. G., C. K. Yoo, y J. J. Im, "A new rehabilitation training system for postural balance control using virtual reality technology," IEEE Transactions on Neural Systems and Rehabilitation Engineering, vol. 7, no. 4, pp. 482-485, 1999. [45] Kizon, R, N Katz, H Weingarden, y P L Weiss, "Immersion without encumbrance: adapting a virtual reality system for the rehabilitation of individuals with stroke and spinal cord injury," International Conference on. Disability, Virtual Reality and Associated Technologies., vol. 4, pp. 55-62, 2002. [46] Kwakkel, Gert, Robert Wagenaar, Tim Koelman, Gustaaf Lankhorst, y Johan Koetsier, "Effects of Intensity of Rehabilitation After Stroke," Stroke, vol. 28, no. 8, pp. 1550-1556, 1997. [47] Lange, Belinda, Rizzo Skip, y Chien-Yen Chang, "Markerless Full Body Tracking: Depth-Sensing Technology within Virtual Environments," Interservice/Industry Training, Simulation and Education Conference, no. 11363, 2011. [49] Lyle, Ronald C., "A performance test for assessment of upper limb function in physical 111 rehabilitation treatment and research," International Journal of Rehabilitation Research, vol. 4, no. 4, pp. 483-492, 1981. [50] Marescaux, J. et al., "A new concept in digestive surgery: the computer assisted surgical procedure, from virtual reality to telemanipulation," Bulletin de l'Académie nationale de médecine, vol. 181, no. 8, pp. 1609-1621, 1997. [51] Maureen, K. Holden, "Virtual Environments for Motor Rehabilitation: Review," Cyberpsychology & Behavior, vol. 8, no. 3, pp. 187-192, 2005. [52] Merians, Alma, Howard Poizner, Rares Boian, Grigore Burdea, y Sergei Adamovich, "Sensorimotor Training in a Virtual Reality Environment: Does It Improve Functional Recovery Poststroke?," Neurorehabilitation and Neural Repair, vol. 20, no. 2, pp. 252-267, 2006. [55] Molinar, Gabriella, "Rehabilitation in Cerebral Palsy," Western journal of medicine, vol. 154, no. 5, pp. 569-572, 1991. [59] Navarrete, José Manuel, "La realidad virtual como arma terapéutica en rehabilitación," Rehabilitación Integral, vol. 5, no. 1, pp. 40-45, 2010. [63] North, M. M., S. M. North, y J. R. Coble, "Virtual reality therapy: an effective treatment for phobias," Studies in health technology and informatics, vol. 58, pp. 112-119, 1998. [64] Perani, D. et al., "Different Brain Correlates for Watching Real and Virtual Hand Actions," Neuroimage, vol. 14, no. 3, pp. 749-758, 2001. [66] Phong, Bui Tuong, Illumination for computer-generated Images. New York: National Technical Information Service (NTIS), 1973. [67] Piron, L., F. Cenni, P. Tonin, y M Dam, "Virtual Reality as an assessment tool for arm motor deficits after brain lesions," Studies in health technology and informatics, vol. 81, pp. 386-392, 2001. [69] Reinkensmeyer, David y Michael Boninger, "Technologies and combination therapies for enhancing movement training for people with a disability," Journal of NeuroEngineering and Rehabilitation, 2012. [70] Robina, Gerardo Rogelio Castellanos, "Prevalencia y factores de riesgo de parálisis cerebral en matanzas (años de nacimiento 1996 – 2002)," La Habana (Cuba), 2009. [72] Rose, et al., "Training in virtual environments: transfer to real world tasks and equivalence to real task training," Ergonomics, vol. 43, no. 4, pp. 494-511, 2000. [74] Schaechter, Judith, "Motor rehabilitation and brain plasticity after hemiparetic stroke," Progress in Neurobiology, vol. 73, no. 1, pp. 61-72, 2004. [78] Steele, E. et al., "Virtual reality as a pediatric pain modulation technique: a case study," CyberPsychology & Behavior, vol. 6, no. 6, pp. 633-638, 2003. [83] Sveistrup, Heidi, "Motor rehabilitation using virtual reality," Journal of NeuroEngineering and Rehabilitation, vol. 1, no. 1, p. 10, 2004. [84] Taub, Edward, Sharon Landesman, Stephanie DeLuca, y Karen Echols, "Efficacy of Constraint- Induced Movement Therapy for Children With Cerebral Palsy With Asymmetric Motor Impairment," PEDIATRICS, vol. 113, no. 2, pp. 305-312, 2004. [85] Taub, Edward, Gitendra Uswatte, y Rama Pidikiti, "Constraint-Induced Movement Therapy: A New 112 Family of Techniques with Broad Application to Physical Rehabilitation--A Clinical Review," Alabama, 1999. [86] Temoche, Pablo, Esmitt Ramírez, y Omaira Rodríguez, "A low-cost data glove for virtual reality," Caracas, 2012. [88] Todorov, E., R. Shadmer, y E. Bizzi, "Augmented feedback presented in a virtual environment accelerates learning of a difficult motor task," Journal of Motor Behavior, vol. 29, no. 2, pp. 147- 158, 1997. [89] Turner-Stokes, Lynne, "Measurement of outcome in Rehabilitation," 2000. [91] Webster, J.S., P.T. McFarland, L.J. Rapport, y et al., "Computer-assisted training for improving wheelchair mobility in unilateral neglect patients," Archives of Physical Medicine and Rehabilitation, vol. 82, no. 6, pp. 769-775, 2001. [92] Wilson, M. S., A. Middlebrook, C. Sutton, R. Stone, y R. F. McCloy, "MIST VR: a virtual reality trainer for laparoscopic surgery assesses performance," Annals of The Royal College of Surgeons of England, vol. 79, no. 6, pp. 403-404, 1997. [93] You, Sung et al., "Virtual Reality–Induced Cortical Reorganization and Associated Locomotor Recovery in Chronic Stroke An Experimenter-Blind Randomized Study," Stroke, vol. 36, no. 6, pp. 1166-1171, 2005. [94] You, Sung H. et al., "Cortical reorganization induced by virtual reality therapy in a child with hemiparetic cerebral palsy," Developmental Medicine & Child Neurology, vol. 47, no. 9, pp. 628– 635, 2005. [96] Zhang, L. et al., "A virtual reality environment for evaluation of a daily living skill in brain injury rehabilitation: reliability and validity," Archives of Physical Medicine and Rehabilitation, vol. 84, no. 8, pp. 1118-1124, 2003. Referencias Web [1] Adamovich, Sergei, Gerard Fluet, Eugene Tunik, y Alma Merians. (2010) Proceedings of the National Academy of Sciences of the United States of America. [Online]. http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2819065/ [2] Adobe. photoshop.com. [Online]. http://www.photoshop.com/ [5] Biblioteca Nacional de Medicina EE.UU. MedLinePlus. [Online]. http://www.nlm.nih.gov/medlineplus/spanish/peripheralnervedisorders.html [6] Bienetec. Biene-Tec. [Online]. http://www.bienetec.com/bienetec/jsp/web/index.jsp [7] Bienetec. BioTrak. [Online]. http://www.biotraksuite.com/?lang=en [8] BlenderFoundation. Blender. [Online]. http://www.blender.org/ [14] Cano, Diana. (2009, Abril) Rehabilitacion pediatrica y estimulacion. [Online]. http://dmariacano.fullblog.com.ar [16] Casorla, Migdalia. Medica Magazine. [Online]. http://goo.gl/RBni6 [18] Caswell, Jon. (2007, Septiembre) American Stroke Association. [Online]. http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2819065/ http://www.photoshop.com/ http://www.nlm.nih.gov/medlineplus/spanish/peripheralnervedisorders.html http://www.bienetec.com/bienetec/jsp/web/index.jsp http://www.biotraksuite.com/?lang=en http://www.blender.org/ http://dmariacano.fullblog.com.ar/ http://goo.gl/RBni6 113 http://www.strokeassociation.org/STROKEORG/AboutStroke/About- Stroke_UCM_308529_SubHomePage.jsp [26] Fernández, Joan. AEPap. [Online]. http://www.aepap.org/familia/paralisisci.htm [30] GestureTek Inc. GestureTek health. [Online]. http://www.gesturetekhealth.com/products-rehab- irex.php [31] GIMP Development Team. Gimp. [Online]. http://www.gimp.org/ [33] Graziano, Michael S., "Where is my arm? The relative role of vision and proprioception in the neuronal representation of limb position," Proceedings of the national academy of sciences of the united states of america, vol. 96, no. 18, pp. 10418–10421, 1999. [Online]. http://www.ncbi.nlm.nih.gov/pmc/articles/PMC17903 [37] Hong Kong University of Science & Technology. (2002) Cybersickness. [Online]. http://www.cybersickness.org/what_is_sickness.asp [38] Instituto Nacional de Trastornos Neurológicos y Accidentes Cerebrovasculares. National institute of neurological disorders and stroke. [Online]. http://espanol.ninds.nih.gov/trastornos/el_sindrome_de_guillain_barre.htm [41] Jiménez, Lidia. (2009, Febrero) http://boletin.uc.edu.ve. [Online]. http://goo.gl/kKTwM [44] Kirillov, Andrew. (2008) AForge.Net. [Online]. http://www.aforgenet.com/ [48] Livestrong Foundation. Livestrong. [Online]. http://www.livestrong.com/ [53] Microsoft Consulting Services United Kingdom Solution Development Team. (2011, Agosto) MSDN Blogs. [Online]. http://blogs.msdn.com/b/mcsuksoldev/archive/2011/08/08/writing-a- gesture-service-with-the-kinect-for-windows-sdk.aspx [54] Microsoft. Microsoft Expression. [Online]. http://www.microsoft.com/expression/eng/index.html [56] Mura, Anna et al. SPECS. [Online]. http://specs.upf.edu/ [57] National Instruments. National Instruments. [Online]. http://www.ni.com/labview/ [58] National Stroke Association. National Stroke Association. [Online]. http://www.stroke.org/site/PageServer?pagename=type [60] Noé, Enrique. Biotrak. [Online]. http://www.biotraksuite.com/?page_id=1732 [61] Nordby, Harrison. (2012, Junio) CodePlex. [Online]. http://bepuphysics.codeplex.com/ [62] Norman, Chris, Dominic Clark, y Barnaby Cotter. (2012, Febrero) National Instruments. [Online]. https://decibel.ni.com/content/docs/DOC-20973 [65] Petiephant. (2012, Septiembre) CodePlex. [Online]. http://xui.codeplex.com/ [68] Pixologic. Pixologic. [Online]. http://pixologic.com/zbrush/ [71] Romero, Javier et al. (2011, Febrero) Aplicación de actividades y juegos para mejorar la Motricidad Gruesa en niños con Parálisis Cerebral Infantil. [Online]. http://goo.gl/vam1z [73] Sales, Llopis, Moncho Navarro, Nieto Navarro, y Botella Asunción. (2007) Plexo Braquial. [Online]. http://www.plexobraquial.org/InformacionPlexo.html [75] Schroeder, Daniel. (2013, Abril) DPFS. [Online]. http://www.xnaparticles.com/ [76] Sevlever, Gustavo. Facultad de Ciencias Médicas Universidad Nacional del Comahue. [Online]. http://www.strokeassociation.org/STROKEORG/AboutStroke/About-Stroke_UCM_308529_SubHomePage.jsp http://www.strokeassociation.org/STROKEORG/AboutStroke/About-Stroke_UCM_308529_SubHomePage.jsp http://www.aepap.org/familia/paralisisci.htm http://www.gesturetekhealth.com/products-rehab-irex.php http://www.gesturetekhealth.com/products-rehab-irex.php http://www.gimp.org/ http://www.ncbi.nlm.nih.gov/pmc/articles/PMC17903 http://www.cybersickness.org/what_is_sickness.asp http://espanol.ninds.nih.gov/trastornos/el_sindrome_de_guillain_barre.htm http://goo.gl/kKTwM http://www.aforgenet.com/ http://www.livestrong.com/ http://blogs.msdn.com/b/mcsuksoldev/archive/2011/08/08/writing-a-gesture-service-with-the-kinect-for-windows-sdk.aspx http://blogs.msdn.com/b/mcsuksoldev/archive/2011/08/08/writing-a-gesture-service-with-the-kinect-for-windows-sdk.aspx http://www.microsoft.com/expression/eng/index.html http://specs.upf.edu/ http://www.ni.com/labview/ http://www.stroke.org/site/PageServer?pagename=type http://www.biotraksuite.com/?page_id=1732 http://bepuphysics.codeplex.com/ https://decibel.ni.com/content/docs/DOC-20973 http://xui.codeplex.com/ http://pixologic.com/zbrush/ http://goo.gl/vam1z http://www.plexobraquial.org/InformacionPlexo.html http://www.xnaparticles.com/ 114 http://medicina.uncoma.edu.ar/download/postgrado/medicina_legal/neurobiologia_medico_legal_I/c lase_3.pdf [77] Sminkey, Laura. (2011, Junio) Organización Mundial de la Salud. [Online]. http://www.who.int/mediacentre/news/releases/2011/disabilities_20110609/es/ [79] Stepniewska, Iwona, Pei-Chun Fang, y Jon Kaas, "Microstimulation reveals specialized subregions for different complex movements in posterior parietal cortex of prosimian galagos," Proceedings of the National Academy of Sciences, vol. 102, no. 13, pp. 4878–4883, 2005. [Online]. http://www.ncbi.nlm.nih.gov/pmc/articles/PMC555725/ [80] Storment, Margaret. United brachial plexus network. [Online]. http://www.ubpn.org/index.php?option=com_content&view=article&id=122:therapyguidelins&catid =57:theraposts&Itemid=107 [81] Stuart, Annie. WebMD. Better information. Better health. [Online]. http://www.webmd.com/stroke/features/arm-and-hand-exercises-for-stroke-rehab [82] Sullivan, Ronan. (2012, Septiembre) SourceForge. [Online]. http://sourceforge.net/projects/zedgraph/ [87] The University Hospital, New Jersey. The University Hospital. [Online]. http://www.theuniversityhospital.com/stroke/stats.htm [90] Universitat Ponpeu Fabra. Universitat Ponpeu Fabra Barcelona. [Online]. http://www.upf.edu/ [95] ZeniMax Media. Quake Live. [Online]. http://www.quakelive.com/#!home http://medicina.uncoma.edu.ar/download/postgrado/medicina_legal/neurobiologia_medico_legal_I/clase_3.pdf http://medicina.uncoma.edu.ar/download/postgrado/medicina_legal/neurobiologia_medico_legal_I/clase_3.pdf http://www.who.int/mediacentre/news/releases/2011/disabilities_20110609/es/ http://www.ncbi.nlm.nih.gov/pmc/articles/PMC555725/ http://www.ubpn.org/index.php?option=com_content&view=article&id=122:therapyguidelins&catid=57:theraposts&Itemid=107 http://www.ubpn.org/index.php?option=com_content&view=article&id=122:therapyguidelins&catid=57:theraposts&Itemid=107 http://www.webmd.com/stroke/features/arm-and-hand-exercises-for-stroke-rehab http://sourceforge.net/projects/zedgraph/ http://www.theuniversityhospital.com/stroke/stats.htm http://www.upf.edu/ http://www.quakelive.com/#!home 115 Anexos A continuación se presenta las tablas asociadas la metodología de programación ágil Scrum. Año de trabajo: 2012-2013. Tiempo abarcado: 30 semanas. A Sprint 1 SPRINT INICIO DURACIÓN 1 17-Jul 14 días 17- Jul 19- Jul 21- Jul 23- Jul 25-Jul 27-Jul 29-Jul DIAS 1,2 3,4 5,6 7,8 9,10 11,12 13,14 ESFUERZO TOTAL 34 40 41 39 42 38 31 ID TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Extracción de video medio- avanzado Investigación de funcionamiento de Aforge finalizado 4 4 Captura de stream de imágenes mediante cámara web finalizado 5 5 Fijar mecanismos para cambio de cámara web avanzado 7 7 Fijar mecanismos para scan de puertos a fin de buscar nuevos dispositivos insertados iniciado 8 1 7 Validación de casos de mal funcionamiento o desconexión de la cámara medio 10 10 Finalización de cámara en cierre de ejecución finalizado 4 4 Detección de marcas en video Avanzado Fijación de dimensiones y color de áreas a detectar por dedo finalizado 3 3 Render de marca de video (como test) medio 14 11 3 Interpretación de posiciones de marcas sobre video finalizado Cambio de coordenadas desde espacio pantalla a espacio preestablecido finalizado 7 7 desarrollo de la lógica de calibración medio Detección de una cantidad fija de iteraciones por postura de mano cerrada medio 12 12 Detección de una cantidad fija de iteraciones por postura de mano abierta medio 4 4 fijación de valores de calibración iniciales medio 1 1 Fijación de valores para rango de aceptación de posturas de calibración medio 1 1 0 20 40 60 1 7 -J u l 1 9 -J u l 2 1 -J u l 2 3 -J u l 2 5 -J u l 2 7 -J u l 2 9 -J u l Esfuerzo 116 Intérprete de gestos medio Intérprete de posturas avanzado 18 15 3 Generalización de intérprete de posturas para gestos medio 10 10 Clase de implementación de gestos iniciado 4 4 Implementación de reglas de fácil uso para programación de gestos iniciado 3 3 KN1 Módulo de Kinect TM Clase para reconocer el Kinect TM con excepciones y eventos Avanzado Investigación referente al funcionamiento del Kinect TM finalizado 5 5 Reconocimiento de "plug" por parte del Kinect TM finalizado 4 4 Gestión de eventos por parte del Kinect TM finalizado 6 6 Control del ángulo del Kinect TM avanzado 4 2 2 Extracción de datos de posición desde Kinect TM avanzado 8 8 Extracción de datos de video desde Kinect TM avanzado 6 6 Clase de extracción de esqueleto iniciado Armado e inicialización del esqueleto en función a los datos obtenidos medio- avanzado 8 4 4 Gestión de múltiples esqueletos iniciado 7 7 Construcción de clase de pintura del esqueleto medio Conjunción de información de esqueleto más información de imagen de color medio 5 5 Detección de personas particulares y seguimiento de gestos exclusivos de esta persona medio 10 3 7 Intérprete de gestos mediante el Kinect TM medio- avanzado Establecimiento de metodología para desarrollo agilizado de gestos finalizado 15 10 5 Gestos de prueba para evaluación de funcionamiento medio 7 7 Desarrollo de la lógica de calibración iniciado Establecimiento de la metodología de calibración medio 18 9 9 Desarrollo de lógica de calibración para mano izquierda iniciado 15 8 7 Desarrollo de lógica de calibración para mano derecha iniciado 4 4 Obtención de ámbito espacial de juego por mano iniciado 5 5 IG1 Interfaz gráfica Investigación referida a herramientas para interfaces finalizado 5 3 2 Introducción a Expression Blend medio 10 2 8 Metodología de integración de interfaz terapeuta con xna medio 8 8 JG1 juegos Investigación e introducción de librerías para interfaces gráficas para juegos no iniciado 0 0 117 A Sprint 2 SPRINT INICIO DURACIÓN 2 31-Jul 15 días 31- Jul 3- Aug 5- Aug 7-Aug 9-Aug 11-Aug 13-Aug DIAS 1,2, 3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 47 44 45 47 41 40 35 ID TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Extracción de video finalizado Fijar mecanismos para cambio de cámara web finalizado 2 2 Fijar mecanismos para scan de puertos a fin de buscar nuevos dispositivos insertados finalizado 5 5 Validación de casos de mal funcionamiento o desconexión de la cámara finalizado 5 5 Detección de marcas en video finalizado Render de marca de video (como test) finalizado 7 7 Desarrollo de la lógica de calibración por finalizar Detección de una cantidad fija de iteraciones por postura de mano cerrada finalizado 4 4 Detección de una cantidad fija de iteraciones por postura de mano abierta finalizado 3 2 1 Fijación de valores de calibración iniciales finalizado 2 2 Fijación de valores para rango de aceptación de posturas de calibración finalizado 2 2 Corrección de lógica de calibración. Se debe emplear pipeline de Xna, en lugar de hilos avanzado 18 10 Intérprete de gestos finalizado Intérprete de posturas finalizado 6 5 1 Generalización de intérprete de posturas para gestos finalizado 6 6 Clase de implementación de gestos finalizado 5 5 Implementación de reglas de fácil uso para programación de gestos finalizado 6 6 Escena de xna reactiva al guate virtual (demo de funcionamiento de guante) finalizado Manejo de 2 ventanas. Form y xna finalizado 13 6 7 Eventos distintivos en ventana de xna para representar nueva fase de calibración finalizado 4 4 Inclusión de Xui (librería seleccionada para interfaces de juego) finalizado 8 5 Inclusión de “widget” por etapa con Xui finalizado 5 5 Inclusión de barra para indicar estado de etapa de calibración finalizado 3 3 ED1 Módulo estadísticas finalizado 0 10 20 30 40 50 3 1 -J u l 0 2 -A u g 0 4 -A u g 0 6 -A u g 0 8 -A u g 1 0 -A u g 1 2 -A u g Esfuerzo 118 Investigación de herramienta para generación de reportes finalizado 8 8 Adopción de herramienta para generar reporte finalizado 1 1 Integración en intérprete de gestos finalizado 4 4 Render de imagen de estadísticas finalizado 5 5 KN1 Módulo de Kinect TM Clase para reconocer el Kinect TM con excepciones y eventos finalizado Control de ángulo del Kinect TM finalizado 1 1 Extracción de datos de posición desde Kinect TM finalizado 2 2 Extracción de datos de video desde Kinect TM finalizado 2 2 Clase de extracción de esqueleto finalizado Armado e inicialización del esqueleto en función a los datos obtenidos finalizado 8 8 Gestión de múltiples esqueletos finalizado 8 6 Construcción de clase de pintura del esqueleto finalizado Conjunción de información de esqueleto e información de imagen de color finalizado 5 3 2 Detección de personas particulares y seguimiento de gestos exclusivos de esta persona finalizado 6 6 Intérprete de gestos mediante el Kinect TM finalizado Gestos de prueba para evaluación de funcionamiento finalizado 3 3 Desarrollo de la lógica de calibración avanzado Establecimiento de la metodología de calibración finalizado 7 7 Desarrollo de lógica de calibración para mano izquierda avanzado 10 6 4 Desarrollo de lógica de calibración para mano derecha avanzado 5 5 Obtención de ámbito espacial de juego por mano avanzado 2 2 Métodos generales para interpolación de espacio Kinect TM y espacio juego finalizado Interpolación en función a esqueleto preestablecido finalizado 3 3 Interpolación en función a las dimensiones totales de pantalla finalizado 8 7 1 Interpolación a partir de cuadrante de alcance finalizado 12 12 Interpolación inversa (de juego a paciente) finalizado 3 3 Tratamiento referido a disposición de la sombra en Z para ajustar escala eliminado 19 7 10 Sombra de usuario medio Colocación de sombra sobre imagen de fondo finalizado 5 5 Filtro de suavizado iniciado 1 1 IG1 Interfaz gráfica Introducción a Expression Blend medio Investigación de posibilidad de unión de wpf y xna finalizado 10 7 3 Investigación de uso de Expression Blend medio 6 6 Controles con Expression Blend avanzado 5 5 Ventanas con Expression Blend medio 3 3 Estilos con Expression Blend iniciado 14 14 Metodología de integración de interfaz terapeuta con xna avanzado Metodología de integración de Interfaz de aplicación con ventana de juegos avanzado 15 15 119 Doble pantalla para gestión de pantallas de pacientes y terapeuta por finalizar Demo de integración de dos ventanas xna y xna finalizado 10 8 2 Demo de interacción de dos ventanas form y xna por finalizar 6 6 Corrección de posicionamiento de pantalla iniciado- medio 10 10 JG1 Juegos Investigación e introducción de librerías para interfaces gráficas para juegos finalizado 3 3 120 A Sprint 3 SPRINT INICIO DURACIÓN 3 15-Aug 15 días 15- Aug 19- Aug 21- Aug 23- Aug 25- Aug 27-Aug 29-Aug DIAS 1,2, 3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 39 38 41 38 39 40 32 ID TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Desarrollo de la lógica de calibración finalizado Corrección de lógica de calibración. Se debe emplear pipeline de Xna, en lugar de hilos finalizado 17 17 KN1 Módulo de Kinect TM Desarrollo de la lógica de calibración finalizado Desarrollo de lógica de calibración para mano izquierda finalizado 5 5 Desarrollo de lógica de calibración para mano derecha finalizado 3 3 Obtención de ámbito de juego por mano finalizado 1 1 Sombra de usuario medio Filtro de suavizado medio 3 3 IG1 Interfaz gráfica Introducción a Expression Blend por finalizar Investigación de uso de Expression Blend finalizado 7 4 3 Controles con Expression Blend finalizado 4 2 2 Ventanas con Expression Blend finalizado 7 4 3 Estilos con Expresion Blend avanzado 10 5 5 Metodología de integración de interfaz terapeuta con xna finalizado Metodología de integración de interfaz de aplicación con ventana de juegos finalizado 10 10 Interacción de wpf y xna (demo con controles) finalizado 9 9 Doble pantalla para gestión de pantallas de pacientes y terapeuta por finalizar Demo de interacción de dos ventanas Form y xna finalizado 4 4 Corrección de posicionamiento de pantalla por finalizar 8 8 Mj1 Módulo de motor de juego Sistema de partículas finalizado Investigación, evaluación y adopción o creación de sistema de partículas finalizado 7 7 0 10 20 30 40 50 Esfuerzo 121 Demo de sistema de partículas finalizado 25 20 5 Carga de modelos MD5 finalizado Investigación de estructura de modelo MD5 finalizado 23 2 21 lectura de modelo MD5 finalizado 18 18 Render de modelo estático con estructura de MD5 finalizado 19 19 Inclusión de animación finalizado 15 15 Proceso de construcción de manejador de física medio Construcción de “octTree” medio 7 5 2 Detección de colisiones entre esferas medio 13 13 Sombras medio Desarrollo de sombra unidireccional mediante técnica shadowmap avanzado 21 15 6 Desarrollo de sombra de luz puntual mediante técnica shadowmap iniciado 3 3 RC1 Módulo de registro de paciente Implementación de demo registro de paciente medio 13 11 2 Implementación de demo de vista de todos los pacientes del sistema medio 15 15 122 A Sprint 4 SPRINT INICIO DURACIÓN 4 31-Aug 17 días 31- Aug 3-Sep 5-Sep 7-Sep 9-Sep 11-Sep 13-Sep DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15,16, 17 ESFUERZO TOTAL 40 40 44 47 38 34 24 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO KN1 Módulo de Kinect TM Sombra de usuario medio- avanzado Filtro de suavizado finalizado 5 5 Sombra con efecto especial de bordes avanzado 18 15 3 Sombra con efecto especial de animación iniciado 4 4 IG1 Interfaz gráfica Introducción a Expresion Blend finalizado Estilos con Expresion Blend finalizado 10 10 Doble pantalla para gestión de pantallas de pacientes y terapeuta finalizado Corrección de posicionamiento de pantalla finalizado 5 5 Mj1 Módulo de motor de juego Proceso de construcción de manejador de física avanzado Construcción de una estructura octTree finalizado 14 5 9 Detección de colisiones entre esferas finalizado 15 10 5 Detección de colisiones ente cajas medio 25 19 6 Resolución de rotación de objetos medio 31 17 14 Inclusión de vectores de velocidad con reacción iniciado 35 5 16 14 Efecto especial: “Ambient occlusion” avanzado Investigación de técnicas de “Ambient occlusion” finalizado 25 5 18 2 Captura de texturas de profundidad finalizado 24 2 22 Algoritmo de convolución del “Ambient occlusion” empleado finalizado 47 19 18 10 BD1 Módulo de base de datos Implementación de demo registro de paciente finalizado 5 5 Implementación de demo de vista de todos los pacientes del sistema finalizado 4 4 0 10 20 30 40 50 Esfuerzo 123 A Sprint 5 SPRINT INICIO DURACIÓN 5 17-Sep 15 días 18- Sep 21- Sep 23- Sep 25- Sep 27-Sep 29-Sep 1-Oct DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 53 51 52 46 42 45 39 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO Mj1 módulo de motor de juego Proceso de construcción de manejador de física eliminado 0 Detección de colisiones ente cajas eliminado 0 Resolución de rotación de objetos eliminado 0 Inclusión de vectores de velocidad con reacción eliminado 0 Proceso de adopción de manejador de física finalizado investigación de engine para física finalizado 10 10 Demo de funcionamiento de engine de física finalizado 20 15 5 Constructor de escena medio Investigación de funcionamiento de funcionalidad del raycaster como sistema de física finalizado 25 21 4 Disposición de objetos sobre espacio de creación de escena finalizado 35 22 9 Capacidad de selección de objetos mediante teclado y/o mouse finalizado 30 14 16 Rotación de objeto finalizado 24 5 19 Traslación de objetos finalizado 22 6 16 Escala de objetos iniciado- medio 5 5 Carga de objetos no compilados sin iniciar Lectura de archivos XML sin iniciar Escritura de archivos XML sin iniciar Carga de escena con formato preestablecido sin iniciar Capacidad de guardado de escena con formato preestablecido sin iniciar Capacidad de habilitar/deshabilitar física sin iniciar Soporte de texturas para normal, bump y parallax mapping sin iniciar Interfaz con wpf sin iniciar Integración de nuevo estilo de interfaz sin iniciar 0 20 40 60 1 8 -S e p 2 0 -S e p 2 2 -S e p 2 4 -S e p 2 6 -S e p 2 8 -S e p 3 0 -S e p Esfuerzo 124 Sistema de iluminación finalizado Búsqueda de técnicas para sistema de iluminación en juegos finalizado 18 18 Implementación de sistema de iluminación direccional simple finalizado 15 10 5 Implementación de sistema de iluminación direccional “phong” finalizado 5 5 Implementación de sistema de iluminación puntual finalizado 15 15 Investigación de sistema de iluminación bajo enfoque "deferred" finalizado 24 24 Implementación “deferred lighting”: investigación de gestión de targets finalizado 12 2 10 Implementación “deferred lighting”: almacén de target de albedo finalizado 18 13 5 Implementación “deferred lighting”: almacén de target de posición finalizado 16 16 Implementación “deferred lighting”: almacén de target de normales finalizado 10 10 Implementación “deferred lighting”: composición de target de luz finalizado 20 10 10 Implementación “deferred lighting”: composición final finalizado 8 8 demo de juego sin iniciar Adaptación de render de MD5 bajo pipeline de sistema de iluminación sin iniciar Adaptación de render de sistema de partículas bajo pipeline de sistema de iluminación sin iniciar Adaptación de render de agua bajo pipeline de sistema de iluminación sin iniciar IG1 Interfaz gráfica Demo de integración de módulo de guante, módulo de Kinect TM y demo de juego bajo la misma interfaz sin iniciar 125 A Sprint 6 SPRINT INICIO DURACION 5 1-Oct 15 días 18- Sep 21- Sep 23- Sep 25- Sep 27-Sep 29-Sep 1-Oct DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 65 59 58 62 58 59 53 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Eliminación del 5% de los datos menos significativos en la captura finalizado 18 18 KN1 Módulo de Kinect TM Mejoras de filtro para sombras de Kinect TM finalizado 5 5 Mj1 Módulo de motor de juego Carga de modelo MD5 sin iniciar Corrección con portabilidad de cargador de MD5 sin iniciar Constructor de escena medio Escala de objetos finalizado 21 21 Carga de objetos no compilados finalizado 40 10 29 1 Lectura de archivos XML finalizado 28 28 Escritura de archivos XML finalizado 25 25 Carga de escena con formato preestablecido finalizado 0 Capacidad de guardado de escena con formato preestablecido finalizado 10 5 5 Capacidad de habilitar/deshabilitar física sin iniciar 18 18 Soporte de texturas para normal, bump y parallax mapping sin iniciar 0 Interfaz con wpf sin iniciar 39 8 31 Integración de nuevo estilo de interfaz sin iniciar 30 26 Efecto especial: “glittering” finalizado Implementación del efecto de “glittering” finalizado 6 6 Adaptación del algoritmo de “glittering” bajo el shader de luz (deferred) finalizado 15 5 10 Efecto especial: “Parallax mapping” finalizado Implementación del efecto de “Parallax mapping” finalizado 40 20 20 Adaptación del algoritmo de “Parallax mapping” Bajo el shader de luz (deferred) finalizado 10 9 6 Efecto especial: “Normal mapping” suspendido 5 5 0 20 40 60 80 1 8 -S e p 2 0 -S e p 2 2 -S e p 2 4 -S e p 2 6 -S e p 2 8 -S e p 3 0 -S e p Esfuerzo 126 Demo de juego Adaptación de render de MD5 bajo pipeline de sistema de iluminación finalizado 30 21 9 Adaptación de render de sistema de partículas bajo pipeline de sistema de iluminación finalizado 50 18 28 4 Adaptación de render de agua bajo pipeline de sistema de iluminación finalizado 30 23 IG1 interfaz gráfica Demo de integración de módulo de guante, módulo de Kinect TM y demo de juego bajo la misma interfaz sin iniciar 127 A Sprint 7 SPRINT INICIO DURACIÓN 5 16-Oct 15 días 16- Oct 19-Oct 21- Oct 23- Oct 25-Oct 27-Oct 29-Oct DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 50 50 52 49 52 50 46 ID TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Establecimiento de lógico para juego finalizado 10 10 Escena de referencia para mini juego medio 8 8 Implementación de lógica del juego sin iniciar Inclusión de módulos gráficos empleados sin iniciar Eventos asociados a gesto de mano cerrada sin iniciar Eventos asociados a gesto de mano abierta sin iniciar Presentación inicial (recorrido) sin iniciar Mj1 Módulo de motor de juego Carga de modelo MD5 Corrección con portabilidad de cargador de objetos MD5 finalizado 10 10 Constructor de escena avanzado Capacidad de habilitar/deshabilitar física finalizado 18 18 Soporte de texturas para “normal”, “bump” y “Parallax mapping” sin iniciar Interfaz con wpf finalizado 29 8 21 Integración de nuevo estilo de interfaz finalizado 30 4 26 Capacidad para agregar luces finalizado 25 25 Colisiones de objetos con hoyos finalizado 24 24 Corrección de errores sin iniciar Inserción de capacidad para especificar datos de “boundin box” de luz sin iniciar Escena Test finalizado Construcción de escena finalizado 40 15 25 Inserción de todos los módulos gráficos actuales finalizado 30 20 10 Sombras finalizado Investigación sombras con paraboloides finalizado 26 20 6 Implementación de sombras con paraboloides iniciado 5 5 42 44 46 48 50 52 54 1 6 -O c t 1 8 -O c t 2 0 -O c t 2 2 -O c t 2 4 -O c t 2 6 -O c t 2 8 -O c t Esfuerzo 128 Partículas finalizado Corrección de partículas por transparencia finalizado 40 14 26 Modificación de shader de luz para soporte a objetos Transparentes finalizado 40 7 22 BD1 Módulo de base de datos Actualización de demo registro de paciente finalizado 15 15 Actualización de vista de todos los pacientes del sistema finalizado 10 10 129 A Sprint 8 SPRINT INICIO DURACIÓN 5 1-Nov 15 días 1- Nov 4- Nov 6- Nov 8-Nov 10-Nov 12-Nov 14-Nov DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 53 53 53 49 50 50 46 ID TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Escena de referencia para mini juego finalizado 11 2 9 Implementación de lógica del juego avanzado 25 17 8 Inclusión de agua finalizado 15 15 Desarrollo de partículas de salpique de agua finalizado 3 3 Desarrollo de partículas de gotas de regadera finalizado 4 1 3 inclusión de partículas para cambio de estado de la planta finalizado 6 6 Eventos asociados a gesto de mano cerrada finalizado 20 15 5 Eventos asociados a gesto de mano abierta finalizado 10 10 Presentación inicial (recorrido) finalizado 4 4 Construcción de escena final finalizado 60 26 27 7 Desenlace avanzado 5 5 Inclusión de widgets asociados a la lógica del mini juego avanzado 15 15 KN1 Módulo de Kinect TM Escena de mini juego de calibración iniciado 15 15 Lógica de mini juego iniciado 11 11 Integración de partículas a sombra de Kinect TM finalizado 20 20 Mj1 Módulo de motor de juego Constructor de escena finalizado Soporte de texturas para “normal”, “bump” y “parallax mapping” finalizado 15 15 Corrección de errores finalizado 45 19 26 Inserción de capacidad para especificar datos de “boundin box” de luz finalizado 10 4 6 Sombras finalizado Implementación de sombras con paraboloides finalizado 25 25 Materiales finalizado 40 45 50 55 Esfuerzo 130 Modificación de carga de clase de objetos para soporte de materiales finalizado 5 5 5 Construcción de textura de materiales mediante un manejador de materiales finalizado 10 10 Soporte de mapa de especulares finalizado 17 Soporte a “multitexturing” medio- avanzado 2 JG1 Juegos Inclusión de metodología para el empleo de física en los juegos medio- avanzado 15 4 11 131 A Sprint 9 SPRINT INICIO DURACIÓN 5 15-Nov 15 días 1 5- N o v 18- Nov 20- Nov 22- Nov 24-Nov 26-Nov 28-Nov DIAS 1, 2, 3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 6 1 60 57 63 59 68 60 ID TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Implementación de lógica del juego finalizado 15 1 5 Desenlace finalizado 7 7 Inclusión de “widgets” asociados a la lógica del mini juego finalizado 25 9 16 Inclusión de sonido finalizado 30 13 17 Construcción de modelos animados (máquina) finalizado 31 1 20 11 KN1 Módulo de Kinect TM Escena de mini juego de calibración finalizado 30 3 0 Lógica para mínimos y máximo en eje X finalizado 17 17 Lógico para mínimos y máximo en eje Y finalizado 4 4 Lógico para mínimos y máximo en eje Z finalizado 6 6 Adaptación para calibración en ambas manos finalizado 23 4 19 Manipulación de cámara en función a la lógica finalizado 26 10 16 Eventos de escena asociado a la lógica finalizado 18 17 1 “Widgets” de mensajes de instrucciones finalizado 16 16 Lógico de mini juego finalizado 24 13 11 Inclusión de sonido finalizado 8 8 Mj1 Módulo de motor de juego Sistema de iluminación finalizado Corrección de errores con cálculo de influencia lumínica con respecto a posicionamiento finalizado 16 10 6 Soporte de mapa de especulares por pare de shader de luz finalizado 17 17 Soporte de materiales por parte de shader de luz suspendido 14 6 8 soporte a “multitexturing” eliminado 5 5 50 55 60 65 70 1 5 -N o v 1 7 -N o v 1 9 -N o v 2 1 -N o v 2 3 -N o v 2 5 -N o v 2 7 -N o v Esfuerzo 132 Efectos especiales: agua finalizado Corrección de errores con cámara 3d usada para agua finalizado 30 11 19 JG1 Juegos Corrección de inclusión de física en juego finalizado 13 13 JG1j1 Juego A Lógica de juego medio 10 10 Bandas transportadora avanzado 10 10 Gestión de objetos en cestas finalizado 38 16 16 Identificación de objetos particulares sobre cestas particulares no iniciado Adaptación para ajuste de número de objetos distintos tomados en cuenta por la lógica del juego no iniciado efecto de absorción de objetos no iniciado efecto de repulsión de objetos no iniciado 133 A Sprint 10 SPRINT INICIO DURACIÓN 10 1-Dec 15 días 1-Dec 4- Dec 6- Dec 8- Dec 10- Dec 12-Dec 14-Dec DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15 ESFUERZO TOTAL 55 54 52 52 55 55 45 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO JG1j1 Juego A Lógica de juego finalizado 40 10 26 4 bandas transportadora finalizado 18 18 Identificación de objetos particulares sobre cestas particulares finalizado 18 18 Adaptación para ajuste de numero de objetos distintos Tomados en cuenta por la lógica del juego finalizado 7 1 6 Efecto de absorción de objetos finalizado 13 13 Efecto de repulsión de objetos finalizado 11 9 2 Habilitación de efecto de plástico finalizado 5 5 Efecto de shatter finalizado 38 26 12 Adaptación de cámara, cintas, posicionamiento de objetos, Máquina de absorción/repulsión, cajas finalizado 10 10 Partículas de repulsión finalizado 15 15 Partículas de absorción finalizado 18 5 13 Partículas de objetos en cajas correspondientes finalizado 5 5 Cintas colgantes en salidas de objetos finalizado 17 9 8 widget generalizado para conteo inicial finalizado 13 13 Modelo md5 de máquina para juego finalizado 30 7 23 Modelado de escena finalizado 38 3 25 10 Modelo de recipientes finalizado 12 12 Modelos para objetos que correrán por cintas finalizado 15 5 10 widgets de mensajes de felicitaciones finalizado 4 4 Integración de guante Kinect TM finalizado 5 5 Inclusión de efectos de sonido no iniciado 11 IG1 Interfaz gráfica Bosquejo para interfaz final medio- avanzado 36 14 22 0 20 40 60 0 1 -D e c 0 3 -D e c 0 5 -D e c 0 7 -D e c 0 9 -D e c 1 1 -D e c 1 3 -D e c Esfuerzo 134 A Sprint 11 SPRINT INICIO DURACIÓN 11 16-Dec 24 días 16-Dec 21-Dec 25- Dec 29-Dec 2-Jan 6-Jan 10-Jan DIAS 1,2,3,4 ,5 6,7,8,9 10,11 ,12,1 3 14,15, 16,17 18,19 ,20,2 1 22,23,24 ,25 26,27,28, 29,30 ESFUERZO TOTAL 133 126 115 109 89 100 125 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Mejora de sonido de calibrador finalizado 17 17 Cambio de estrategia para indicar fin de fase de calibración finalizado 38 38 Mejora de widgets finalizado 26 8 18 Inclusión de mensajes de instrucciones finalizado 16 16 Inclusión de mensajes de felicitaciones finalizado 18 18 Gestión de pausa finalizado 26 26 Gestión de desconexión de cámara finalizado 12 12 Mejora de partículas finalizado 27 6 21 Inclusión de delay al guante para incrementar la eficiencia finalizado 18 18 Implementación de estrategia gráfica para mano izquierda por terminar 4 4 JG1j1 juego A Inclusión de efectos de sonido finalizado 18 15 3 Corrección de partículas de absorción finalizado 15 15 Corrección de partículas de repulsión finalizado 10 10 Gestión de premios especiales (combos) finalizado 5 5 Corrección de error en lógica de juego finalizado 23 23 Widget de predicción de objetos finalizado 18 18 Pantalla de loading con gestión de carga mediante hilo finalizado 24 24 gestión de pausa finalizado 1 1 Gestión de desconexión de cámara finalizado 1 1 Mj1 módulo de motor de juego Inclusión de ayudante para sonido sin usar Xac finalizado 2 2 JG1j2 juego B 0 50 100 150 1 6 -D e c 1 9 -D e c 2 2 -D e c 2 5 -D e c 2 8 -D e c 3 1 -D e c 0 3 -J a n 0 6 -J a n 0 9 -J a n Esfuerzo 135 Desarrollo de correspondencia entre sombra del Kinect TM y espacio 3D finalizado 55 10 Mecanismos para redirección de objetos a partir de contacto con el mismo finalizado 49 49 Desarrollo de widget para incrementar feedback de impacto sombra-objeto finalizado 12 12 "tracker" sobre pantalla de objetos 3d finalizado 18 18 Demo de gestión de entrada/salida de objetivos finalizado 19 19 integración de demo de lógica (entrada salida de objetivos) de juego con manejo de contacto sombra Kinect TM -proyectil finalizado Investigación/toma de ideas para escena finalizado 15 15 Modelado de escena eliminado 36 36 Reestructuración de la escena medio- avanzado 59 59 IG1 Interfaz gráfica Bosquejo para interfaz final finalizado Bosquejo inicial finalizado 67 60 7 Inclusión de ventana de selección de juegos finalizado 38 38 Efecto de deslizamiento de marcos para mostrar información finalizado 25 15 10 Inclusión de ventana de calibradores finalizado 37 37 DB1 Módulo de base de datos Actualización de registro de paciente finalizado 17 17 Actualización de eliminación de paciente finalizado 5 5 Método “update” de paciente finalizado 6 6 ED1 Módulo de estadísticas finalizado Establecimiento de tabla de juego A finalizado 12 12 Operación de inserción para tabla de juego A finalizado 3 3 Operación de eliminación para tabla de juego A finalizado 1 1 Operación de actualización para tabla de juego A finalizado 1 1 Scrum reestructuración de presentación finalizado establecimiento en formato xml finalizado 48 10 8 4 4 22 136 A Sprint 12 SPRINT INICIO DURACIÓN 12 15-Jan 17 días 15- Jan 18- Jan 20-Jan 22- Jan 24-Jan 26-Jan 28-Jan DIAS 1,2, 3 4,5 6,7 8,9 10,11 12,13 14,15, 16,17 ESFUERZO TOTAL 90 62 58 62 57 57 126 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO GV1 Módulo de guante virtual Implementación de estrategia gráfica para mano izquierda finalizado 1 1 JG1j2 Juego B Reestructuración de la escena finalizado Desarrollar modelo 3D de alta calidad finalizado 14 14 Desarrollar modelo de media calidad y modelo de colisiones finalizado 13 13 Mapear textura de iluminación calculada en el modelo de alta calidad al de baja calidad finalizado 48 16 32 Lógica de juego finalizado Realizar cálculos de dirección y potencia de las esferas cuando colisionan con las manos del usuario finalizado 24 24 Cálculos de repeticiones y puntaje finalizado 22 2 20 Integrar objetivos, y sistema de disparo de los objetos finalizado 14 11 Coordinar sistema de partículas de explosión con el disparo de los objetos finalizado 22 22 Generar en conjunto con la explosión un meteorito finalizado 12 7 5 Generar partículas de fuego en base a la potencia del golpe que dé el usuario finalizado 13 12 Programar la lógica general del juego, correspondiente a la coordinación de los tiempos finalizado 11 11 Desarrollo de texturas y que resalten las manos del usuario finalizado 14 14 Gestor de soundTracks e integración de efectos de sonido finalizado 19 19 interfaz de juego finalizado Desarrollar los componentes interfaz del juego finalizado 33 33 MJ1 Módulo de motor de juego Extracción de DLL del engine, guante, Kinect TM , base de datos y creación de Dll "Common" para elementos de interfaz reusables finalizado 13 13 Creación de Dll (proyecto) gestor de gráficos estadísticos finalizado 19 19 Creación de proyectos contenidos de cada modulo finalizado 2 2 Modificación de shader de luz para máscara de color finalizado 4 4 0 50 100 150 1 5 -J a n 1 7 -J a n 1 9 -J a n 2 1 -J a n 2 3 -J a n 2 5 -J a n 2 7 -J a n Esfuerzo 137 IG1 Interfaz gráfica Pantalla de registro, actualización finalizado 10 8 2 Pantalla de eliminación, selección (para actualización) de pacientes, login extendido finalizado 16 16 Validación de campos finalizado 14 12 2 Reestructuración de la interfaz medio 47 47 BD1 Módulo de base de datos Migración de Mysql a SQlite finalizado 37 30 7 Querys asociados a los "datagrid" de pantallas de actualización eliminación y login extendido, y para campos en los que se requiera traer información de base de datos finalizado 7 7 Almacén de imágenes en base de datos iniciado 25 17 8 jG1 Juegos Construcción de clase abstracta juego para generalización de estados de juegos finalizado 18 18 Conversión de calibrador de guante a "drawableComponent" finalizado 11 2 9 Integración de interfaz, juego A, calibrador de guante finalizado 33 20 13 138 A Sprint 13 SPRINT INICIO DURACIÓN 13 1-Feb 16 días 1- Feb 4- Feb 6-Feb 8-Feb 10-Feb 12-Feb 14-Feb DIAS 1,2, 3 4,5 6,7 8,9 10,11 12,13 14,15, 16 ESFUERZO TOTAL 67 43 45 46 48 46 62 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO IG1 Interfaz gráfica Restructuración de interfaz Diseño de vista de nueva interfaz finalizado 6 6 Pantallas de opciones de bases de datos (registrar, actualizar, eliminar pacientes) finalizado 10 10 Pantallas de opciones de calibración (calibrar guante y Kinect TM ) finalizado 4 4 Pantallas de opciones de sesión (iniciar sesión, estadísticas) finalizado 4 4 Pantallas de juegos (selección con pase de parámetros) finalizado 2 2 pantallas de visualización de estadísticas avanzado 4 4 Gestión de opciones de accesos directos (barra inferior de opciones) finalizado 15 8 7 Ventana de bienvenida finalizado 1 1 Ventana para gráficos en tiempo real avanzado 3 3 Control de logOut finalizado 10 10 Animaciones de interfaz finalizado 18 2 16 Enlace con operaciones de base de datos finalizado 36 10 26 Pantalla para toma de fotos de pacientes finalizado 9 9 Diseño de Íconos para interfaz finalizado 54 15 26 13 Inicio juego A desde interfaz finalizado 14 14 ED1 Módulo de estadísticas Actualización de tablas (juego A, resumen de paciente) finalizado 4 4 JG1 Juegos Modelo tentadoramente usable para despliegue de instrucciones finalizado 76 7 24 20 25 Integración de juego A, juego B e interfaz finalizado 6 6 JG1j2 Juego B Corrección de reloj (orden decreciente) finalizado 8 8 Mejora de widget de textos finalizado 19 19 0 20 40 60 80 0 1 -F e b 0 3 -F e b 0 5 -F e b 0 7 -F e b 0 9 -F e b 1 1 -F e b 1 3 -F e b Esfuerzo 139 Efectos de entrada salida de mensajes de combos finalizado 17 2 15 Mejora de cálculo de fuerza aplicada finalizado 24 5 19 Mejora del feedback a partir del render de circunferencias con efectos lumínico para el seguimiento de las manos finalizado 13 13 140 A Sprint 14 SPRINT INICIO DURACIÓN 14 17-Feb 11 días 17- Feb 19- Feb 20- Feb 21- Feb 22-Feb 23- Feb 24-Feb DIAS 1,2 3 4 5 6 7 8,9,10, 11 ESFUERZO TOTAL 42 21 25 22 23 25 95 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO ED1 Módulo de estadísticas Corrección de gráfica 1,2,3 de juego A finalizado 20 20 Corrección de gráfica 2 juego finalizado 10 10 Corrección de tablas para almacén de juego B finalizado 7 7 IG1 Interfaz gráfica Pantallas de visualización de estadísticas finalizado 2 2 Inclusión de un nivel de memoria para la navegación en la interfaz finalizado Inclusión de botones para toma de fotos finalizado 4 Inclusión de funcionalidad de toma de fotos finalizado 5 3 2 Extracción de fotos para pantallas de registro, actualización y login finalizado 10 10 bloqueo de opciones de acceso a pantalla de estadísticas y juegos sin login finalizado Habilitación de opciones por default finalizado Método clear (para regresar a los valores iniciales) de las pantallas finalizado Corrección de tiempo de actualización de estadísticas en tiempo real finalizado 5 5 Clase para toma de fotos por el sistema finalizado 30 22 8 Llamada a calibrador desde interfaz finalizado 3 CK1 Calibrador Kinect TM Actualización de engine finalizado 28 3 14 11 Integración con interfaz finalizado 33 3 15 15 JG1 Juegos Investigación de funcionamiento de memoria finalizado 45 45 JG1j1 Juego A actualización de reloj (oren decreciente) finalizado 1 1 Descarga de contenido. Investigación/pruebas de memoria finalizado 30 30 JG1j2 juego B pantalla de presentación de puntaje avanzado 20 20 0 20 40 60 80 100 1 7 -F e b 1 8 -F e b 1 9 -F e b 2 0 -F e b 2 1 -F e b 2 2 -F e b 2 3 -F e b 2 4 -F e b Esfuerzo 141 a A Sprint 15 SPRINT INICIO DURACIÓN 15 28-Feb 16 días 28- Feb 3- Mar 5-Mar 7-Mar 9-Mar 11- Mar 13- Mar DIAS 1,2,3 4,5 6,7 8,9 10,11 12,13 14,15, 16 ESFUERZO TOTAL 47 33 33 66 62 56 47 ID DE BACKLOG TAREA ESTADO ESFUERZO TOTAL ESFUERZO IG1 Interfaz gráfica Inclusión de un nivel de memoria para la navegación en la interfaz finalizado 16 16 Bloqueo de opciones de acceso a pantalla de Estadísticas y juegos sin login finalizado 5 5 Habilitación de opciones por default finalizado 6 6 Método clear (para regresar a los valores iniciales) de las pantallas finalizado 3 3 BD1 Módulo de base de datos Registro en base de datos de juego C 15 ED1 Módulo de gráficos estadísticos Desarrollo de gráficas estadísticas de juego C 12 12 Desarrollo de gráficas históricas de juego C 5 5 Desarrollo de gráficas en tiempo real de juego C 9 9 JG1 juegos JG1j3 juego C Generación de modelos de peces finalizado 38 30 8 Generación de modelos MD5 de peces finalizado 45 20 25 Implementación de lógica de nado de peces finalizado 35 17 18 Implementación de lógica de juego (inicio, desarrollo, final) finalizado 30 15 15 Implementación dermatología de conteo finalizado 18 18 Inclusión de sonido finalizado 7 7 Programación de efecto especial "bajo agua" finalizado 9 9 Inclusión de efecto de agua superficial finalizado 15 15 Inclusión de mensajes de felicitaciones finalizado 5 5 Inclusión de metodología de conteo de combos finalizado 19 19 Desarrollo de metodología de extracción de peces finalizado 17 5 12 Implementación de posturas para el control del juego finalizado 6 6 soporte de imágenes de fondo por shader de iluminación finalizado 10 10 Soporte de imágenes de fondo por shader de agua finalizado 19 19 0 20 40 60 80 2 8 -F e b 0 1 -M a r 0 3 -M a r 0 5 -M a r 0 7 -M a r 0 9 -M a r 1 1 -M a r 1 3 -M a r Series1