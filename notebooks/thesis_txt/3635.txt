Universidad Central de Venezuela Facultad de Ciencias Escuela de Computación Laboratorio de Redes Móviles, Inalámbricas y Distribuidas (ICARO) “Desarrollo de un Sistema de Control de Libros para la Biblioteca del Centro Educativo de la Asociación de Profesores de la Universidad Central de Venezuela (CEAPUCV) Utilizando la Tecnología de Identificación por Radiofrecuencia (RFID)” Trabajo Especial de Grado presentado ante la ilustre Universidad Central de Venezuela, por los bachilleres: Caricote G. Rafael A. C.I.: 20.127.693 Email: rcaricote90@gmail.com Yépez C. Zaira M. C.I.:19.548.235 Email: zaira.yepez@gmail.com Para optar por el Título de Licenciado de Computación Tutora: Profa. María E. Villapol Caracas, 30 de octubre de 2013 2 Universidad Central de Venezuela Facultad de Ciencias Escuela de Computación Laboratorio de Comunicación y Redes ACTA DEL VEREDICTO Quienes suscriben, Miembros del Jurado designado por el Consejo de la Escuela de Computación para examinar el Trabajo Especial de Grado, presentado por los Bachilleres Rafael Caricote C.I.:20.127.693 y Zaira Yépez C.I.:19.548.235, con el título “Desarrollo de un Sistema de Control de Libros en la Biblioteca del Centro Educativo de la Asociación de Profesores de la Universidad Central de Venezuela (CEAPUCV) Utilizando la Tecnología de Identificación por Radiofrecuencia (RFID)”, a los fines de cumplir con el requisito legal para optar al título de Licenciado en Computación, dejan constancia de lo siguiente: Leído el trabajo por cada uno de los Miembros del Jurado, se fijó el día 24 de Octubre de 2013, a las 12 pm, para que sus autores lo defendieran en forma pública, en el salón Planta Baja III de la Escuela de Computación, lo cual estos realizaron mediante una exposición oral de su contenido, y luego respondieron satisfactoriamente a las preguntas que les fueron formuladas por el Jurado, todo ello conforme a lo dispuesto en la Ley de Universidades y demás normativas vigentes de la Universidad Central de Venezuela. Finalizada la defensa pública del Trabajo Especial de Grado, el jurado decidió aprobarlo. En fe de lo cual se levanta la presente acta, en Caracas el 24 de Octubre de 2013, dejándose también constancia de que actuó como Coordinador del Jurado el Profesor Tutor María Villapol. Profa. María Villapol (Tutor) Profa. Ana Morales Profa. Mercy Ospina (Jurado Principal) (Jurado Principal) 3 Agradecimientos Primero que nada quiero agradecer a Dios por darme salud para llevar a cabo esta etapa en mi vida y el comienzo de una nueva. Quiero darles las gracias a mis padres Rafael y Neyra, quienes desde el principio han sido un pilar muy importante para mí y me han hecho lo que soy hoy en día. A mis hermanas Yurani y Xiriana, y a mi novio Christian, que siempre me han apoyado y animado en mis momentos difíciles. A la Profesora Villapol por guiarnos durante todo este proceso de desarrollo y tener paciencia con nosotros. No puedo dejar de lado a mi compañero Rafael Caricote, que sin él este trabajo no hubiese sido ni la mitad de divertido de lo que fue. A todas las personas que nos ayudaron al momento de realizar las pruebas funcionales y de usabilidad, fueron de mucha ayuda y de gran aprendizaje. Al igual que nuestros compañeros Tony Briceño y Francisco Moreno quienes nos enseñaron cosas nuevas y nos ayudaron en momentos de tensión. Finalmente les dedico este trabajo a todas esas personas que estuvieron en todo momento y que me apoyaron en esta etapa que ahora termina y que me acompañaran en una nueva etapa que apenas comienza, y a los futuros tesistas les digo que tengan paciencia, es un trabajo largo, pero al final siempre vale la pena. ¡Muchas gracias a todos por todo! Zaira M. Yépez C. 4 Primeramente quiero agradecer a mi mamá, que es la persona que más admiro por esa fortaleza que tiene para enfrentar situaciones difíciles y aun mantener esa linda sonrisa que ilumina todas mis mañanas cuando me despierta. Gracias mamá, no solo por ser mi madre, sino por ser mí apoyo, mi profesora, mi amiga y mi guía en cada una de las etapas que he enfrentado y por esas que vendrán y que sé que estaré contigo en cada una de ellas. Te amo. También debo agradecer a mis compañeros de la delegación UCV-WorldMUN, que durante todo un año me dieron esa oportunidad de crecer como persona y de ofrecerme su amistad. En especial quiero agradecer a Nicole, Maritza, Gabriela y Samuel que desde el momento en que los conocí hasta el día de hoy me han ayudado y apoyado en situaciones difíciles que se me han presentado, pero que de igual modo han estado ahí en momentos de alegría y felicidad. Los quiero muchachos y muchas gracias por ser esa familia que me adoptó y me hizo sentir más que bienvenido, querido. Los amo. Profesora María Elena Villapol, gracias por presentarnos este proyecto tan interesante y que ayudara a un conjunto de personas que en verdad facilitara sus actividades en la institución. Gracias. Mis amigos de la carrera, parte indispensable de mi crecimiento profesional y personal, muchas gracias por estar ahí y vivir conmigo experiencias inolvidables que siempre recordaré y apreciaré, en especial a Diego, Fernando, Lorena y Froy muchas gracias por el apoyo y siempre los recordaré con mucho cariño. Los quiero. Finalmente quiero agradecer a mi compañera de tesis. Zaira ha sido sin duda alguna, una de las personas que más me ha apoyado en actividades dentro de la carrera y fuera de ella. Gracias por darme esa oportunidad en 7mo semestre de ser tu compañero de tesis y darme ese voto de confianza para trabajar contigo en este trabajo. Mis palabras no son suficientes para agradecerte. Te adoro. Para finalizar mis agradecimientos quiero mencionar una de mis citas favoritas “La vida nunca es como la planeamos”, a veces para conseguir lo que queremos debemos arriesgarnos y luchar como si no hubiese mañana para lograrlo. Sean ustedes, disfruten la vida y valoren cada momento con sus seres queridos, al final lo único que tenemos en esta vida es el amor de estas personas y las mejores memorias que al recordarlas nos harán sonreír y decir “Lo hice bien”. Muchas gracias a todos. Rafael Caricote 5 Tabla de contenido Agradecimientos ........................................................................................................................................................... 3 Tabla de contenido ....................................................................................................................................................... 5 Índice de figuras ........................................................................................................................................................... 8 Índice de tablas ........................................................................................................................................................... 11 Resumen ..................................................................................................................................................................... 12 1. Introducción ........................................................................................................................................................ 14 1.1 Definición del problema ......................................................................................................................... 14 1.2 Objetivo General ..................................................................................................................................... 15 1.3 Objetivos Específicos ............................................................................................................................. 15 1.4 Justificación ............................................................................................................................................ 16 1.5 Distribución del documento .................................................................................................................... 17 2. Identificación por Radio Frecuencia ................................................................................................................... 19 2.1 Definición ............................................................................................................................................... 19 2.2 Componentes de un sistema RFID ......................................................................................................... 19 2.2.1 Etiquetas o Transpondedores .......................................................................................................... 20 2.2.2 Lectores .......................................................................................................................................... 28 2.2.3 Programadores ................................................................................................................................ 32 2.2.4 Pila de protocolo ............................................................................................................................. 33 2.2.5 Interfaz de lectura ........................................................................................................................... 35 2.2.6 Almacenamiento y procesamiento de datos.................................................................................... 41 2.2.7 Capa middleware ............................................................................................................................ 46 2.2.8 Interfaz de aplicación ...................................................................................................................... 47 2.2.9 Funcionamiento de un sistema RFID ............................................................................................. 48 3. Sistemas de Gestión de Bibliotecas .................................................................................................................... 52 3.1 Automatización de Bibliotecas ............................................................................................................... 52 3.1.1 Características ................................................................................................................................. 53 3.1.2 Funcionalidad ................................................................................................................................. 54 3.1.3 RFID y las Bibliotecas .................................................................................................................... 55 3.1.4 Modelo de funcionamiento ............................................................................................................. 55 3.1.5 Funcionamiento .............................................................................................................................. 57 3.1.6 Códigos de Barras vs RFID ............................................................................................................ 58 6 4. Metodología y Herramientas del Trabajo ........................................................................................................... 60 4.1 Metodología de desarrollo de software ................................................................................................... 60 4.2 Herramientas ........................................................................................................................................... 61 4.2.1 Ruby on Rails ................................................................................................................................. 61 4.2.2 MySQL ........................................................................................................................................... 62 4.2.3 Csharp ............................................................................................................................................. 62 4.2.4 Bootstrap ......................................................................................................................................... 63 4.2.5 Equipos RFID ................................................................................................................................. 63 4.2.5.1 Lector- Escritor ......................................................................................................................... 64 4.2.5.2 Etiquetas autoadhesivas ............................................................................................................ 64 5. Diseño de la Aplicación ...................................................................................................................................... 65 5.1 Fase de diseño ......................................................................................................................................... 65 5.1.1 Casos de Uso Nivel 0 ...................................................................................................................... 65 5.1.2 Casos de Uso Nivel 1 ...................................................................................................................... 67 5.1.3 Casos de Uso Nivel 2 ...................................................................................................................... 75 5.1.4 Casos de Uso Nivel 3 ...................................................................................................................... 80 5.1.5 Diagrama de clases ......................................................................................................................... 82 5.1.6 Diagrama Relacional ...................................................................................................................... 87 6. Implementación de la Aplicación ....................................................................................................................... 88 6.1 Arquitectura ............................................................................................................................................ 88 6.2 Desarrollo en C# ..................................................................................................................................... 90 6.3 Desarrollo de sockets .............................................................................................................................. 94 6.4 Implementación de la Aplicación ........................................................................................................... 95 6.4.1 Módulo general ............................................................................................................................... 96 6.4.2 Módulo administrativo ................................................................................................................. 101 7. Pruebas y Resultados ........................................................................................................................................ 127 7.1 Etapa de pruebas ................................................................................................................................... 127 7.2 Resultados ............................................................................................................................................. 129 8. Conclusiones ..................................................................................................................................................... 132 8.1 Contribuciones ...................................................................................................................................... 133 8.2 Trabajos Futuros ................................................................................................................................... 134 Referencias Bibliográficas ........................................................................................................................................ 135 7 Apéndice A ............................................................................................................................................................... 136 8 Índice de figuras Figura 2.1: Aspecto y detalle de las etiquetas RFID. Fuente: Elaboración propia. .............................................. 20 Figura 2.2: Acoplamiento inductivo (campo cercano). Fuente: Elaboración propia ........................................... 22 Figura 2.3: Propagación por ondas electromagnéticas (campo lejano). Fuente: Elaboración propia. ................. 22 Figura 2.4: Etiquetas adhesivas de papel. Fuente: Recuperado de internet, 21 de Marzo del 2013..................... 26 Figura 2.5: Etiquetas adhesivas sin sustrato. Fuente: Recuperado de internet, 21 de Marzo del 2013 ................ 26 Figura 2.6: Etiqueta adhesiva de forma circular. Fuente: Recuperado de internet, 21 de Marzo del 2013 .......... 26 Figura 2.7: Tarjetas identificativas de PVC. Fuente: Recuperado de internet, 21 de Marzo del 2013. ............... 27 Figura 2.8: Acceso al lugar de trabajo. Fuente: Recuperado de internet, 21 de Marzo del 2013. ........................ 27 Figura 2.9: Acceso al transporte público. Fuente: Recuperado de internet, 21 de Marzo del 2013. .................... 28 Figura 2.10: Esquema de un lector RFID. Fuente: Elaboración propia. .............................................................. 29 Figura 2.11: Pila de protocolos de RFID. Fuente: Elaboración propia. ............................................................... 34 Figura 2.12: Formato UID. Fuente: http://www.waazaa.org/download/fcd-15693-2.pdf .................................... 41 Figura 2.13: Emisión de la señal de baja potencia del lector a la etiqueta RFID. ................................................ 48 Figura 2.14: Envío de datos por parte de la etiqueta RFID. ................................................................................. 49 Figura 2.15: Procesamiento de datos por parte del lector. Fuente: Elaboración Propia. ...................................... 50 Figura 3.1: Funcionamiento de un sistema de gestión de bibliotecas. ................................................................. 58 Figura 5.1: Diagrama de casos de uso para el nivel 0. Fuente: Elaboración propia. ............................................ 65 Figura 5.2: Diagrama de casos de uso para el nivel 1. Fuente: Elaboración propia. ............................................ 68 Figura 5.3: Diagrama de casos de uso para el nivel 2. ......................................................................................... 76 Figura 5.4: Diagrama de casos de uso del nivel 3. Fuente: Elaboración propia................................................... 81 Figura 5.5: Diagrama de clases. Fuente: Elaboración propia. .............................................................................. 82 Figura 5.6: Clase usuario. Fuente: Elaboración propia. ....................................................................................... 83 Figura 5.7: Clase profesor. Fuente: Elaboración propia. ...................................................................................... 83 Figura 5.8: Clase representante. Fuente: Elaboración propia. .............................................................................. 84 Figura 5.9: Clase estudiante. Fuente: Elaboración propia. ................................................................................... 84 Figura 5.10: Clase préstamo. Fuente: Elaboración propia. .................................................................................. 85 Figura 5.11: Clase devolución. Fuente: Elaboración propia. ............................................................................... 85 Figura 5.12: Clase inventario. Fuente: Elaboración propia. ................................................................................. 86 Figura 5.13: Clase de libro. Fuente: Elaboración propia. ..................................................................................... 86 Figura 5.14: Diagrama relacional de la base de datos. Fuente: Elaboración propia. ........................................... 87 Figura 6.1: Diseño de la Primera Arquitectura Propuesta. Fuente: Elaboración propia. ..................................... 88 Figura 6.2: Diseño de la Segunda Arquitectura Propuesta. Fuente: Elaboración propia. .................................... 89 Figura 6.3: Pantalla para acceder a las propiedades de un proyecto. ................................................................... 90 file:///C:/Users/zaira.yepez/Dropbox/Zaira-Rafael%20TEG/tesis_zaira_rafael_final3.doc%23_Toc370466702 file:///C:/Users/zaira.yepez/Dropbox/Zaira-Rafael%20TEG/tesis_zaira_rafael_final3.doc%23_Toc370466703 file:///C:/Users/zaira.yepez/Dropbox/Zaira-Rafael%20TEG/tesis_zaira_rafael_final3.doc%23_Toc370466706 file:///C:/Users/zaira.yepez/Dropbox/Zaira-Rafael%20TEG/tesis_zaira_rafael_final3.doc%23_Toc370466707 9 Figura 6.4: Pantalla de recursos de un proyecto. Fuente: Elaboración propia. .................................................... 91 Figura 6.5: Pantalla de lista de Strings. Fuente: Elaboración propia. .................................................................. 91 Figura 6.6: Fragmento de código fuente. Fuente: Elaboración propia. ................................................................ 92 Figura 6.7: Fragmento de código fuente para ejecutar un archivo. Fuente: Elaboración propia.......................... 95 Figura 6.8: Fragmento de código para guardar la salida de un proceso. .............................................................. 95 Figura 6.9: Fragmento de código para enviar un mensaje a través del socket. .................................................... 95 Figura 6.10: Pantalla Inicial del sistema. Fuente: Elaboración propia. ................................................................ 96 Figura 6.11: Pantalla de Detalles del material. Fuente: Elaboración propia. ....................................................... 96 Figura 6.12: Pantalla de Búsqueda Avanzada. Fuente: Elaboración propia. ....................................................... 97 Figura 6.13: Fragmento de código para enviar un mensaje a través del socket. .................................................. 98 Figura 6.14: Solicitud de préstamo hecha por un administrador (a). ................................................................... 98 Figura 6.15: Solicitud de préstamo hecha por un administrador (b). ................................................................... 99 Figura 6.16: Solicitud de préstamo hecha por un administrador (c). Fuente: Elaboración propia. ...................... 99 Figura 6.17: Solicitud de préstamo hecha por un administrador (d). ................................................................. 100 Figura 6.18: Pantalla de olvidó clave. Fuente: Elaboración propia.................................................................... 100 Figura 6.19: Selección de tipo de préstamo para profesores. Fuente: Elaboración propia. ............................... 101 Figura 6.20: Pantalla de autenticación. Fuente: Elaboración propia. ................................................................. 101 Figura 6.21: Recuperación de clave. Fuente: Elaboración propia. ..................................................................... 102 Figura 6.22: Selección de Modo a trabajar en el sistema. Fuente: Elaboración propia. .................................... 102 Figura 6.23: Pantalla de inicio del módulo administrador. Fuente: Elaboración propia. ................................... 103 Figura 6.24: Menú superior en el módulo administrador. Fuente: Elaboración propia. .................................... 104 Figura 6.25: Pantalla inicio de opción usuarios. Fuente: Elaboración propia. ................................................... 104 Figura 6.26: Pantalla de detalles del estudiante. Fuente: Elaboración propia. ................................................... 105 Figura 6.27: Pantalla de detalles del representante. Fuente: Elaboración propia. .............................................. 106 Figura 6.28: Pantalla de editar detalles del estudiante. Fuente: Elaboración propia. ......................................... 106 Figura 6.29: Pantalla inicio de representantes. Fuente: Elaboración propia. ..................................................... 107 Figura 6.30: Pantalla de registrar estudiante. Fuente: Elaboración propia. ........................................................ 108 Figura 6.31: Pantalla de inicio de la opción préstamos. Fuente: Elaboración propia. ....................................... 109 Figura 6.32: Pantalla de detalles de un préstamo. Fuente: Elaboración propia. ................................................. 109 Figura 6.33: Pantalla de aprobar préstamo. Fuente: Elaboración propia. .......................................................... 110 Figura 6.34: Pantalla inicio de la opción “Devoluciones”. Fuente: Elaboración propia. ................................... 111 Figura 6.35: Pantalla de registrar devolución. Fuente: Elaboración propia. ...................................................... 111 Figura 6.36: Pantalla inicio de la opción “Inventario”. Fuente: Elaboración propia. ........................................ 112 Figura 6.37: Pantalla de detalles del inventario. Fuente: Elaboración propia. ................................................... 113 Figura 6.38: Archivo PDF de un inventario. Fuente: Elaboración propia. ........................................................ 113 file:///C:/Users/zaira.yepez/Dropbox/Zaira-Rafael%20TEG/tesis_zaira_rafael_final3.doc%23_Toc370466756 10 Figura 6.39: Ejemplo de etiquetas manuales. Fuente: Elaboración propia. ....................................................... 114 Figura 6.40: Pantalla con lista de los materiales de la biblioteca. Fuente: Elaboración propia. ........................ 115 Figura 6.41: Pantalla de los detalles de los materiales. Fuente: Elaboración propia. ........................................ 116 Figura 6.42: Pantalla de editar detalles del material. Fuente: Elaboración propia. ............................................ 117 Figura 6.43: Pantalla para consultar etiqueta de modo manual. Fuente: Elaboración propia. ........................... 118 Figura 6.44: Pantalla inicio de la opción “Cerrar Año”. Fuente: Elaboración propia. ....................................... 119 Figura 6.45: Pantalla de consultar etiqueta con el uso de los equipos RFID. .................................................... 119 Figura 6.46: Selección de Modo a trabajar en el sistema. Fuente: Elaboración propia. .................................... 120 Figura 6.47: Comando hacer préstamo para intranet. Fuente: Elaboración propia. ........................................... 121 Figura 6.48: Comando hacer préstamo con socket para linux. Fuente: Elaboración propia. ............................. 121 Figura 6.49: Comando hacer préstamo con socket para windows. Fuente: Elaboración propia. ....................... 121 Figura 6.50: Diagrama de secuencia de la función hacer préstamo. Fuente: Elaboración propia ...................... 122 Figura 6.51: Comando consulta para intranet. Fuente: Elaboración propia. ...................................................... 122 Figura 6.52: Comando de consulta para socket en Linux. Fuente: Elaboración propia. .................................... 123 Figura 6.53: Comando de consulta para socket en Windows. Fuente: Elaboración propia. .............................. 123 Figura 6.54: Diagrama de secuencia de la función consulta. Fuente: Elaboración propia ................................. 123 Figura 6.55: Comando inventario para intranet. Fuente: Elaboración propia. ................................................... 124 Figura 6.56: Comando inventario para sockets en Linux. Fuente: Elaboración propia. .................................... 124 Figura 6.57: Comando inventario para sockets en Windows. Fuente: Elaboración propia. .............................. 124 Figura 6.58: Diagrama de secuencia de la función inventario. Fuente: Elaboración propia .............................. 125 Figura 6.59: Comando de escribir etiqueta para intranet. Fuente: Elaboración propia. ..................................... 125 Figura 6.60: Comando escribir etiqueta para sockets en Linux. Fuente: Elaboración propia. ........................... 126 Figura 6.61: Comando escribir etiqueta para sockets en Windows. Fuente: Elaboración propia. ..................... 126 Figura 6.62: Diagrama de secuencia de la función escribir etiqueta. Fuente: Elaboración propia .................... 126 Figura A.1: Proceso de instalación de drivers de los equipos RFID (a) .......... Error! Bookmark not defined.36 Figura A.2: Proceso de instalación de drivers de los equipos RFID (b) .......... Error! Bookmark not defined.37 Figura A.3: Proceso de instalación de drivers de los equipos RFID (c) .......... Error! Bookmark not defined.37 Figura A.4: Proceso de instalación de drivers de los equipos RFID (d) .......... Error! Bookmark not defined.38 Figura A.5: Proceso de instalación de drivers de los equipos RFID (e) .......... Error! Bookmark not defined.38 Figura A.6: Proceso de instalación de drivers de los equipos RFID (f) ........... Error! Bookmark not defined.39 Figura A.7: Proceso de instalación de drivers de los equipos RFID (g) .......... Error! Bookmark not defined.39 Figura A.8: Proceso de instalación de drivers de los equipos RFID (h) .......... Error! Bookmark not defined.40 Figura A.9: Proceso de instalación de drivers de los equipos RFID (i) ........... Error! Bookmark not defined.41 file:///C:/Users/zaira.yepez/Dropbox/Zaira-Rafael%20TEG/tesis_zaira_rafael_final3.doc%23_Toc370466757 11 Índice de tablas Tabla 2.1: Frecuencia y fuerza del campo magnético. ......................................................................................... 35 Tabla 2.2: Frecuencia y fuerza del campo eléctrico. ............................................................................................ 36 Tabla 2.3: Codificación AFI. Fuente: http://www.waazaa.org/download/fcd-15693-2.pdf ................................. 42 Tabla 2.4: Bloque de estados de seguridad. Fuente: http://www.waazaa.org/download/fcd-15693-2.pdf .......... 44 Tabla 2.5: Definición de los códigos de error en una respuesta. .......................................................................... 46 Tabla 3.1: Tabla Comparativa RFID vs Código de Barras. Fuente: Elaboración propia. .................................... 59 Tabla 5.1: Tabla de descripción del actor Administrador. Fuente: Elaboración propia. ...................................... 66 Tabla 5.2: Tabla de descripción del actor Estudiante. Fuente: Elaboración propia. ............................................ 66 Tabla 5.3: Tabla de descripción del actor Representante. Fuente: Elaboración propia. ...................................... 67 Tabla 5.4: Tabla de descripción del actor Profesor. Fuente: Elaboración propia................................................. 67 Tabla 5.5: Especificaciones del caso de uso lista de libros. Fuente: Elaboración propia..................................... 69 Tabla 5.6: Especificaciones del caso de uso autenticar usuario. Fuente: Elaboración propia.............................. 70 Tabla 5.7: Especificaciones del caso de uso inventario. Fuente: Elaboración propia. ......................................... 71 Tabla 5.8: Especificaciones del caso de uso préstamo. Fuente: Elaboración propia. .......................................... 72 Tabla 5.9: Especificaciones del caso de uso devolución. Fuente: Elaboración propia. ....................................... 73 Tabla 5.10: Especificaciones del caso de uso registrar usuarios. Fuente: Elaboración propia. ........................... 74 Tabla 5.11: Especificaciones del caso de uso cerrar año. Fuente: Elaboración propia. ....................................... 75 Tabla 5.12: Especificaciones del caso de uso registrar material. Fuente: Elaboración propia. ............................ 77 Tabla 5.13: Especificaciones del caso de uso consultar etiqueta. Fuente: Elaboración propia. ........................... 78 Tabla 5.14: Especificaciones del caso de uso generar etiqueta. Fuente: Elaboración propia. ............................. 79 Tabla 5.15: Especificaciones del caso de uso aprobación de préstamo. .............................................................. 79 Tabla 5.16: Especificaciones del caso de uso de registro de devolución. ............................................................ 80 Tabla 5.17: Especificaciones del caso de uso sanciones. Fuente: Elaboración propia......................................... 81 12 Resumen TITULO Desarrollo de un sistema de control de libros en la biblioteca del Centro Educativo de la Asociación de Profesores de la Universidad Central de Venezuela (CEAPUCV) utilizando la tecnología de Identificación por Radio Frecuencia (RFID). AUTORES Rafael Caricote Zaira Yépez TUTOR Profa. María E. Villapol Hoy en día, el hombre busca la manera de automatizar todas sus tareas, con el fin de optimizar tiempo y esfuerzo. Esta automatización viene dada por las distintas necesidades que se presentan en los ambientes donde el hombre realice sus actividades del día a día, como por ejemplo su hogar, ambiente de trabajo, instituciones académicas, entre otros. Una biblioteca no es la excepción; al momento de realizar un préstamo de algún material se manejan planillas u hojas de control, donde se recogen datos del material a prestar y de la persona que realiza la solicitud. El uso excesivo del papel, y la posibilidad de que estos puedan ser extraviados o traspapelados puede llegar a ocasionar problemas operacionales dentro de la biblioteca así como no asegurar la devolución de los materiales a la misma. Actualmente el funcionamiento de la biblioteca del Centro Educativo de Asociación de Profesores de la Universidad Central de Venezuela (CEAPUCV) se ha mantenido con una gestión manual de la misma, a cargo de una sola persona, provocando que el manejo de préstamo de libros sea nulo o casi nulo. Por ello este trabajo de investigación está orientado al desarrollo de un sistema de control de materiales para automatizar el proceso de préstamo y mejorar el control de estos utilizando la tecnología RFID, la cual es recomendable por mantener la información segura del material dentro de las etiquetas y obtener la información contenida en estas sin necesidad de que exista un contacto directo entre el lector y las etiquetas. 13 En el desarrollo de este sistema se utilizarán herramientas de código abierto como lo son: Ruby on Rails, que consiste en un framework escrito en el lenguaje Ruby para el desarrollo de aplicaciones web basado en el patrón de diseño MVC (Modelo-Vista-Controlador) lo que proporciona una programación fácil y rápida; el sistema manejador de base de datos MySQL, el cual permite la elaboración de una base de datos de manera sencilla y con un costo muy bajo; otra herramienta es el lenguaje de programación C#, utilizando el IDE Visual Studio 2012, en donde se programarán todas las llamadas necesarias para el uso de los equipos RFID dentro del sistema. Dentro de las metodologías de programación ágil se tomó la metodología de Programación Extrema ya que se adapta a los requerimientos de reuniones con los encargados de la biblioteca escolar, al igual que la cantidad de integrantes en grupo de desarrollo y las posibilidades de hacer modificaciones al sistema a medida que se va desarrollando. Dado que la metodología de Programación Extrema no exige una documentación formal, se decidió, incluir diagramas de Clases, Casos de uso y diagrama de Entidad de Relación, para un mayor entendimiento en la manera que esquematizó todo el sistema. El objetivo principal de este desarrollo, es ofrecerle al CEAPUCV, la oportunidad de llevar un control automatizado de los materiales existentes en la biblioteca escolar para mejorar el servicio de la misma y facilitar las actividades operativas para un funcionamiento eficiente. Palabras claves: tecnología RFID, Sistema de control de bibliotecas, CEAPUCV, Ruby on Rails, MySQL. 14 1. Introducción A medida que han pasado los años, el hombre se ha propuesto mejorar sus condiciones de vida y facilitar sus labores cotidianas. En su deseo de mejorar sus actividades y conseguir mejores resultados, ha ido de la mano con la tecnología y ha logrado crear sistemas, que de una u otra manera han hecho más fácil y a la vez más productiva su vida. Necesidades tan básicas como llevar un control de préstamos de libros o hacer un inventario, han generado la necesidad de tener resultados de manera efectiva. A partir de esta idea, se concibe la automatización, como una serie de funciones que de manera automática o semiautomática logran realizar cualquier trabajo en menos tiempo y con mayor calidad. Dentro de todas las áreas donde se puede aplicar este tipo de principio, un ambiente escolar no es la excepción, por lo que en este trabajo se explicará paso a paso como algunas de las actividades cotidianas de una biblioteca escolar, pasan a ser funciones automatizadas que mejoran el funcionamiento de la biblioteca y optimiza las tareas de sus trabajadores. 1.1 Definición del problema Hoy en día, el hombre busca la manera de automatizar una gran cantidad de tareas, con el fin de optimizar tiempo y esfuerzo. Esta automatización viene dada por las distintas necesidades que se presentan en los ambientes donde el hombre realiza sus actividades del día a día, como por ejemplo su hogar, ambiente de trabajo, instituciones académicas, entre otros. Una biblioteca no es la excepción; al momento de realizar un préstamo, ya sea circulante (sala) o largo plazo, se manejan planillas u hojas de control, donde se recogen los datos del material a prestar y de la persona que realiza la solicitud. Si se realiza una numerosa cantidad de préstamos de materiales, la cantidad de documentos y papeles involucrados pueden llegar a extraviarse o a mezclarse con otros documentos de la biblioteca, lo cual es una gran desventaja a nivel operacional, debido a que la mayoría de las veces las actividades de la biblioteca las gestiona solo una persona. En el caso particular del Centro Educativo de Asociación de Profesores de la Universidad Central de Venezuela (CEAPUCV) se presenta problemas con los préstamos de materiales bibliográficos. Actualmente, cuando los estudiantes solicitan algún material bibliográfico, éste solo puede ser utilizado 15 dentro de la biblioteca, debido a que en ocasiones anteriores los estudiantes solicitaban un libro que estaba disponible para préstamos de largo plazo y pasado el lapso de préstamo no lo retornaban a la biblioteca, lo cual dificultó al personal permitir futuros préstamos de determinados materiales que son mayormente devueltos a fin de año o simplemente no eran devueltos. Tampoco existe un recordatorio al personal de cuál es la fecha en la que se deben regresar estos materiales y si el tiempo de préstamo ha expirado, no tienen manera de calcular el retardo. Lo anteriormente expuesto trae como consecuencia que los estudiantes no tengan el beneficio de préstamo de material durante el año escolar además de que la escuela presenta pérdidas por falta de material. Todas las actividades que se gestionan en la biblioteca pueden ser optimizadas mediante el uso de la tecnología RFID, debido a que no hay necesidad de que exista un contacto directo entre el lector y las etiquetas para obtener la información contenida en estas y eso facilitaría el proceso de inventario. Además el tiempo de lectura y escritura es muy rápido, lo que agilizaría el registro de préstamo de algún material, almacenando la información automáticamente en el sistema con el fin de que los administradores puedan visualizar el material que ha sido prestado, sus características y la persona a quien se le aprobó ese préstamo. En función de lo antes expuesto, el problema de la biblioteca del CEAPUCV, el cual se aborda en este trabajo, es la falta de automatización de procesos de gestión de los libros y préstamos del material bibliográfico. 1.2 Objetivo General El objetivo general de este trabajo es: “Desarrollar un sistema de gestión de bibliotecas para el CEAPUCV utilizando la tecnología de Identificación por Radiofrecuencia (IDRF ó RFID, por sus siglas en ingles Radio Frequency Identification)”. 1.3 Objetivos Específicos El trabajo propuesto tiene como objetivos específicos:  Determinar los requerimientos de la biblioteca del CEAPUCV en términos de la gestión del material bibliográfico.  Diseñar un sistema de gestión del material bibliográfico de la biblioteca del CEAPUCV usando la tecnología RFID.  Implementar un sistema de gestión de bibliotecas para el control de libros en la biblioteca del CEAPUCV. 16  Realizar pruebas de funcionamiento del sistema de gestión de bibliotecas. 1.4 Justificación Actualmente el funcionamiento de la biblioteca del CEAPUCV se ha mantenido con una gestión manual bajo la responsabilidad de una sola persona, provocando en ocasiones, que el manejo de préstamo de materiales bibliográficos sea nulo o casi nulo por la falta de material o el exceso de demanda. El préstamo de libros es un servicio que tiene toda biblioteca para ayudar a los estudiantes y a profesores de una institución. Actualmente sucede que en la biblioteca del CEAPUCV, los servicios que se ofrecen, como por ejemplos los préstamos, devoluciones e inventarios, no tienen ningún manejo automatizado. Con respecto a los préstamos y devoluciones se presentan situaciones tales como: un estudiante solicita un material bibliográfico, anota sus datos en una hoja blanca, la deja en la mesa del administrador y se lleva el libro. Debido a que toda la responsabilidad del manejo de la biblioteca recae en una sola persona, la cual se encarga de los préstamos bibliográficos, del manejo de las computadoras y de la supervisión de los estudiantes, en ocasiones puede desconocer el préstamo o devolución de algún material. Como no se maneja un contacto directo con los representantes sobre las solicitudes que generen sus representados, al momento de una pérdida o devolución tardía del material, se desconoce el motivo de sanciones o suspensiones de los servicios de la biblioteca. Finalmente cabe destacar que la perdida de materiales bibliográficos provoca una diferencia en el inventario entre la cantidad de libros que se tienen a principio de año escolar y la cantidad de materiales que se tienen al final de este. Además, un proceso de inventario manual es una tarea bastante tediosa para ser efectuada por una sola persona en un corto tiempo, ya que no solo requiere del conteo del material sino de la identificación del mismo. Se utilizará la tecnología RFID para el desarrollo de este sistema de gestión de bibliotecas debido a que puede optimizar el proceso de inventario o consulta con sus lecturas rápidas y su capacidad de realizar múltiples lecturas al mismo tiempo. Con respecto a los préstamos, las etiquetas RFID poseen la capacidad de ser reescritas lo cual facilitaría el reúso de estas etiquetas, las cuales poseen mayor capacidad de almacenamiento si se compara con etiquetas de otras tecnologías, como por ejemplo las de 17 códigos de barras, las cuales no pueden almacenar mucha información y además son susceptibles a ser falsificadas, situación que se evitaría utilizando etiquetas RFID. 1.5 Distribución del documento El presente documento está dividido en ocho capítulos: Capítulo I: Introducción. En este capítulo se habla de la motivación de la investigación y los objetivos generales y específicos que se siguieron para realizar el sistema. Capítulo II: Identificación por Radio Frecuencia. En este capítulo se habla de la tecnología RFID y porque ésta ofrece mayores beneficios al momento de realizar un sistema de automatización de biblioteca. Capítulo III: Sistema de Gestión de Bibliotecas. En este capítulo se expone en qué consiste un Sistema de gestión de biblioteca y las características que se deben tomar en cuenta al momento de su implantación. Además se habla un poco de su relación con RFID y otras tecnologías para su funcionamiento Capítulo IV: Metodología y Herramientas. En este capítulo se expone la metodología de desarrollo de software que fue seleccionada para este trabajo y se describen las herramientas que se utilizaron para llevar a cabo el sistema. Capítulo V: Diseño de la aplicación. En este capítulo se plantea toda la fase de diseño del sistema con los respectivos diagramas que se siguieron para la realización del mismo. Capítulo VI: Implementación. En este capítulo se explica las distintas arquitecturas propuestas al momento del desarrollo del sistema y se explica el funcionamiento de la aplicación y comunicación con los equipos utilizados. Capítulo VII: Pruebas y Resultados. En este capítulo se explica los tipos de pruebas que se llevaron a cabo y los resultados obtenidos. 18 Capítulo VIII: Conclusiones. En este capítulo se explicará cómo se realizó este sistema basándose en los objetivos específicos a cumplir, la contribución a la institución, limitaciones de desarrollo y recomendaciones para trabajos futuros basados en este tipo de sistemas o en la tecnología RFID. 19 2. Identificación por Radio Frecuencia Actualmente existe una tecnología de trazabilidad que perfecciona a los códigos de barras en cuanto al funcionamiento llamada Identificación por Radio Frecuencia (RFID), la cual da una solución de mejora a sistemas de automatización de manera inalámbrica y discreta, ya que su forma de identificar objetos es mediante ondas de radiofrecuencia. En este capítulo se hablará de forma detallada acerca de esta tecnología. 2.1 Definición RFID es una tecnología de almacenamiento y recuperación remota de datos, basado en el empleo de etiquetas o tags en las que se encuentra la información [1]. Consiste de un medio de comunicación, donde se obtiene la información necesaria de cualquier objeto, que está clasificada con un código único en el sistema, utilizando señales de radiofrecuencia, en diferentes bandas dependiendo del tipo de sistema, típicamente: 125 KHz, 13,56 MHz, 433-860-960 MHz y 2,45 GHz. Un sistema típico RFID consiste en los dispositivos de lectura, dispositivos de programación, etiquetas y un sistema de computador para procesar la información. Cuando las etiquetas entran en el área de cobertura de un lector RFID, éste envía una señal para que la etiqueta le transmita la información almacenada en su memoria, una persona con un dispositivo de lectura puede simplemente poner la unidad (de forma manual) dentro de la frecuencia de los artículos que desea identificar. Este proceso puede completarse en segundos. Una de las claves de esta tecnología es que la recuperación de la información contenida en la etiqueta se realiza vía radiofrecuencia y sin necesidad de que exista contacto físico o visual (línea de vista) entre el dispositivo lector y las etiquetas, aunque en muchos casos exige una cierta proximidad de esos elementos. Esta tecnología ha sido estandarizada por la ISO y la EPC, sin embargo el enfoque de la estandarización de ambas entidades están enfocadas a dos áreas totalmente diferentes. La EPC se enfocó en la parte industrial a gran escala y la ISO es un poco más general en cuanto al uso de RFID. 2.2 Componentes de un sistema RFID En este apartado se describirán todos los elementos que conforman un sistema RFID como lo son las etiquetas, los lectores y los programadores, que son la base fundamental de un sistema así. 20 2.2.1 Etiquetas o Transpondedores Una etiqueta es un dispositivo que contiene la información asociada al objeto al que acompaña, transmitiéndola cuando el lector la solicita. Está compuesta principalmente por un microchip y una antena, como se observa en la Figura 2.1. Adicionalmente esta puede incorporar una batería para alimentar sus transmisiones o incluso algunas etiquetas más sofisticadas, pueden incluir una circuitería extra con funciones adicionales de entrada/salida, tales como registro de tiempo u otros estados físicos que pueden ser monitorizados mediante sensores apropiados (de temperatura, humedad, entre otros.). Figura 2.1: Aspecto y detalle de las etiquetas RFID. Fuente: Elaboración propia. Tipos de memoria El microchip incluye una circuitería analógica que se encarga de realizar la transferencia de datos y de proporcionar la alimentación, una circuitería digital que incluye: la lógica de control, la lógica de seguridad y la lógica interna o microprocesador. Adicionalmente incluye una memoria para almacenar los datos. Esta memoria suele contener [1]:  Una ROM (Read Only Memory) o memoria de sólo lectura, para alojar los datos de seguridad y las instrucciones de funcionamiento del sistema.  Una RAM (Random Access Memory) o memoria de acceso aleatorio, utilizada para facilitar el almacenamiento temporal de datos durante el proceso de interrogación y respuesta.  Una memoria de programación no volátil, utilizada para asegurar que los datos están almacenados aunque el dispositivo esté inactivo. Típicamente suele tratarse de una EEPROM (Electrically Erasable Programmable ROM). Este tipo de memorias permite almacenar desde 16 bytes hasta 1 Mbyte, posee un consumo elevado, un tiempo de vida (número de ciclos de escritura) limitado (de 21 entre 10.000 y 100.000) y un tiempo de escritura de entre 5 y 10 ms. Como alternativa aparece la FRAM (Ferromagnetic RAM) cuyo consumo es 100 veces menos que una EEPROM y su tiempo de escritura también es menor, de aproximadamente 0,1 µs, lo que supone que puede trabajar prácticamente en tiempo real. En sistemas de microondas se suelen usar una SRAM (Static RAM). Esta memoria posee una capacidad habitualmente entre 256 bytes y 64 bytes (aunque se puede llegar al Mbyte) y su tiempo de escritura es bajo, pero en contrapartida necesita una batería adicional para mantener la información.  Registro de datos (buffers) que soporta la forma temporal, tanto los datos entrantes después de la demodulación como los salientes antes de la modulación. Además actúa de interfaz con la antena. Dependiendo del tipo de memoria que incorpore la etiqueta, los datos transportados pueden ser:  De solo lectura: son dispositivos de baja capacidad, programados por el fabricante desde el primer momento. Normalmente portan un número de identificación o una clave a una base de datos donde existe información dinámica relativa al objeto al que van adheridos.  De una escritura y múltiples lecturas: son dispositivos programables por el usuario, pero una única vez.  De lectura y escritura: También son programables por el usuario pero adicionalmente permiten modificar los datos almacenados en la etiqueta. Los programadores permiten la escritura directamente sobre la etiqueta adherida al objeto en cuestión, siempre y cuando se encuentre dentro del área de cobertura del programador. Mecanismos de transferencia de potencia Existen dos mecanismos por los cuales es posible transferir la potencia de la antena del lector a la antena de la etiqueta, para que ésta transmita su información: acoplamiento inductivo y propagación por ondas electromagnéticas. Estos dos tipos de acoplamiento dependen de si se trabaja en campo cercano o en campo lejano [1].  Acoplamiento inductivo: La antena del lector genera un campo magnético que induce una corriente en la antena de la etiqueta, formada normalmente por una bobina y un condensador. La corriente inducida en el elemento acoplado (bobina) carga el condensador y éste proporciona el voltaje necesario para la transmisión, como se muestra en la Figura 2.2. 22 Figura 2.2: Acoplamiento inductivo (campo cercano). Fuente: Elaboración propia Normalmente este modo de funcionamiento se da en sistemas que trabajan a bajas frecuencias (BF y AF). Como el área de cobertura es pequeña, suele utilizarse con etiquetas pasivas. Por otro lado, cabe resaltar que la sensibilidad a las interferencias electromagnéticas es mayor en este tipo de sistemas, mientras que su coeficiente de penetración en materiales no conductivos es bueno. Algunas de las aplicaciones que más utilizan los sistemas RFID inductivos son: las etiquetas inductivas de 1 bit para vigilancia electrónica de artículos, los controles de acceso y seguridad, sistemas antirrobo, identificación de animales e identificación de vehículos.  Sistemas basados en campos electromagnéticos, el interrogador o lector transmite la energía a través de ondas electromagnéticas. Las etiquetas situadas dentro de la zona de cobertura se ven inmersas en el campo generado y recogen parte de la energía según pasa, como se muestra en la Figura 2.3 [1]. Figura 2.3: Propagación por ondas electromagnéticas (campo lejano). Fuente: Elaboración propia. Este tipo de propagación se utiliza a muy altas frecuencias: UHF y microondas. Ofrece una cobertura alta, entre 2 y 15 metros, pero normalmente necesitan una batería adicional, ya que la potencia recibida del lector no es suficiente para alimentar la transmisión de la etiqueta. Por este motivo, con este sistema suelen utilizarse etiquetas activas. 23 Tipos de antenas Las antenas tienen un papel importante en los sistemas de RFID, ya que están contenidas tanto en la etiqueta como en el lector. Las formas pueden ser muy variadas, pero si dependen mucho del valor de impedancia e inductancia [1]. Al igual que las etiquetas, se cataloga a las antenas por su capacidad de trabajo como: Baja Frecuencias (LF), Alta Frecuencia (HF), Ultra Alta Frecuencia (UHF). Existen sistemas en los cuales no se tiene fabricación de antenas por parte del fabricante, para lo cual se deben hacer antenas especiales para cada caso de frecuencia o simplemente si se requiere trabajar con un prototipo diferente se debe fabricar por separado. Tipos de Etiquetas Los parámetros que caracterizan las etiquetas RFID y comprenden las bases para diseñar sus especificaciones son: en el modo de alimentación, la capacidad y tipo de datos almacenados, la velocidad de lectura de datos, las opciones de programación, la forma física y los costos [1]. Aunque los niveles requeridos para que la etiqueta envíe la información son muy pequeños, del orden de micro a mW, es necesario que las etiquetas dispongan de algún tipo de alimentación. Dependiendo del modo en que éstas obtengan su potencia, las etiquetas se clasifican en activas o pasivas:  Etiquetas activas: se definen como un circuito integrado encapsulado. En algunos casos la etiqueta se le llama transponder. Estas etiquetas, además de recoger energía del lector, se alimentan de una batería. Normalmente incorporan una pila que posee una alta relación potencia-peso. El empleo de baterías implica un tiempo de vida finito para el dispositivo. Sin embargo, la colocación de una pila acoplada de forma apropiada a la circuitería de baja potencia, puede asegurar un tiempo de vida de algo más de 10 años, dependiendo también de las condiciones de trabajo en las que se encuentre y su utilización. En términos generales, permiten un radio de cobertura mayor, mejor inmunidad al ruido y tasas de transmisión más altas cuando se trabaja alta frecuencia. Estas ventajas se traducen en un costo mayor. Existen dos tipos de etiquetas activas, aquellas que normalmente se encuentran desactivadas (modo reposo) y se activan (despiertan) cuando un lector las interroga, ahorrando batería, y aquellas que 24 periódicamente envían señales, aunque un lector no las interrogue. Operan a frecuencias más bajas y a menores tasas de transferencias, para ahorrar batería.  Etiquetas pasivas: funcionan sin una batería interna, obteniendo la potencia que necesitan para funcionar del campo generado por el interrogador. Estas operan en le frecuencia de los 13,56 MHz. La pequeña corriente inducida en la antena, brindada por la señal entrante del lector, produce la energía suficiente para que el circuito integrado pueda encenderse y comenzar a transmitir. Son funcionales para aplicaciones de mucho uso, ya que la energía proveniente del lector (la misma frecuencia de datos) es la misma que energiza la etiqueta por un instante, lo suficiente para poder responder a la petición del mismo. No pierde los datos aunque se quede sin energía, pero tiene un corto alcance de lectura. La ausencia de batería provoca que las etiquetas pasivas sean mucho más ligeras, pequeñas, flexibles y baratas que las activas, hecho que redunda en que puedan ser diseñados en una amplia gama de formas. Además, ofrecen un tiempo de vida prácticamente ilimitado. Poseen unos radios de cobertura menores y requieren más cantidad de energía procedente del interrogador para poder transmitir los datos. También poseen restricciones a la hora de almacenar los datos y no funcionan bien en ambientes con interferencias electromagnéticas. Asimismo, su sensibilidad y orientación están limitadas por la potencia disponible. Sin embargo, a pesar de estas limitaciones las etiquetas pasivas ofrecen mejores ventajas en términos de costo y longevidad. Existe un tipo especial de etiqueta pasiva que sí incorpora una batería. Esta batería mantiene una corriente continua en la memoria no volátil del circuito integrado, por lo cual la antena no debe preocuparse por recolectar dicha corriente. La antena está optimizada a su función de transmisión de radio frecuencia lo cual hace que sea más rápida y robusta. Capacidad de datos En términos de capacidades de datos son habituales las etiquetas que permiten almacenar desde un único bit hasta centenas de kilobits, aunque ya hay prototipos en el orden del Megabit. Considerando que 8 bits representan un carácter, una capacidad de 1 kilobit permite almacenar 128 caracteres [1]. 25 Los dispositivos de un único bit poseen dos estados: “la etiqueta está en zona de lector” o “la etiqueta no está en zona del lector”. Algunos permiten la opción de desactivar y activar el dispositivo. Estos transponedores no necesitan un microchip, por lo que su costo de fabricación resulta muy barato. Los dispositivos que permiten almacenar hasta 128 bits suelen portar un número de serie o de identificación junto con, normalmente, bits de paridad. Tales dispositivos pueden ser programados por el usuario. Las etiquetas con capacidades de hasta 512 bits son siempre programables por el usuario e ideales para alojar identificadores y otros datos específicos, como números de serie, contenido de paquetes, instrucciones de los procesos a realizar o posiblemente resultados de anteriores transferencias interrogador-etiqueta. Las etiquetas que permiten albergar 64 kilobits o más son portadoras de archivos de datos. Incrementando la capacidad, el servicio puede también permitir la organización de los datos en campos o páginas que pueden ser selectivamente interrogadas durante el proceso de lectura. Forma física Las etiquetas RFID pueden tener muy diversas formas, tamaños y carcasas protectoras, dependiendo de la utilidad para la que son creados. El proceso básico de ensamblado consiste en la colocación, sobre un material que actúa como base (papel, PVC 1 ), de una antena hecha con materiales conductivos como la plata, el aluminio o el cobre. Posteriormente se conecta el microchip a la antena y opcionalmente se protege el conjunto con un material que le permita resistir condiciones físicas adversas. Una vez construida la etiqueta, su encapsulación puede variar de modo que faciliten su inserción o acoplamiento a cualquier material (madera, plástico, piel). Con respecto al tamaño, es posible desarrollar etiquetas del orden de milímetros hasta unos pocos centímetros. Las etiquetas inteligentes RFID tienen las medidas estandarizadas de 85.72 mm x 54.03 mm x 0.76 mm ± tolerancias. Algunas de las formas que pueden albergar una etiqueta pueden agruparse en: 1 PVC: resina producto de un proceso de polimerización, a partir de ella se pueden obtener productos rígidos y flexibles. (http://www.aniq.org.mx/provinilo/pvc.asp) http://www.aniq.org.mx/provinilo/pvc.asp 26  Etiquetas encapsuladas: pueden estar encapsuladas en ampollas, monedas, pilas, llaves, relojes, varillas, cápsulas, discos, botones, entre otros. Las Figuras 2.4, 2.5, 2.6 y 2.7 muestran algunos tipos de etiquetas dentro de la amplia variedad de formas que existen [1]. Figura 2.4: Etiquetas adhesivas de papel. Fuente: Recuperado de internet, 21 de Marzo del 2013 Figura 2.5: Etiquetas adhesivas sin sustrato. Fuente: Recuperado de internet, 21 de Marzo del 2013 Figura 2.6: Etiqueta adhesiva de forma circular. Fuente: Recuperado de internet, 21 de Marzo del 2013 27 Figura 2.7: Tarjetas identificativas de PVC. Fuente: Recuperado de internet, 21 de Marzo del 2013.  Etiquetas inteligentes: pueden ser tarjetas o tickets, que tienen el mismo formato que las habituales tarjetas de crédito, a las que se le incorpora una etiqueta RFID impresa. Esto permite la utilización de la tarjeta tradicional sin necesidad de contacto físico con un lector. Las Figuras 2.8 y 2.9 ilustran dos tipos de aplicaciones para tarjetas inteligentes. Figura 2.8: Acceso al lugar de trabajo. Fuente: Recuperado de internet, 21 de Marzo del 2013. 28 Figura 2.9: Acceso al transporte público. Fuente: Recuperado de internet, 21 de Marzo del 2013. 2.2.2 Lectores Un lector o interrogador es el dispositivo que proporciona energía a las etiquetas, lee los datos que le llegan de vuelta y los envía al sistema de información. Asimismo, gestiona la secuencia de comunicaciones con el lector. Con el fin de cumplir tales funciones, está equipado con un módulo de radiofrecuencia (transmisor y receptor), una unidad de control y una antena. Además, el lector incorpora una interfaz a un PC, host o controlador, a través de un enlace local o remoto: RS232, RS485, Ethernet, WLAN (RF, Wi-Fi, Bluetooth, entre otros.), que permite enviar los datos de la etiqueta al sistema de información. El lector puede actuar de tres modos: interrogando su zona de cobertura continuamente, si se espera la presencia de múltiples etiquetas pasando de forma continua; interrogando periódicamente, para detectar nuevas presencias de etiquetas; e interrogando de forma puntual, por ejemplo cuando un sensor detecte la presencia de una nueva etiqueta. Los componentes del lector mostrados en la Figura 2.10 son, el módulo de radiofrecuencia (formado por receptor y transmisor), la unidad de control y la antena. A continuación se procede a describir un poco más cada uno de estos elementos. 29 Figura 2.10: Esquema de un lector RFID. Fuente: Elaboración propia. Módulo de radiofrecuencia El módulo de radiofrecuencia consta básicamente de un transmisor que genera la señal de radiofrecuencia y un receptor que las recibe. Estas señales de radiofrecuencia son las que contienen los datos enviados por las etiquetas, por lo tanto sus funciones son:  Generar la señal de radiofrecuencia para activar la etiqueta y proporcionarle energía.  Modular la transmisión de la señal para enviar los datos a la etiqueta.  Recibir y desmodular las señales enviadas por la etiqueta. Unidad de control La unidad de control, constituida básicamente por un microprocesador. En ocasiones, para aliviar al microprocesador de determinados cálculos, la unidad de control incorpora un circuito integrado ASI (Application Specific Integrated Circuit), adaptado a los requerimientos deseados para la aplicación. La unidad de control se encarga de realizar las siguientes funciones:  Codificar y decodificar los datos procedentes de las etiquetas.  Verificar la integridad de los datos y almacenarlos.  Gestionar el acceso al medio: activar las etiquetas, inicializar la sesión, autenticar y autorizar la transmisión, detectar y corregir errores, gestionar el proceso de multilectura (anticolisión), cifrar y descifrar los datos, entre otros.  Comunicarse con el sistema de información, ejecutando las órdenes recibidas y transmitiéndole la información obtenida de las etiquetas. 30 Una de las funciones más críticas que debe realizar la unidad de control es gestionar el acceso al medio. Cuando se transmite información mediante una tecnología que no requiere contacto físico, existe la posibilidad de que aparezcan interferencias que provoquen cambios indeseados a los datos transmitidos y, en consecuencia, errores durante la transmisión. Para evitar este problema se utilizan procedimientos de comprobación (checksum), los más comunes son la comprobación de bits de paridad, comprobación de redundancia longitudinal (LRC, Longitudinal Redundancy Check) y comprobación de redundancia cíclica (CRC, Cyclic Redundancy Check). Tipos de antenas La antena del lector es el elemento que habilita la comunicación entre el lector y la etiqueta. Las antenas están disponibles en una gran variedad de formas y tamaños. Su diseño puede llegar a ser crítico, dependiendo del tipo de aplicación para la que se desarrolle. Este diseño puede variar desde pequeños dispositivos de mano hasta grandes antenas independientes [1]. La mayor parte de las antenas se engloban en antenas de puerta (uso ortogonal), antenas polarizadas circularmente, antenas polarizadas linealmente, antenas omnidireccionales, antenas de varilla, dipolos o múltiplos y antenas adaptativas. El elemento más característico de la antena del lector es la frecuencia de operación a la que trabaja el sistema. Sin embargo, existen otra serie de parámetros físicos que es necesario considerar: impedancia, máxima potencia permitida, ganancia, patrón de polarización (polarización X-Y o circular). Estos son los elementos clave que crean el campo de radiofrecuencia, pero a su vez están influenciados por otros parámetros, como la eficiencia de la antena o el tipo de acoplamiento con la antena de la etiqueta. En general, las posibilidades que brinda el tipo de antena, su conexión al lector y su ubicación son innumerables. Cabe destacar que algunos lectores (principalmente aquellos que trabajan en campo cercano, como los lectores de mano), incorporan la antena integrada en el lector, lo que reduce enormemente esta flexibilidad. El principal aspecto a considerar a la hora de elegir una antena es el área de cobertura requerida para la aplicación, de modo que sea lo suficientemente pequeño para evitar lecturas no válidas que pueden afectar y confundir al sistema. Otro aspecto que puede afectar a la cobertura es la orientación de la antena 31 del lector con respecto a la etiqueta, que influye sobre la cantidad de potencia transferida a la etiqueta, afectando en ocasiones de forma significativa a la lectura. A pesar de que las etiquetas pueden leerse en todas las orientaciones, en general el campo generado por la antena del lector tiene una dirección determinada. Este hecho influye especialmente en HF y UHF, pudiendo reducirse la cobertura al 50% o incluso imposibilitando la lectura de la etiqueta. Por ello, resulta conveniente buscar el acoplamiento óptimo entre ambas antenas, y si la orientación de la etiqueta no puede controlarse se debe buscar una compensación mediante un adecuado diseño de la antena. La mayoría de las antenas son sintonizables de modo que pueden ajustarse a la frecuencia de operación seleccionada para el sistema. Esto las hace susceptibles a una multitud de factores externos, como son variaciones RF, pérdidas por proximidad de metales, variaciones del entorno, efectos armónicos, interferencias con otras fuentes de RF, reflexiones de la señal, diafonía (cross-talk), entre otras. El problema de desintonización de la antena, como consecuencia del efecto de estos factores, puede corregirse mediante la introducción de circuitos dinámicos autosintonizadores, que realimentan continuamente la antena para que ésta esté siempre bien sintonizada. Una vez que una etiqueta es detectada y seleccionada, el lector puede realizar operaciones sobre ella, es decir, leer su información o escribir en ella. Después de finalizar la operación, el lector descarta la etiqueta para proceder a interrogar a la siguiente. Existen algoritmos como el “Protocolo Orden- Respuesta”, en el que el lector ordena a una etiqueta que case su transmisión, cuando reconoce que ya ha recibido la información. Otro método alternativo, más seguro pero más lento y costoso, se denomina “Sondeo Selectivo”, donde el lector busca específicamente las etiquetas que tienen una determinada identificación y las interroga por turnos. Otra aproximación, aunque más cara, incluye el empleo de varios lectores multiplexados en un único interrogador. Tipos de lectores Los lectores pueden variar su complejidad considerablemente dependiendo del tipo de etiqueta que tenga que alimentar y de las funciones que deban desarrollar. Una posible clasificación los divide en fijos o móviles dependiendo de la aplicación que se considere [1]. 32 Los dispositivos fijos se posicionan en lugares estratégicos como puertas de acceso, lugares de paso o puntos críticos, de modo que puedan monitorizar las etiquetas de la aplicación en cuestión. Los lectores móviles suelen ser dispositivos de mano. Incorpora una pantalla LCD, un teclado para introducir datos y una antena integrada dentro de una unidad portátil. Por esta razón, su radio de cobertura suele ser menor. En conclusión, los principales parámetros que caracterizan un lector RFID son:  Frecuencia de operación: el lector puede funcionar a baja frecuencia, alta frecuencia, ultra alta frecuencia y frecuencia de microondas. Ya existen en el mercado lectores multifrecuencia.  Protocolo de funcionamiento: muchas compañías ofrecen multiprotocolo (ISO 2 , propietarios, entre otros) pero no admiten todos los protocolos existentes.  Tipo de regulación que siguen: por ejemplo, existen distintas regulaciones de frecuencia y de potencia en Estados Unidos y en Europa: i) La banda de UHF funciona a 902-930 MHz en Estados Unidos y a 869 MHz en Europa. ii) La máxima potencia permitida es de 2 Watios en Estados Unidos y 0,5 Watios en Europa.  Interfaz con el sistema host: TCP/IP, WLAN, Ethernet (10BaseT) y serie RS 232, RS 485.  Capacidad para multiplexar muchos lectores: a través de concentradores o a través de middleware.  Capacidad para actualizar el software del lector on-line: vía Internet o vía interfaz con el host.  Capacidad para gestionar múltiples antenas, típicamente 4 antenas/lector.  Capacidad para interactuar con otros productos de middleware.  Entrada/salida digital para conectar otros dispositivos tales como sensores externos o circuitos de control adicionales. 2.2.3 Programadores Los programadores son los dispositivos que permiten escribir información sobre la tarjeta RFID. La programación se realiza una vez sobre las etiquetas de sólo lectura o varias veces si las etiquetas son de lectura/escritura. Es un proceso que generalmente se suele llevar a cabo “fuera de línea”, es decir, antes de que el producto entre en las distintas fases de fabricación. 2 ISO: Siglas en ingles para International Organization for Standardization, en español Organización Internacional de Normalización. 33 El radio de cobertura al que un programador puede operar, es generalmente menor que el rango propio de un lector, ya que la potencia necesaria para escribir es mayor. En ocasiones puede ser necesario distancias próximas al contacto directo. Por otro lado, el diseño de los programadores permite una única escritura cada vez. Esto puede resultar engorroso cuando se requiere escribir la misma información en múltiples etiquetas. Sin embargo, nuevos programadores desarrollados satisfacen la necesidad de realizar la programación de múltiples etiquetas. Existen sistemas en los que la reprogramación puede desarrollarse “en línea”, es decir, permaneciendo la etiqueta sobre el articulo cuya información o identificación porta. Esto resulta especialmente interesante si se trata de un archivo de datos interactivo, que va cambiando dentro de un proceso de producción. De este modo, los datos pueden irse modificando según el artículo vaya pasando por las distintas etapas de producción. El hecho de quitar la etiqueta del artículo para poder escribir la nueva información reduciría en gran medida las ventajas de flexibilidad inherentes a la tecnología RFID. La combinación de las funciones de un lector/interrogador con las de un programador permite recuperar y modificar los datos que porta la etiqueta en cualquier momento, sin comprometer ningún otro proceso dentro del sistema. Un tipo especial de programador es la impresora RFID. Existen impresoras con capacidad de lectura/escritura, que permiten programar las etiquetas a la vez que se imprime con tinta de información visible. Antes de realizar la escritura de la etiqueta, deben introducirse los datos deseados en la impresora. Una vez escritos, un lector a la salida comprueba la fiabilidad de los datos. Evidentemente este tipo de programación debe realizarse sobre etiquetas especiales hechas de materiales flexibles y que permiten la impresión en su exterior. 2.2.4 Pila de protocolo Un sistema basado en RFID está formado por una pila de protocolos descrita a continuación [14]:  Capa física: llamada interfaz de lectura, en la que se describe las frecuencias de radio específicas y si las etiquetas y los lectores se comunican en modo half dúplex o full dúplex. 34  Capa de enlace de datos: llamada procesamiento de datos y almacenamiento, está basado en el esquema Aloha ranurado [14].  Capa middleware: está definida para la recolección de los datos y filtrado de eventos entre los dispositivos.  Capa de aplicaciones: llamada interfaz de aplicaciones agrupa todas las aplicaciones desarrolladas para trabajar con este tipo de tecnología. En la Figura 2.11 se muestra la pila de protocolos que conforman el estándar RFID. Figura 2.11: Pila de protocolos de RFID. Fuente: Elaboración propia. En la actualidad EPC 3 e ISO han logrado estandarizar las dos primeras capas de la pila de protocolo de comunicación entre lectores y etiquetas, estas incluyen la comunicación inalámbrica local que se produce entre un lector y las etiquetas dentro de su campo de lectura. La comunicación entre los lectores y la base de datos que almacena los datos son establecidos por la aplicación individual de cada empresa o biblioteca que desee utilizar esta tecnología [14]. En el año 2011 la ISO publicó un estándar para bibliotecas que utilizan RFID, el cual es el ISO 28560-1, ISO 28560-2 e ISO 28560-3, sin embargo en este documento se hablará sobre el ISO 15693- 1[3], ISO 15693-2 [4] e ISO 15693-3 [5]. 3 EPC: Siglas en ingles para Electronic Product Code, en español Código Electrónico de Producto. 35 2.2.5 Interfaz de lectura El ISO 15693 es el estándar que define la capa más básica de RFID [3], se refiere a las características de las etiquetas de corto alcance, las cuales son utilizadas para el control de bibliotecas. Según el estándar ISO 7810 las etiquetas de tipo ID-1 son circuitos integrados con medios de acoplamiento, en donde la comunicación se realiza por el acoplamiento inductivo de un dispositivo de acoplamiento cercano. Tienen una dimensión de 85,60 x 53,98 mm y esquinas redondeadas con un radio 2.88-3.48 mm. Durante el documento se utilizarán sus siglas en inglés VICC (Vicinity Integrated Circuits Cards). Las etiquetas poseen un cierto nivel de protección hacia la luz ultravioleta y en el caso de esto no sea así debe ser descrito por los fabricantes el nivel de protección de luz ultravioleta que poseen sus etiquetas. En cuanto a la radiación X, las etiquetas continuarán funcionando con una radiación media, con energía de 100 keV, de una dosis acumulada de 0,1 G por año. Cuando las etiquetas son sometidas a una exposición de campo magnético medio, estas deben seguir funcionando sin ningún problema. A continuación se muestra en la Tabla 2.1 el nivel de exposición magnética que soportan las etiquetas. Tabla 2.1: Frecuencia y fuerza del campo magnético. Fuente: http://www.waazaa.org/download/fcd-15693-1.pdf Sin embargo, existen etiquetas que continúan trabajando correctamente después de una exposición magnética de 12 A/m a 13,56 MHz. Además de la exposición a campos magnéticos, las etiquetas deben seguir con su correcto funcionamiento después de una exposición a campos eléctricos. En la Tabla 2.2 se muestran los niveles medios de exposición tolerados por las etiquetas. Rango de Frecuencia (MHz) Resistencia promedio del campo magnético (A/m) Tiempo promedio (minutos) 0,3 – 3,0 1,63 6 3,0 – 30 4,98/ frecuencia 6 30 - 300 0,163 6 36 Tabla 2.2: Frecuencia y fuerza del campo eléctrico. Fuente: http://www.waazaa.org/download/fcd-15693-1.pdf Incluso después de recibir un voltaje de 6 KV, una exposición estática de 640 kA/m y a una temperatura entre 0° y 50 °C, las tarjetas y sus circuitos deben funcionar correctamente. Ahora bien, un sistema RFID no solo está compuesto por las etiquetas, también está compuesto por dispositivos de acoplamiento como los son los lectores. Cuando una etiqueta se comunica con algún dispositivo de acoplamiento, como lo es un lector, debe seguir los siguientes pasos:  Activación del VICC a través del campo de operación de radiofrecuencia del dispositivo de acoplamiento.  El VICC espera en silencio un comando del dispositivo de acoplamiento.  Transmisión del comando del dispositivo de acoplamiento.  Transmisión de la respuesta del VICC. Estas operaciones utilizan una potencia de transferencia de radiofrecuencia de 13,56 MHz ±7 kHz [3], al igual que la señal de la interfaz de comunicación. La transferencia de potencia a los circuitos integrados de las etiquetas se lleva a cabo a través de antenas de acoplamiento de radiofrecuencias ubicadas tanto en las etiquetas como en los dispositivos de acoplamiento. Existen distintas frecuencias en las que los sistemas de RFID pueden operar, cada una de ellas representa distintos pro y contras en base a su aplicación. Para tener un mayor conocimiento de las diferentes frecuencias que existen para un sistema RFID, cada una se describe a continuación. Rango de Frecuencia (MHz) Resistencia promedio del campo eléctrico (V/m) Tiempo promedio (minutos) 0,3 – 3,0 0,614 6 3,0 – 30 1842/ frecuencia 6 30 - 300 61, 4 6 37  Baja Frecuencia (LF - Low Frequency)- 125 a 134.2 KHz y de 140 a 148.5 KHz Las etiquetas y lectores de baja frecuencia, se encuentra típicamente en tarjetas utilizadas para el control de acceso (Contact less Smartcards). La distancia en este caso es muy acotada y está limitada a 5 centímetros de aproximación a la fuente de lectura [1]. Los sistemas RFID de baja frecuencia suelen emplear etiquetas pasivas y utilizan para su funcionamiento el acoplamiento inductivo. En el caso usual de etiquetas pasivas, la capacidad de datos es baja, de alrededor de 64 bits. Si se trata de etiquetas activas, éstas permiten una capacidad de almacenamiento de hasta 2 Kbits y pueden superar los 2 metros, aunque este rango también depende de la potencia, construcción, configuración de la antena y tamaño. Las tasas de transferencia de datos son bajas, típicamente entre 200 bps y 1 kbps, lo que implica un tiempo de lectura muy lento. Al tratarse de un sistema inductivo, el campo magnético decrece muy rápidamente con la distancia, al igual que con las dimensiones de la antena. Este hecho puede verse como una ventaja en aplicaciones donde requiera que la zona de cobertura esté estrictamente limitada a un área pequeña (en controles de producción). Las antenas que utilizan son pequeñas y complejas, pero la tecnología está muy desarrollada. El costo depende en gran medida de la forma y de las necesidades del sistema. En general, se puede decir que las etiquetas tanto activas como pasivas que se utilizan en los sistemas RFID de baja frecuencias son caras, en relación a aquellas que se utilizan en frecuencias superiores. Esto se debe a la naturaleza de los componentes utilizados, incluyendo la antena en espiral necesaria, y a que los costos de fabricación son elevados en comparación con las etiquetas que trabajan a frecuencias superiores. Sin embargo, la construcción de chip y el encapsulado resulta más barato. Además, los lectores y programadores son simples y su costo de fabricación es menor que los de frecuencias más altas. Este tipo de frecuencia es apto para aplicaciones que requieren leer poca capacidad de datos y para pequeñas distancias. Por ejemplo: control de accesos, identificación de animales, gestión de bienes, identificación de vehículo y contenedores, y como soporte a la producción. Las etiquetas de baja frecuencia también aparecen en la identificación animal con el fin de gestionar el ganado, identificar y controlar las especies protegidas o identificar animales domésticos. 38  Alta Frecuencia (HF- High Frequency) - 13.56 MHz Esta frecuencia opera en distancias de hasta un metro y se utiliza típicamente en la identificación de productos o personas (Pacientes, Convictos y otros). La mayoría de los sistemas que trabajan a 13,56 MHz utilizan etiquetas RFID pasivas y su principio de funcionamiento básico, al igual que en baja frecuencia, se basa en el acoplamiento inductivo [1]. Las etiquetas pasivas suelen poseer capacidades típicas que van desde 512 bits (frecuentemente portan un número unívoco de identificación de 64 bits) hasta 8 kbits, divididos en sectores o bloques que permiten direccionar los datos. Típicamente la velocidad de datos suele ser de unos 25 Kbps (menor si se incluyen algoritmos de comprobación de errores de bit). También están disponibles dispositivos con tasas mayores de 100 Kbps. En cuanto a su cobertura, típicamente poseen un radio de cobertura de alrededor de 1 metro. Los sistemas RFID a esta frecuencia son capaces de leer aproximadamente 40 etiquetas por segundo. Posee una buena penetración en materiales y líquidos no conductores. Sin embargo, no funciona bien cuando existen materiales metálicos en la zona de lectura, ya que éstos producen reflexiones en la señal. Su inmunidad al ruido por interferencias electromagnéticas industriales de baja frecuencia es mejor para los sistemas de Baja Frecuencia. La orientación de la etiqueta puede resultar otro problema según aumenta la distancia, debido a las características vectoriales de los campos electromagnéticos. Este efecto puede contrarrestarse mediante la utilización de antenas de transmisión complejas. El diseño de la antena de la etiqueta es sencillo, por lo que su costo es menor que a BF. El costo depende principalmente de la forma de la etiqueta y de su aplicación. Por ejemplo, los sistemas de RFID que utilizan tarjetas inteligentes son los más baratos dentro de la categoría de alta frecuencia. Al igual que en BF, los sistemas de AF son aptos para aplicaciones que requieran leer poca cantidad de datos y a pequeñas distancias. Es el caso de la gestión de maletas en aeropuertos, bibliotecas y servicios de alquiler, seguimiento de paquetes y aplicaciones logísticas en la cadena de suministros. 39  Ultra- Alta Frecuencias (UHF- Ultra-High Frequency) - 915 MHz, 433.92 MHz o 315 MHz. Dependiendo la tecnología pueden llegar a operar en una distancia de hasta 10 metros o más, típicamente esta tecnología es la que se utiliza para las cadenas de distribución y abastecimiento. Los sistemas RFID que trabajan a Ultra Alta Frecuencia basan su funcionamiento en la propagación por ondas electromagnéticas para comunicar los datos y para alimentar la etiqueta en caso de que ésta sea pasiva [1]. Están disponibles etiquetas activas y pasivas con capacidades típicas desde los 32 bits (frecuentemente portan un número unívoco de identificación) hasta los 4 Kbits, típicamente divididos en páginas de 128 bits para permitir direccionar los datos. La velocidad de transferencia de datos está típicamente alrededor de 28 kbps (menor si se incluyen algoritmos de comprobación de errores de bit) pero también están disponibles velocidades mayores. Permite la lectura de aproximadamente 100 etiquetas por segundo. Las etiquetas de UHF pasivas pueden alcanzar una cobertura de 3 ó 4 metros. Trabajando con etiquetas activas y a la frecuencia más bajas, 433 MHz, la cobertura puede alcanzar los 10 metros. Sin embargo, la cobertura está significativamente ligada a las regulaciones de los distintos países correspondiente a la cantidad de potencia permitida, que es menor en Europa que en Estados Unidos. Posee una buena penetración en materiales conductores y no conductores, pero presenta dificultades ante la presencia de líquidos (agua). Su inmunidad al ruido por interferencias electromagnéticas industriales de baja frecuencia es mejor para los sistemas de baja frecuencia, pero debe considerarse la influencia de otros sistemas de UHF operando en las proximidades. La orientación de la etiqueta también puede resultar un problema a esta frecuencia, debido a las características vectoriales de los campos electromagnéticos. Este efecto puede contrarrestarse mediante la utilización de antenas de transmisión más complejas. Los costos dependen principalmente de la forma. Las tarjetas inteligentes presentan un costo razonable, representando la opción más barata dentro de la categoría de sistemas RFID UHF. En grandes cantidades, estas etiquetas a UHF pueden ser más baratas que los de frecuencias más bajas. 40 Este tipo de frecuencia es apta para aplicaciones que requieren distancias de transmisión superiores a las bandas anteriores, como en la trazabilidad y seguimiento de bienes y artículos, y logística de la cadena de suministro.  Microondas (Microwaves) Utilizadas para grandes distancias y mayor velocidad, operan en el rango que va de los 30 metros a los 100 metros, un lugar donde se la utiliza suele ser por ejemplo los sistemas de pase automático de las autopistas. Están disponibles sistemas de etiquetas activas y pasivas, con capacidades que van típicamente desde 128 bits hasta dispositivos de 512 Kbits, que pueden dividirse en sectores o bloques para permitir direccionar los datos. Los costos dependen principalmente de la forma y el modo de alimentación (activo/pasivo) [1]. La velocidad y el tiempo de lectura de datos dependen del diseño de la etiqueta, pero suele ser elevada. La velocidad típica está por debajo de los 100 kbps, aunque algunos dispositivos pueden alcanzar 1 Mbps. Posee un buen rango de trabajo, abarcando regiones de entre 1 y 2 metros para dispositivos pasivos y hasta 15 metros o más, para dispositivos activos. Además, posee una buena penetración en materiales no conductores, pero no así en líquidos que contienen agua, donde el coeficiente de absorción es importante. Es reflejado por metales y otras superficies conductoras, y además es susceptible al ruido. Esta frecuencia es apta para aplicaciones que requieren alta cobertura y velocidades de transmisión elevadas. Por ejemplo: automatización en la fabricación, control de accesos, peaje de carreteras, logística de la cadena de suministro y aplicaciones logísticas militares. Para el caso de sistemas que trabajen en la frecuencia de 13,56 MHz, como lo es en el caso de control para bibliotecas, se tiene que la comunicación entre el dispositivo de acoplamiento y el VICC se lleva a cabo utilizando el principio de modulación ASK (Modulación por Desplazamiento de Amplitud), donde se utilizan 2 índices de modulación, 10% y 100%, según la elección del dispositivo de acoplamiento se genera una pausa. El VICC deben decodificar ambas y el dispositivo de acoplamiento determina que índice se utiliza [3]. 41 2.2.6 Almacenamiento y procesamiento de datos Todos los VICC están identificados por 64 bits, lo que recibe el nombre de Identificador Único (UID, en inglés). Se utiliza para el direccionamiento de cada VICC de manera única e individual, durante el bucle de anticolisión y en el intercambio uno a uno entre el VICC y los dispositivos de acoplamiento. Cada fabricante coloca su Identificador Único de acuerdo con la Figura 2.12 [4]. Figura 2.12: Formato UID. Fuente: http://www.waazaa.org/download/fcd-15693-2.pdf Este Identificador Único está compuesto por:  E0: Los 8 bits más significativos (MSB).  Código de identificador del fabricante (DSFID): contiene el código de fábrica del circuito integrado que son 8 bits de acuerdo al ISO/IEC 7816-6/AM1.  Número de serial del circuito integrado (UID): que consta de 48 bits, asignados por fabricante. Además de los identificadores únicos de cada VICC, existen identificadores que representa los tipos de aplicación existentes en un sistema RFID, a estos identificadores se les llama Identificador de la Familia de Aplicación o AFI (Aplication Family Identifier) por sus siglas en inglés. Representa el tipo de aplicación seleccionado por el dispositivo de acoplamiento y se utiliza para extraer, de todos los VICC posibles, cuáles de ellos satisfacen los requerimientos de la aplicación seleccionada. Se pueden programar y bloquear, al igual que puede ser opcional incluirlo o no en la VICC. El AFI se codifica en un byte, que constituye 2 conjuntos de 4 bits cada uno. El los 4 bits más significativos se utilizan para codificar una familia de aplicaciones específica o todas, según se define en la Tabla 2.3 (los valores de X y Y, pueden ir de 1 a F). Los 4 bits menos significativos se utilizan para codificar una 42 aplicación específica o todas las aplicaciones pertenecientes a una sub-familia. El código de las sub- familias diferentes de 0 es propietario. Tabla 2.3: Codificación AFI. Fuente: http://www.waazaa.org/download/fcd-15693-2.pdf 4 bits más significativo 4 bits menos significativo Significado de la respuesta del circuito integrado de la etiqueta Ejemplos/ notas ‘0’ ‘0’ Todas las familias y sub-familias No aplicativo de preselección X ‘0’ Todas las sub-familias de la familia X Aplicativo de preselección amplio X Y Solo la Y esima sub-familia de la familia X ‘0’ Y Solo sub-familia propietaria Y ‘1’ ‘0’, Y Transporte Transporte público, autobús, aerolínea. ‘2’ ‘0’, Y Financiero Banca, venta al por menor. ‘3’ ‘0’, Y Identificación Control de acceso. ‘4’ ‘0’, Y Telecomunicación Telefonía pública, GSM. ‘5’ ‘0’, Y Médico ‘6’ ‘0’, Y Multimedia Servicios de internet. ‘7’ ‘0’, Y Juegos de azar ‘8’ ‘0’, Y Almacenamiento Archivos portables. ‘9’ ‘0’, Y Manejo de artículo ‘A’ ‘0’, Y Paquetes express ‘B’ ‘0’, Y Servicios postales ‘C’ ‘0’, Y Bolsas aerolínea ‘D’ ‘0’, Y ‘E’ ‘0’, Y ‘F’ ‘0’, Y 43 Si este mecanismo no es compatible con el VICC y si la bandera del mecanismo está levantada, el circuito no podrá responder cualquiera de los valores requeridos. En cambio si el circuito integrado de la etiqueta soporta este mecanismo, el mismo deberá responder de la manera correcta. Otro elemento importante de conocer en este punto es el formato con el que los datos son almacenados, se le llama Formato de Identificador de almacenamiento de Datos (DSFID, por sus siglas en inglés)[4], esto indica como los datos se estructuran en la memoria del VICC. Se pueden programar y bloquear, se codifica en un byte y permite el conocimiento instantáneo de la organización lógica de los datos. Si la programación aplicada no es compatible con el VICC, este responderá con el valor cero (00). En cuanto al CRC se tiene que se calcula de acuerdo a la definición contenida en la norma ISO/IEC 13239. Los dos bytes del CRC se anexan en cada solicitud y respuesta, dentro de cada trama, antes del final del marco. El CRC se calcula sobre todos los bytes después del inicio del marco pero sin incluir los bytes del CRC. Tras la recepción de una solicitud del dispositivo de acoplamiento, el circuito integrado de la etiqueta debe tomar el valor CRC y verificar su validez. Si no es válido, simplemente se descarta la trama y no se podrá responder. Al recibir una respuesta del circuito integrado de la etiqueta, se recomienda que los dispositivos de acoplamiento verifiquen que el CRC es válido. Si no es válido, la respuesta del dispositivo queda en manos de cada diseñador. La memoria física de un VICC está organizada en bloques (o páginas) de tamaño fijo. Hasta 256 bloques pueden ser tratados. El tamaño del bloque puede ser de hasta 256 bits. Esto lleva a una capacidad máxima de hasta 8 kBytes (64 kBits). Sin embargo, la estructura permite una futura ampliación de capacidad de la memoria. Además de los elementos antes mencionados, en los sistemas RFID existe un bloque que se le llama Bloque de Estado de Seguridad, el cual se codifica en un byte y representa un elemento del protocolo de comunicación. No hay suposición implícita o explícita que los 8 bits se aplican realmente en la escritura de la memoria en el circuito integrado de la etiqueta. 44 Cuando está presente el Bloque de Estado de Seguridad en una solicitud o una respuesta, el VICC interpretará, la solicitud o el conjunto de respuestas, los bits compatibles de acuerdo a la Tabla 2.4. Tabla 2.4: Bloque de estados de seguridad. Fuente: http://www.waazaa.org/download/fcd-15693-2.pdf Bit Nb Nombre de la bandera Estado Descripción Bit 1 Bloqueado 0 No bloqueado 1 Bloqueado Bit 2 a 8 Reservado para uso futuro Se fijará en 0  Protocolo de transmisión El protocolo de transmisión define el mecanismo de intercambio de instrucciones y datos entre el dispositivo de acoplamiento y el VICC, en ambas direcciones [5]. El concepto de esto consiste en que el dispositivo de acoplamiento habla primero. Esto significa que VICC no puede iniciar la transmisión, a menos que haya recibido y decodificado correctamente una instrucción enviado por el dispositivo de acoplamiento. El protocolo está basado en el intercambio de una solicitud del dispositivo de acoplamiento al VICC y una respuesta de los VICCs al dispositivo de acoplamiento. Cada solicitud y cada respuesta están contenidas en un marco, el cual está delimitado por un inicio y un final de marco. Cada solicitud consta de los siguientes campos: banderas, código del comando, campo de parámetros obligatorios u opcionales (dependiendo del comando), campo de datos de la aplicación y el campo de CRC. Cada respuesta consta de los siguientes campos: banderas, campo de parámetros obligatorios u opcionales (dependiendo del comando), campo de datos de la aplicación y campo de CRC. El protocolo está orientado a bit. El número de bits transmitido en un marco es múltiplo de 8. Cuando se transmite un campo de un solo byte es transmitido primero el bit menos significativo y cuando se 45 trasmite un campo de múltiples bytes es transmitido primero el byte menos significativo y de cada bytes es transmitido primero el bit menos significativo. La presencia de las banderas indica la presencia de los campos opcionales. Cuando la bandera tiene un valor de uno (1), el campo está presente. Cuando la bandera tiene un valor de cero (0), el campo está ausente. El campo de banderas reservado para uso futuro está fijado en cero (0). En este protocolo existen tres modos para transmitir la información, estos modos son el dirigido, el no dirigido y el de selección, esto define el mecanismo para especificar las solicitudes enviadas por los VICC que deberán responder a la solicitud. El modo dirigido se activa cuando la bandera de dirección (Address_flag) tiene un valor de 1, la solicitud deberá contener el identificador único del VICC a la que es dirigido. Cualquier VICC que recibe alguna solicitud con la bandera de dirección con valor de 1 se comparará el identificador único enviado con el identificador propio. Si coinciden, deberá ser ejecutado (si es posible), y devolver la respuesta al dispositivo de acoplamiento como especifique el comando enviado. Si no coincide, deberá permanecer en silencio. El modo no dirigido entonces, se activa cuando la bandera de dirección tiene un valor de 0 y la solicitud no contiene un identificador único. Cualquier VICC que reciba una solicitud con la bandera de dirección con valor 0, debe de ejecutarse (si es posible) y devolverá una respuesta al dispositivo de acoplamiento como especifique el comando enviado. El modo de selección se activa cuando la bandera de selección (Select_flag, en inglés) tiene un valor de 1 y la solicitud no contiene un identificador único del VICC. Si un VICC recibe una solicitud con la bandera de selección con valor 1, deberá ejecutarla (si es posible) y devolverá una respuesta al dispositivo de acoplamiento según especifique el comando enviado. Solo el VICC en estado seleccionado deberá responder la petición teniendo la bandera de selección con valor 1. En el caso de las repuesta no se puede presentar y la bandera de error es activado por el VICC significa que el campo de error está presente y proporciona información sobre el error ocurrido. En la 46 Tabla 2.5 se especifican los códigos de error establecidos y otros códigos que están reservados para uso futuro. Tabla 2.5: Definición de los códigos de error en una respuesta. Fuente: http://www.waazaa.org/download/fcd-15693-3.pdf Código de error Descripción ‘01’ El comando no es soportado ‘02’ El comando no es reconocido ‘03’ La opción no es soportada ‘0F’ Error desconocido ‘10’ El bloque especificado no está disponible (no existe) ‘11’ El bloque especificado no está listo- bloqueado y por lo tanto no se puede bloquear de nuevo ‘12’ El bloque especificado está bloqueado y su contenido no puede ser cambiado. ‘13’ El bloque especificado no se programó exitosamente ‘14’ El bloque especificado no se bloqueó exitosamente. ‘A0’ – ‘DF’ Códigos de error personalizables Todos los demás Reservados para uso futuro 2.2.7 Capa middleware El middleware es el software que se ocupa de la conexión entre el hardware de RFID y los sistemas de información existentes (y posiblemente anteriores a la implantación de RFID) en la aplicación. Se ocupa, entre otras cosas, del encaminamiento de los datos entre los lectores, las etiquetas y los sistemas de información, y es el responsable de la calidad y usabilidad de las aplicaciones basadas en RFID. El middleware de RFID se ocupa por tanto de la transmisión de los datos entre los extremos de la transacción. Por ejemplo, en un sistema RFID basado en etiquetas, en el proceso de lectura se ocuparía de la transmisión de los datos almacenados en una de las etiquetas al sistema de información. Las cuatro funciones principales del middleware de RFID son: 47  Adquisición de datos: el middleware es responsable de la extracción, agrupación y filtrado de los datos procedentes de múltiples lectores RFID en un sistema complejo. Sin la existencia del middleware, los sistemas de información de las empresas se colapsarían con rapidez.  Encaminamiento de los datos: el middleware facilita la integración de las redes de elementos y sistemas RFID de la aplicación. Para ello dirige los datos al sistema apropiado dentro de la aplicación.  Gestión de procesos: el middleware se puede utilizar para disparar eventos en función de las reglas de la organización empresarial donde opera, por ejemplo, envíos no autorizados, bajadas o pérdidas de stock, entre otros.  Gestión de dispositivos: el middleware se ocupa también de monitorizar y coordinar los lectores RFID, así como de verificar su estado y operatividad, y posibilita su gestión remota. 2.2.8 Interfaz de aplicación De manera similar a los códigos de barras estándar, las etiquetas RFID son simplemente un modo automatizado para proporcionar datos de entrada al sistema cliente. Sin embargo, las etiquetas RFID son capaces de proporcionar también una salida automatizada del sistema hacia la etiqueta, permitiendo la actualización dinámica de los datos que ésta porta. El sistema de información se comunica con el lector según el principio maestro-esclavo. Esto requiere decir que todas las actividades realizadas por lector y etiquetas son iniciadas por la aplicación software. Cuando el lector recibe una orden de esta aplicación, establece una comunicación con las etiquetas, comunicación en la que a su vez el lector ejerce de maestro y las etiquetas de esclavos. El principal objetivo de la aplicación software es gestionar y tratar los datos recibidos por el lector. El sistema debe ser lo suficientemente robusto para poder manejar las múltiples lecturas que permiten realizar los sistemas RFID, coordinar tiempo y flujos de información, gestionar los distintos eventos, soportar las realimentaciones de los usuarios, introducir las actualizaciones del sistema cuando sea requerido e integrarlo con otros sistemas de información de la empresa. En todos los casos el sistema cliente necesitará modificaciones software para integrar los datos proporcionados por el lector y el programador. Sin la posibilidad de acceder a todas estas funcionalidades, el sistema RFID perderá en eficacia y no proporcionará el deseado retorno de la inversión. 48 Algunos de los sistemas de información de una empresa con los que se puede integrar un sistema RFID son: el sistema de planificación de recursos ERP (Enterprise Resource Planning), el sistema de gestión de almacenes WMS, (Warehouse Management System), el sistema de albaranes y comprobantes de entrega POD (Proof of Delivery) o el sistema de comprobantes de recogida POC (Proof Of Collection). 2.2.9 Funcionamiento de un sistema RFID El funcionamiento de un sistema RFID (con etiquetas pasivas) consiste en que las etiquetas y el módulo RFID (lector) trabajen juntos, de manera que la información obtenida por el módulo RFID sea transmitida a una aplicación intermedia (Middleware) la cual, se encargará de procesarla. Finalmente se puede tomar o depositar la información, en una base de datos (típicamente ubicada en el back-end 4 ) y de esta forma proporcionar al usuario información de objetos sin que requiera de contacto o línea visual entre ellos. Figura 2.13: Emisión de la señal de baja potencia del lector a la etiqueta RFID. Fuente: Elaboración propia. El módulo RFID realiza varias funciones, una de ellas es el emitir una señal de radio frecuencia de baja potencia para crear un campo electromagnético. Por lo tanto el procedimiento inicia con el campo electromagnético es emitido por el transceptor a través de una antena transmisora, típicamente en forma de bobina. Este campo electromagnético funciona como una señal “portadora” de potencia de lector hacia la etiqueta, como se puede observar en la Figura 2.13. 4 Back-end: Término que se utiliza para indicar el desarrollo final de un proceso. 49 Una etiqueta contiene una antena, también en forma de bobina, y un circuito integrado. El circuito integrado requiere de una pequeña cantidad de energía eléctrica para poder funcionar. La antena contenida en la etiqueta funciona como un medio para tomar la energía presente en el campo magnético producido por el módulo de RFID, como se puede apreciar en la Figura 2.14, y la convierte en energía eléctrica para ser usada por el circuito integrado. En el funcionamiento del módulo de RFID se pueden identificar claramente dos procesos, uno primero de carga en el que las etiquetas almacenan energía y otro de emisión en el que cada etiqueta envía su código utilizando la energía almacenada en el proceso de carga, cuando las etiquetas se están cargando estas no emiten su código, empezarán a emitirlo en el momento en que desaparece el campo de carga. El funcionamiento de este módulo de radiofrecuencia es controlado por el módulo digital y permite programar o configurar los procesos de carga y lectura dentro de ciertos márgenes. Cuando una etiqueta se introduce en el campo electromagnético producido por módulo de RFID, la energía captada permite que el circuito integrado de la etiqueta funcione, por lo que los datos contenidos en su memoria son transmitidos. La señal electromagnética que proviene de la etiqueta es recuperada por la antena receptora del módulo RFID y convertida a una señal eléctrica. El transceptor tiene un sistema de recepción que está diseñado para detectar y procesar esta “débil” señal proveniente de la etiqueta, demodulando los datos Figura 2.14: Envío de datos por parte de la etiqueta RFID. Fuente: Elaboración propia. 50 originales almacenados en la memoria del circuito integrado contenido dentro de la etiqueta. Esa información transmitida por la etiqueta puede proveer información relacionada con la identificación del producto, la ubicación de la misma, o bien otros datos específicos que puede contener la etiqueta. Una vez que los datos de la etiqueta han sido demodulados, el módulo digital comprueba que los datos recibidos son correctos. El lector utiliza información redundante contenida en el código transmitido por la etiqueta para ejecutar el proceso de validación. Una vez que el lector verifica que no hay errores y valida la información recibida, los datos son decodificados y restaurados para su transmisión como información en el formato requerido por el sistema al cual esté conectado el lector. Este proceso puede ser apreciado en la Figura 2.15. El rango de lectura, es decir la distancia a la que un lector puede leer una etiqueta, depende por lo general del tamaño de la antena del lector y de la etiqueta utilizado. En resumen, el funcionamiento general de lectura para etiquetas pasiva de baja frecuencia se basa en cinco aspectos:  Energizar la etiqueta: para poder energizar una etiqueta que es del tipo pasivo, lo primero que ocurre es que el lector envía una señal de radio frecuencia por un período suficiente para cargar el banco de capacitadores de la etiqueta.  Solicitud del proceso: el protocolo de la petición de lectura o escritura, puede darse mediante una cadena estandarizada.  Recepción de la información: una vez leído la cadena de información se procede a verificar esta misma para saber si es una cadena válida.  Procesamiento de información: una vez obtenida la verificación de la información, se procede a enviar la cadena en un formato hexadecimal a una interfaz u otro dispositivo compatible que en este caso se encarga de gestionar y controlar la información. Figura 2.15: Procesamiento de datos por parte del lector. Fuente: Elaboración Propia. 51  Interfaces: es la parte donde se toman las decisiones y donde se puede dar un valor agregado al sistema, ya que se puede estructurar una completa gestión de la información en beneficio de las aplicaciones en cuestión. Existen dos interfaces de comunicación:  Interfaz Lector-Sistema de Información: La conexión se realiza a través de un enlace de comunicaciones estándar, que puede ser local o remoto y cableado o inalámbrico como el RS 232, RS 485, USB, Ethernet, WLAN, GPRS, UMTS, entre otros.  Interfaz Lector-Etiqueta: Se trata de un enlace radio con sus propias características de frecuencia y protocolos de comunicación. 52 3. Sistemas de Gestión de Bibliotecas Las bibliotecas son, sin duda alguna, los sistemas de información más antiguos de la historia, y los bibliotecarios quienes primero han utilizado técnicas informáticas, en el más estricto sentido de la palabra. Por eso, hablar de automatización de bibliotecas, es hablar de la utilización de los computadores para realizar de forma automática muchos de los procesos que anteriormente ya eran realizados en las bibliotecas pero que requieren laboriosas tareas manuales. La automatización de bibliotecas consiste en la consecución de los procesos, actividades y servicios que se llevan a cabo. En este capítulo se expondrá los puntos más relevantes de un sistema de gestión de bibliotecas utilizando RFID como tecnología para la automatización del control de préstamo de libros. 3.1 Automatización de Bibliotecas La automatización de los centros bibliotecarios se desarrolla a través de Sistemas de Gestión de Bibliotecas específicamente diseñados para el tratamiento documental. Hay que tener en cuenta también que los trabajos bibliotecarios también incluyen actividades administrativas, difusión en red, comunicación interna, entre otros. Esto sugiere la necesidad de establecer una tipología de actividades para las que un sistema de gestión bibliotecario puede estar diseñado [7]:  Actividades Documentales: Se consideran actividades documentales, aquellas que tienen en cuenta las técnicas y trabajos de la cadena documental. Entre ellas se puede mencionar: catalogación, clasificación, indización, resumen, digitalización, edición de catálogos, edición de repertorio de autoridades, entre otros.  Actividades Administrativas: Se consideran actividades administrativas aquellas que responden a la gestión de los usuarios de la biblioteca, la gestión de las adquisiciones y presupuestos de la biblioteca, la gestión de las políticas de préstamo del centro que responden ante un determinado marco normativo, reglamento o estatuto de gestión, edición de estadísticas del centro, edición de la planificación del centro, facturación, entre otros.  Actividades de Comunicación: Se consideran actividades de comunicación aquellas que están enmarcadas a difundir la biblioteca ante un público objetivo afectado por el área de influencia de la biblioteca, cualquier tipo de manifestación comunicativa de carácter interno mediante intranet, comunicación con los usuarios mediante el sitio web de la biblioteca, principalmente. 53 3.1.1 Características Los sistemas de gestión de bibliotecas permiten realizar procesos como:  Vigilancia electrónica.  Préstamo asistido.  Conteo de Personas.  Inventario.  Conteo de libros.  Búsqueda de material extraviado.  Reportes de consulta en sala. Lo que debe alcanzar un sistema de gestión de biblioteca se pueden enmarcar con los siguientes objetivos:  Agilizar los procesos y servicios bibliotecarios  Crear bases de datos bibliográficos y facilitar los procesos y servicios cooperativos. Con relación al primer objetivo se debe indicar que los puntos a incluir en ese marco deben ir orientados a la racionalización de los procesos bibliotecarios en orden de eliminar, hasta donde sea posible, las tareas manuales rutinarias y con ello los costos asociados, a la reducción de los tiempos de espera para el disfrute de un servicio bibliotecario (información bibliográfica, acceso al documento, entre otros), a aumentar el control de los servicios (diversificación del préstamo) y finalmente a aumentar la actividad relacionada con la creación y mantenimiento de módulos de categorización para permitir una tarea de clasificación más fácil y una búsqueda bibliográfica más fina y precisa. Con relación al segundo objetivo mencionado, se dice que un sistema de gestión de biblioteca es la forma natural de creación de bases de datos bibliográficas, y los procedimientos de catalogación asistida por computador son el instrumento específico para la creación de nuevos registros destinados a dichas bases de datos. Así, las grandes bibliotecas, especialmente las Bibliotecas Nacionales o los Institutos Bibliográficos Nacionales, serían los centros esenciales en la creación de las bases nacionales de datos bibliográficos. Pero una buena base de datos bibliográfica, no debe dar solamente la descripción bibliográfica de las obras, como ocurre en la actualidad con las bibliografías, sino también indicar las ubicaciones en las que la obra puede consultarse. 54 3.1.2 Funcionalidad Un sistema de automatización de bibliotecas, tiene que tener en cuenta, las funciones, actividades, procesos y trabajos del centro y las rutinas programadas que actúan sobre las tablas relacionadas de la base de datos. Es decir, que un sistema de gestión de Bibliotecas debe contemplar cuatro niveles [7]:  Nivel de Interfaz: El nivel de interfaz es la arquitectura visual del complejo del sistema de gestión de bibliotecas. La interfaz es una capa de directa visualización para el usuario o el bibliotecario que trabaja con la aplicación. Consiste en un diseño gráfico que representa los módulos, acciones y funciones del sistema de gestión. Por lo tanto en este nivel se tiene la posibilidad de diseñar la forma en la que se tiene que representar la información, así como acceder a la misma. En estos aspectos, se debe diseñar en función a la usabilidad y la accesibilidad.  Nivel de Módulos: El nivel de módulos establece una organización conceptual del sistema de gestión bibliotecario. Esto supone que se determinan una serie de funciones agrupadas en torno a un área de trabajo. Por ejemplo en torno a un Módulo de Circulación, se establece las funciones de préstamo, devolución, reserva, consulta de préstamos activos, consulta de devoluciones retrasadas, informes de frecuencia de uso de los documentos de la colección, entre otros. Por lo tanto bajo el título circulación se establecen unas funciones propias de la actividad, proceso o servicio.  Nivel de Scripts: El nivel de scripts, determina qué operaciones hay que asignar a cada función de un módulo determinado. Es decir, establecer cómo van a trabajar las funciones que se han definido, qué información van a tratar, cómo la van a procesar y qué elementos van a intervenir en ese proceso de trabajo de dichos Script. Dicho de otra forma, se trata de dictar las instrucciones necesarias para que una función adscrita a un módulo, cumpla con su cometido. Por ejemplo, la función de préstamo, está compuesta por diversos scripts, que permiten captar el código de barras de un determinado usuario, consultar el código en la tabla de usuarios, verificar que es el usuario de la biblioteca, devolver la información en la pantalla, interrogar para obtener un libro para el préstamo, captar el código de barras del documento, comprobar su disponibilidad, generar un registro en la tabla de préstamos de la base de datos en el que vincula al usuario con el libro, consultar la política de préstamo para ese usuario, realizar el cálculo del préstamo, reditar el registro de préstamo y anotar todos los parámetros del préstamo y finalmente mostrar en pantalla toda la información del proceso de préstamo para ese usuario. 55  Nivel de Base de Datos y Tablas: Como es lógico, existe un nivel básico sobre el cual operan los scripts de las funciones correspondientes a un módulo determinado. No se debe olvidar que los scripts realizan operaciones o ejecutan un guión de instrucciones que conlleva el tratamiento de información en las tablas de una base de datos determinada. De hecho un sistema de gestión de bibliotecas, funciona a modo de herramienta de registro. En el ejemplo expuesto sobre un script, se puede averiguar rápidamente que existen operaciones de consulta, interrogación, recuperación de datos en una serie de tablas, modificación o creación de registros en tabla que finalmente tiene un objetivo de representación. Por lo tanto sin las tablas de la base de datos, el script no podría funcionar. 3.1.3 RFID y las Bibliotecas La primera biblioteca que empleó RFID fue Farmington Community Library en Michigan, en 1999 [6]. Desde este primer hito, han sido muchas más las que han realizado pruebas e implantaciones. Además de mejorar las operaciones de préstamo y devolución, favorecer el archivo correcto de los libros y aliviar la carga de trabajo de los bibliotecarios, los sistemas RFID prometen proporcionar un mejor control frente al robo, así como de los libros no devueltos. Sin embargo, conviene destacar que en el actual estado de desarrollo, su introducción en las bibliotecas se enfrenta a varios problemas todavía no resueltos. Entre los más significativos destaca la falta de privacidad, la ausencia de estándares y el costo, tanto de los dispositivos como del desarrollo de sistemas RFID. A continuación, se describen los principales componentes necesarios para su implantación y funcionamiento en una biblioteca. 3.1.4 Modelo de funcionamiento El ejemplo que se expone a continuación se basa en un sistema que las compañías Nedap y 3M proponen para la inclusión de RFID en bibliotecas. No necesariamente se debe seguir siempre este modelo; de hecho, se diseña un sistema de gestión de biblioteca de acuerdo con la situación y a lo que el cliente requiera [6]: Etiquetas Todos los productos de la biblioteca (libros, cds o dvds) se deben etiquetar. Las etiquetas están formadas por un chip y una bobina dispuestos sobre un soporte plástico. Esta combinación se puede integrar en una etiqueta de papel. La etiqueta tiene una memoria de lectura/escritura, uno de cuyos bits (0 ó 1) se destina al control antirrobo. Cuando es leída durante el préstamo, el bit antirrobo cambia de estado 56 y cuando se devuelve el libro se activa de nuevo. Esto supone una gran ventaja en comparación con los sistemas actuales en los que las funciones de registro de datos y seguridad están separadas, con lo que se requiere una operación adicional. En el caso de cds o dvds debido a que no es necesario el contacto directo, las etiquetas se pueden colocar en el interior de la carcasa o incluso integradas en ella. Estaciones de préstamo El sistema de préstamo está formado por un lector para identificar al usuario, el cual dispone también de una tarjeta que le permite ser identificado fácilmente, un lector RFID sobre el que se sitúan los libros y una pantalla táctil para ayudar en el procedimiento de auto-préstamo. Para realizarlo los libros se colocan bajo el lector y la tarjeta del usuario bajo el escáner de código de barras; las etiquetas son leídas automáticamente, desactivando la función antirrobo y quedando registrados en la base de datos. También la tarjeta del usuario puede contener una etiqueta RFID, con lo que en ese caso no haría falta lector de código de barras. Estaciones de devolución La devolución se realiza mediante un lector para ello. Este sistema de auto-devolución se puede usar con el procedimiento de auto-préstamo o implementarlo por separado. Cuando un libro o cd de la biblioteca es devuelto, éste se registra en la base de datos como tal, activándose la función antirrobo a la vez que se leen las etiquetas. Lectores portátiles Para llevar a cabo inventarios de libros y comprobar la colocación se pueden usar lectores portátiles, consiguiendo así agilizar el trabajo y permitiendo al personal de la biblioteca realizar otras tareas. Puertas de seguridad El sistema antirrobo está compuesto por dos antenas que forman un pasillo por el cual deben de pasar todos los clientes para entrar y salir de la biblioteca. Cuando un visitante pasa por él con algún artículo sacado incorrectamente con la función antirrobo activada, se dispara una alarma. Numerosos sistemas llevan incorporado un detector de metales para evitar posibles robos en bolsas metálicas. 57 Conectividad a la red Existe la posibilidad de conectar a Internet tanto las antenas como los dispositivos de préstamo y devolución. Esto significa que la información vital de gestión se recoge y procesa directamente. También se puede disponer de un servicio técnico remoto, con el que solucionar los fallos de funcionamiento a distancia. El software, además de recoger y visualizar información sobre el autoservicio, puede permitir obtener otro tipo de datos, como cantidad y hora de libros y cds prestados, cantidad y hora de libros y cds devueltos, cantidad de alarmas y hora a la que han saltado, cantidad de préstamos no posibles y causas, media de libros prestados por usuario, duración media de los préstamos y comparaciones entre el uso del auto-préstamo y el préstamo atendido. 3.1.5 Funcionamiento A la entrada y salida de la biblioteca (que puede ser la misma o no) se instalan unas antenas para tener controlados todos los accesos a la misma. El cliente realiza la búsqueda de un libro u otro artículo, para lo que puede pedir la ayuda del personal del centro, realizar una búsqueda en los computadores o simplemente mirar en las estanterías. Una vez que escoge un documento debe ir a la estación de auto-préstamo y colocará su tarjeta de miembro de la biblioteca bajo un lector de código de barras o de RFID, dependiendo del caso. La computadora la identifica y le muestra sus datos actuales (libros o artículos que tiene en posesión, fecha de devolución). Si cumple con todas las normas de la biblioteca puede efectuar un préstamo, y para ello pasa el libro por el lector RFID, que le suministra la información a la base de datos y desactiva el bit de seguridad. A la hora de abandonar el centro el cliente debe atravesar los lectores situados a la salida que activarían una alarma en caso de que el libro no haya sido sacado correctamente. Para devolver los libros simplemente se tienen que dejar en algún contenedor situado al lado de la estación de devolución, previamente leerá la etiqueta de los documentos con el lector para que se actualicen los datos y aparezcan en la base de datos como devueltos, para evitar posibles problemas. También se puede incluir un buzón fuera de la biblioteca para que el usuario deposite el libro a alguna hora en la que está cerrada; si se realiza esto, el personal del centro debe leer siempre la etiqueta de los libros con el lector de la estación de devolución antes de colocarlos en su sitio. Los encargados recogerán los ejemplares devueltos y los colocarán en su lugar. 58 Para realizar inventarios de libros o para comprobar que todos están situados donde deberían se usan los lectores portátiles. De esta manera un empleado de la biblioteca rastrea las estanterías con el lector, comprobando la correcta situación de los artículos. En el caso de que se busque alguno en concreto, el tiempo de localización se reduce muchísimo frente al que se emplearía en buscar los libros sin ningún sistema de ayuda. El personal de la biblioteca tiene que emplear menos tiempo en este tipo de tareas, con lo que podrá dedicar más a las necesidades de los clientes, que también se ve beneficiados de la mejor ordenación de los libros. En la Figura 3.1 muestra un esquema del funcionamiento de un sistema de gestión de bibliotecas. Figura 3.1: Funcionamiento de un sistema de gestión de bibliotecas. Fuente: Elaboración propia. 3.1.6 Códigos de Barras vs RFID El gran auge que ha logrado la tecnología RFID principalmente en el ámbito industrial es que supera muchas de las limitaciones que presentaba el código de barras [8], sistema de identificación de objetos más utilizado hasta ahora. Algunas de las comparaciones más significativas de la identificación por radiofrecuencia con respecto al código de barras y que son aplicables a bibliotecas se muestran en la tabla 3.6 [8]: 59 Tabla 3.1: Tabla Comparativa RFID vs Código de Barras. Fuente: Elaboración propia. Códigos de Barras RFID Las etiquetas necesitan contacto directo con el lector para que están puedan ser leídas. Las etiquetas no necesitan contacto visual con el lector para que éste pueda leerlas. La lectura se puede hacer a una mayor distancia. Las etiquetas solo identifican un producto en particular. Las etiquetas son capaces de identificar un producto en particular o lotes de productos. Los códigos de barras, por lo contrario, tienen que ser leídos secuencialmente. La tecnología RFID permite leer múltiples etiquetas electrónicas simultáneamente. Los códigos de barras sólo pueden contener poca información. Las etiquetas RFID pueden contener mucha información detallada acerca de un producto. El código de barras puede ser escrito solo una vez. Las etiquetas RFID pueden ser escritas una o varias veces. Los componentes para un sistema que utilice código de barras son económicos. Los componentes para un sistema que utilice RFID son costosos. No son susceptibles a interferencias. Es susceptible a interferencias. La lectura de etiquetas tarda segundos. La lectura de etiquetas tarda milisegundos. Con una simple fotocopia se puede reproducir un código de barras. La tecnología RFID evita falsificaciones. Debido a que la tecnología RIFD ofrece mayor capacidad de almacenamiento de datos, reescrituras de etiquetas y lecturas simultaneas de etiquetas, se adopta la misma como solución para la problemática del sistema de gestión de biblioteca ya que son acciones que se necesitan ejecutar en un ambiente de préstamo y devolución, en donde código de barra no cumple con estas necesidades según lo anteriormente expuesto. 60 4. Metodología y Herramientas del Trabajo Una metodología siempre hace referencia a un conjunto de procedimientos y tareas que se deben realizar para alcanzar una serie de objetivos que rigen una investigación científica que requieran habilidades, conocimientos o cuidados específicos. Alternativamente puede definirse la metodología como el estudio o elección de un método pertinente para un determinado objetivo. En virtud de lo expuesto anteriormente, la metodología de trabajo tiene como propósito fundamental iniciar un proceso de aprendizaje que busca desarrollar en la persona habilidades para investigar, preguntar, planificar, diseñar y desarrollar, aplicando conceptos básicos, métodos y técnicas de investigación y de trabajo que logran la realización de cualquier proyecto. 4.1 Metodología de desarrollo de software La metodología de desarrollo que se cumplió al momento de realizar el sistema de gestión de bibliotecas utilizando la tecnología de RFID es la metodología ágil llamada Programación Extrema [15], la cual se caracteriza por su simplicidad, comunicación tanto entre desarrolladores como con el cliente y el reúso de código. Esta metodología trata de dar al cliente lo que necesita en el momento que lo requiera, por lo que se debe responder rápidamente a las necesidades, pero también se busca potenciar al máximo el trabajo en equipo. Las etapas de desarrollo que se seguirán para el desarrollo del sistema de gestión son las siguientes:  Planificación: Se debe tener un continuo diálogo con el cliente para esquematizar el sistema deseable y llevarlo a uno posible por parte de los desarrolladores. Una vez que se piden los requerimientos al cliente, se analiza que es lo que el sistema debe realizar, cuánto tiempo llevará su desarrollo y la prioridad de necesidades.  Diseño: En esta fase se busca realizar un diseño acorde a las necesidades del cliente, tomando en cuenta que se debe usar la mínima cantidad de clases y métodos para que el sistema de una respuesta rápida a cada solicitud, que no exista lógica duplicada y que el sistema supere todas las pruebas de desarrollo para su buen funcionamiento.  Desarrollo: Es la pieza clave de todo el proceso de programación extrema. Todas las tareas tienen como objetivo que se desarrolle a la máxima velocidad, sin interrupciones y siempre en la dirección correcta. En este punto se otorga una gran importancia al diseño y establece que éste debe ser 61 revisado y mejorado de forma continua según se van añadiendo funcionalidades al sistema. La comunicación en el grupo de trabajo es importante ya que todo el código de producción lo escriben dos personas frente al computador, con un sólo ratón y un sólo teclado. Cada miembro de la pareja juega su papel: uno codifica en el computador y piensa la mejor manera de hacerlo, el otro piensa más estratégicamente, aunque la idea principal es diariamente a la mitad de la jornada ambos programadores cambien de papeles para un trabajo más eficiente y justo. La jornada de programación debe ser de 20 a 40 horas semanales, en las cuales no solo se incluye la programación del sistema sino también reuniones con el cliente para que semanalmente se respondan preguntas, inquietudes y que se fijen prioridades de desarrollo.  Pruebas: No debe existir ninguna característica en el programa que no haya sido probada, los desarrolladores deberán realizar pruebas para chequear el correcto funcionamiento del programa y los clientes realizaran pruebas funcionales para tener como resultado un programa más seguro que conforme pasa el tiempo es capaz de aceptar nuevos cambios. En esta fase se procede a ejecutar las pruebas haciendo uso del software desarrollado y de los equipos configurados con el fin de detectar errores y fallas de seguridad y resolverlas antes de la implantación del sistema.  Documentación: Luego del cumplimiento de todas las etapas y la debida implantación del sistema, se procederá a realizar la debida documentación de todo el proceso y los resultados obtenidos a lo largo de la realización de este trabajo, lo que incluye un manual de usuario donde se explicara detalladamente cómo utilizar el sistema y que estructuras se utilizaron para el desarrollo del sistema como también para la conexión de los equipos RFID con el sistema desarrollado. 4.2 Herramientas A continuación se explica detalladamente cada una de las herramientas utilizadas para la elaboración de este sistema de gestión de bibliotecas, con sus respectivas características que la hicieron atractivas con respecto a otras tecnologías. 4.2.1 Ruby on Rails Ruby es un lenguaje de programación enfocado a la simplicidad y a la productividad, con una sintaxis elegante y natural, que lo hace muy fácil de entender [10]. Es un lenguaje de script (no compilado), totalmente orientado a objetos. Mientras que otros lenguajes tienen tipos primitivos (como enteros, booleanos, etc.) que no son objetos, aquí todo es un objeto y por tanto se le pueden asociar propiedades y métodos, así como redefinir o extender su comportamiento [10]. 62 Rails es un framework creado para el desarrollo de aplicaciones web [10]. Es una serie de utilidades, de herramientas para crear aplicaciones web más rápidamente que haciéndolo desde cero. Rails es un framework que usa el lenguaje Ruby, y por eso se conoce al conjunto como Ruby on Rails. Pero también existen otros frameworks para Ruby que no son Rails, como puede ser el microframework Camping [10]. Entre las características de Ruby on Rails se puede destacar que está basado en el patrón de diseño MVC (Modelo-Vista-Controlador) con el que se separa la lógica de la presentación, que dispone de utilidades para generar rápidamente interfaces de administración, es independiente de la base de datos, se puede extender mediante el uso de plugins, se integra muy fácilmente con bibliotecas de efectos, y todo ello escribiendo muy pocas líneas de código, muy claras y fáciles de entender. 4.2.2 MySQL MySQL es un sistema de gestión de base de datos relacional, de gran utilidad en proyectos web, ya que numerosos lenguajes de programación web usan MySQL como base de datos [9]. MySQL es un motor de código abierto, diseñado para tratar con gran cantidad de datos y trabajar en entornos Cliente- Servidor. Entre sus principales características se tienen:  Está escrito en C y en C++.  Funciona en diferentes plataformas.  El servidor está disponible como un programa separado para usar en un entorno de red Cliente-Servidor.  Soporte completo para las clausulas SQL.  Sistema de privilegios y contraseñas que es muy flexible y seguro.  Soporte completo para distintos conjuntos de caracteres. 4.2.3 Csharp Csharp es un lenguaje de programación orientado a objeto desarrollado y estandarizado por Microsoft. Dentro de su sintaxis básica se encuentran características de C/C++, Java y otro lenguajes. Aunque Csharp es parte de la plataforma .NET, es un lenguaje de programación independiente diseñado para generar programas sobre la plataforma .NET. 63 Las principales característica de Csharp son [11]:  El código escrito en C# es autocontenido, es decir que no requiere archivos adicionales al propio.  El tamaño de los tipos de datos es fijo e independiente del computador.  Incorpora tipo de datos como decimal, string y bool, al igual que instrucciones foreach que facilita el recorrido de colecciones.  Soporta todas las características propias del paradigma de programación orientada a objeto.  Permite redefinir la mayoría de los operadores.  Permite definir cómodamente propiedades, eventos o atributos.  Evita errores comunes gracias a una serie de restricciones en el uso de instrucciones comunes. Para desarrollar en éste lenguaje se utilizó Visual Studio en su versión 2012. 4.2.4 Bootstrap Bootstrap es una colección de herramientas de software libre para la creación de sitios y aplicaciones web [13]. Contiene plantillas de diseño basadas en HTML y CSS con tipografías, formularios, botones, gráficos, barras de navegación y demás componentes de interfaz. Bootstrap tiene un soporte para HTML y CSS y es compatible con la mayoría de los navegadores web. Bootstrap es modular y consiste esencialmente en una serie de hoja de estilo que implementan la variedad de componentes de la herramienta. En adición a los elementos regulares de HTML, Bootstrap contiene otra interfaz de elementos comúnmente usados, la cual incluye botones con características avanzadas (Por ejemplo grupo de botones o botones con opción de menú desplegable, listas de navegación, etiquetas horizontales y verticales, ruta de navegación, paginación, entre otros), etiquetas, capacidades avanzadas de miniaturas tipográficas, formatos para mensajes de alerta y barras de progreso, muchos de estos usados en el desarrollo de este sistema. Para usar Bootstrap en una página HTML, el desarrollador solo debe descargar la hoja de estilo Bootstrap CSS y enlazarla en el archivo HTML [13]. 4.2.5 Equipos RFID A continuación se explica cada uno de los equipos que trabajan bajo la tecnología de identificación con radiofrecuencia y que se utilizaron para la realización del sistema de gestión de bibliotecas. 64 4.2.5.1 Lector- Escritor El equipo utilizado es un modelo de serie CF-RH320 basada en el estándar internacional ISO14443A / B, ISO15693, equipados con un chip de alta capacidad, seguridad y motor eléctrico. El lector puede comunicarse con el PC a través de interfaz USB. Trabaja en la frecuencia de 13.56 MHz, con una velocidad de 106 kbit/s y un rango de lectura de 5 a 10 cm [12]. 4.2.5.2 Etiquetas autoadhesivas Las etiquetas utilizadas para el desarrollo de este sistema son etiquetas pasivas modelo CF-TH6202 de 50x50 cm, de múltiples lecturas y múltiples escrituras. Trabajan en la frecuencia 13.56 MHz, estandarizadas bajo el ISO 14443 e ISO 15693, con una distancia de lectura de 10 cm y una capacidad de datos de 1024 bits [12]. 65 5. Diseño de la Aplicación La metodología de Programación Extrema (XP) sugiere un desarrollo interactivo e incremental, donde integra frecuentemente al cliente o al usuario final. Para la etapa de planificación se realizaron un conjunto de reuniones con las personas encargadas de la biblioteca del CEAPUCV, donde se discutieron los requerimientos y necesidades de la misma. Debido a que esta metodología no requiere una documentación formal, se decidió incluir diagramas de clases y casos de usos para un mayor entendimiento del funcionamiento del sistema. 5.1 Fase de diseño Dada la metodología se tomó en cuenta utilizar la mínima cantidad de clases y métodos para una respuesta rápida y funcional del sistema. 5.1.1 Casos de Uso Nivel 0 En este caso de uso, se modela el sistema general, con sus respectivos actores. (Ver Figura 5.1). En las Tabla 5.1, Tabla 5.2, Tabla 5.3 y Tabla 5.4 se describe detalladamente los actores involucrados. Figura 5.1: Diagrama de casos de uso para el nivel 0. Fuente: Elaboración propia. 66 Tabla 5.1: Tabla de descripción del actor Administrador. Fuente: Elaboración propia. Tabla 5.2: Tabla de descripción del actor Estudiante. Fuente: Elaboración propia. Actor ACT.1 Administrador Casos de Uso Autenticar usuario, Inventario, Préstamo, Devolución, Registrar usuarios, Cerrar año, Registrar material, Consultar etiqueta, Generar etiqueta, Aprobación de préstamo, Registro de devolución, Sanciones. Tipo Primario. Descripción Es la persona responsable de la biblioteca encargada de todos los trámites necesarios al momento del registro, préstamos y devoluciones de libros. Actor ACT.2 Estudiante Casos de Uso Listar de libros y Préstamo. Tipo Secundario. Descripción Es la persona que podrá solicitar préstamo de un material determinado. 67 Tabla 5.3: Tabla de descripción del actor Representante. Fuente: Elaboración propia. Tabla 5.4: Tabla de descripción del actor Profesor. Fuente: Elaboración propia. Actor ACT.4 Profesor Casos de Uso Registrar usuarios, Listar de libros y Préstamo. Tipo Secundario. Descripción Es la persona que podrá solicitar préstamo de material de la biblioteca para motivos de clases. 5.1.2 Casos de Uso Nivel 1 En la Figura 5.2 se muestran los casos de usos correspondientes al nivel 1 de abstracción, los cuales representan las principales funcionalidades del sistema. En la Tabla 5.5, Tabla 5.6, Tabla 5.7, Tabla 5.8, Tabla 5.9, Tabla 5.10 y Tabla 5.11 se detalla la especificación para cada caso de uso del nivel 1. Actor ACT.3 Representante Casos de Uso Registrar usuarios, Listar de libros y Préstamo. Tipo Secundario. Descripción Este actor proporcionará la información que el sistema solicite para el envío de notificaciones, y además podrá desbloquear el sistema para solicitar préstamos en caso de que el estudiante tenga una edad entre 4 y 7 años de edad. 68 Figura 5.2: Diagrama de casos de uso para el nivel 1. Fuente: Elaboración propia. 69 Tabla 5.5: Especificaciones del caso de uso lista de libros. Fuente: Elaboración propia. Caso de Uso CU.1. Lista de libros Actor ACT.1 Estudiante ACT.2 Representante ACT.1 Profesor Descripción Este caso de uso despliega la lista de libros disponibles en la biblioteca en orden alfabético. Flujo Básico - Se muestra una interfaz inicial de los libros cuyos títulos comienzan por la letra “A” del alfabeto. - Se tiene un índice con las letras del alfabeto que puede ser utilizado en cualquier momento. Flujos Alternos - Despliegue de la lista según la letra seleccionada por el usuario. - Búsqueda simple y avanzada de los libros. Notas Cada libro muestra el estado actual en la biblioteca (Disponible, Prestado, Circulante, Intercambiado y Extraviado) 70 Tabla 5.6: Especificaciones del caso de uso autenticar usuario. Fuente: Elaboración propia. Caso de Uso CU.2. Autenticar usuario Actor ACT.1 Administrador Descripción Este caso de uso se encarga de validar los datos ingresados por un administrador o responsable de la biblioteca Flujo Básico - El usuario coloca su nombre de usuario o correo electrónico. - El usuario coloca su contraseña - Accede al sistema Flujos Alternos - Se validan los valores otorgados por el usuario contra la base de datos Notas 71 Tabla 5.7: Especificaciones del caso de uso inventario. Fuente: Elaboración propia. Caso de Uso CU.3.Inventario Actor ACT.1 Administrador Descripción Este caso de uso se encarga de realizar la recolección de los datos de cada material de la biblioteca en un momento determinado. Flujo Básico - Se selecciona el botón de “Iniciar”. - Se comienza a hacer lecturas múltiples de las etiquetas, en caso de que se tengan los equipos. Para el caso de no se tengan los equipos, se toma de la base de datos todos los materiales que tengan estado “Disponible”. - En cualquier modo, el inventario termina automáticamente. Flujos Alternos - Ver lista de inventario. - Generar documento PDF del inventario. Notas - El usuario debe estar autenticado. 72 Tabla 5.8: Especificaciones del caso de uso préstamo. Fuente: Elaboración propia. Caso de Uso CU.4. Préstamo Actor ACT.1 Administrador ACT.2 Estudiante ACT.4 Profesor Descripción Este caso de uso se encarga de permitir la solicitud de préstamo de cualquier material de la biblioteca al estudiante o al profesor, y permite además la administración de los préstamos por parte del responsable de la biblioteca. Flujo Básico Para el actor Administrador: - Se realiza el registro formal del préstamo. - Se envía un correo de notificación de solicitud de préstamo al representante responsable del estudiante. Para el actor Estudiante: - Verifica que el estudiante tenga un estado “Activo” en el sistema y que no tenga más de 3 préstamos activos. - Registra la solicitud de préstamo. Para el actor Profesor: - Registra la Solicitud de préstamo. Flujos Alternos Activar todos los casos de uso que permitan el registro completo del préstamo. Notas - El usuario debe estar autenticado. 73 Tabla 5.9: Especificaciones del caso de uso devolución. Fuente: Elaboración propia. Caso de Uso CU.5. Devolución Actor ACT.1 Administrador Descripción Este caso se usó se encarga de registrar en el sistema la entrega del material de la biblioteca. Flujo Básico - El administrador registra la devolución, leyendo la etiqueta RFID del material de la biblioteca (en el caso de que se tenga los equipos RFID). En modo manual, solo se registra la devolución seleccionando la devolución correspondiente. - Se aplican sanciones si el material nunca fue regresado o está en muy malas condiciones. - Se envía un correo de notificación de devolución al representante responsable del estudiante. Flujos Alternos Activar todos los casos de uso que permitan el registro completo de la devolución. Notas - El usuario debe estar autenticado. 74 Tabla 5.10: Especificaciones del caso de uso registrar usuarios. Fuente: Elaboración propia. Caso de Uso CU.6.Registrar Usuarios Actor ACT.1 Administrador Descripción Este caso de uso se encarga de realizar la recolección de los datos de un nuevo usuario en el sistema. Flujo Básico Para el actor Administrador, Representante y Profesor: - Mostrar formulario con los datos requeridos del usuario. - El actor debe ingresar los datos correspondiente del usuario. - Guardar la información recolectada. Flujos Alternos - Se envía un correo electrónico con una calve temporal para que el usuario correspondiente cambie su clave. Notas Esto se realiza cada vez que exista un nuevo responsable en la biblioteca. - El usuario debe estar autenticado. 75 Tabla 5.11: Especificaciones del caso de uso cerrar año. Fuente: Elaboración propia. 5.1.3 Casos de Uso Nivel 2 En la Figura 5.3 se muestran los casos de uso para Lista de libros y Autenticar usuario en un segundo nivel de abstracción. En la Tabla 5.12, Tabla 5.13, Tabla 5.14, Tabla 5.15 y Tabla 5.16 se detalla la especificación para cada caso de uso del nivel 2. Caso de Uso CU.7.Cerrar año Actor ACT.1 Administrador Descripción Este caso de uso realiza un respaldo de la base de datos del sistema una vez que termine el año escolar. Flujo Básico - Seleccionar la sección de “Cerrar Año” - Presionar el botón de “Iniciar” Flujos Alternos - Realizar un respaldo de la base de datos. - Aumentar de grado a todos los Estudiantes registrados. - Eliminar a todos los estudiantes de 5to año que no tengan ninguna devolución pendiente. Notas Esta función se habilita del 24 al 31 de Julio de cada año escolar. - El usuario debe estar autenticado. 76 Figura 5.3: Diagrama de casos de uso para el nivel 2. Fuente: Elaboración propia. 77 Tabla 5.12: Especificaciones del caso de uso registrar material. Fuente: Elaboración propia. Caso de Uso CU.4.1. Registrar Material Actor ACT.1 Administrador Descripción Es la encargada de crear la cota de un determinado libro de la biblioteca. Flujo Básico - Mostrar formulario del material a registrar. - Generar cota para el material registrado. - Guardar la información recolectada del material en cuestión. - Escribir la cota en la etiqueta RFID, en el caso de que se tengan los equipos RFID. Flujos Alternos Notas - El usuario debe estar autenticado. 78 Tabla 5.13: Especificaciones del caso de uso consultar etiqueta. Fuente: Elaboración propia. Caso de Uso CU.4.2. Consultar etiqueta Actor ACT.1 Administrador Descripción Este caso de uso permite a los encargados de la biblioteca hacer una búsqueda más rápida de algún material en específico, ya sea utilizando las etiquetas RFID o la cota del material. Flujo Básico Cuando se tienen los equipos RFID: - Se selecciona la opción de “Consultar etiqueta”. - Se presiona el botón de “Iniciar”. - Se pasa la etiqueta RFID por el lector RFID. Cuando no se tienen los equipos RFID: - Se selecciona la opción de “Consultar etiqueta”. - Se coloca la cota del material. - Se presiona el botón “Buscar”. Flujos Alternos - Muestra el material asociado a la etiqueta o a la cota ingresada. Notas - El usuario debe estar autenticado. 79 Tabla 5.14: Especificaciones del caso de uso generar etiqueta. Fuente: Elaboración propia. Caso de Uso CU.4.3. Generar etiqueta Actor ACT.1 Administrador Descripción Este caso de uso permite generar las etiquetas de papel de todos los materiales de la biblioteca. Flujo Básico - Genera un documento PDF con una etiqueta de un material determinado o de todos los libros registrados en un inventario. Flujos Alternos Notas - El usuario debe estar autenticado. Tabla 5.15: Especificaciones del caso de uso aprobación de préstamo. Fuente: Elaboración propia. Caso de Uso CU.5.1. Aprobación de préstamo Actor ACT.1 Administrador Descripción Es la encargada de recolectar los datos necesarios para guardar una solicitud del préstamo de un libro. Flujo Básico - Rellenar el formulario de aprobación de préstamo - Aprobar el préstamo. - Registrar el préstamo en la etiqueta RFID, en caso de que se tengan los equipos RFID. En modo manual, solo se registra la aprobación de préstamo en el sistema. - Enviar notificación por correo electrónico al profesor o al representante del estudiante, según sea el caso. Flujos Alternos Notas - El usuario debe estar autenticado. 80 Tabla 5.16: Especificaciones del caso de uso de registro de devolución. Fuente: Elaboración propia. Caso de Uso CU.6.1. Registro de devolución Actor ACT.1 Administrador Descripción Es la encargada de recolectar los datos necesarios al momento de guardar en el sistema la devolución de un libro prestado. Flujo Básico - Rellenar el formulario de devolución. - Confirmar la devolución del material prestado. - Registrar la devolución en la etiqueta RFID, en caso de que se tengan los equipos RFID. En modo manual, solo se registra la devolución en el sistema. - Enviar notificación por correo electrónico al profesor o al representante del estudiante, según sea el caso. Flujos Alternos - Activar el caso de uso de sanciones si este aplica a la hora de la devolución. Notas - El usuario debe estar autenticado. 5.1.4 Casos de Uso Nivel 3 En la Figura 5.4 se muestran los casos de uso Inventario, Préstamo y Devolución en un tercer nivel de abstracción. En la Tabla 5.17 se detalla la especificación del caso de uso del nivel 3. 81 Figura 5.4: Diagrama de casos de uso del nivel 3. Fuente: Elaboración propia. Tabla 5.17: Especificaciones del caso de uso sanciones. Fuente: Elaboración propia. Caso de Uso CU.6.1.1. Sanciones Actor ACT.1 Administrador Descripción Es la encargada de aplicar las políticas de sanciones a aquellos estudiantes que no cumplan con los términos de préstamos de libros. Flujo Básico - Registrar el estado del libro. - Aplicar el tipo de sanción apropiada según el estado del libro. - Enviar notificación por correo electrónico al profesor o al representante del estudiante, según sea el caso. Flujos Alternos - Modificar el estado del estudiante o del profesor según sea el caso. Notas - El usuario debe estar autenticado. 82 5.1.5 Diagrama de clases En la Figura 5.6 se muestra el diagrama de clases diseñado para el sistema y en las Figuras 5.7, 5.8, 5.9, 5.10, 5.11, 5.12, 5.13 y 5.14 se especifican a detalle las clases que lo componen. Figura 5.5: Diagrama de clases. Fuente: Elaboración propia. 83 Figura 5.6: Clase usuario. Fuente: Elaboración propia. Figura 5.7: Clase profesor. Fuente: Elaboración propia. 84 Figura 5.8: Clase representante. Fuente: Elaboración propia. Figura 5.9: Clase estudiante. Fuente: Elaboración propia. 85 Figura 5.10: Clase préstamo. Fuente: Elaboración propia. Figura 5.11: Clase devolución. Fuente: Elaboración propia. 86 Figura 5.12: Clase inventario. Fuente: Elaboración propia. Figura 5.13: Clase de libro. Fuente: Elaboración propia. 87 5.1.6 Diagrama Relacional En la Figura 5.15 se muestra un diagrama relacional que describe las tablas y los atributos utilizados en la base de datos. Figura 5.14: Diagrama relacional de la base de datos. Fuente: Elaboración propia. 88 6. Implementación de la Aplicación Durante el proceso de implementación de la aplicación se decidió esquematizar el desarrollo en tres partes importantes. Primero un desarrollo de programas ejecutables en el lenguaje de programación C#, el cual permite la comunicación entre los equipos RFID y la aplicación, seguido de la programación de sockets cliente-servidor y finalmente la interfaz del sistema, desarrollado en Ruby on Rails. 6.1 Arquitectura Como solución a la problemática de la biblioteca CEAPUCV se plantearon dos tipos de arquitecturas que se pueden adoptar al momento de colocar el sistema en producción. La primera arquitectura, ilustrada en la Figura 6.1, tiene como premisa que el sistema se encuentra en la maquina principal la cual cumplirá el papel de servidor, permitiendo a las demás computadoras acceder al sistema a través de su dirección IP. El equipo RFID igualmente estará conectado a la computadora principal junto con todos los archivos necesarios para la ejecución del sistema. Figura 6.1: Diseño de la Primera Arquitectura Propuesta. Fuente: Elaboración propia. La desventaja de ésta arquitectura es que el sistema no podrá ser accedido por los usuarios externos a la institución, lo que implica que para poder interactuar con el sistema los usuarios tendrán que asistir a la biblioteca del CEAPUCV. 89 La segunda arquitectura que se plantea ilustrada en la Figura 6.2, se basa en el uso de un servidor que donde estará instalado el sistema, el cual prestará servicio fuera y dentro de la institución, pero de igual manera los equipos RFID estarán conectados en la computadora principal de la biblioteca para su uso. Figura 6.2: Diseño de la Segunda Arquitectura Propuesta. Fuente: Elaboración propia. Lo que va a permitir el uso de los equipos utilizando un servidor es el uso de sockets [2]. Se tendrá un socket de tipo servidor en la computadora principal de la biblioteca de manera que permanezca constantemente escuchando peticiones. El socket de tipo cliente se colocaría en el servidor, de manera que cuando se necesite utilizar los equipos RFID, se generará una petición a la computadora principal y ésta ejecutará los programas correspondientes de manera local. 90 6.2 Desarrollo en C# Para lograr la comunicación con los equipos RFID se generaron proyectos en Visual Studio 2012 donde se incluyen dos bibliotecas de enlace dinámico proporcionada por los fabricantes de los equipos, las cuales son HFReader9CSharp.dll y Basic.dll [16]. HFReader9CSharp.dll está diseñada para facilitar el protocolo ISO/IEC 15693 para el desarrollo de software involucrado con etiquetas de alta frecuencia de la serie HFReader de lectores/escritores de alta frecuencia. Por políticas de privacidad y derechos de autor no se maneja el código fuente de las funciones, en su lugar, en la primera biblioteca, se tiene solo la declaración de los métodos, sin embargo esta biblioteca funciona en conjunto con Basic.dll, la cual contienen un fragmento de código ejecutable que se incorpora como recurso para la primera biblioteca y que al momento de la invocación de los métodos solo se cargan los fragmentos necesarios para su ejecución. Al momento de incluir las bibliotecas a los proyectos, HFReader9CSharp.dll se agregó directamente como recurso de los proyectos, pero al momento de agregar Basic.dll se utilizó un código que permite referenciar de manera local cada proyecto, debido a que el IDE no la reconoce como recurso. El procedimiento que se utilizó para enlazar Basic.dll es el siguiente: 1) Se ingresa a las propiedades del proyecto, como muestra la Figura 6.3. Figura 6.3: Pantalla para acceder a las propiedades de un proyecto. Fuente: Elaboración propia. 91 2) Se selecciona la pestaña de Recursos como la Figura 6.4. Figura 6.4: Pantalla de recursos de un proyecto. Fuente: Elaboración propia. 3) Se agrega 2 nuevos String el primero con nombre “Basic” con valor “Basic” y el segundo con nombre “DLLName” con valor “Basic”, tal como muestra la Figura 6.5. Figura 6.5: Pantalla de lista de Strings. Fuente: Elaboración propia. 92 4) Finalmente se agrega el código mostrado en la Figura 6.6 dentro del main para crear la biblioteca Basic.dll local al proyecto. Figura 6.6: Fragmento de código fuente. Fuente: Elaboración propia. Dentro de las funciones utilizadas en el API están [16]: StaticClassReaderA.AutoOpenComPort(…): Esta función es usada para detectar automáticamente un puerto de comunicación desocupado por otras aplicaciones y atado a un lector. Esta función intenta establecer la conexión entre el lector y el puerto. Si la comunicación se establece satisfactoriamente, la función abrirá el puerto de comunicación y retornará 0, por otra parte si ocurre un error al momento de la llamada de la función retornará un valor distinto a 0. StaticClassReaderA.Inventory(…): Esta función es usada para detectar las etiquetas dentro del área inductiva obteniendo el UID y el DSFID. Cuando el valor retornado es 0x0E y el UID no es 0, significa que el lector ha copiado la información satisfactoriamente. Cuando el valor retornado el 0x0E y el UID es 0, significa que no hay etiquetas en el campo inductivo o que todas las etiquetas han sido reconocidas. Cuando el valor retornado el 0x0A significa que ninguna etiqueta ha sido detectada dentro del área inductiva durante el tiempo de lectura. Cuando el valor retornado es 0x0B significa que han sido detectadas algunas partes de la etiqueta durante el tiempo de lectura. 1 if(System.IO.File.Exists(nombre_proyecto.Properties.Resources.DLLName 2 +".DLL") == false){ 3 System.IO.StreamWriter OutStream; 4 System.IO.BinaryWriter BinStream; 5 // Se crea el archivo dll 6 OutStream= new System.IO.StreamWriter 7 (nombre_proyecto.Properties.Resources.DLLName 8 +".DLL", false); 9 BinStream= new System.IO.BinaryWriter(OutStream.BaseStream); 10 BinStream.Write(nombre_proyecto.Properties.Resources.Basic); 11 BinStream.Close(); 12 } 93 StaticClassReaderA.WriteSingleBlock(…): Esta función es usada para escribir datos dentro de un bloque en una etiqueta determinada. Cuando retorna 0 la función se ha realizado exitosamente, sino significa que un error ha ocurrido. StaticClassReaderA.SetGeneralOutput(…): Esta función es usada para establecer el estado de dos terminales de salida, como lo son el sonido y la luz LED del lector. Cuando retorna 0 la función se ha realizado exitosamente, sino significa que un error ha ocurrido. Para efectos del funcionamiento del sistema se realizaron 4 programas de consola ejecutables utilizando las funciones antes descritas. El funcionamiento de dichos programas son los siguientes: Consulta: Este programa está hecho con la finalidad de detectar con el lector una tarjeta RFID con la cual quieran determinar si está asignada a algún material según el UID que el programa devuelve. Se estableció una espera activa de 15 segundos para detectar una etiqueta dentro del área inductiva. Si durante este tiempo el lector no detecta ninguna etiqueta el programa termina inmediatamente. Por el contrario, si el lector detecta una etiqueta retorna el UID que pertenece a la misma. Inventario: Este programa es usado para generar un inventario de cada material disponible en la biblioteca y que este asociado a una etiqueta RFID. Se realizó una espera activa de 15 segundos para detectar una etiqueta RFID, de modo que cuando detecta una etiqueta devuelve el valor de UID y reinicia el contador de 15 segundos. Si el tiempo de los 15 segundos expira y no se ha detectado ninguna etiqueta el programa termina automáticamente. Hacer préstamo: Este programa es utilizado al momento de aprobar los préstamos y de registrar las devoluciones. Consiste en escribir el bloque número 26 de la etiqueta, el cual se escogió para indicar la disponibilidad del material en la biblioteca. Los valores definidos son 11 para disponible, 12 para prestado circulante, 13 para préstamo a largo plazo y 14 para préstamos anuales. Al momento de que el lector detecta una etiqueta RFID, se pasa por línea de comando el valor de la disponibilidad del material y se escribe en el bloque 26. Una vez escrito este bloque finaliza el programa automáticamente. 94 Escribir etiqueta: Este programa se encarga de grabar en las etiquetas el valor hexadecimal de la cota de un material, dependiendo de la longitud de la cota que sea pasada por parámetro se utilizara la cantidad de bloques que se escriba en la etiqueta. La cota está dividida por el carácter “guion” (-), por lo tanto, el programa recibe un string el cual es separado por guiones (-) y cada subcadena es pasada a su valor en hexadecimal y se escribe en la etiqueta bloque por bloque, empezando dicha escritura en el bloque 3. Una vez grabada la cota, se escribe el bloque de disponibilidad (bloque 26) que por defecto se coloca 11 (disponible). Una vez escrito este bloque finaliza el programa automáticamente. 6.3 Desarrollo de sockets Como se explicó en la sección 6.1, la segunda propuesta involucra un servidor, el cual se pensó como una solución para no atar el sistema a que solo funcione en una intranet. Sin embargo, los equipos RFID trabajarán en modo stand alone en un solo computador, por lo que es a través de la comunicación por sockets que se pueden utilizar cualquier equipo que funcione como la computadora principal de los administradores de la biblioteca. Por lo general los sockets trabajan con una estructura cliente-servidor, en donde el cliente realiza peticiones al servidor y el servidor se ejecuta en background esperando peticiones por parte de un cliente. Para efectos de este sistema en particular, se colocará el socket servidor en la computadora administradora de la biblioteca y el socket cliente se ubicará en el servidor donde se alojará el sistema, haciendo que el servidor sea el que haga las peticiones y el cliente sea quien este escuchando en todo momento recibiendo las peticiones para ejecutarlas. Ya que no se tiene definido bajo qué sistema operativo va a funcionar el servidor se realizaron dos sockets cliente, uno programado en el lenguaje de programación C++ para ambientes Linux y otro escrito en C# para ambiente Windows. Además de la estructura de socket estos programas deben mandar una petición al socket servidor con el nombre del archivo que se desea ejecutar y enviar los parámetros según sea necesario. El socket servidor está escrito netamente en C#, ya que se sabe que estará ejecutándose en un ambiente Windows, debido a que los equipos RFID trabajan bajo esta plataforma. Este socket se encarga de recibir las peticiones enviadas por el cliente y ejecutar el archivo con el nombre que se ha enviado en 95 el cuerpo de la petición y tomar los parámetros según sea el caso. Una vez que se tenga identificado el archivo y los parámetros, el socket pasa a ejecutar los archivos correspondientes de manera local en la máquina asignada como principal utilizando el siguiente código mostrado en la Figura 6.7: 1 ProcessStartInfo ps = new ProcessStartInfo("ruta/nombre_archivo.exe"); 2 ps.Arguments = argumentos; 3 Process p = new Process(); 4 p = Process.Start(ps); 5 p.WaitForExit(); Figura 6.7: Fragmento de código fuente para ejecutar un archivo. Fuente: Elaboración propia. Al finalizar la ejecución del programa se toman todas las salidas del mismo con el siguiente comando, como se muestra en la Figura 6.8: 1 string output = p.StandardOutput.ReadToEnd(); Figura 6.8: Fragmento de código para guardar la salida de un proceso. Fuente: Elaboración propia. Esa salida se convierte en bytes y se manda de regreso al cliente, con el siguiente comando que se muestra en la Figura 6.9: 1 byte[] msg = System.Text.Encoding.ASCII.GetBytes(output); 2 stream.Write(msg, 0, msg.Length); Figura 6.9: Fragmento de código para enviar un mensaje a través del socket. Fuente: Elaboración propia. Al llegar el mensaje al cliente se convierte en string y se toma por el sistema para continuar la operación que fue seleccionada. 6.4 Implementación de la Aplicación Se tienen dos grandes módulos dentro del sistema. Un módulo general que es utilizado por los representantes, estudiantes y profesores y un módulo administrativo, el cual es utilizado por los encargados de la biblioteca. 96 6.4.1 Módulo general La primera pantalla del sistema se muestra en la Figura 6.10 la cual consta de una lista de los materiales registrados en la biblioteca por título en orden alfabético, empezando con la letra “A”. Figura 6.10: Pantalla Inicial del sistema. Fuente: Elaboración propia. Para cada material se muestra el estado que tiene en la biblioteca, es decir, indica si el material está “Disponible”, “Prestado”, “Circulante”, “Intercambiado” o “Extraviado”; además de la información básica del material (título, autor y año), tiene un botón de “Mostrar Detalles”, en donde se puede observar la información completa del material y el estado de disponibilidad del mismo al momento de solicitar un préstamo, tal como se muestra en la Figura 6.11. Figura 6.11: Pantalla de Detalles del material. Fuente: Elaboración propia. 97 Adicionalmente se tienen dos tipos de búsqueda, una búsqueda simple en donde se puede colocar título, editorial o autor del material; y una búsqueda avanzada en donde se puede realizar una búsqueda más específica colocando el título, el autor, el año y la categoría del material que se desea buscar, tal como se muestra en la Figura 6.12. Figura 6.12: Pantalla de Búsqueda Avanzada. Fuente: Elaboración propia. Al momento de que un estudiante o profesor desee solicitar un préstamo se muestran los campos ilustrados en la Figura 6.13. Los profesores deben ingresar su correo electrónico y su clave. Los estudiantes, por otro lado deben ingresar el correo electrónico de su representante y su clave. Para el caso de los estudiantes muy jóvenes, tales como los de preescolar, o aquellos que no recuerden su clave, los encargados de la biblioteca pueden colocar su correo y clave, con el fin de permitir la solicitud de préstamo. 98 Figura 6.13: Fragmento de código para enviar un mensaje a través del socket. Fuente: Elaboración propia. Si al momento del préstamo, el solicitante es el administrador de la biblioteca, el sistema le pedirá que indique a que usuario desea realizarle la solicitud de préstamo, si se trata de un estudiante o un profesor, tal como muestra la Figura 6.14. Figura 6.14: Solicitud de préstamo hecha por un administrador (a). Fuente: Elaboración propia. 99 Al presionar la opción de “Estudiante” se mostrará una lista de opciones que muestran los grados y las secciones que posee el colegio, tal como muestra la Figura 6.15. Figura 6.15: Solicitud de préstamo hecha por un administrador (b). Fuente: Elaboración propia. Una vez seleccionado el grado se mostrará una lista con todos los estudiantes de dicha sección que han sido registrados en el sistema junto con un botón de “Seleccionar” tal como se muestra en la Figura 6.16. Cuando el administrador selecciona al estudiante correspondiente automáticamente este estudiante se convierte en el responsable de la solicitud. Figura 6.16: Solicitud de préstamo hecha por un administrador (c). Fuente: Elaboración propia. 100 De igual modo, al seleccionar el botón de “Profesor” se mostrará una lista con todos los profesores de la institución que estén registrados en el sistema, tal como se muestra en la Figura 6.17. Una vez indicado el “Estudiante” o el “Profesor” que solicitará el material, el sistema muestra la Figura 6.19. Figura 6.17: Solicitud de préstamo hecha por un administrador (d). Fuente: Elaboración propia. Luego de que el proceso de solicitud finalice se envía un correo al representante del estudiante o al profesor que sea responsable de la solicitud. Si durante el proceso el usuario no recuerda su clave, tiene la opción de seleccionar el enlace de “Olvido su clave” e inmediatamente recibirán un correo que les permitirá cambiar su clave a través de un enlace que mostrará una pantalla como la Figura 6.18. Figura 6.18: Pantalla de olvidó clave. Fuente: Elaboración propia. 101 Una vez que el sistema verifique la información ingresada por pantalla, mostrará un cuadro resumen con la información básica del préstamo que se está solicitando (nombre del solicitante, título del material, cota de material y tipo de préstamo), permitiendo seleccionar el tipo de préstamos que desean, tal como se muestra en la Figura 6.19. Para un estudiante el sistema solo proporciona dos opciones de préstamo “Circulante” o “Largo plazo”. En el caso de los profesores se tienen los mismos tipos mencionados anteriormente y adicionalmente tienen la opción de préstamos de tipo “Anuales”. Figura 6.19: Selección de tipo de préstamo para profesores. Fuente: Elaboración propia. 6.4.2 Módulo administrativo El modulo administrativo empieza con la autenticación del administrador en el sistema, el cual solo se le pedirá su usuario o correo, y la clave que este posee tal cual como muestra la Figura 6.20. Figura 6.20: Pantalla de autenticación. Fuente: Elaboración propia. 102 Si el administrador olvidó su clave para ingresar en el sistema tiene la opción de seleccionar el enlace de “Olvido su clave” para poder recuperarla. En dicha interfaz el sistema le solicita el correo electrónico con el que se registró en el sistema, tal como se muestra en la Figura 6.21. Una vez confirmada la información, se le enviará un correo donde se le explicará que está en el proceso de recuperación de su clave y que al seleccionar el enlace que se envía en el cuerpo del mensaje, este lo enviará a la vista de recuperación de clave que se mostró en la Figura 6.18. Figura 6.21: Recuperación de clave. Fuente: Elaboración propia. Si el administrador ingresa satisfactoriamente al sistema, podrá ingresar a una pantalla donde se le pide que indique el modo en el que quiere trabajar en el sistema, ya sea utilizando los equipos RFID o trabajando sin ellos de forma manual, tal cual como muestra la Figura 6.22. Figura 6.22: Selección de Modo a trabajar en el sistema. Fuente: Elaboración propia. 103 Sin importar el modo que el administrador seleccione, este pasará a la pantalla de inicio del sistema como muestra la Figura 6.23. En esta pantalla se explicará que el sistema está compuesto de 6 opciones y la funcionalidad de cada una, lo que facilitará la usabilidad del sistema para el administrador. Figura 6.23: Pantalla de inicio del módulo administrador. Fuente: Elaboración propia. En la parte superior del sistema se posicionó una barra con un botón en la parte derecha como se muestra en la Figura 6.24, donde indica el nombre del usuario registrado en el sistema y que al seleccionar dicho botón muestra un menú despegable que le da la opción de revisar su perfil, cambiar el modo de trabajo en el sistema como se mostró en la Figura 6.22 y la opción de Cerrar Sesión. 104 Figura 6.24: Menú superior en el módulo administrador. Fuente: Elaboración propia. En la opción “Usuarios” es donde se ubica la información de todos aquellos estudiantes, profesores, representantes y administradores que están registrados en el sistema tal como muestra la Figura 6.25. En esta parte, dependiendo de la opción que el administrador seleccione, se muestra la lista con todos aquellos registrados en el sistema, donde el administrador tiene la posibilidad de ver los detalles de cada usuario, editar su información, ver los préstamos activos o eliminarlos del sistema. Figura 6.25: Pantalla inicio de opción usuarios. Fuente: Elaboración propia. 105 Al seleccionar el botón de “Detalles”, específicamente en el caso de los estudiantes y de los profesores, se muestra la información básica del usuario seleccionado y una lista con los préstamos activos que este tiene en ese momento, tal como se muestra en la Figura 6.26. Figura 6.26: Pantalla de detalles del estudiante. Fuente: Elaboración propia. Para el caso de los detalles del representante, se muestra la información básica del mismo y los respectivos hijos registrados en el sistema, tal como muestra la Figura 6.27. 106 Figura 6.27: Pantalla de detalles del representante. Fuente: Elaboración propia. La opción de “Editar” le permite al administrador editar algún campo de la información de algún estudiante, profesor o representante, tal como se muestra en la Figura 6.28. Figura 6.28: Pantalla de editar detalles del estudiante. Fuente: Elaboración propia. 107 Para ingresar un nuevo estudiante primero se debe agregar la información de su representante. Si el representante ya está registrado en el sistema, se busca el representante y se selecciona el botón “Agregar Hijo” ubicado al lado del nombre del mismo, para agregar un estudiante que este asociado a este, tal como se muestra en la Figura 6.29. Figura 6.29: Pantalla inicio de representantes. Fuente: Elaboración propia. Al momento de agregar a un estudiante, representante, administrador o profesor se piden sus datos básicos, tal como su nombre, apellido y un correo electrónico (ver Figura 6.30). El correo electrónico es necesario para mantener la comunicación entre el sistema de gestión de la biblioteca y cada usuario registrado, exceptuando al estudiante, el cual no se le pide su correo electrónico sino que se maneja la comunicación a través del correo del representante, para labores de control de los administradores de la biblioteca. 108 Figura 6.30: Pantalla de registrar estudiante. Fuente: Elaboración propia. Otra opción en el sistema es la de “Préstamos” donde el administrador podrá aprobar, rechazar o renovar cualquier solicitud de préstamo de los materiales de la biblioteca, tanto para estudiantes como para profesores. En la Figura 6.31 se muestra que esta sección está dividida en dos partes, “Préstamos de Estudiantes” y “Préstamos de Profesores” donde se mostrará una lista de los préstamos activos en un momento determinado. En esta lista se muestra el estado de cada préstamo activo, sean préstamos circulante (para sala) o de largo plazo. Para un préstamo de largo plazo se muestran los distintos estados que puede tener este tipo de préstamo (Por ejemplo, “sin renovación”, “primera renovación” y “segunda renovación”). De igual forma le indica al administrador si el material prestado no ha sido devuelto a la biblioteca, ver detalles de cualquier solicitud de préstamo y decidir si aprobarla o rechazarla. 109 Figura 6.31: Pantalla de inicio de la opción préstamos. Fuente: Elaboración propia. Al ver los detalles del préstamo, se mostrará los datos básicos del material, la fecha de aprobación del préstamo y su fecha de devolución respectiva como muestra la Figura 6.32. También se muestra el administrador que aprobó dicho préstamo así como los días de préstamo otorgados según sea el caso. Figura 6.32: Pantalla de detalles de un préstamo. Fuente: Elaboración propia. 110 El botón de “Aprobar” permite al administrador aprobar un préstamo tal como muestra la Figura 6.33. Si el préstamo ya ha sido aprobado, la pantalla mostrará el botón de “Renovar” una vez haya pasado el tiempo del préstamo, dándole posibilidad al administrador de aumentar el tiempo de préstamo al estudiante o profesor que solicitó el material en la biblioteca. Figura 6.33: Pantalla de aprobar préstamo. Fuente: Elaboración propia. La opción de “Devoluciones” sigue la misma línea de “Préstamos” ya que le permite al administrador registrar y mantener el control sobre todos aquellos materiales solicitados en la biblioteca que están pendientes para ser devueltos. Igualmente se pueden observar los detalles del material a devolver y registrar la devolución, tal como se muestra en la Figura 6.34. Al igual que la opción “Préstamos”, esta opción se divide en las devoluciones del estudiante y las devoluciones de los profesores. 111 Figura 6.34: Pantalla inicio de la opción “Devoluciones”. Fuente: Elaboración propia. Al momento de registrar una devolución, el administrador debe indicar el estado físico del material con el que el estudiante o el profesor lo devuelven a la biblioteca, como muestra la Figura 6.35. Dependiendo del estado se le aplica una sanción al usuario y, para el caso de los estudiantes se le envía un correo electrónico al representante explicando la situación. Figura 6.35: Pantalla de registrar devolución. Fuente: Elaboración propia. 112 En la opción de “Inventario” el administrador podrá realizar inventarios de los materiales de la biblioteca, agregar, editar o consultar un material utilizando las etiquetas RFID o las cotas según sea el modo de utilizar el sistema, tal como muestra la Figura 6.36. Figura 6.36: Pantalla inicio de la opción “Inventario”. Fuente: Elaboración propia. En la pantalla principal de la opción de “Inventarios” se muestra una lista con todos los inventarios realizados por el administrador y que al seleccionar el botón de “Detalles” muestra todos los libros inventariados por el administrador, tal cual como muestra la Figura 6.37. También muestra un botón de “Generar PDF”, donde genera un archivo PDF con todos los materiales inventariados en orden alfabético (Ver Figura 6.38). El botón de “Generar Etiquetas” genera un documento con unas etiquetas que indican la cota de cada libro inventariado para que el administrador de la biblioteca las coloque en los libros para mayor comodidad al momento de la búsqueda manual (Ver Figura 6.39). 113 Figura 6.37: Pantalla de detalles del inventario. Fuente: Elaboración propia. Figura 6.38: Archivo PDF de un inventario. Fuente: Elaboración propia. 114 En la parte de “Material existente” se muestra la lista de los materiales que se encuentran registrados en el sistema alfabéticamente, donde se pueden verificar los detalles del material, generar la etiqueta individual de su cota y editar la información de dicho material tal como se muestra en la Figura 6.40. Adicionalmente, y para facilidad del administrador, se muestra el estado del material, si está disponible, extraviado, intercambiado o prestado. Figura 6.39: Ejemplo de etiquetas manuales. Fuente: Elaboración propia. 115 Figura 6.40: Pantalla con lista de los materiales de la biblioteca. Fuente: Elaboración propia. Al seleccionar el botón de “Detalles”, se desplegará una tabla con las características del material seleccionado, tal como muestra la Figura 6.41. En esta parte también se muestra el estado del material y adicionalmente se tienen un “Solicitar Préstamo” a través del cual el administrador podrá hacerle la solicitud de préstamo a cualquier estudiante o profesor (Proceso descrito en la sección 6.4.1). 116 Figura 6.41: Pantalla de los detalles de los materiales. Fuente: Elaboración propia. El administrador puede editar el material seleccionando el botón “Editar”, donde se le mostrara una tabla con los distintos campos que este puede editar, tal como muestra la Figura 6.42. Es importante acotar que la cota del material no puede ser editada al igual que la cantidad de copias de ese material en la biblioteca, porque la cota es un valor único que identifica al material y la cantidad de copias disponibles se irá actualizando automáticamente. 117 Figura 6.42: Pantalla de editar detalles del material. Fuente: Elaboración propia. Con la función de “Consultar Etiqueta” el administrador podrá consultar qué material en la biblioteca está asociado a la cota que ingrese por el campo que se muestra en la Figura 6.43. Es importante acotar que esta pantalla solo se muestra si el sistema está trabajando en modo “Manual”, más adelante se mostrará la diferencia de cómo trabaja el sistema bajo el modo “Con Equipos”, donde se incluyen los equipos RFID. 118 Figura 6.43: Pantalla para consultar etiqueta de modo manual. Fuente: Elaboración propia. La última opción de este sistema es “Cerrar Año” tal como se muestra en la Figura 6.44. Dicha funcionalidad estará solo habilitada días antes del cierre del año escolar, específicamente desde el 26 al 31 de julio del año escolar en curso, período en el cual el colegio empieza a cerrar todas sus actividades administrativas. El sistema realizará una copia de seguridad de la información de la biblioteca registrada. Además incrementará automáticamente el grado de los estudiantes registrados en el sistema, exceptuando los del último año (5to año de bachillerato) que aunque permanecerán en el respaldo no aparecerán en el siguiente año escolar, a menos que tengan alguna devolución pendiente. De igual forma la información de los estudiantes, en el caso de que repitan año, puede ser editada o agregada de nuevo en el sistema. 119 Figura 6.44: Pantalla inicio de la opción “Cerrar Año”. Fuente: Elaboración propia. Cuando el administrador selecciona el modo “Con Equipos”, aunque muchas de las funciones en el sistema son iguales, hay ciertas opciones que trabajan de un modo diferente. Por ejemplo al momento de consultar un material, aprobar un préstamo, registrar una devolución o registrar un material, el sistema mostrara una pantalla tal como en la Figura 6.45. Figura 6.45: Pantalla de consultar etiqueta con el uso de los equipos RFID. Fuente: Elaboración propia. 120 El administrador deberá seleccionar el botón habilitado en el sistema que se muestra para cada caso (Sea registrar un préstamo, una devolución, consultar un material o crearlo) e inmediatamente se mostrará un mensaje que le indicará al administrador que puede acercar la etiqueta al lector RFID, tal como se muestra en la Figura 6.46. Para cada acción que se realice con una etiqueta RFID, el usuario tendrá hasta 15 segundos máximos para acercar dicha etiqueta al lector para su lectura o escritura, dependiendo de la acción que se haya solicitado. Figura 6.46: Selección de Modo a trabajar en el sistema. Fuente: Elaboración propia. La manera cómo funciona la comunicación del sistema con los equipos RFID es a través de llamadas al sistema, las cuales se ubican en las funciones correspondientes de los controladores de préstamo, devolución e inventario. En el caso del registro de los préstamos y las devoluciones se hace un mismo tipo de llamada, pero difieren en los parámetros según la arquitectura que se utilice. Cada función dentro del sistema tiene llamadas system diferentes, las únicas llamadas que son iguales pero que difieren en los parámetros son las funciones de Aprobar préstamo y Registrar préstamo, al invocar cualquiera de estas dos funciones se ejecuta el comando que se muestra en la Figura 6.47. 121 1 @comando = Rails.root.to_s+'\csharp\hacer_prestamo.exe 11 > 2 '+Rails.root.to_s+'\inventarios\devolucion.txt' Figura 6.47: Comando hacer préstamo para intranet. Fuente: Elaboración propia. Este comando consiste en hacer la llamada al sistema de manera local en la máquina, en una arquitectura de intranet. Con “Rails.root.to_s” se accede a la dirección raíz del proyecto, luego se accede a la carpeta “csharp” y finalmente se coloca el nombre del archivo ejecutable “hacer_prestamo.exe”. Lo siguiente es pasar un parámetro que es el que se graba en la etiqueta. Para el caso de Registrar préstamo se tienen diferentes parámetros: 12 para préstamo circulante, 13 para préstamo largo plazo y 14 para préstamo anual. En el caso de Registrar devolución solo se pasa 11 el cual es el número para el estado disponible. En la Figura 6.48 y Figura 6.49 se muestra el comando que se ejecuta cuando se necesitan los sockets, ya sea para Linux o Windows. Lo que cambia en estos comandos es que primero se ejecuta el socket correspondiente, se le pasa la dirección IP de la máquina en donde se debe ejecutar el archivo y el nombre del mismo. 1 @comando= './socket/socketcliente 190.169.74.222 Hacer_prestamo11 > 2 '+Rails.root.to_s+'/inventarios/devolucion.txt' Figura 6.48: Comando hacer préstamo con socket para linux. Fuente: Elaboración propia. 1 @comando= Rails.root.to_s+'\socket\socketcliente.exe 190.169.74.222 2 Hacer_prestamo11 > '+Rails.root.to_s+'\inventarios\devolucion.txt' Figura 6.49: Comando hacer préstamo con socket para windows. Fuente: Elaboración propia. Para efectos de los sockets se utiliza como palabra clave “Hacer_prestamoXX”, donde XX puede tener el valor de 11, 12, 13 o 14. Después de la invocación del archivo ejecutable se coloca el símbolo “>” para que todas las salidas que realice el archivo ejecutable sea almacenado en un archivo de texto que se guarda en la carpeta “Inventarios” del proyecto, de esta manera el controlador de Ruby on Rails puede abrir el archivo, leerlo y verificar que no ocurrió ningún error. Para mayor ilustración se muestra un diagrama de secuencia para esta función en la Figura 6.50. 122 Figura 6.50: Diagrama de secuencia de la función hacer préstamo. Fuente: Elaboración propia Para la función de “Consultar” se invoca el archivo de “consulta.exe”, como se muestra en la Figura 6.51, Figura 6.52 y 6.53. Según sea la arquitectura se ejecutará uno de ellos. En el archivo de salida “consulta.txt” se guarda el UID de la etiqueta que fue detectada por el lector, el cual luego es tomado por el controlador de Inventario en Ruby on Rails y finalmente procesado. Una vez que se tiene el UID se busca en la base de datos si existe algún material asociado a ese identificador, si existe se muestra los detalles del material, sino simplemente se envía un mensaje al usuario indicando que no hay ningún material asociado a ese etiqueta. Para mayor ilustración se muestra un diagrama de secuencia para esta función en la Figura 6.54. 1 @comando= Rails.root.to_s+'\csharp\consulta.exe > 2 '+Rails.root.to_s+'\inventarios\consulta.txt' Figura 6.51: Comando consulta para intranet. Fuente: Elaboración propia. 123 1 @comando= './socket/socketcliente 190.169.74.222 Consulta > 2 '+Rails.root.to_s+'/inventarios/consulta.txt' Figura 6.52: Comando de consulta para socket en Linux. Fuente: Elaboración propia. 1 @comando= Rails.root.to_s+'\socket\socketcliente.exe 2 190.169.74.222 Consulta 3 > '+Rails.root.to_s+'\inventarios\consulta.txt' Figura 6.53: Comando de consulta para socket en Windows. Fuente: Elaboración propia. Figura 6.54: Diagrama de secuencia de la función consulta. Fuente: Elaboración propia Para la función de “Nuevo Inventario”, se ejecuta el archivo “inventario.exe”, como se muestra en la Figura 6.55, Figura 6.56 y Figura 6.57. Al ejecutarse el archivo lo que hace es guardar en un archivo de salida todos los UID de las etiquetas detectadas por el lector. Una vez que el archivo de salida este completo el controlador de “Inventario” abre el archivo y toma todas los UID, en el caso de que existan 124 repetidos (porque la etiqueta fue detectada más de una vez), solo se toma la primera vez que aparece, de esa manera se asegura de que solo aparezca una vez. 1 @comando= Rails.root.to_s+'\csharp\inventario.exe > 2 '+Rails.root.to_s+'\inventarios\inventario-'+@fecha.to_s Figura 6.55: Comando inventario para intranet. Fuente: Elaboración propia. 1 @comando= './socket/socketcliente 190.169.74.222 Inventario > 2 '+Rails.root.to_s+'/inventarios/inventario-'+@fecha.to_s' Figura 6.56: Comando inventario para sockets en Linux. Fuente: Elaboración propia. 1 @comando= Rails.root.to_s+'\socket\socketcliente.exe 190.169.74.222 2 Inventario > '+Rails.root.to_s+'\inventarios\inventario-'+@fecha.to_s' Figura 6.57: Comando inventario para sockets en Windows. Fuente: Elaboración propia. Los archivos de salida son llamados “inventario-+@fecha.to_s” para determinar qué día fue realizado el inventario y mantener un registro de los mismos, estos son los únicos archivos de salida que son guardados por el sistema. Para mayor ilustración se muestra un diagrama de secuencia para esta función en la Figura 6.58. 125 Figura 6.58: Diagrama de secuencia de la función inventario. Fuente: Elaboración propia Para el caso de las funciones de “Grabar etiqueta” o “Agregar material” se invoca el archivo “escribir_etiqueta.exe”. Tal como se muestra en la Figura 6.59, Figura 6.60 y Figura 6.61, a este archivo se le pasan dos parámetros, el primero de ellos es la cota que tiene el material seleccionado en el sistema y el segundo es el valor del estado del material que por defecto siempre es 11 (disponible). Como el resto de los comando se genera un archivo de texto como salida, en ese caso no van a contener ningún UID sino valores de control, los cuales determinan si la operación fue o no exitosa. Para mayor ilustración se muestra un diagrama de secuencia para esta función en la Figura 6.62. 1 @comando = Rails.root.to_s+'\csharp\escribir_etiqueta.exe 2 '+@libro.cota.to_s+' 11 > '+Rails.root.to_s+'\inventarios\escribir.txt' Figura 6.59: Comando de escribir etiqueta para intranet. Fuente: Elaboración propia. 126 1 @comando= './socket/socketcliente 190.169.74.222 Escribir_etiqueta 2 '+@libro.cota.to_s+' 11 > '+Rails.root.to_s+'/inventarios/escribir.txt' Figura 6.60: Comando escribir etiqueta para sockets en Linux. Fuente: Elaboración propia. 1 @comando= Rails.root.to_s+'\socket\socketcliente.exe 190.169.74.222 2 Escribir_etiqueta '+@libro.cota.to_s+' 11 > 3 '+Rails.root.to_s+'\inventarios\escribir.txt' Figura 6.61: Comando escribir etiqueta para sockets en Windows. Fuente: Elaboración propia. Figura 6.62: Diagrama de secuencia de la función escribir etiqueta. Fuente: Elaboración propia 127 7. Pruebas y Resultados 7.1 Etapa de pruebas Siguiendo la metodología se realizaron varios ciclos de pruebas: pruebas funcionales y pruebas de usabilidad o de aceptación por parte de los usuarios finales. Para las pruebas funcionales se escogieron 18 personas de diferentes ramas de estudio dividido en 3 ciclos basado en una lista de actividades: 1) Iniciar sesión como administrador y seleccionar MODO MANUAL. 2) Registrar un representante con 1 hijo. 3) Registrar un representante con 2 hijos. 4) Agregar al primer representante un hijo. 5) Editar la información de un estudiante. 6) Editar la información de un representante. 7) Suspender a un estudiante. 8) Registrar un profesor. 9) Editar la información de un profesor. 10) Agregar un nuevo administrador. 11) Editar la información del administrador. 12) Cambiar clave del administrador. 13) Cambiar clave de un profesor. 14) Cambiar clave de estudiante 1. 15) Agregar 4 materiales nuevos. 16) Editar la información de un material. 17) Generar la etiqueta de un material. 18) Consultar etiqueta con una cota ficticia (inventada por el usuario). 19) Consultar etiqueta con una cota oficial (escoger cualquiera). 20) Generar un nuevo inventario. 21) Generar las etiquetas del nuevo inventario. 22) Descargar PDF del inventario. 23) Cerrar sesión y fingir que olvido su clave de administrador. 24) Recuperar clave de administrador. 25) Ingresar como administrador con la clave nueva. 128 26) Recuperar clave de estudiante o profesor. 27) Mostrar detalles de al menos 3 libros. 28) Solicitar un préstamo como profesor. (Tipo circulante). 29) Solicitar un préstamo como estudiante. (Tipo circulante). 30) Solicitar un préstamo como administrador para un estudiante. (Tipo largo plazo). 31) Solicitar un préstamo como administrador para un profesor. (Tipo largo plazo). 32) Solicitar un préstamo y fingir que olvido su clave como estudiante o profesor. 33) Aprobar un préstamo de estudiante. 34) Aprobar un préstamo de profesores. 35) Registrar una devolución de estudiante. (Con sanción). 36) Registrar una devolución de estudiante. (Sin sanción). 37) Registrar una devolución de profesores. 38) Buscar un estudiante en el buscador. 39) Buscar un profesor en el buscador. 40) Buscar un préstamo en el buscador préstamos de estudiantes. 41) Buscar un préstamo en el buscador préstamos de profesores. 42) Buscar un inventario en el buscador de inventario (Por día y mes). 43) Buscar un inventario en el buscador de inventario (Por fecha completa). 44) Buscar un inventario en el buscador de inventario como deseen. 45) Buscar un material en el buscador de material en el lado administrativo y en el general. 46) Buscar un material con la búsqueda avanzada en el módulo general. 47) Buscar representante en el buscador de representantes. 48) Buscar administrador en el buscador de administradores. 49) Eliminar un inventario. 50) Eliminar una devolución. 51) Eliminar un estudiante. 52) Eliminar un profesor. 53) Eliminar un administrador. 54) Eliminar un material. 55) Eliminar un representante. 129 En el caso del modo con equipos se repiten las actividades número 15, 18, 19, 20, 33, 34, 35, 36, 37 y se le agrega una nueva actividad llama grabar etiqueta. Todas estas actividades involucran los equipos RFID. Para el caso de las pruebas de usabilidad o aceptación se realizaron las pruebas con las personas que estarán encargadas de la biblioteca, dos profesores de la institución y un grupo de 12 estudiantes, uno por cada grado, desde 3er nivel de prescolar hasta 5to año de bachillerato. Las pruebas consistieron en observar si a los usuarios se les hizo fácil e intuitivo usar el sistema en cada uno de los roles que deben cumplir. 7.2 Resultados En el primer ciclo de las pruebas funcionales se encontraron diversas fallas al momento del envío de los correos, el sistema no les permitía a los usuarios cambiar las claves ya que ésta no estaba siendo enviada en el cuerpo del correo, por ende no se podía realizar ningún préstamo. Otras fallas que se encontraron fue al momento de eliminar un inventario, en vez de eliminar un inventario eliminaba un estudiante. Las búsquedas simples en el módulo administrativo no permitían hacer una búsqueda después de haber finalizado una anteriormente. Se presentaron errores de redirecciones en botones y en acciones del sistema. En cuanto a los equipos RFID no se estaba almacenando la información correctamente en las etiquetas ya que no asociaba ningún material a la misma. Otras fallas encontradas fueron al momento de agregar un nuevo material. El formulario que corresponde llenar para ingresar los datos del material no validaba correctamente los campos según la categoría seleccionada, incluso, en algunas ocasiones no permitía guardar el material aunque todos los datos eran correctos. Cuando se colocaban datos incorrectos, el sistema mostraba que ocurría un error, pero al regresar al formulario para editarlos no mantenía los campos que fueron llenados por los usuarios. Otra irregularidad con respecto a ingresar los datos de un material fue que la longitud del campo de caracteres era muy corto para un campo (título, editorial, edición, entre otros) muy largo, por lo tanto se mostraba, por ejemplo, un título incompleto de un material. 130 Todos los errores encontrados en el primer ciclo fueron corregidos haciendo modificaciones en los controladores del sistema y algunas vistas. Para el momento del segundo ciclo, se encontraron nuevo errores, dentro de esos errores tenemos por ejemplo que al momento de registrar una devolución el sistema pedía siempre una sanción, aún en casos donde no los ameritaba. En cuanto a agregar un material mejoraron las validaciones, sin embargo eran muy estrictas e igual ocasionaba problemas al querer almacenar un material, o daba la falsa impresión que lo almacenaba pero no era cierto. Se seguían presentando problemas cuando ocurría un error y regresaba al formulario pero no permanecían a la vista los campos que habían sido llenados por los usuarios. Un nuevo error referente a los materiales era con la cantidad de copias a guardar, solo permitía un máximo de cinco copias según el estado físico del material. El envío de clave funcionaba correctamente, sin embargo para los estudiantes seguían sin llegar las claves por correo a menos que deseara recuperar la clave, en ese caso el correo se enviaba completo y correctamente. Al igual como se hizo en el primer ciclo, se corrigieron las fallas modificando el código de controladores y vistas involucradas y ya para el tercer ciclo de pruebas todo funcionó correctamente y se logró mejorar algunos detalles de interfaz para darle mayor información al usuario. Una vez que las pruebas de funcionalidad culminaron satisfactoriamente se organizó un encuentro con las personas encargadas de la biblioteca y algunos profesores de la institución para probar el sistema. Al probar el sistema, no se tomó en cuenta ninguna lista de parámetros, sin embargo al final de cada prueba se les preguntaba que les pareció la aplicación, si era fácil de entender y fácil de usar. Basado en lo anterior se obtuvieron comentarios de que el sistema era bastante fácil de usar e intuitivo, y que cumplía con las necesidades de la biblioteca, sin embargo sugirieron mejoras en algunas interfaces las cuales fueron tomadas en cuenta para el sistema final. Dado que este sistema también será usado por estudiantes de la institución, se hicieron las mismas pruebas de usabilidad con un grupo de doce estudiantes desde 3er nivel de prescolar hasta 5to año de diversificado. Dentro de las actividades planificadas se consideró: buscar un libro por el índice alfabético, utilizar la búsqueda simple y avanzada y finalmente solicitar un préstamo. Cada una de estas actividades 131 fueron ejecutadas exitosamente por todos los estudiantes dejando comentarios como: la aplicación es bastante simple de entender, es fácil de usar y que será una gran mejora para la biblioteca escolar. 132 8. Conclusiones A lo largo de este trabajo se ha desarrollado una solución para la automatización de la gestión de libros y préstamos de la biblioteca del CEAPUCV usando la tecnología inalámbrica RFID. Se hicieron distintas reuniones donde se logró realizar de forma satisfactoria el levantamiento de requerimientos funcionales con el personal de la biblioteca. Se tomaron en cuenta todos los requerimientos y necesidades planteadas y se desarrolló un sistema que respondiera a cada ellas, optimizando así el trabajo del personal de la biblioteca. Dentro del sistema se desarrollaron módulos de manera satisfactoria para el registro de material, estudiantes, profesores, representantes y de inventario, con el fin de tener la información necesaria a la hora de un préstamo, devolución o compra de material. Uno de los puntos fuertes del sistema es que realiza notificaciones vía correo electrónico a los usuarios, mandando avisos como: aceptación de solicitud de préstamo, suspensión de la biblioteca, aviso de devolución, entre otros, de esta manera se tiene informado a los usuarios de los pasos que deben seguir en la biblioteca. A pesar de que el manejo de la biblioteca será automatizado, se dará continuidad a las políticas y normativas de la biblioteca, tales como: no tener más de tres préstamos por estudiante, permitir máximo dos renovaciones para préstamo de largo plazo y ejecutar sanciones no solo por la entrega tardía o en mal estado del material sino por comportamiento dentro de la biblioteca. A nivel de interfaz, se manejaron colores llamativos para algunas funcionalidades, lo cual ayudará al usuario a una mayor comprensión del funcionamiento del sistema. La gama de colores y el conjunto de iconos proporcionados por Bootstrap se utilizaron para plantear metáforas concretas con colores que no molesten a la vista del usuario, haciendo que sea más fácil su manipulación. El involucrar una tecnología inalámbrica como RFID representó un reto, ya que prácticamente es una tecnología poco utilizada para este tipo de área, sin embargo con el uso de un API de desarrollo proporcionado por la empresa exportadora de los equipos se logró un buen manejo de los equipos para fines de la aplicación. Al momento de su uso se tendrán grandes ventajas como mantener la seguridad de la información de la etiqueta, la detección de etiquetas a cierta distancia y agilizar el proceso de inventario; las cuales ayudaran a mejorar la administración de la biblioteca. 133 Cada módulo y archivo ejecutable pasaron por pruebas unitarias y de funcionalidad en conjunto, las cuales se realizaron de manera exitosa, lo que garantizará a los usuarios finales de que el sistema funciona correctamente y que va ayudar a que los estudiantes puedan acceder al material de la biblioteca de manera más fácil. Además garantizará a la institución una respuesta por parte de los usuarios al momento de la pérdida de un material y proporcionará una comunicación directa con los representantes 8.1 Contribuciones Este sistema de gestión de bibliotecas está dirigido a todo el personal del CEAPUCV, estudiantes, representantes y profesores. Con este sistema se podrá:  Solicitar un préstamo de un material bibliográfico ya sea dentro o fuera de la intranet.  Visualizar de manera más eficiente qué materiales están disponibles en la biblioteca.  Mantener un control eficaz de las solicitudes dentro de la biblioteca, ahorrando tanto el uso de papel como esfuerzo humano.  Permitir a los profesores encargados de la biblioteca seguir manejándola bajo las mismas políticas que se tenían anteriormente, ahora de forma automatizada.  Minimizar la perdida de material, gracias a las notificaciones enviadas por correo electrónico.  Garantizar préstamos a los estudiantes y profesores que lo requieran.  Mantener informada a la dirección de la institución sobre los materiales que se tienen y los materiales que se requieren, gracias al control de inventario.  Mantener informado a los representantes sobre las solicitudes, préstamos y devoluciones registradas por su representado. Limitaciones:  A nivel de configuración, si se decide colocar la aplicación en un servidor se debe configurar la aplicación según el sistema operativo y además de ello se tiene que configurar los sockets con la dirección IP de la maquina principal que tendrá los equipos RFID  Agregar una nueva tecnología, al momento de querer implementar junto con la aplicación otra tecnología diferente a RFID se deben programar archivos ejecutables para los mismos y se debe reconfigurar las funciones que sean necesarias dentro de la aplicación para el correcto funcionamiento de la nueva tecnología. 134  Heterogeneidad de los equipos, ya que si se llegan a adquirir equipos con distintas características y que no trabajen con las mismas llamadas que provee el API proporcionado, obligaría a la programación de nuevos archivos ejecutables que sean compatibles con los nuevos equipos así como la instalación de sus controladores (drivers). 8.2 Trabajos Futuros Las siguientes son recomendaciones que podrían ser tomadas al momento de mejorar el sistema o desarrollar sistemas parecidos. Debido a que el sistema posee un modo con equipos RFID y un modo sin ellos, el sistema puede ser usado de manera inmediata en la institución, sin embargo si se desea utilizar el sistema con otro tipo de tecnologías más adelante, se recomienda es que se hagan pequeños módulos o archivos ejecutables que cumplan con una función en específico y luego, deben ser colocados juntos en una carpeta dentro del proyecto en donde puedan ser invocados por la aplicación sin ningún problema. Al momento de invocar a las nuevas funciones se deben modificar las llamadas system con la ruta y nombres que tengan los nuevos archivos. Para el caso de los sockets, se deben hacer los cambios que sean necesarios para lograr una buena comunicación con la aplicación en general, sin embargo se deben tomar en cuenta la estructura de pase de parámetros entre los mismos para una buena ejecución de los programas al igual que la salida de cada uno. Todos estos factores son importantes al momento de cualquier modificación del sistema, sobre todo si el sistema se está ejecutando desde un servidor. En caso de que más adelante se presenten nuevos requerimientos, el código está escrito de manera sencilla por lo que va a facilitar la modificación de funciones o incluso el añadir nuevas funcionalidades, como por ejemplo: listado de sanciones por estudiantes, utilizar el carnet para el préstamo de materiales y el uso de lectores móviles para el proceso de inventario. De igual manera si se desea incluir más información en las etiquetas, estas poseen 28 bloques, de los cuales el bloque 0, 1 y 27, están bloqueados para su escritura. De los restantes 25 bloques, el sistema actualmente utiliza los bloques del 2 al 7, para escribir la cota, y el bloque 26 para indicar el estado del libro, quedando disponibles 19 bloques para su escritura. Sin embargo, el utilizar estos bloques provocaría la modificación de llamadas al sistema, sockets y archivos ejecutables. 135 Referencias Bibliográficas [1] Portillo J., Bermejo A. y Bernardos A. Tecnologia de Identificación por radio frecuencia (RFID): aplicaciones en el ámbito de la salud. Madrid: Fundación madri+d para el Conocimiento Velázquez, 2008. [2] Stallis,W. Comunicaciones y Redes de Computadores, Septima Edición. Madrid: Prentice Hall, 2009. [3] Identification cards. Contactless integrated circuit(s) cards, Vicinity Integrated Circuit(s) Card. Part 1: Physical characteristics. [En linea] 05 de Agosto de 2013. http://www.waazaa.org/download/fcd-15693-1.pdf [4] Identification cards. Contactless integrated circuit(s) cards, Vicinity Integrated Circuit(s) Card. Part 2: Radio frequency power and signal interface. [En linea] 05 de Agosto de 2013. http://www.waazaa.org/download/fcd-15693-2.pdf [5] Identification cards. Contactless integrated circuit(s) cards, Vicinity Integrated Circuit(s) Card. Part 3: Anti-collision and transmission protocol. [En linea] 05 de Agosto de 2013. http://www.waazaa.org/download/fcd-15693-3.pdf [6] RFID en la gestion y mantenimiento de bibliotecas. [En linea] 05 de Agosto de 2013. http://www.elprofesionaldelainformacion.com/contenidos/2007/julio/05.pdf [7] Automatizacion de bibliotecas. [En linea] 05 de Agosto de 2013. http://ccdoc- automatizacion.blogspot.com/2008/02/06-automatizacin-de-bibliotecas.html [8] RFID: El código de barras inteligente para Bibliotecas. [En línea] 05 de Agosto de 2013. http://eprints.rclis.org/bitstream/10760/8438/1/CCF70ADC.pdf [9] Historia de MySQL. [En linea] 07 de Agosto de 2013. http://dev.mysql.com/doc/refman/5.0/es/history.html [10] Ruby on Rails. [En linea] 07 de Agosto de 2013. http://es.wikipedia.org/wiki/Ruby_on_Rails [11] CSharp. [En linea] 07 de Agosto de 2013. http://es.wikipedia.org/wiki/C_Sharp [12] RFID 13.56MHz Reader & Writer: HF desktop Reader/Writer. [En linea] 08 de Agosto de 2013. http://www.chafon.com/productdetails.aspx?pid=365 [13] Bootstrap: Get Started. [En línea] 14 de Agosto de 2013 http://getbootstrap.com/2.3.2/getting- started.html [14] An overview of RFID technology. [En línea] 28 de Julio de 2012. http://www.dataflows.com/RFID_Overview.shtml [15] Metodología XP. [En línea] 24 de Septiembre de 2013. http://procesosdesoftware.wikispaces.com/METODOLOGIA+XP [16] HFReader9CSharp.DLL Dynamic Link Library User’s Manual V6.6. [Enviado por Correo] Documento interno de la empresa Shenzhen Chafon Technology Co.,Ltd. http://www.waazaa.org/download/fcd-15693-1.pdf http://www.waazaa.org/download/fcd-15693-2.pdf http://www.waazaa.org/download/fcd-15693-3.pdf http://dev.mysql.com/doc/refman/5.0/es/history.html http://es.wikipedia.org/wiki/Ruby_on_Rails http://es.wikipedia.org/wiki/C_Sharp http://www.chafon.com/productdetails.aspx?pid=365 http://getbootstrap.com/2.3.2/getting-started.html http://getbootstrap.com/2.3.2/getting-started.html http://www.dataflows.com/RFID_Overview.shtml http://procesosdesoftware.wikispaces.com/METODOLOGIA+XP http://www.chafon.com/ 136 Apéndice A Instalación de los Equipos RFID Los fabricantes del Lector/Escritor RFID proporcionaron un driver compatible para ambiente Windows. Dicho equipo posee un cable de conexión para puerto USB, por el cual se comunica los archivos ejecutables con el lector. Para instalar el equipo RFID se debe pulsar dos veces el botón izquierdo del ratón colocando el indicador sobre la imagen del controlador y se mostrará una ventana como en la Figura A.1. Figura A.1: Proceso de instalación de drivers de los equipos RFID (a). Para continuar se selecciona el botón de Siguiente (Next) y se despliega la siguiente pantalla, como muestra la Figura A.2. 137 Figura A.2: Proceso de instalación de drivers de los equipos RFID (b). Se selecciona la primera opción y seguidamente al botón siguiente donde se define la ubicación donde se instalara el controlador, como muestra la Figura A.3, en donde se selecciona la opción de siguiente par finalmente instalar el controlador. Figura A.3: Proceso de instalación de drivers de los equipos RFID (c). 138 Se selecciona el botón “Instalar” como muestra la Figura A.4 para comenzar la instalación. Figura A.4: Proceso de instalación de drivers de los equipos RFID (d). Y finalmente cuando comience la instalación, tardará unos minutos con la siguiente pantalla hasta completar la barra en color verde como muestra la Figura A.5. Figura A.5: Proceso de instalación de drivers de los equipos RFID (e). 139 Una vez completa la instalación se marca la opción de la instalación de un segundo controlador de los equipos RFID como muestra la Figura A.6. Figura A.6: Proceso de instalación de drivers de los equipos RFID (f). Al seleccionar Finalizar se muestra la siguiente pantalla y tal como muestra la Figura A.7 podemos cambiar la ubicación de la instalación de este controlador, es opcional cambiar la ubicación. Figura A.7: Proceso de instalación de drivers de los equipos RFID (g). 140 Al pulsar el botón de instalar, y después de unos minutos mostrará la siguiente pantalla indicando que se ha instalado satisfactoriamente, tal como lo muestra la Figura A.8. Figura A.8: Proceso de instalación de drivers de los equipos RFID (h). Una vez instalado correctamente el controlador se conecta el equipo RFID, el mismo hará un “bip” y el bombillo LED del equipo se encenderá. Este tipo de dispositivos no aparecerán conectado como un equipo normal USB, de hecho la conexión se hace a través de un puerto COM de la computadora. Para saber si el equipo está conectado se debe acceder al Panel de Control y buscar la opción de Administrador de Dispositivos. Una vez allí se busca la opción de Puertos (COM & LPT) y aparecerá la lista de los equipos conectado en esos puertos, en el caso del equipo RFID aparecerá con un nombre de Laboratorios Silicon Lab como se muestra en la Figura A.9. 141 Figura A.9: Proceso de instalación de drivers de los equipos RFID (i).